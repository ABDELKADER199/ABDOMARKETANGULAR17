import{a as Ir}from"./chunk-FK6H3RFT.js";import{a as nt,b as Rn,c as G1,d as HA,e as Px,f as Lx,h as xu}from"./chunk-RVFOIZLJ.js";var E8=Px(()=>{"use strict"});var T8=Px((Kf,D8)=>{"use strict";D8.exports=Kf=window.fetch;Kf.default=window.fetch.bind(window);Kf.Headers=window.Headers;Kf.Request=window.Request;Kf.Response=window.Response});var A8=Px(()=>{"use strict"});function zA(t,n){return Object.is(t,n)}var Qi=null,mg=!1,$1=1,Cl=Symbol("SIGNAL");function sr(t){let n=Qi;return Qi=t,n}function cH(){return mg}var vg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ux(t){if(mg)throw new Error("");if(Qi===null)return;Qi.consumerOnSignalRead(t);let n=Qi.nextProducerIndex++;if(Fh(Qi),n<Qi.producerNode.length&&Qi.producerNode[n]!==t&&gg(Qi)){let e=Qi.producerNode[n];Z1(e,Qi.producerIndexOfThis[n])}Qi.producerNode[n]!==t&&(Qi.producerNode[n]=t,Qi.producerIndexOfThis[n]=gg(Qi)?KA(t,Qi,n):0),Qi.producerLastReadVersion[n]=t.version}function dH(){$1++}function WA(t){if(!(gg(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===$1)){if(!t.producerMustRecompute(t)&&!Q1(t)){t.dirty=!1,t.lastCleanEpoch=$1;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=$1}}function qA(t){if(t.liveConsumerNode===void 0)return;let n=mg;mg=!0;try{for(let e of t.liveConsumerNode)e.dirty||$A(e)}finally{mg=n}}function GA(){return Qi?.consumerAllowSignalWrites!==!1}function $A(t){t.dirty=!0,qA(t),t.consumerMarkedDirty?.(t)}function Y1(t){return t&&(t.nextProducerIndex=0),sr(t)}function X1(t,n){if(sr(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gg(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Z1(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Q1(t){Fh(t);for(let n=0;n<t.producerNode.length;n++){let e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(WA(e),r!==e.version))return!0}return!1}function Hx(t){if(Fh(t),gg(t))for(let n=0;n<t.producerNode.length;n++)Z1(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function KA(t,n,e){if(YA(t),Fh(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=KA(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function Z1(t,n){if(YA(t),Fh(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Z1(t.producerNode[r],t.producerIndexOfThis[r]);let e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[n],i=t.liveConsumerNode[n];Fh(i),i.producerIndexOfThis[r]=n}}function gg(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function YA(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function XA(t){let n=Object.create(pH);n.computation=t;let e=()=>{if(WA(n),Ux(n),n.value===K1)throw n.error;return n.value};return e[Cl]=n,e}var Bx=Symbol("UNSET"),Vx=Symbol("COMPUTING"),K1=Symbol("ERRORED"),pH=Rn(nt({},vg),{value:Bx,dirty:!0,error:null,equal:zA,producerMustRecompute(t){return t.value===Bx||t.value===Vx},producerRecomputeValue(t){if(t.value===Vx)throw new Error("Detected cycle in computations.");let n=t.value;t.value=Vx;let e=Y1(t),r;try{r=t.computation()}catch(i){r=K1,t.error=i}finally{X1(t,e)}if(n!==Bx&&n!==K1&&r!==K1&&t.equal(n,r)){t.value=n;return}t.value=r,t.version++}});function hH(){throw new Error}var QA=hH;function ZA(){QA()}function JA(t){QA=t}var fH=null;function e4(t){let n=Object.create(n4);n.value=t;let e=()=>(Ux(n),n.value);return e[Cl]=n,e}function zx(t,n){GA()||ZA(),t.equal(t.value,n)||(t.value=n,mH(t))}function t4(t,n){GA()||ZA(),zx(t,n(t.value))}var n4=Rn(nt({},vg),{equal:zA,value:void 0});function mH(t){t.version++,dH(),qA(t),fH?.()}function r4(t,n,e){let r=Object.create(gH);e&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=n;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function a(l){o(l)||(Hx(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=jx)}let s=()=>{if(r.fn===null)return;if(cH())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Q1(r))return;r.hasRun=!0;let l=Y1(r);try{r.cleanupFn(),r.cleanupFn=jx,r.fn(i)}finally{X1(r,l)}};return r.ref={notify:()=>$A(r),run:s,cleanup:()=>r.cleanupFn(),destroy:()=>a(r),[Cl]:r},r.ref}var jx=()=>{},gH=Rn(nt({},vg),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:jx});function Cn(t){return typeof t=="function"}function Oh(t){let e=t(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var J1=Oh(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function yg(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var Bi=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(Cn(r))try{r()}catch(o){n=o instanceof J1?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{i4(o)}catch(a){n=n??[],a instanceof J1?n=[...n,...a.errors]:n.push(a)}}if(n)throw new J1(n)}}add(n){var e;if(n&&n!==this)if(this.closed)i4(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&yg(e,n)}remove(n){let{_finalizers:e}=this;e&&yg(e,n),n instanceof t&&n._removeParent(this)}};Bi.EMPTY=(()=>{let t=new Bi;return t.closed=!0,t})();var Wx=Bi.EMPTY;function ey(t){return t instanceof Bi||t&&"closed"in t&&Cn(t.remove)&&Cn(t.add)&&Cn(t.unsubscribe)}function i4(t){Cn(t)?t():t.unsubscribe()}var js={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ph={setTimeout(t,n,...e){let{delegate:r}=Ph;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=Ph;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ty(t){Ph.setTimeout(()=>{let{onUnhandledError:n}=js;if(n)n(t);else throw t})}function bg(){}var o4=qx("C",void 0,void 0);function a4(t){return qx("E",void 0,t)}function s4(t){return qx("N",t,void 0)}function qx(t,n,e){return{kind:t,value:n,error:e}}var Wd=null;function Lh(t){if(js.useDeprecatedSynchronousErrorHandling){let n=!Wd;if(n&&(Wd={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:r}=Wd;if(Wd=null,e)throw r}}else t()}function l4(t){js.useDeprecatedSynchronousErrorHandling&&Wd&&(Wd.errorThrown=!0,Wd.error=t)}var qd=class extends Bi{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ey(n)&&n.add(this)):this.destination=bH}static create(n,e,r){return new Bh(n,e,r)}next(n){this.isStopped?$x(s4(n),this):this._next(n)}error(n){this.isStopped?$x(a4(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?$x(o4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vH=Function.prototype.bind;function Gx(t,n){return vH.call(t,n)}var Kx=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){ny(r)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){ny(r)}else ny(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){ny(e)}}},Bh=class extends qd{constructor(n,e,r){super();let i;if(Cn(n)||!n)i={next:n??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&js.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Gx(n.next,o),error:n.error&&Gx(n.error,o),complete:n.complete&&Gx(n.complete,o)}):i=n}this.destination=new Kx(i)}};function ny(t){js.useDeprecatedSynchronousErrorHandling?l4(t):ty(t)}function yH(t){throw t}function $x(t,n){let{onStoppedNotification:e}=js;e&&Ph.setTimeout(()=>e(t,n))}var bH={closed:!0,next:bg,error:yH,complete:bg};var Vh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ja(t){return t}function Yx(...t){return Xx(t)}function Xx(t){return t.length===0?ja:t.length===1?t[0]:function(e){return t.reduce((r,i)=>i(r),e)}}var Xn=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=wH(e)?e:new Bh(e,r,i);return Lh(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=u4(r),new r((i,o)=>{let a=new Bh({next:s=>{try{e(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[Vh](){return this}pipe(...e){return Xx(e)(this)}toPromise(e){return e=u4(e),new e((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=n=>new t(n),t})();function u4(t){var n;return(n=t??js.Promise)!==null&&n!==void 0?n:Promise}function _H(t){return t&&Cn(t.next)&&Cn(t.error)&&Cn(t.complete)}function wH(t){return t&&t instanceof qd||_H(t)&&ey(t)}function Qx(t){return Cn(t?.lift)}function Qn(t){return n=>{if(Qx(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Gn(t,n,e,r,i){return new Zx(t,n,e,r,i)}var Zx=class extends qd{constructor(n,e,r,i,o,a){super(n),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=i?function(s){try{i(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function jh(){return Qn((t,n)=>{let e=null;t._refCount++;let r=Gn(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let i=t._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}var Uh=class extends Xn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Qx(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Bi;let e=this.getSubject();n.add(this.source.subscribe(Gn(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Bi.EMPTY)}return n}refCount(){return jh()(this)}};var c4=Oh(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fr=(()=>{class t extends Xn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new ry(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new c4}next(e){Lh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){Lh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){Lh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wx:(this.currentObservers=null,o.push(e),new Bi(()=>{this.currentObservers=null,yg(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new Xn;return e.source=this,e}}return t.create=(n,e)=>new ry(n,e),t})(),ry=class extends Fr{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,n)}error(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&r!==void 0?r:Wx}};var mo=class extends Fr{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Ua=new Xn(t=>t.complete());function d4(t){return t&&Cn(t.schedule)}function p4(t){return t[t.length-1]}function iy(t){return Cn(p4(t))?t.pop():void 0}function Ec(t){return d4(p4(t))?t.pop():void 0}function f4(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(t,n||[])).next())})}function h4(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gd(t){return this instanceof Gd?(this.v=t,this):new Gd(t)}function m4(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(t,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(f){return Promise.resolve(f).then(h,d)}}function s(h,f){r[h]&&(i[h]=function(m){return new Promise(function(g,y){o.push([h,m,g,y])>1||l(h,m)})},f&&(i[h]=f(i[h])))}function l(h,f){try{u(r[h](f))}catch(m){p(o[0][3],m)}}function u(h){h.value instanceof Gd?Promise.resolve(h.value.v).then(c,d):p(o[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function p(h,f){h(f),o.shift(),o.length&&l(o[0][0],o[0][1])}}function g4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof h4=="function"?h4(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=t[o]&&function(a){return new Promise(function(s,l){a=t[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}var oy=t=>t&&typeof t.length=="number"&&typeof t!="function";function ay(t){return Cn(t?.then)}function sy(t){return Cn(t[Vh])}function ly(t){return Symbol.asyncIterator&&Cn(t?.[Symbol.asyncIterator])}function uy(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cy=xH();function dy(t){return Cn(t?.[cy])}function py(t){return m4(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:r,done:i}=yield Gd(e.read());if(i)return yield Gd(void 0);yield yield Gd(r)}}finally{e.releaseLock()}})}function hy(t){return Cn(t?.getReader)}function Di(t){if(t instanceof Xn)return t;if(t!=null){if(sy(t))return CH(t);if(oy(t))return IH(t);if(ay(t))return SH(t);if(ly(t))return v4(t);if(dy(t))return EH(t);if(hy(t))return DH(t)}throw uy(t)}function CH(t){return new Xn(n=>{let e=t[Vh]();if(Cn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IH(t){return new Xn(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function SH(t){return new Xn(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,ty)})}function EH(t){return new Xn(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function v4(t){return new Xn(n=>{TH(t,n).catch(e=>n.error(e))})}function DH(t){return v4(py(t))}function TH(t,n){var e,r,i,o;return f4(this,void 0,void 0,function*(){try{for(e=g4(t);r=yield e.next(),!r.done;){let a=r.value;if(n.next(a),n.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}n.complete()})}function ha(t,n,e,r=0,i=!1){let o=n.schedule(function(){e(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function fy(t,n=0){return Qn((e,r)=>{e.subscribe(Gn(r,i=>ha(r,t,()=>r.next(i),n),()=>ha(r,t,()=>r.complete(),n),i=>ha(r,t,()=>r.error(i),n)))})}function my(t,n=0){return Qn((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function y4(t,n){return Di(t).pipe(my(n),fy(n))}function b4(t,n){return Di(t).pipe(my(n),fy(n))}function _4(t,n){return new Xn(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}function w4(t,n){return new Xn(e=>{let r;return ha(e,n,()=>{r=t[cy](),ha(e,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){e.error(a);return}o?e.complete():e.next(i)},0,!0)}),()=>Cn(r?.return)&&r.return()})}function gy(t,n){if(!t)throw new Error("Iterable cannot be null");return new Xn(e=>{ha(e,n,()=>{let r=t[Symbol.asyncIterator]();ha(e,n,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function x4(t,n){return gy(py(t),n)}function C4(t,n){if(t!=null){if(sy(t))return y4(t,n);if(oy(t))return _4(t,n);if(ay(t))return b4(t,n);if(ly(t))return gy(t,n);if(dy(t))return w4(t,n);if(hy(t))return x4(t,n)}throw uy(t)}function Vr(t,n){return n?C4(t,n):Di(t)}function tn(...t){let n=Ec(t);return Vr(t,n)}function Hh(t,n){let e=Cn(t)?t:()=>t,r=i=>i.error(e());return new Xn(n?i=>n.schedule(r,0,i):r)}function Jx(t){return!!t&&(t instanceof Xn||Cn(t.lift)&&Cn(t.subscribe))}var Cu=Oh(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _n(t,n){return Qn((e,r)=>{let i=0;e.subscribe(Gn(r,o=>{r.next(t.call(n,o,i++))}))})}var{isArray:AH}=Array;function kH(t,n){return AH(n)?t(...n):t(n)}function vy(t){return _n(n=>kH(t,n))}var{isArray:MH}=Array,{getPrototypeOf:RH,prototype:NH,keys:FH}=Object;function yy(t){if(t.length===1){let n=t[0];if(MH(n))return{args:n,keys:null};if(OH(n)){let e=FH(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}function OH(t){return t&&typeof t=="object"&&RH(t)===NH}function by(t,n){return t.reduce((e,r,i)=>(e[r]=n[i],e),{})}function _g(...t){let n=Ec(t),e=iy(t),{args:r,keys:i}=yy(t);if(r.length===0)return Vr([],n);let o=new Xn(PH(r,n,i?a=>by(i,a):ja));return e?o.pipe(vy(e)):o}function PH(t,n,e=ja){return r=>{I4(n,()=>{let{length:i}=t,o=new Array(i),a=i,s=i;for(let l=0;l<i;l++)I4(n,()=>{let u=Vr(t[l],n),c=!1;u.subscribe(Gn(r,d=>{o[l]=d,c||(c=!0,s--),s||r.next(e(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function I4(t,n,e){t?ha(e,t,n):n()}function S4(t,n,e,r,i,o,a,s){let l=[],u=0,c=0,d=!1,p=()=>{d&&!l.length&&!u&&n.complete()},h=m=>u<r?f(m):l.push(m),f=m=>{o&&n.next(m),u++;let g=!1;Di(e(m,c++)).subscribe(Gn(n,y=>{i?.(y),o?h(y):n.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;l.length&&u<r;){let y=l.shift();a?ha(n,a,()=>f(y)):f(y)}p()}catch(y){n.error(y)}}))};return t.subscribe(Gn(n,h,()=>{d=!0,p()})),()=>{s?.()}}function Ti(t,n,e=1/0){return Cn(n)?Ti((r,i)=>_n((o,a)=>n(r,o,i,a))(Di(t(r,i))),e):(typeof n=="number"&&(e=n),Qn((r,i)=>S4(r,i,t,e)))}function zh(t=1/0){return Ti(ja,t)}function E4(){return zh(1)}function Wh(...t){return E4()(Vr(t,Ec(t)))}function _y(t){return new Xn(n=>{Di(t()).subscribe(n)})}function eC(...t){let n=iy(t),{args:e,keys:r}=yy(t),i=new Xn(o=>{let{length:a}=e;if(!a){o.complete();return}let s=new Array(a),l=a,u=a;for(let c=0;c<a;c++){let d=!1;Di(e[c]).subscribe(Gn(o,p=>{d||(d=!0,u--),s[c]=p},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(r?by(r,s):s),o.complete())}))}});return n?i.pipe(vy(n)):i}function fa(t,n){return Qn((e,r)=>{let i=0;e.subscribe(Gn(r,o=>t.call(n,o,i++)&&r.next(o)))})}function Dc(t){return Qn((n,e)=>{let r=null,i=!1,o;r=n.subscribe(Gn(e,void 0,void 0,a=>{o=Di(t(a,Dc(t)(n))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function D4(t,n,e,r,i){return(o,a)=>{let s=e,l=n,u=0;o.subscribe(Gn(a,c=>{let d=u++;l=s?t(l,c,d):(s=!0,c),r&&a.next(l)},i&&(()=>{s&&a.next(l),a.complete()})))}}function Iu(t,n){return Cn(n)?Ti(t,n,1):Ti(t,1)}function Tc(t){return Qn((n,e)=>{let r=!1;n.subscribe(Gn(e,i=>{r=!0,e.next(i)},()=>{r||e.next(t),e.complete()}))})}function Su(t){return t<=0?()=>Ua:Qn((n,e)=>{let r=0;n.subscribe(Gn(e,i=>{++r<=t&&(e.next(i),t<=r&&e.complete())}))})}function tC(t){return _n(()=>t)}function wy(t=LH){return Qn((n,e)=>{let r=!1;n.subscribe(Gn(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(t())))})}function LH(){return new Cu}function Ac(t){return Qn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function Us(t,n){let e=arguments.length>=2;return r=>r.pipe(t?fa((i,o)=>t(i,o,r)):ja,Su(1),e?Tc(n):wy(()=>new Cu))}function qh(t){return t<=0?()=>Ua:Qn((n,e)=>{let r=[];n.subscribe(Gn(e,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function nC(t,n){let e=arguments.length>=2;return r=>r.pipe(t?fa((i,o)=>t(i,o,r)):ja,qh(1),e?Tc(n):wy(()=>new Cu))}function rC(t,n){return Qn(D4(t,n,arguments.length>=2,!0))}function iC(...t){let n=Ec(t);return Qn((e,r)=>{(n?Wh(t,e,n):Wh(t,e)).subscribe(r)})}function ma(t,n){return Qn((e,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();e.subscribe(Gn(r,l=>{i?.unsubscribe();let u=0,c=o++;Di(t(l,c)).subscribe(i=Gn(r,d=>r.next(n?n(l,d,c,u++):d),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function oC(t){return Qn((n,e)=>{Di(t).subscribe(Gn(e,()=>e.complete(),bg)),!e.closed&&n.subscribe(e)})}function Vi(t,n,e){let r=Cn(t)||n||e?{next:t,error:n,complete:e}:t;return r?Qn((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(Gn(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;s=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;s=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;s&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ja}var yk="https://g.co/ng/security#xss",At=class extends Error{constructor(n,e){super(lb(n,e)),this.code=n}};function lb(t,n){return`${`NG0${Math.abs(t)}`}${n?": "+n:""}`}function Pg(t){return{toString:t}.toString()}var xy="__parameters__";function BH(t){return function(...e){if(t){let r=t(...e);for(let i in r)this[i]=r[i]}}}function bk(t,n,e){return Pg(()=>{let r=BH(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(l,u,c){let d=l.hasOwnProperty(xy)?l[xy]:Object.defineProperty(l,xy,{value:[]})[xy];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(a),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ui=globalThis;function Ar(t){for(let n in t)if(t[n]===Ar)return n;throw Error("Could not find renamed property on target object.")}function VH(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Xo(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Xo).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let n=t.toString();if(n==null)return""+n;let e=n.indexOf(`
`);return e===-1?n:n.substring(0,e)}function xC(t,n){return t==null||t===""?n===null?"":n:n==null||n===""?t:t+" "+n}var jH=Ar({__forward_ref__:Ar});function ii(t){return t.__forward_ref__=ii,t.toString=function(){return Xo(this())},t}function Ko(t){return _k(t)?t():t}function _k(t){return typeof t=="function"&&t.hasOwnProperty(jH)&&t.__forward_ref__===ii}function xt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ub(t){return T4(t,xk)||T4(t,Ck)}function wk(t){return ub(t)!==null}function T4(t,n){return t.hasOwnProperty(n)?t[n]:null}function UH(t){let n=t&&(t[xk]||t[Ck]);return n||null}function A4(t){return t&&(t.hasOwnProperty(k4)||t.hasOwnProperty(HH))?t[k4]:null}var xk=Ar({\u0275prov:Ar}),k4=Ar({\u0275inj:Ar}),Ck=Ar({ngInjectableDef:Ar}),HH=Ar({ngInjectorDef:Ar}),Lt=class{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=xt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ik(t){return t&&!!t.\u0275providers}var zH=Ar({\u0275cmp:Ar}),WH=Ar({\u0275dir:Ar}),qH=Ar({\u0275pipe:Ar}),GH=Ar({\u0275mod:Ar}),Ly=Ar({\u0275fac:Ar}),xg=Ar({__NG_ELEMENT_ID__:Ar}),M4=Ar({__NG_ENV_ID__:Ar});function Ig(t){return typeof t=="string"?t:t==null?"":String(t)}function $H(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ig(t)}function KH(t,n){let e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new At(-200,t)}function MI(t,n){throw new At(-201,!1)}var jn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(jn||{}),CC;function Sk(){return CC}function ga(t){let n=CC;return CC=t,n}function Ek(t,n,e){let r=ub(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&jn.Optional)return null;if(n!==void 0)return n;MI(t,"Injector")}var YH={},Sg=YH,IC="__NG_DI_FLAG__",By="ngTempTokenPath",XH="ngTokenPath",QH=/\n/gm,ZH="\u0275",R4="__source",Xh;function JH(){return Xh}function kc(t){let n=Xh;return Xh=t,n}function ez(t,n=jn.Default){if(Xh===void 0)throw new At(-203,!1);return Xh===null?Ek(t,void 0,n):Xh.get(t,n&jn.Optional?null:void 0,n)}function Bt(t,n=jn.Default){return(Sk()||ez)(Ko(t),n)}function Qe(t,n=jn.Default){return Bt(t,cb(n))}function cb(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function SC(t){let n=[];for(let e=0;e<t.length;e++){let r=Ko(t[e]);if(Array.isArray(r)){if(r.length===0)throw new At(900,!1);let i,o=jn.Default;for(let a=0;a<r.length;a++){let s=r[a],l=tz(s);typeof l=="number"?l===-1?i=s.token:o|=l:i=s}n.push(Bt(i,o))}else n.push(Bt(r))}return n}function Dk(t,n){return t[IC]=n,t.prototype[IC]=n,t}function tz(t){return t[IC]}function nz(t,n,e,r){let i=t[By];throw n[R4]&&i.unshift(n[R4]),t.message=rz(`
`+t.message,i,e,r),t[XH]=i,t[By]=null,t}function rz(t,n,e,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ZH?t.slice(2):t;let i=Xo(n);if(Array.isArray(n))i=n.map(Xo).join(" -> ");else if(typeof n=="object"){let o=[];for(let a in n)if(n.hasOwnProperty(a)){let s=n[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):Xo(s)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${t.replace(QH,`
  `)}`}var Lg=Dk(bk("Optional"),8);var db=Dk(bk("SkipSelf"),4);function Yd(t,n){let e=t.hasOwnProperty(Ly);return e?t[Ly]:null}function iz(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=n[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function oz(t){return t.flat(Number.POSITIVE_INFINITY)}function RI(t,n){t.forEach(e=>Array.isArray(e)?RI(e,n):n(e))}function Tk(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Vy(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function az(t,n){let e=[];for(let r=0;r<t;r++)e.push(n);return e}function sz(t,n,e,r){let i=t.length;if(i==n)t.push(e,r);else if(i===1)t.push(r,t[0]),t[0]=e;else{for(i--,t.push(t[i-1],t[i]);i>n;){let o=i-2;t[i]=t[o],i--}t[n]=e,t[n+1]=r}}function pb(t,n,e){let r=Bg(t,n);return r>=0?t[r|1]=e:(r=~r,sz(t,r,n,e)),r}function aC(t,n){let e=Bg(t,n);if(e>=0)return t[e|1]}function Bg(t,n){return lz(t,n,1)}function lz(t,n,e){let r=0,i=t.length>>e;for(;i!==r;){let o=r+(i-r>>1),a=t[o<<e];if(n===a)return o<<e;a>n?i=o:r=o+1}return~(i<<e)}var Zh={},Yo=[],Xd=new Lt(""),Ak=new Lt("",-1),kk=new Lt(""),jy=class{get(n,e=Sg){if(e===Sg){let r=new Error(`NullInjectorError: No provider for ${Xo(n)}!`);throw r.name="NullInjectorError",r}return e}},Mk=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Mk||{}),El=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(El||{}),Se=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Se||{});function uz(t,n,e){let r=t.length;for(;;){let i=t.indexOf(n,e);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}e=i+1}}function EC(t,n,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],a=e[r++],s=e[r++];t.setAttribute(n,a,s,o)}else{let o=i,a=e[++r];dz(o)?t.setProperty(n,o,a):t.setAttribute(n,o,a),r++}}return r}function cz(t){return t===3||t===4||t===6}function dz(t){return t.charCodeAt(0)===64}function Eg(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?N4(t,e,i,null,n[++r]):N4(t,e,i,null,null))}}return t}function N4(t,n,e,r,i){let o=0,a=t.length;if(n===-1)a=-1;else for(;o<t.length;){let s=t[o++];if(typeof s=="number"){if(s===n){a=-1;break}else if(s>n){a=o-1;break}}}for(;o<t.length;){let s=t[o];if(typeof s=="number")break;if(s===e){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(t.splice(a,0,n),o=a+1),t.splice(o++,0,e),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Rk="ng-template";function pz(t,n,e,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&uz(n[i+1].toLowerCase(),e,0)!==-1)return!0}else if(NI(t))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function NI(t){return t.type===4&&t.value!==Rk}function hz(t,n,e){let r=t.type===4&&!e?Rk:t.value;return n===r}function fz(t,n,e){let r=4,i=t.attrs,o=i!==null?vz(i):0,a=!1;for(let s=0;s<n.length;s++){let l=n[s];if(typeof l=="number"){if(!a&&!Hs(r)&&!Hs(l))return!1;if(a&&Hs(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!hz(t,l,e)||l===""&&n.length===1){if(Hs(r))return!1;a=!0}}else if(r&8){if(i===null||!pz(t,i,l,e)){if(Hs(r))return!1;a=!0}}else{let u=n[++s],c=mz(l,i,NI(t),e);if(c===-1){if(Hs(r))return!1;a=!0;continue}if(u!==""){let d;if(c>o?d="":d=i[c+1].toLowerCase(),r&2&&u!==d){if(Hs(r))return!1;a=!0}}}}return Hs(r)||a}function Hs(t){return(t&1)===0}function mz(t,n,e,r){if(n===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<n.length;){let a=n[i];if(a===t)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=n[++i];for(;typeof s=="string";)s=n[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return yz(n,t)}function Nk(t,n,e=!1){for(let r=0;r<n.length;r++)if(fz(t,n[r],e))return!0;return!1}function gz(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if(!(e&1))return n[e+1]}return null}function vz(t){for(let n=0;n<t.length;n++){let e=t[n];if(cz(e))return n}return t.length}function yz(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let r=t[e];if(typeof r=="number")return-1;if(r===n)return e;e++}return-1}function bz(t,n){e:for(let e=0;e<n.length;e++){let r=n[e];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function F4(t,n){return t?":not("+n.trim()+")":n}function _z(t){let n=t[0],e=1,r=2,i="",o=!1;for(;e<t.length;){let a=t[e];if(typeof a=="string")if(r&2){let s=t[++e];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Hs(a)&&(n+=F4(o,i),i=""),r=a,o=o||!Hs(r);e++}return i!==""&&(n+=F4(o,i)),n}function wz(t){return t.map(_z).join(",")}function xz(t){let n=[],e=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&n.push(o,t[++r]):i===8&&e.push(o);else{if(!Hs(i))break;i=o}r++}return{attrs:n,classes:e}}function ct(t){return Pg(()=>{let n=Vk(t),e=Rn(nt({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||El.Emulated,styles:t.styles||Yo,_:null,schemas:t.schemas||null,tView:null,id:""});jk(e);let r=t.dependencies;return e.directiveDefs=P4(r,!1),e.pipeDefs=P4(r,!0),e.id=Sz(e),e})}function Cz(t){return Rc(t)||Ok(t)}function Iz(t){return t!==null}function dn(t){return Pg(()=>({type:t.type,bootstrap:t.bootstrap||Yo,declarations:t.declarations||Yo,imports:t.imports||Yo,exports:t.exports||Yo,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function O4(t,n){if(t==null)return Zh;let e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,a,s=Se.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),n?(e[o]=s!==Se.None?[r,s]:r,n[o]=a):e[o]=r}return e}function Un(t){return Pg(()=>{let n=Vk(t);return jk(n),n})}function Fk(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rc(t){return t[zH]||null}function Ok(t){return t[WH]||null}function Pk(t){return t[qH]||null}function Lk(t){let n=Rc(t)||Ok(t)||Pk(t);return n!==null?n.standalone:!1}function Bk(t,n){let e=t[GH]||null;if(!e&&n===!0)throw new Error(`Type ${Xo(t)} does not have '\u0275mod' property.`);return e}function Vk(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Zh,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Yo,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:O4(t.inputs,n),outputs:O4(t.outputs),debugInfo:null}}function jk(t){t.features?.forEach(n=>n(t))}function P4(t,n){if(!t)return null;let e=n?Pk:Cz;return()=>(typeof t=="function"?t():t).map(r=>e(r)).filter(Iz)}function Sz(t){let n=0,e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of e)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function lf(t){return{\u0275providers:t}}function Ez(...t){return{\u0275providers:Uk(!0,t),\u0275fromNgModule:!0}}function Uk(t,...n){let e=[],r=new Set,i,o=a=>{e.push(a)};return RI(n,a=>{let s=a;DC(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&Hk(i,o),e}function Hk(t,n){for(let e=0;e<t.length;e++){let{ngModule:r,providers:i}=t[e];FI(i,o=>{n(o,r)})}}function DC(t,n,e,r){if(t=Ko(t),!t)return!1;let i=null,o=A4(t),a=!o&&Rc(t);if(!o&&!a){let l=t.ngModule;if(o=A4(l),o)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=t}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let u of l)DC(u,n,e,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let u;try{RI(o.imports,c=>{DC(c,n,e,r)&&(u||=[],u.push(c))})}finally{}u!==void 0&&Hk(u,n)}if(!s){let u=Yd(i)||(()=>new i);n({provide:i,useFactory:u,deps:Yo},i),n({provide:kk,useValue:i,multi:!0},i),n({provide:Xd,useValue:()=>Bt(i),multi:!0},i)}let l=o.providers;if(l!=null&&!s){let u=t;FI(l,c=>{n(c,u)})}}else return!1;return i!==t&&t.providers!==void 0}function FI(t,n){for(let e of t)Ik(e)&&(e=e.\u0275providers),Array.isArray(e)?FI(e,n):n(e)}var Dz=Ar({provide:String,useValue:Ar});function zk(t){return t!==null&&typeof t=="object"&&Dz in t}function Tz(t){return!!(t&&t.useExisting)}function Az(t){return!!(t&&t.useFactory)}function Jh(t){return typeof t=="function"}function kz(t){return!!t.useClass}var hb=new Lt(""),ky={},Mz={},sC;function OI(){return sC===void 0&&(sC=new jy),sC}var Eo=class{},Dg=class extends Eo{get destroyed(){return this._destroyed}constructor(n,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,AC(n,a=>this.processProvider(a)),this.records.set(Ak,Gh(void 0,this)),i.has("environment")&&this.records.set(Eo,Gh(void 0,this));let o=this.records.get(hb);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kk,Yo,jn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=sr(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),sr(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let e=kc(this),r=ga(void 0),i;try{return n()}finally{kc(e),ga(r)}}get(n,e=Sg,r=jn.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(M4))return n[M4](this);r=cb(r);let i,o=kc(this),a=ga(void 0);try{if(!(r&jn.SkipSelf)){let l=this.records.get(n);if(l===void 0){let u=Pz(n)&&ub(n);u&&this.injectableDefInScope(u)?l=Gh(TC(n),ky):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l)}let s=r&jn.Self?OI():this.parent;return e=r&jn.Optional&&e===Sg?null:e,s.get(n,e)}catch(s){if(s.name==="NullInjectorError"){if((s[By]=s[By]||[]).unshift(Xo(n)),o)throw s;return nz(s,n,"R3InjectorError",this.source)}else throw s}finally{ga(a),kc(o)}}resolveInjectorInitializers(){let n=sr(null),e=kc(this),r=ga(void 0),i;try{let o=this.get(Xd,Yo,jn.Self);for(let a of o)a()}finally{kc(e),ga(r),sr(n)}}toString(){let n=[],e=this.records;for(let r of e.keys())n.push(Xo(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new At(205,!1)}processProvider(n){n=Ko(n);let e=Jh(n)?n:Ko(n&&n.provide),r=Nz(n);if(!Jh(n)&&n.multi===!0){let i=this.records.get(e);i||(i=Gh(void 0,ky,!0),i.factory=()=>SC(i.multi),this.records.set(e,i)),e=n,i.multi.push(n)}this.records.set(e,r)}hydrate(n,e){let r=sr(null);try{return e.value===ky&&(e.value=Mz,e.value=e.factory()),typeof e.value=="object"&&e.value&&Oz(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{sr(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=Ko(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function TC(t){let n=ub(t),e=n!==null?n.factory:Yd(t);if(e!==null)return e;if(t instanceof Lt)throw new At(204,!1);if(t instanceof Function)return Rz(t);throw new At(204,!1)}function Rz(t){if(t.length>0)throw new At(204,!1);let e=UH(t);return e!==null?()=>e.factory(t):()=>new t}function Nz(t){if(zk(t))return Gh(void 0,t.useValue);{let n=Wk(t);return Gh(n,ky)}}function Wk(t,n,e){let r;if(Jh(t)){let i=Ko(t);return Yd(i)||TC(i)}else if(zk(t))r=()=>Ko(t.useValue);else if(Az(t))r=()=>t.useFactory(...SC(t.deps||[]));else if(Tz(t))r=()=>Bt(Ko(t.useExisting));else{let i=Ko(t&&(t.useClass||t.provide));if(Fz(t))r=()=>new i(...SC(t.deps));else return Yd(i)||TC(i)}return r}function Gh(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Fz(t){return!!t.deps}function Oz(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Pz(t){return typeof t=="function"||typeof t=="object"&&t instanceof Lt}function AC(t,n){for(let e of t)Array.isArray(e)?AC(e,n):e&&Ik(e)?AC(e.\u0275providers,n):n(e)}function Ks(t,n){t instanceof Dg&&t.assertNotDestroyed();let e,r=kc(t),i=ga(void 0);try{return n()}finally{kc(r),ga(i)}}function qk(){return Sk()!==void 0||JH()!=null}function Gk(t){if(!qk())throw new At(-203,!1)}function Lz(t){let n=Ui.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Bz(t){return typeof t=="function"}var Ha=0,Sn=1,an=2,Zi=3,zs=4,Wa=5,fs=6,Tg=7,Ws=8,ef=9,Dl=10,Sr=11,Ag=12,L4=13,uf=14,za=15,Vg=16,$h=17,Du=18,fb=19,$k=20,Mc=21,My=22,Qd=23,Ji=25,Kk=1,kg=6,Tu=7,Uy=8,tf=9,va=10,PI=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(PI||{});function Eu(t){return Array.isArray(t)&&typeof t[Kk]=="object"}function Al(t){return Array.isArray(t)&&t[Kk]===!0}function LI(t){return(t.flags&4)!==0}function jg(t){return t.componentOffset>-1}function mb(t){return(t.flags&1)===1}function Nc(t){return!!t.template}function Yk(t){return(t[an]&512)!==0}var kC=class{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Xk(t,n,e,r){n!==null?n.applyValueToInputSignal(n,r):t[e]=r}function eo(){return Qk}function Qk(t){return t.type.prototype.ngOnChanges&&(t.setInput=jz),Vz}eo.ngInherit=!0;function Vz(){let t=Jk(this),n=t?.current;if(n){let e=t.previous;if(e===Zh)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function jz(t,n,e,r,i){let o=this.declaredInputs[r],a=Jk(t)||Uz(t,{previous:Zh,current:null}),s=a.current||(a.current={}),l=a.previous,u=l[o];s[o]=new kC(u&&u.currentValue,e,l===Zh),Xk(t,n,i,e)}var Zk="__ngSimpleChanges__";function Jk(t){return t[Zk]||null}function Uz(t,n){return t[Zk]=n}var B4=null;var Il=function(t,n,e){B4?.(t,n,e)},eM="svg",Hz="math",zz=!1;function Wz(){return zz}function qs(t){for(;Array.isArray(t);)t=t[Ha];return t}function tM(t,n){return qs(n[t])}function qa(t,n){return qs(n[t.index])}function nM(t,n){return t.data[n]}function rM(t,n){return t[n]}function Pc(t,n){let e=n[t];return Eu(e)?e:e[Ha]}function qz(t){return(t[an]&4)===4}function BI(t){return(t[an]&128)===128}function Gz(t){return Al(t[Zi])}function nf(t,n){return n==null?null:t[n]}function iM(t){t[$h]=0}function $z(t){t[an]&1024||(t[an]|=1024,BI(t)&&Mg(t))}function Kz(t,n){for(;t>0;)n=n[uf],t--;return n}function VI(t){return!!(t[an]&9216||t[Qd]?.dirty)}function MC(t){t[Dl].changeDetectionScheduler?.notify(1),VI(t)?Mg(t):t[an]&64&&(Wz()?(t[an]|=1024,Mg(t)):t[Dl].changeDetectionScheduler?.notify())}function Mg(t){t[Dl].changeDetectionScheduler?.notify();let n=Rg(t);for(;n!==null&&!(n[an]&8192||(n[an]|=8192,!BI(n)));)n=Rg(n)}function oM(t,n){if((t[an]&256)===256)throw new At(911,!1);t[Mc]===null&&(t[Mc]=[]),t[Mc].push(n)}function Yz(t,n){if(t[Mc]===null)return;let e=t[Mc].indexOf(n);e!==-1&&t[Mc].splice(e,1)}function Rg(t){let n=t[Zi];return Al(n)?n[Zi]:n}var Dn={lFrame:dM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xz(){return Dn.lFrame.elementDepthCount}function Qz(){Dn.lFrame.elementDepthCount++}function Zz(){Dn.lFrame.elementDepthCount--}function aM(){return Dn.bindingsEnabled}function cf(){return Dn.skipHydrationRootTNode!==null}function Jz(t){return Dn.skipHydrationRootTNode===t}function eW(t){Dn.skipHydrationRootTNode=t}function tW(){Dn.skipHydrationRootTNode=null}function mn(){return Dn.lFrame.lView}function oi(){return Dn.lFrame.tView}function Ee(t){return Dn.lFrame.contextLView=t,t[Ws]}function De(t){return Dn.lFrame.contextLView=null,t}function Qo(){let t=sM();for(;t!==null&&t.type===64;)t=t.parent;return t}function sM(){return Dn.lFrame.currentTNode}function nW(){let t=Dn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function rp(t,n){let e=Dn.lFrame;e.currentTNode=t,e.isParent=n}function jI(){return Dn.lFrame.isParent}function UI(){Dn.lFrame.isParent=!1}function rW(){return Dn.lFrame.contextLView}function kl(){let t=Dn.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function iW(){return Dn.lFrame.bindingIndex}function oW(t){return Dn.lFrame.bindingIndex=t}function gb(){return Dn.lFrame.bindingIndex++}function HI(t){let n=Dn.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function aW(){return Dn.lFrame.inI18n}function sW(t,n){let e=Dn.lFrame;e.bindingIndex=e.bindingRootIndex=t,RC(n)}function lW(){return Dn.lFrame.currentDirectiveIndex}function RC(t){Dn.lFrame.currentDirectiveIndex=t}function uW(t){let n=Dn.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function lM(){return Dn.lFrame.currentQueryIndex}function zI(t){Dn.lFrame.currentQueryIndex=t}function cW(t){let n=t[Sn];return n.type===2?n.declTNode:n.type===1?t[Wa]:null}function uM(t,n,e){if(e&jn.SkipSelf){let i=n,o=t;for(;i=i.parent,i===null&&!(e&jn.Host);)if(i=cW(o),i===null||(o=o[uf],i.type&10))break;if(i===null)return!1;n=i,t=o}let r=Dn.lFrame=cM();return r.currentTNode=n,r.lView=t,!0}function WI(t){let n=cM(),e=t[Sn];Dn.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function cM(){let t=Dn.lFrame,n=t===null?null:t.child;return n===null?dM(t):n}function dM(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function pM(){let t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var hM=pM;function qI(){let t=pM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dW(t){return(Dn.lFrame.contextLView=Kz(t,Dn.lFrame.contextLView))[Ws]}function Lc(){return Dn.lFrame.selectedIndex}function Zd(t){Dn.lFrame.selectedIndex=t}function vb(){let t=Dn.lFrame;return nM(t.tView,t.selectedIndex)}function nn(){Dn.lFrame.currentNamespace=eM}function fM(){return Dn.lFrame.currentNamespace}var mM=!0;function yb(){return mM}function Ml(t){mM=t}function pW(t,n,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let a=Qk(n);(e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a)}i&&(e.preOrderHooks??=[]).push(0-t,i),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}function bb(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){let o=t.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;a&&(t.contentHooks??=[]).push(-e,a),s&&((t.contentHooks??=[]).push(e,s),(t.contentCheckHooks??=[]).push(e,s)),l&&(t.viewHooks??=[]).push(-e,l),u&&((t.viewHooks??=[]).push(e,u),(t.viewCheckHooks??=[]).push(e,u)),c!=null&&(t.destroyHooks??=[]).push(e,c)}}function Ry(t,n,e){gM(t,n,3,e)}function Ny(t,n,e,r){(t[an]&3)===e&&gM(t,n,e,r)}function lC(t,n){let e=t[an];(e&3)===n&&(e&=16383,e+=1,t[an]=e)}function gM(t,n,e,r){let i=r!==void 0?t[$h]&65535:0,o=r??-1,a=n.length-1,s=0;for(let l=i;l<a;l++)if(typeof n[l+1]=="number"){if(s=n[l],r!=null&&s>=r)break}else n[l]<0&&(t[$h]+=65536),(s<o||o==-1)&&(hW(t,e,n,l),t[$h]=(t[$h]&4294901760)+l+2),l++}function V4(t,n){Il(4,t,n);let e=sr(null);try{n.call(t)}finally{sr(e),Il(5,t,n)}}function hW(t,n,e,r){let i=e[r]<0,o=e[r+1],a=i?-e[r]:e[r],s=t[a];i?t[an]>>14<t[$h]>>16&&(t[an]&3)===n&&(t[an]+=16384,V4(s,o)):V4(s,o)}var Qh=-1,Jd=class{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}};function fW(t){return t instanceof Jd}function mW(t){return(t.flags&8)!==0}function gW(t){return(t.flags&16)!==0}function vM(t){return t!==Qh}function Hy(t){return t&32767}function vW(t){return t>>16}function zy(t,n){let e=vW(t),r=n;for(;e>0;)r=r[uf],e--;return r}var NC=!0;function Wy(t){let n=NC;return NC=t,n}var yW=256,yM=yW-1,bM=5,bW=0,Sl={};function _W(t,n,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(xg)&&(r=e[xg]),r==null&&(r=e[xg]=bW++);let i=r&yM,o=1<<i;n.data[t+(i>>bM)]|=o}function qy(t,n){let e=_M(t,n);if(e!==-1)return e;let r=n[Sn];r.firstCreatePass&&(t.injectorIndex=n.length,uC(r.data,t),uC(n,null),uC(r.blueprint,null));let i=GI(t,n),o=t.injectorIndex;if(vM(i)){let a=Hy(i),s=zy(i,n),l=s[Sn].data;for(let u=0;u<8;u++)n[o+u]=s[a+u]|l[a+u]}return n[o+8]=i,o}function uC(t,n){t.push(0,0,0,0,0,0,0,0,n)}function _M(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function GI(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,r=null,i=n;for(;i!==null;){if(r=SM(i),r===null)return Qh;if(e++,i=i[uf],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Qh}function FC(t,n,e){_W(t,n,e)}function wM(t,n,e){if(e&jn.Optional||t!==void 0)return t;MI(n,"NodeInjector")}function xM(t,n,e,r){if(e&jn.Optional&&r===void 0&&(r=null),!(e&(jn.Self|jn.Host))){let i=t[ef],o=ga(void 0);try{return i?i.get(n,r,e&jn.Optional):Ek(n,r,e&jn.Optional)}finally{ga(o)}}return wM(r,n,e)}function CM(t,n,e,r=jn.Default,i){if(t!==null){if(n[an]&2048&&!(r&jn.Self)){let a=IW(t,n,e,r,Sl);if(a!==Sl)return a}let o=IM(t,n,e,r,Sl);if(o!==Sl)return o}return xM(n,e,r,i)}function IM(t,n,e,r,i){let o=xW(e);if(typeof o=="function"){if(!uM(n,t,r))return r&jn.Host?wM(i,e,r):xM(n,e,r,i);try{let a;if(a=o(r),a==null&&!(r&jn.Optional))MI(e);else return a}finally{hM()}}else if(typeof o=="number"){let a=null,s=_M(t,n),l=Qh,u=r&jn.Host?n[za][Wa]:null;for((s===-1||r&jn.SkipSelf)&&(l=s===-1?GI(t,n):n[s+8],l===Qh||!U4(r,!1)?s=-1:(a=n[Sn],s=Hy(l),n=zy(l,n)));s!==-1;){let c=n[Sn];if(j4(o,s,c.data)){let d=wW(s,n,e,a,r,u);if(d!==Sl)return d}l=n[s+8],l!==Qh&&U4(r,n[Sn].data[s+8]===u)&&j4(o,s,n)?(a=c,s=Hy(l),n=zy(l,n)):s=-1}}return i}function wW(t,n,e,r,i,o){let a=n[Sn],s=a.data[t+8],l=r==null?jg(s)&&NC:r!=a&&(s.type&3)!==0,u=i&jn.Host&&o===s,c=Fy(s,a,e,l,u);return c!==null?ep(n,a,c,s):Sl}function Fy(t,n,e,r,i){let o=t.providerIndexes,a=n.data,s=o&1048575,l=t.directiveStart,u=t.directiveEnd,c=o>>20,d=r?s:s+c,p=i?s+c:u;for(let h=d;h<p;h++){let f=a[h];if(h<l&&e===f||h>=l&&f.type===e)return h}if(i){let h=a[l];if(h&&Nc(h)&&h.type===e)return l}return null}function ep(t,n,e,r){let i=t[e],o=n.data;if(fW(i)){let a=i;a.resolving&&KH($H(o[e]));let s=Wy(a.canSeeViewProviders);a.resolving=!0;let l,u=a.injectImpl?ga(a.injectImpl):null,c=uM(t,r,jn.Default);try{i=t[e]=a.factory(void 0,o,t,r),n.firstCreatePass&&e>=r.directiveStart&&pW(e,o[e],n)}finally{u!==null&&ga(u),Wy(s),a.resolving=!1,hM()}}return i}function xW(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(xg)?t[xg]:void 0;return typeof n=="number"?n>=0?n&yM:CW:n}function j4(t,n,e){let r=1<<t;return!!(e[n+(t>>bM)]&r)}function U4(t,n){return!(t&jn.Self)&&!(t&jn.Host&&n)}var Kd=class{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return CM(this._tNode,this._lView,n,cb(r),e)}};function CW(){return new Kd(Qo(),mn())}function Ht(t){return Pg(()=>{let n=t.prototype.constructor,e=n[Ly]||OC(n),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ly]||OC(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function OC(t){return _k(t)?()=>{let n=OC(Ko(t));return n&&n()}:Yd(t)}function IW(t,n,e,r,i){let o=t,a=n;for(;o!==null&&a!==null&&a[an]&2048&&!(a[an]&512);){let s=IM(o,a,e,r|jn.Self,Sl);if(s!==Sl)return s;let l=o.parent;if(!l){let u=a[$k];if(u){let c=u.get(e,Sl,r);if(c!==Sl)return c}l=SM(a),a=a[uf]}o=l}return i}function SM(t){let n=t[Sn],e=n.type;return e===2?n.declTNode:e===1?t[Wa]:null}function H4(t,n=null,e=null,r){let i=EM(t,n,e,r);return i.resolveInjectorInitializers(),i}function EM(t,n=null,e=null,r,i=new Set){let o=[e||Yo,Ez(t)];return r=r||(typeof t=="object"?void 0:Xo(t)),new Dg(o,n||OI(),r||null,i)}var Zo=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Sg}static{this.NULL=new jy}static create(e,r){if(Array.isArray(e))return H4({name:""},r,e,"");{let i=e.name??"";return H4({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=xt({token:t,providedIn:"any",factory:()=>Bt(Ak)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var SW="ngOriginalError";function cC(t){return t[SW]}var Gs=class{constructor(){this._console=console}handleError(n){let e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&cC(n);for(;e&&cC(e);)e=cC(e);return e||null}},DM=new Lt("",{providedIn:"root",factory:()=>Qe(Gs).handleError.bind(void 0)}),_b=(()=>{class t{static{this.__NG_ELEMENT_ID__=EW}static{this.__NG_ENV_ID__=e=>e}}return t})(),PC=class extends _b{constructor(n){super(),this._lView=n}onDestroy(n){return oM(this._lView,n),()=>Yz(this._lView,n)}};function EW(){return new PC(mn())}function DW(){return df(Qo(),mn())}function df(t,n){return new zn(qa(t,n))}var zn=(()=>{class t{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=DW}}return t})();function TW(t){return t instanceof zn?t.nativeElement:t}var LC=class extends Fr{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,qk()&&(this.destroyRef=Qe(_b,{optional:!0})??void 0)}emit(n){let e=sr(null);try{super.next(n)}finally{sr(e)}}subscribe(n,e,r){let i=n,o=e||(()=>null),a=r;if(n&&typeof n=="object"){let l=n;i=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=dC(o),i&&(i=dC(i)),a&&(a=dC(a)));let s=super.subscribe({next:i,error:o,complete:a});return n instanceof Bi&&n.add(s),s}};function dC(t){return n=>{setTimeout(t,void 0,n)}}var it=LC;function AW(){return this._results[Symbol.iterator]()}var BC=class t{get changes(){return this._changes??=new it}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=t.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=AW)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let r=oz(n);(this._changesDetected=!iz(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},kW="ngSkipHydration",MW="ngskiphydration";function TM(t){let n=t.mergedAttrs;if(n===null)return!1;for(let e=0;e<n.length;e+=2){let r=n[e];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===MW)return!0}return!1}function AM(t){return t.hasAttribute(kW)}function Gy(t){return(t.flags&128)===128}function RW(t){if(Gy(t))return!0;let n=t.parent;for(;n;){if(Gy(t)||TM(n))return!0;n=n.parent}return!1}var kM=new Map,NW=0;function FW(){return NW++}function OW(t){kM.set(t[fb],t)}function PW(t){kM.delete(t[fb])}var z4="__ngContext__";function Fc(t,n){Eu(n)?(t[z4]=n[fb],OW(n)):t[z4]=n}function MM(t){return NM(t[Ag])}function RM(t){return NM(t[zs])}function NM(t){for(;t!==null&&!Al(t);)t=t[zs];return t}var VC;function FM(t){VC=t}function wb(){if(VC!==void 0)return VC;if(typeof document<"u")return document;throw new At(210,!1)}var Ug=new Lt("",{providedIn:"root",factory:()=>LW}),LW="ng",$I=new Lt(""),zr=new Lt("",{providedIn:"platform",factory:()=>"unknown"});var KI=new Lt("",{providedIn:"root",factory:()=>wb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function BW(){let t=new ip;return Qe(zr)==="browser"&&(t.store=VW(wb(),Qe(Ug))),t}var ip=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=xt({token:t,providedIn:"root",factory:BW})}get(e,r){return this.store[e]!==void 0?this.store[e]:r}set(e,r){this.store[e]=r}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(e,r){this.onSerializeCallbacks[e]=r}toJson(){for(let e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function VW(t,n){let e=t.getElementById(n+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}var OM="h",PM="b",jC=function(t){return t.FirstChild="f",t.NextSibling="n",t}(jC||{}),jW="e",UW="t",YI="c",LM="x",$y="r",HW="i",zW="n",WW="d",qW="__nghData__",BM=qW,pC="ngh",GW="nghm",VM=()=>null;function $W(t,n,e=!1){let r=t.getAttribute(pC);if(r==null)return null;let[i,o]=r.split("|");if(r=e?o:i,!r)return null;let a=o?`|${o}`:"",s=e?i:a,l={};if(r!==""){let c=n.get(ip,null,{optional:!0});c!==null&&(l=c.get(BM,[])[Number(r)])}let u={data:l,firstChild:t.firstChild??null};return e&&(u.firstChild=t,xb(u,0,t.nextSibling)),s?t.setAttribute(pC,s):t.removeAttribute(pC),u}function KW(){VM=$W}function XI(t,n,e=!1){return VM(t,n,e)}function YW(t){let n=t._lView;return n[Sn].type===2?null:(Yk(n)&&(n=n[Ji]),n)}function XW(t){return t.textContent?.replace(/\s/gm,"")}function QW(t){let n=wb(),e=n.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let a=XW(o);return a==="ngetn"||a==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=e.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(n.createTextNode("")):o.remove()}function xb(t,n,e){t.segmentHeads??={},t.segmentHeads[n]=e}function UC(t,n){return t.segmentHeads?.[n]??null}function ZW(t,n){let e=t.data,r=e[jW]?.[n]??null;return r===null&&e[YI]?.[n]&&(r=QI(t,n)),r}function jM(t,n){return t.data[YI]?.[n]??null}function QI(t,n){let e=jM(t,n)??[],r=0;for(let i of e)r+=i[$y]*(i[LM]??1);return r}function Cb(t,n){if(typeof t.disconnectedNodes>"u"){let e=t.data[WW];t.disconnectedNodes=e?new Set(e):null}return!!t.disconnectedNodes?.has(n)}var Cy=new Lt(""),UM=!1,HM=new Lt("",{providedIn:"root",factory:()=>UM}),JW=new Lt(""),Iy;function eq(){if(Iy===void 0&&(Iy=null,Ui.trustedTypes))try{Iy=Ui.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Iy}function Ib(t){return eq()?.createHTML(t)||t}var Au=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yk})`}},HC=class extends Au{getTypeName(){return"HTML"}},zC=class extends Au{getTypeName(){return"Style"}},WC=class extends Au{getTypeName(){return"Script"}},qC=class extends Au{getTypeName(){return"URL"}},GC=class extends Au{getTypeName(){return"ResourceURL"}};function Rl(t){return t instanceof Au?t.changingThisBreaksApplicationSecurity:t}function pf(t,n){let e=tq(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${yk})`)}return e===n}function tq(t){return t instanceof Au&&t.getTypeName()||null}function zM(t){return new HC(t)}function WM(t){return new zC(t)}function qM(t){return new WC(t)}function GM(t){return new qC(t)}function $M(t){return new GC(t)}function nq(t){let n=new KC(t);return rq()?new $C(n):n}var $C=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let e=new window.DOMParser().parseFromString(Ib(n),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}},KC=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let e=this.inertDocument.createElement("template");return e.innerHTML=Ib(n),e}};function rq(){try{return!!new window.DOMParser().parseFromString(Ib(""),"text/html")}catch{return!1}}var iq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ZI(t){return t=String(t),t.match(iq)?t:"unsafe:"+t}function ku(t){let n={};for(let e of t.split(","))n[e]=!0;return n}function Hg(...t){let n={};for(let e of t)for(let r in e)e.hasOwnProperty(r)&&(n[r]=!0);return n}var KM=ku("area,br,col,hr,img,wbr"),YM=ku("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),XM=ku("rp,rt"),oq=Hg(XM,YM),aq=Hg(YM,ku("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sq=Hg(XM,ku("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),W4=Hg(KM,aq,sq,oq),QM=ku("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lq=ku("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),uq=ku("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),cq=Hg(QM,lq,uq),dq=ku("script,style,template"),YC=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=fq(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=hq(e);if(o){e=o;break}e=i.pop()}}return this.buf.join("")}startElement(n){let e=q4(n).toLowerCase();if(!W4.hasOwnProperty(e))return this.sanitizedSomething=!0,!dq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=n.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!cq.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=o.value;QM[s]&&(l=ZI(l)),this.buf.push(" ",a,'="',G4(l),'"')}return this.buf.push(">"),!0}endElement(n){let e=q4(n).toLowerCase();W4.hasOwnProperty(e)&&!KM.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(G4(n))}};function pq(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function hq(t){let n=t.nextSibling;if(n&&t!==n.previousSibling)throw ZM(n);return n}function fq(t){let n=t.firstChild;if(n&&pq(t,n))throw ZM(n);return n}function q4(t){let n=t.nodeName;return typeof n=="string"?n:"FORM"}function ZM(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var mq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gq=/([^\#-~ |!])/g;function G4(t){return t.replace(/&/g,"&amp;").replace(mq,function(n){let e=n.charCodeAt(0),r=n.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace(gq,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Sy;function JM(t,n){let e=null;try{Sy=Sy||nq(t);let r=n?String(n):"";e=Sy.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=Sy.getInertBodyElement(r)}while(r!==o);let s=new YC().sanitizeChildren($4(e)||e);return Ib(s)}finally{if(e){let r=$4(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function $4(t){return"content"in t&&vq(t)?t.content:null}function vq(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Bc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bc||{});var yq=/^>|^->|<!--|-->|--!>|<!-$/g,bq=/(<|>)/g,_q="\u200B$1\u200B";function wq(t){return t.replace(yq,n=>n.replace(bq,_q))}function JI(t){return t.ownerDocument.defaultView}function xq(t){return t.ownerDocument.body}function eR(t){return t instanceof Function?t():t}function wg(t){return(t??Qe(Zo)).get(zr)==="browser"}var Tl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tl||{}),Cq;function eS(t,n){return Cq(t,n)}function Kh(t,n,e,r,i){if(r!=null){let o,a=!1;Al(r)?o=r:Eu(r)&&(a=!0,r=r[Ha]);let s=qs(r);t===0&&e!==null?i==null?oR(n,e,s):Ky(n,e,s,i||null,!0):t===1&&e!==null?Ky(n,e,s,i||null,!0):t===2?iS(n,s,a):t===3&&n.destroyNode(s),o!=null&&Bq(n,t,o,e,i)}}function tS(t,n){return t.createText(n)}function Iq(t,n,e){t.setValue(n,e)}function nS(t,n){return t.createComment(wq(n))}function Sb(t,n,e){return t.createElement(n,e)}function Sq(t,n){tR(t,n),n[Ha]=null,n[Wa]=null}function Eq(t,n,e,r,i,o){r[Ha]=i,r[Wa]=n,Db(t,r,e,1,i,o)}function tR(t,n){n[Dl].changeDetectionScheduler?.notify(1),Db(t,n,n[Sr],2,null,null)}function Dq(t){let n=t[Ag];if(!n)return hC(t[Sn],t);for(;n;){let e=null;if(Eu(n))e=n[Ag];else{let r=n[va];r&&(e=r)}if(!e){for(;n&&!n[zs]&&n!==t;)Eu(n)&&hC(n[Sn],n),n=n[Zi];n===null&&(n=t),Eu(n)&&hC(n[Sn],n),e=n&&n[zs]}n=e}}function Tq(t,n,e,r){let i=va+r,o=e.length;r>0&&(e[i-1][zs]=n),r<o-va?(n[zs]=e[i],Tk(e,va+r,n)):(e.push(n),n[zs]=null),n[Zi]=e;let a=n[Vg];a!==null&&e!==a&&Aq(a,n);let s=n[Du];s!==null&&s.insertView(t),MC(n),n[an]|=128}function Aq(t,n){let e=t[tf],i=n[Zi][Zi][za];n[za]!==i&&(t[an]|=PI.HasTransplantedViews),e===null?t[tf]=[n]:e.push(n)}function nR(t,n){let e=t[tf],r=e.indexOf(n);e.splice(r,1)}function XC(t,n){if(t.length<=va)return;let e=va+n,r=t[e];if(r){let i=r[Vg];i!==null&&i!==t&&nR(i,r),n>0&&(t[e-1][zs]=r[zs]);let o=Vy(t,va+n);Sq(r[Sn],r);let a=o[Du];a!==null&&a.detachView(o[Sn]),r[Zi]=null,r[zs]=null,r[an]&=-129}return r}function rR(t,n){if(!(n[an]&256)){let e=n[Sr];e.destroyNode&&Db(t,n,e,3,null,null),Dq(n)}}function hC(t,n){if(n[an]&256)return;let e=sr(null);try{n[an]&=-129,n[an]|=256,n[Qd]&&Hx(n[Qd]),Mq(t,n),kq(t,n),n[Sn].type===1&&n[Sr].destroy();let r=n[Vg];if(r!==null&&Al(n[Zi])){r!==n[Zi]&&nR(r,n);let i=n[Du];i!==null&&i.detachView(t)}PW(n)}finally{sr(e)}}function kq(t,n){let e=t.cleanup,r=n[Tg];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[e[o+1]];e[o].call(a)}r!==null&&(n[Tg]=null);let i=n[Mc];if(i!==null){n[Mc]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function Mq(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=n[e[r]];if(!(i instanceof Jd)){let o=e[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],l=o[a+1];Il(4,s,l);try{l.call(s)}finally{Il(5,s,l)}}else{Il(4,i,o);try{o.call(i)}finally{Il(5,i,o)}}}}}function iR(t,n,e){return Rq(t,n.parent,e)}function Rq(t,n,e){let r=n;for(;r!==null&&r.type&40;)n=r,r=n.parent;if(r===null)return e[Ha];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===El.None||o===El.Emulated)return null}return qa(r,e)}}function Ky(t,n,e,r,i){t.insertBefore(n,e,r,i)}function oR(t,n,e){t.appendChild(n,e)}function K4(t,n,e,r,i){r!==null?Ky(t,n,e,r,i):oR(t,n,e)}function Nq(t,n,e,r){t.removeChild(n,e,r)}function rS(t,n){return t.parentNode(n)}function Fq(t,n){return t.nextSibling(n)}function aR(t,n,e){return Pq(t,n,e)}function Oq(t,n,e){return t.type&40?qa(t,e):null}var Pq=Oq,Y4;function Eb(t,n,e,r){let i=iR(t,r,n),o=n[Sr],a=r.parent||n[Wa],s=aR(a,r,n);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)K4(o,i,e[l],s,!1);else K4(o,i,e,s,!1);Y4!==void 0&&Y4(o,r,n,e,i)}function Oy(t,n){if(n!==null){let e=n.type;if(e&3)return qa(n,t);if(e&4)return QC(-1,t[n.index]);if(e&8){let r=n.child;if(r!==null)return Oy(t,r);{let i=t[n.index];return Al(i)?QC(-1,i):qs(i)}}else{if(e&32)return eS(n,t)()||qs(t[n.index]);{let r=sR(t,n);if(r!==null){if(Array.isArray(r))return r[0];let i=Rg(t[za]);return Oy(i,r)}else return Oy(t,n.next)}}}return null}function sR(t,n){if(n!==null){let r=t[za][Wa],i=n.projection;return r.projection[i]}return null}function QC(t,n){let e=va+t+1;if(e<n.length){let r=n[e],i=r[Sn].firstChild;if(i!==null)return Oy(r,i)}return n[Tu]}function iS(t,n,e){let r=rS(t,n);r&&Nq(t,r,n,e)}function lR(t){t.textContent=""}function oS(t,n,e,r,i,o,a){for(;e!=null;){let s=r[e.index],l=e.type;if(a&&n===0&&(s&&Fc(qs(s),r),e.flags|=2),(e.flags&32)!==32)if(l&8)oS(t,n,e.child,r,i,o,!1),Kh(n,t,i,s,o);else if(l&32){let u=eS(e,r),c;for(;c=u();)Kh(n,t,i,c,o);Kh(n,t,i,s,o)}else l&16?uR(t,n,r,e,i,o):Kh(n,t,i,s,o);e=a?e.projectionNext:e.next}}function Db(t,n,e,r,i,o){oS(e,r,t.firstChild,n,i,o,!1)}function Lq(t,n,e){let r=n[Sr],i=iR(t,e,n),o=e.parent||n[Wa],a=aR(o,e,n);uR(r,0,n,e,i,a)}function uR(t,n,e,r,i,o){let a=e[za],l=a[Wa].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];Kh(n,t,i,c,o)}else{let u=l,c=a[Zi];Gy(r)&&(u.flags|=128),oS(t,n,u,c,i,o,!0)}}function Bq(t,n,e,r,i){let o=e[Tu],a=qs(e);o!==a&&Kh(n,t,r,o,i);for(let s=va;s<e.length;s++){let l=e[s];Db(l[Sn],l,t,n,r,o)}}function Vq(t,n,e,r,i){if(n)i?t.addClass(e,r):t.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Tl.DashCase;i==null?t.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tl.Important),t.setStyle(e,r,i,o))}}function jq(t,n,e){t.setAttribute(n,"style",e)}function cR(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function dR(t,n,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&EC(t,n,r),i!==null&&cR(t,n,i),o!==null&&jq(t,n,o)}var Ga={};function P(t=1){pR(oi(),mn(),Lc()+t,!1)}function pR(t,n,e,r){if(!r)if((n[an]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ry(n,o,e)}else{let o=t.preOrderHooks;o!==null&&Ny(n,o,0,e)}Zd(e)}function Oe(t,n=jn.Default){let e=mn();if(e===null)return Bt(t,n);let r=Qo();return CM(r,e,Ko(t),n)}function hR(){let t="invalid";throw new Error(t)}function fR(t,n,e,r,i,o){let a=sr(null);try{let s=null;i&Se.SignalBased&&(s=n[r][Cl]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Se.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(n,o)),t.setInput!==null?t.setInput(n,s,o,e,r):Xk(n,s,r,o)}finally{sr(a)}}function Uq(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Zd(~i);else{let o=i,a=e[++r],s=e[++r];sW(a,o);let l=n[o];s(2,l)}}}finally{Zd(-1)}}function Tb(t,n,e,r,i,o,a,s,l,u,c){let d=n.blueprint.slice();return d[Ha]=i,d[an]=r|4|128|8|64,(u!==null||t&&t[an]&2048)&&(d[an]|=2048),iM(d),d[Zi]=d[uf]=t,d[Ws]=e,d[Dl]=a||t&&t[Dl],d[Sr]=s||t&&t[Sr],d[ef]=l||t&&t[ef]||null,d[Wa]=o,d[fb]=FW(),d[fs]=c,d[$k]=u,d[za]=n.type==2?t[za]:d,d}function hf(t,n,e,r,i){let o=t.data[n];if(o===null)o=Hq(t,n,e,r,i),aW()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let a=nW();o.injectorIndex=a===null?-1:a.injectorIndex}return rp(o,!0),o}function Hq(t,n,e,r,i){let o=sM(),a=jI(),s=a?o:o&&o.parent,l=t.data[n]=Yq(t,s,e,n,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(a?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function mR(t,n,e,r){if(e===0)return-1;let i=n.length;for(let o=0;o<e;o++)n.push(r),t.blueprint.push(r),t.data.push(null);return i}function gR(t,n,e,r,i){let o=Lc(),a=r&2;try{Zd(-1),a&&n.length>Ji&&pR(t,n,Ji,!1),Il(a?2:0,i),e(r,i)}finally{Zd(o),Il(a?3:1,i)}}function aS(t,n,e){if(LI(n)){let r=sr(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let a=i;a<o;a++){let s=t.data[a];if(s.contentQueries){let l=e[a];s.contentQueries(1,l,a)}}}finally{sr(r)}}}function sS(t,n,e){aM()&&(tG(t,n,e,qa(e,n)),(e.flags&64)===64&&_R(t,n,e))}function lS(t,n,e=qa){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?e(n,t):t[a];t[i++]=s}}}function vR(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=uS(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function uS(t,n,e,r,i,o,a,s,l,u,c){let d=Ji+r,p=d+i,h=zq(d,p),f=typeof u=="function"?u():u;return h[Sn]={type:t,blueprint:h,template:e,queries:null,viewQuery:s,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:c}}function zq(t,n){let e=[];for(let r=0;r<n;r++)e.push(r<t?null:Ga);return e}function Wq(t,n,e,r){let o=r.get(HM,UM)||e===El.ShadowDom,a=t.selectRootElement(n,o);return qq(a),a}function qq(t){yR(t)}var yR=()=>null;function Gq(t){AM(t)?lR(t):QW(t)}function $q(){yR=Gq}function Kq(t,n,e,r){let i=CR(n);i.push(e),t.firstCreatePass&&IR(t).push(r,i.length-1)}function Yq(t,n,e,r,i,o){let a=n?n.injectorIndex:-1,s=0;return cf()&&(s|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function X4(t,n,e,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;let a=n[o];if(a===void 0)continue;r??={};let s,l=Se.None;Array.isArray(a)?(s=a[0],l=a[1]):s=a;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?Q4(r,e,u,s,l):Q4(r,e,u,s)}return r}function Q4(t,n,e,r,i){let o;t.hasOwnProperty(e)?(o=t[e]).push(n,r):o=t[e]=[n,r],i!==void 0&&o.push(i)}function Xq(t,n,e){let r=n.directiveStart,i=n.directiveEnd,o=t.data,a=n.attrs,s=[],l=null,u=null;for(let c=r;c<i;c++){let d=o[c],p=e?e.get(d):null,h=p?p.inputs:null,f=p?p.outputs:null;l=X4(0,d.inputs,c,l,h),u=X4(1,d.outputs,c,u,f);let m=l!==null&&a!==null&&!NI(n)?pG(l,c,a):null;s.push(m)}l!==null&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=s,n.inputs=l,n.outputs=u}function Qq(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cS(t,n,e,r,i,o,a,s){let l=qa(n,e),u=n.inputs,c;!s&&u!=null&&(c=u[r])?(pS(t,e,c,r,i),jg(n)&&Zq(e,n.index)):n.type&3?(r=Qq(r),i=a!=null?a(i,n.value||"",r):i,o.setProperty(l,r,i)):n.type&12}function Zq(t,n){let e=Pc(n,t);e[an]&16||(e[an]|=64)}function dS(t,n,e,r){if(aM()){let i=r===null?null:{"":-1},o=rG(t,e),a,s;o===null?a=s=null:[a,s]=o,a!==null&&bR(t,n,e,a,i,s),i&&iG(e,r,i)}e.mergedAttrs=Eg(e.mergedAttrs,e.attrs)}function bR(t,n,e,r,i,o){for(let u=0;u<r.length;u++)FC(qy(e,n),t,r[u].type);aG(e,t.data.length,r.length);for(let u=0;u<r.length;u++){let c=r[u];c.providersResolver&&c.providersResolver(c)}let a=!1,s=!1,l=mR(t,n,r.length,null);for(let u=0;u<r.length;u++){let c=r[u];e.mergedAttrs=Eg(e.mergedAttrs,c.hostAttrs),sG(t,e,n,l,c),oG(l,c,i),c.contentQueries!==null&&(e.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(e.flags|=64);let d=c.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),a=!0),!s&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),s=!0),l++}Xq(t,e,o)}function Jq(t,n,e,r,i){let o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let s=~n.index;eG(a)!=s&&a.push(s),a.push(e,r,o)}}function eG(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function tG(t,n,e,r){let i=e.directiveStart,o=e.directiveEnd;jg(e)&&lG(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||qy(e,n),Fc(r,n);let a=e.initialInputs;for(let s=i;s<o;s++){let l=t.data[s],u=ep(n,t,s,e);if(Fc(u,n),a!==null&&dG(n,s-i,u,l,e,a),Nc(l)){let c=Pc(e.index,n);c[Ws]=ep(n,t,s,e)}}}function _R(t,n,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,a=lW();try{Zd(o);for(let s=r;s<i;s++){let l=t.data[s],u=n[s];RC(s),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&nG(l,u)}}finally{Zd(-1),RC(a)}}function nG(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function rG(t,n){let e=t.directiveRegistry,r=null,i=null;if(e)for(let o=0;o<e.length;o++){let a=e[o];if(Nk(n,a.selectors,!1))if(r||(r=[]),Nc(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let l=s.length;ZC(t,n,l)}else r.unshift(a),ZC(t,n,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function ZC(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function iG(t,n,e){if(n){let r=t.localNames=[];for(let i=0;i<n.length;i+=2){let o=e[n[i+1]];if(o==null)throw new At(-301,!1);r.push(n[i],o)}}}function oG(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;Nc(n)&&(e[""]=t)}}function aG(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function sG(t,n,e,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yd(i.type,!0)),a=new Jd(o,Nc(i),Oe);t.blueprint[r]=a,e[r]=a,Jq(t,n,r,mR(t,e,i.hostVars,Ga),i)}function lG(t,n,e){let r=qa(n,t),i=vR(e),o=t[Dl].rendererFactory,a=16;e.signals?a=4096:e.onPush&&(a=64);let s=Ab(t,Tb(t,i,null,a,r,n,null,o.createRenderer(r,e),null,null,null));t[n.index]=s}function uG(t,n,e,r,i,o){let a=qa(t,n);cG(n[Sr],a,o,t.value,e,r,i)}function cG(t,n,e,r,i,o,a){if(o==null)t.removeAttribute(n,i,e);else{let s=a==null?Ig(o):a(o,r||"",i);t.setAttribute(n,i,s,e)}}function dG(t,n,e,r,i,o){let a=o[n];if(a!==null)for(let s=0;s<a.length;){let l=a[s++],u=a[s++],c=a[s++],d=a[s++];fR(r,e,l,u,c,d)}}function pG(t,n,e){let r=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let a=t[o];for(let s=0;s<a.length;s+=3)if(a[s]===n){r.push(o,a[s+1],a[s+2],e[i+1]);break}}i+=2}return r}function wR(t,n,e,r){return[t,!0,0,n,null,r,null,e,null,null]}function xR(t,n){let e=t.contentQueries;if(e!==null){let r=sr(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],a=e[i+1];if(a!==-1){let s=t.data[a];zI(o),s.contentQueries(2,n[a],a)}}}finally{sr(r)}}}function Ab(t,n){return t[Ag]?t[L4][zs]=n:t[Ag]=n,t[L4]=n,n}function JC(t,n,e){zI(0);let r=sr(null);try{n(t,e)}finally{sr(r)}}function CR(t){return t[Tg]||(t[Tg]=[])}function IR(t){return t.cleanup||(t.cleanup=[])}function SR(t,n){let e=t[ef],r=e?e.get(Gs,null):null;r&&r.handleError(n)}function pS(t,n,e,r,i){for(let o=0;o<e.length;){let a=e[o++],s=e[o++],l=e[o++],u=n[a],c=t.data[a];fR(c,u,r,s,l,i)}}function ER(t,n,e){let r=tM(n,t);Iq(t[Sr],r,e)}function hG(t,n){let e=Pc(n,t),r=e[Sn];fG(r,e);let i=e[Ha];i!==null&&e[fs]===null&&(e[fs]=XI(i,e[ef])),hS(r,e,e[Ws])}function fG(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function hS(t,n,e){WI(n);try{let r=t.viewQuery;r!==null&&JC(1,r,e);let i=t.template;i!==null&&gR(t,n,i,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Du]?.finishViewCreation(t),t.staticContentQueries&&xR(t,n),t.staticViewQueries&&JC(2,t.viewQuery,e);let o=t.components;o!==null&&mG(n,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[an]&=-5,qI()}}function mG(t,n){for(let e=0;e<n.length;e++)hG(t,n[e])}function gG(t,n,e,r){let i=sr(null);try{let o=n.tView,s=t[an]&4096?4096:16,l=Tb(t,o,e,s,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[n.index];l[Vg]=u;let c=t[Du];return c!==null&&(l[Du]=c.createEmbeddedView(o)),hS(o,l,e),l}finally{sr(i)}}function Z4(t,n){return!n||n.firstChild===null||Gy(t)}function vG(t,n,e,r=!0){let i=n[Sn];if(Tq(i,n,t,e),r){let a=QC(e,t),s=n[Sr],l=rS(s,t[Tu]);l!==null&&Eq(i,t[Wa],s,n,l,a)}let o=n[fs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yy(t,n,e,r,i=!1){for(;e!==null;){let o=n[e.index];o!==null&&r.push(qs(o)),Al(o)&&yG(o,r);let a=e.type;if(a&8)Yy(t,n,e.child,r);else if(a&32){let s=eS(e,n),l;for(;l=s();)r.push(l)}else if(a&16){let s=sR(n,e);if(Array.isArray(s))r.push(...s);else{let l=Rg(n[za]);Yy(l[Sn],l,s,r,!0)}}e=i?e.projectionNext:e.next}return r}function yG(t,n){for(let e=va;e<t.length;e++){let r=t[e],i=r[Sn].firstChild;i!==null&&Yy(r[Sn],r,i,n)}t[Tu]!==t[Ha]&&n.push(t[Tu])}var DR=[];function bG(t){return t[Qd]??_G(t)}function _G(t){let n=DR.pop()??Object.create(xG);return n.lView=t,n}function wG(t){t.lView[Qd]!==t&&(t.lView=null,DR.push(t))}var xG=Rn(nt({},vg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Mg(t.lView)},consumerOnSignalRead(){this.lView[Qd]=this}}),TR=100;function AR(t,n=!0,e=0){let r=t[Dl],i=r.rendererFactory,o=!1;o||i.begin?.();try{CG(t,e)}catch(a){throw n&&SR(t,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function CG(t,n){eI(t,n);let e=0;for(;VI(t);){if(e===TR)throw new At(103,!1);e++,eI(t,1)}}function IG(t,n,e,r){let i=n[an];if((i&256)===256)return;let o=!1;!o&&n[Dl].inlineEffectRunner?.flush(),WI(n);let a=null,s=null;!o&&SG(t)&&(s=bG(n),a=Y1(s));try{iM(n),oW(t.bindingStartIndex),e!==null&&gR(t,n,e,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&Ry(n,d,null)}else{let d=t.preOrderHooks;d!==null&&Ny(n,d,0,null),lC(n,0)}if(EG(n),kR(n,0),t.contentQueries!==null&&xR(t,n),!o)if(l){let d=t.contentCheckHooks;d!==null&&Ry(n,d)}else{let d=t.contentHooks;d!==null&&Ny(n,d,1),lC(n,1)}Uq(t,n);let u=t.components;u!==null&&RR(n,u,0);let c=t.viewQuery;if(c!==null&&JC(2,c,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&Ry(n,d)}else{let d=t.viewHooks;d!==null&&Ny(n,d,2),lC(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[My]){for(let d of n[My])d();n[My]=null}o||(n[an]&=-73)}catch(l){throw Mg(n),l}finally{s!==null&&(X1(s,a),wG(s)),qI()}}function SG(t){return t.type!==2}function kR(t,n){for(let e=MM(t);e!==null;e=RM(e))for(let r=va;r<e.length;r++){let i=e[r];MR(i,n)}}function EG(t){for(let n=MM(t);n!==null;n=RM(n)){if(!(n[an]&PI.HasTransplantedViews))continue;let e=n[tf];for(let r=0;r<e.length;r++){let i=e[r],o=i[Zi];$z(i)}}}function DG(t,n,e){let r=Pc(n,t);MR(r,e)}function MR(t,n){BI(t)&&eI(t,n)}function eI(t,n){let r=t[Sn],i=t[an],o=t[Qd],a=!!(n===0&&i&16);if(a||=!!(i&64&&n===0),a||=!!(i&1024),a||=!!(o?.dirty&&Q1(o)),o&&(o.dirty=!1),t[an]&=-9217,a)IG(r,t,r.template,t[Ws]);else if(i&8192){kR(t,1);let s=r.components;s!==null&&RR(t,s,1)}}function RR(t,n,e){for(let r=0;r<n.length;r++)DG(t,n[r],e)}function fS(t){for(t[Dl].changeDetectionScheduler?.notify();t;){t[an]|=64;let n=Rg(t);if(Yk(t)&&!n)return t;t=n}return null}var tp=class{get rootNodes(){let n=this._lView,e=n[Sn];return Yy(e,n,e.firstChild,[])}constructor(n,e,r=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ws]}set context(n){this._lView[Ws]=n}get destroyed(){return(this._lView[an]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Zi];if(Al(n)){let e=n[Uy],r=e?e.indexOf(this):-1;r>-1&&(XC(n,r),Vy(e,r))}this._attachedToViewContainer=!1}rR(this._lView[Sn],this._lView)}onDestroy(n){oM(this._lView,n)}markForCheck(){fS(this._cdRefInjectingView||this._lView)}detach(){this._lView[an]&=-129}reattach(){MC(this._lView),this._lView[an]|=128}detectChanges(){this._lView[an]|=1024,AR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new At(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,tR(this._lView[Sn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new At(902,!1);this._appRef=n,MC(this._lView)}},$s=(()=>{class t{static{this.__NG_ELEMENT_ID__=kG}}return t})(),TG=$s,AG=class extends TG{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){let i=gG(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:r});return new tp(i)}};function kG(){return kb(Qo(),mn())}function kb(t,n){return t.type&4?new AG(n,t,df(t,n)):null}function NR(t){let n=t[kg]??[],r=t[Zi][Sr];for(let i of n)MG(i,r);t[kg]=Yo}function MG(t,n){let e=0,r=t.firstChild;if(r){let i=t.data[$y];for(;e<i;){let o=r.nextSibling;iS(n,r,!1),r=o,e++}}}function FR(t){NR(t);for(let n=va;n<t.length;n++)Xy(t[n])}function RG(t){let n=t[fs]?.i18nNodes;if(n){let e=t[Sr];for(let r of n.values())iS(e,r,!1);t[fs].i18nNodes=void 0}}function Xy(t){RG(t);let n=t[Sn];for(let e=Ji;e<n.bindingStartIndex;e++)if(Al(t[e])){let r=t[e];FR(r)}else Eu(t[e])&&Xy(t[e])}function NG(t){let n=t._views;for(let e of n){let r=YW(e);if(r!==null&&r[Ha]!==null)if(Eu(r))Xy(r);else{let i=r[Ha];Xy(i),FR(r)}}}var FG=new RegExp(`^(\\d+)*(${PM}|${OM})*(.*)`);function OG(t){let n=t.match(FG),[e,r,i,o]=n,a=r?parseInt(r,10):i,s=[];for(let[l,u,c]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(c,10)||1;s.push(u,d)}return[a,...s]}function PG(t){return!t.prev&&t.parent?.type===8}function fC(t){return t.index-Ji}function LG(t,n){let e=t.i18nNodes;if(e){let r=e.get(n);return r&&e.delete(n),r}return null}function Mb(t,n,e,r){let i=fC(r),o=LG(t,i);if(!o){let a=t.data[zW];if(a?.[i])o=VG(a[i],e);else if(n.firstChild===r)o=t.firstChild;else{let s=r.prev===null,l=r.prev??r.parent;if(PG(r)){let u=fC(r.parent);o=UC(t,u)}else{let u=qa(l,e);if(s)o=u.firstChild;else{let c=fC(l),d=UC(t,c);if(l.type===2&&d){let h=QI(t,c)+1;o=Rb(h,d)}else o=u.nextSibling}}}}return o}function Rb(t,n){let e=n;for(let r=0;r<t;r++)e=e.nextSibling;return e}function BG(t,n){let e=t;for(let r=0;r<n.length;r+=2){let i=n[r],o=n[r+1];for(let a=0;a<o;a++)switch(i){case jC.FirstChild:e=e.firstChild;break;case jC.NextSibling:e=e.nextSibling;break}}return e}function VG(t,n){let[e,...r]=OG(t),i;if(e===OM)i=n[za][Ha];else if(e===PM)i=xq(n[za][Ha]);else{let o=Number(e);i=qs(n[o+Ji])}return BG(i,r)}function jG(t,n){let e=[];for(let r of n)for(let i=0;i<(r[LM]??1);i++){let o={data:r,firstChild:null};r[$y]>0&&(o.firstChild=t,t=Rb(r[$y],t)),e.push(o)}return[t,e]}var OR=()=>null;function UG(t,n){let e=t[kg];return!n||e===null||e.length===0?null:e[0].data[HW]===n?e.shift():(NR(t),null)}function HG(){OR=UG}function J4(t,n){return OR(t,n)}var Qy=class{},tI=class{},Zy=class{};function zG(t){let n=Error(`No component factory found for ${Xo(t)}.`);return n[WG]=t,n}var WG="ngComponent";var nI=class{resolveComponentFactory(n){throw zG(n)}},Nb=(()=>{class t{static{this.NULL=new nI}}return t})(),Ng=class{},Wr=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>qG()}}return t})();function qG(){let t=mn(),n=Qo(),e=Pc(n.index,t);return(Eu(e)?e:t)[Sr]}var GG=(()=>{class t{static{this.\u0275prov=xt({token:t,providedIn:"root",factory:()=>null})}}return t})(),mC={};var ek=new Set;function Mu(t){ek.has(t)||(ek.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function tk(...t){}function $G(){let t=typeof Ui.requestAnimationFrame=="function",n=Ui[t?"requestAnimationFrame":"setTimeout"],e=Ui[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}var En=class t{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new At(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$G().nativeRequestAnimationFrame,XG(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new At(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new At(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,n,KG,tk,tk);try{return o.runTask(a,e,r)}finally{o.cancelTask(a)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}},KG={};function mS(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YG(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ui,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,rI(t),t.isCheckStableRunning=!0,mS(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),rI(t))}function XG(t){let n=()=>{YG(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,a,s)=>{if(QG(s))return e.invokeTask(i,o,a,s);try{return nk(t),e.invokeTask(i,o,a,s)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),rk(t)}},onInvoke:(e,r,i,o,a,s,l)=>{try{return nk(t),e.invoke(i,o,a,s,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),rk(t)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,rI(t),mS(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function rI(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function nk(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rk(t){t._nesting--,mS(t)}var iI=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,i){return n.apply(e,r)}};function QG(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function ZG(t="zone.js",n){return t==="noop"?new iI:t==="zone.js"?new En(n):t}var Yh=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Yh||{}),JG={destroy(){}};function Fb(t,n){!n&&Gk(Fb);let e=n?.injector??Qe(Zo);if(!wg(e))return JG;Mu("NgAfterNextRender");let r=e.get(gS),i=r.handler??=new aI,o=n?.phase??Yh.MixedReadWrite,a=()=>{i.unregister(l),s()},s=e.get(_b).onDestroy(a),l=Ks(e,()=>new oI(o,()=>{a(),t()}));return i.register(l),{destroy:a}}var oI=class{constructor(n,e){this.phase=n,this.callbackFn=e,this.zone=Qe(En),this.errorHandler=Qe(Gs,{optional:!0}),Qe(Qy,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}},aI=class{constructor(){this.executingCallbacks=!1,this.buckets={[Yh.EarlyRead]:new Set,[Yh.Write]:new Set,[Yh.MixedReadWrite]:new Set,[Yh.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let e of n)e.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(let n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}},gS=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of e)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Jy(t,n,e){let r=e?t.styles:null,i=e?t.classes:null,o=0;if(n!==null)for(let a=0;a<n.length;a++){let s=n[a];if(typeof s=="number")o=s;else if(o==1)i=xC(i,s);else if(o==2){let l=s,u=n[++a];r=xC(r,l+": "+u+";")}}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=i:t.classesWithoutHost=i}var eb=class extends Nb{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=Rc(n);return new rf(e,this.ngModule)}};function ik(t){let n=[];for(let e in t){if(!t.hasOwnProperty(e))continue;let r=t[e];r!==void 0&&n.push({propName:Array.isArray(r)?r[0]:r,templateName:e})}return n}function e$(t){let n=t.toLowerCase();return n==="svg"?eM:n==="math"?Hz:null}var sI=class{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=cb(r);let i=this.injector.get(n,mC,r);return i!==mC||e===mC?i:this.parentInjector.get(n,e,r)}},rf=class extends Zy{get inputs(){let n=this.componentDef,e=n.inputTransforms,r=ik(n.inputs);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return ik(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=wz(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,i){let o=sr(null);try{i=i||this.ngModule;let a=i instanceof Eo?i:i?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let s=a?new sI(n,a):n,l=s.get(Ng,null);if(l===null)throw new At(407,!1);let u=s.get(GG,null),c=s.get(gS,null),d=s.get(Qy,null),p={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:d},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?Wq(h,r,this.componentDef.encapsulation,s):Sb(h,f,e$(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;m!==null&&(y=XI(m,s,!0));let b=uS(0,null,null,1,0,null,null,null,null,null,null),w=Tb(null,b,null,g,null,null,p,h,s,null,y);WI(w);let x,I;try{let D=this.componentDef,A,E=null;D.findHostDirectiveDefs?(A=[],E=new Map,D.findHostDirectiveDefs(D,A,E),A.push(D)):A=[D];let R=t$(w,m),N=n$(R,m,D,A,w,p,h);I=nM(b,Ji),m&&o$(h,D,m,r),e!==void 0&&a$(I,this.ngContentSelectors,e),x=i$(N,D,A,E,w,[s$]),hS(b,w,null)}finally{qI()}return new lI(this.componentType,x,df(I,w),w,I)}finally{sr(o)}}},lI=class extends tI{constructor(n,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new tp(i,void 0,!1),this.componentType=n}setInput(n,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let o=this._rootLView;pS(o[Sn],o,i,n,e),this.previousInputValues.set(n,e);let a=Pc(this._tNode.index,o);fS(a)}}get injector(){return new Kd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function t$(t,n){let e=t[Sn],r=Ji;return t[r]=n,hf(e,r,2,"#host",null)}function n$(t,n,e,r,i,o,a){let s=i[Sn];r$(r,t,n,a);let l=null;n!==null&&(l=XI(n,i[ef]));let u=o.rendererFactory.createRenderer(n,e),c=16;e.signals?c=4096:e.onPush&&(c=64);let d=Tb(i,vR(e),null,c,i[t.index],t,o,u,null,null,l);return s.firstCreatePass&&ZC(s,t,r.length-1),Ab(i,d),i[t.index]=d}function r$(t,n,e,r){for(let i of t)n.mergedAttrs=Eg(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(Jy(n,n.mergedAttrs,!0),e!==null&&dR(r,e,n))}function i$(t,n,e,r,i,o){let a=Qo(),s=i[Sn],l=qa(a,i);bR(s,i,a,e,null,r);for(let c=0;c<e.length;c++){let d=a.directiveStart+c,p=ep(i,s,d,a);Fc(p,i)}_R(s,i,a),l&&Fc(l,i);let u=ep(i,s,a.directiveStart+a.componentOffset,a);if(t[Ws]=i[Ws]=u,o!==null)for(let c of o)c(u,n);return aS(s,a,i),u}function o$(t,n,e,r){if(r)EC(t,e,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=xz(n.selectors[0]);i&&EC(t,e,i),o&&o.length>0&&cR(t,e,o.join(" "))}}function a$(t,n,e){let r=t.projection=[];for(let i=0;i<n.length;i++){let o=e[i];r.push(o!=null?Array.from(o):null)}}function s$(){let t=Qo();bb(mn()[Sn],t)}var Ys=(()=>{class t{static{this.__NG_ELEMENT_ID__=l$}}return t})();function l$(){let t=Qo();return LR(t,mn())}var u$=Ys,PR=class extends u${constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new Kd(this._hostTNode,this._hostLView)}get parentInjector(){let n=GI(this._hostTNode,this._hostLView);if(vM(n)){let e=zy(n,this._hostLView),r=Hy(n),i=e[Sn].data[r+8];return new Kd(i,e)}else return new Kd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=ok(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-va}createEmbeddedView(n,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=J4(this._lContainer,n.ssrId),s=n.createEmbeddedViewImpl(e||{},o,a);return this.insertImpl(s,i,Z4(this._hostTNode,a)),s}createComponent(n,e,r,i,o){let a=n&&!Bz(n),s;if(a)s=e;else{let f=e||{};s=f.index,r=f.injector,i=f.projectableNodes,o=f.environmentInjector||f.ngModuleRef}let l=a?n:new rf(Rc(n)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let m=(a?u:this.parentInjector).get(Eo,null);m&&(o=m)}let c=Rc(l.componentType??{}),d=J4(this._lContainer,c?.id??null),p=d?.firstChild??null,h=l.create(u,i,p,o);return this.insertImpl(h.hostView,s,Z4(this._hostTNode,d)),h}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,r){let i=n._lView;if(Gz(i)){let s=this.indexOf(n);if(s!==-1)this.detach(s);else{let l=i[Zi],u=new PR(l,l[Wa],l[Zi]);u.detach(u.indexOf(n))}}let o=this._adjustIndex(e),a=this._lContainer;return vG(a,i,o,r),n.attachToViewContainerRef(),Tk(gC(a),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=ok(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),r=XC(this._lContainer,e);r&&(Vy(gC(this._lContainer),e),rR(r[Sn],r))}detach(n){let e=this._adjustIndex(n,-1),r=XC(this._lContainer,e);return r&&Vy(gC(this._lContainer),e)!=null?new tp(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function ok(t){return t[Uy]}function gC(t){return t[Uy]||(t[Uy]=[])}function LR(t,n){let e,r=n[t.index];return Al(r)?e=r:(e=wR(r,n,null,t),n[t.index]=e,Ab(n,e)),BR(e,n,t,r),new PR(e,t,n)}function c$(t,n){let e=t[Sr],r=e.createComment(""),i=qa(n,t),o=rS(e,i);return Ky(e,o,r,Fq(e,i),!1),r}var BR=VR,vS=()=>!1;function d$(t,n,e){return vS(t,n,e)}function VR(t,n,e,r){if(t[Tu])return;let i;e.type&8?i=qs(r):i=c$(n,e),t[Tu]=i}function p$(t,n,e){if(t[Tu]&&t[kg])return!0;let r=e[fs],i=n.index-Ji;if(!r||RW(n)||Cb(r,i))return!1;let a=UC(r,i),s=r.data[YI]?.[i],[l,u]=jG(a,s);return t[Tu]=l,t[kg]=u,!0}function h$(t,n,e,r){vS(t,e,n)||VR(t,n,e,r)}function f$(){BR=h$,vS=p$}var uI=class t{constructor(n){this.queryList=n,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},cI=class t{constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let r=n.contentQueries!==null?n.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let a=e.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new t(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)yS(n,e).matches!==null&&this.queries[e].setDirty()}},tb=class{constructor(n,e,r=null){this.flags=e,this.read=r,typeof n=="string"?this.predicate=x$(n):this.predicate=n}},dI=class t{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new t(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},pI=class t{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,e,m$(e,o)),this.matchTNodeWithReadOption(n,e,Fy(e,n,o,!1,!1))}else r===$s?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Fy(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===zn||i===Ys||i===$s&&e.type&4)this.addMatch(e.index,-2);else{let o=Fy(e,n,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function m$(t,n){let e=t.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1]}return null}function g$(t,n){return t.type&11?df(t,n):t.type&4?kb(t,n):null}function v$(t,n,e,r){return e===-1?g$(n,t):e===-2?y$(t,n,r):ep(t,t[Sn],e,n)}function y$(t,n,e){if(e===zn)return df(n,t);if(e===$s)return kb(n,t);if(e===Ys)return LR(n,t)}function jR(t,n,e,r){let i=n[Du].queries[r];if(i.matches===null){let o=t.data,a=e.matches,s=[];for(let l=0;a!==null&&l<a.length;l+=2){let u=a[l];if(u<0)s.push(null);else{let c=o[u];s.push(v$(n,c,a[l+1],e.metadata.read))}}i.matches=s}return i.matches}function hI(t,n,e,r){let i=t.queries.getByIndex(e),o=i.matches;if(o!==null){let a=jR(t,n,i,e);for(let s=0;s<o.length;s+=2){let l=o[s];if(l>0)r.push(a[s/2]);else{let u=o[s+1],c=n[-l];for(let d=va;d<c.length;d++){let p=c[d];p[Vg]===p[Zi]&&hI(p[Sn],p,u,r)}if(c[tf]!==null){let d=c[tf];for(let p=0;p<d.length;p++){let h=d[p];hI(h[Sn],h,u,r)}}}}}return r}function b$(t,n){return t[Du].queries[n].queryList}function UR(t,n,e){let r=new BC((e&4)===4);return Kq(t,n,r,r.destroy),(n[Du]??=new cI).queries.push(new uI(r))-1}function _$(t,n,e){let r=oi();return r.firstCreatePass&&(HR(r,new tb(t,n,e),-1),(n&2)===2&&(r.staticViewQueries=!0)),UR(r,mn(),n)}function w$(t,n,e,r){let i=oi();if(i.firstCreatePass){let o=Qo();HR(i,new tb(n,e,r),o.index),C$(i,t),(e&2)===2&&(i.staticContentQueries=!0)}return UR(i,mn(),e)}function x$(t){return t.split(",").map(n=>n.trim())}function HR(t,n,e){t.queries===null&&(t.queries=new dI),t.queries.track(new pI(n,e))}function C$(t,n){let e=t.contentQueries||(t.contentQueries=[]),r=e.length?e[e.length-1]:-1;n!==r&&e.push(t.queries.length-1,n)}function yS(t,n){return t.queries.getByIndex(n)}function I$(t,n){let e=t[Sn],r=yS(e,n);return r.crossesNgTemplate?hI(e,t,n,[]):jR(e,t,r,n)}function S$(t){return typeof t=="function"&&t[Cl]!==void 0}function Nl(t,n){Mu("NgSignals");let e=e4(t),r=e[Cl];return n?.equal&&(r.equal=n.equal),e.set=i=>zx(r,i),e.update=i=>t4(r,i),e.asReadonly=E$.bind(e),e}function E$(){let t=this[Cl];if(t.readonlyFn===void 0){let n=()=>this();n[Cl]=t,t.readonlyFn=n}return t.readonlyFn}function zR(t){return S$(t)&&typeof t.set=="function"}function D$(t){let n=[],e=new Map;function r(i){let o=e.get(i);if(!o){let a=t(i);e.set(i,o=a.then(M$))}return o}return nb.forEach((i,o)=>{let a=[];i.templateUrl&&a.push(r(i.templateUrl).then(u=>{i.template=u}));let s=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=s,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,c=i.styleUrls;i.styleUrls.forEach((d,p)=>{s.push(""),a.push(r(d).then(h=>{s[u+p]=h,c.splice(c.indexOf(d),1),c.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&a.push(r(i.styleUrl).then(u=>{s.push(u),i.styleUrl=void 0}));let l=Promise.all(a).then(()=>R$(o));n.push(l)}),A$(),Promise.all(n).then(()=>{})}var nb=new Map,T$=new Set;function A$(){let t=nb;return nb=new Map,t}function k$(){return nb.size===0}function M$(t){return typeof t=="string"?t:t.text()}function R$(t){T$.delete(t)}function N$(t){return Object.getPrototypeOf(t.prototype).constructor}function Vt(t){let n=N$(t.type),e=!0,r=[t];for(;n;){let i;if(Nc(t))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new At(903,!1);i=n.\u0275dir}if(i){if(e){r.push(i);let a=t;a.inputs=Ey(t.inputs),a.inputTransforms=Ey(t.inputTransforms),a.declaredInputs=Ey(t.declaredInputs),a.outputs=Ey(t.outputs);let s=i.hostBindings;s&&B$(t,s);let l=i.viewQuery,u=i.contentQueries;if(l&&P$(t,l),u&&L$(t,u),F$(t,i),VH(t.outputs,i.outputs),Nc(i)&&i.data.animation){let c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(t),s===Vt&&(e=!1)}}n=Object.getPrototypeOf(n)}O$(r)}function F$(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let r=n.inputs[e];if(r!==void 0&&(t.inputs[e]=r,t.declaredInputs[e]=n.declaredInputs[e],n.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!n.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=n.inputTransforms[i]}}}function O$(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Eg(i.hostAttrs,e=Eg(e,i.hostAttrs))}}function Ey(t){return t===Zh?{}:t===Yo?[]:t}function P$(t,n){let e=t.viewQuery;e?t.viewQuery=(r,i)=>{n(r,i),e(r,i)}:t.viewQuery=n}function L$(t,n){let e=t.contentQueries;e?t.contentQueries=(r,i,o)=>{n(r,i,o),e(r,i,o)}:t.contentQueries=n}function B$(t,n){let e=t.hostBindings;e?t.hostBindings=(r,i)=>{n(r,i),e(r,i)}:t.hostBindings=n}function Er(t){let n=t.inputConfig,e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r];Array.isArray(i)&&i[3]&&(e[r]=i[3])}t.inputTransforms=e}var Oc=class{},Fg=class{};var rb=class extends Oc{constructor(n,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new eb(this);let i=Bk(n);this._bootstrapComponents=eR(i.bootstrap),this._r3Injector=EM(n,e,[{provide:Oc,useValue:this},{provide:Nb,useValue:this.componentFactoryResolver},...r],Xo(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},ib=class extends Fg{constructor(n){super(),this.moduleType=n}create(n){return new rb(this.moduleType,n,[])}};function V$(t,n,e){return new rb(t,n,e)}var fI=class extends Oc{constructor(n){super(),this.componentFactoryResolver=new eb(this),this.instance=null;let e=new Dg([...n.providers,{provide:Oc,useValue:this},{provide:Nb,useValue:this.componentFactoryResolver}],n.parent||OI(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Ob(t,n,e=null){return new fI({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var Vc=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mo(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function WR(t){return bS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function j$(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),r;for(;!(r=e.next()).done;)n(r.value)}}function bS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Ru(t,n,e){return t[n]=e}function Pb(t,n){return t[n]}function ms(t,n,e){let r=t[n];return Object.is(r,e)?!1:(t[n]=e,!0)}function of(t,n,e,r){let i=ms(t,n,e);return ms(t,n+1,r)||i}function qR(t,n,e,r,i){let o=of(t,n,e,r);return ms(t,n+2,i)||o}function Lb(t,n,e,r,i,o){let a=of(t,n,e,r);return of(t,n+2,i,o)||a}function zg(t){return(t.flags&32)===32}function U$(t,n,e,r,i,o,a,s,l){let u=n.consts,c=hf(n,t,4,a||null,nf(u,s));dS(n,e,c,nf(u,l)),bb(n,c);let d=c.tView=uS(2,c,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,u,null);return n.queries!==null&&(n.queries.template(n,c),d.queries=n.queries.embeddedTView(c)),c}function ce(t,n,e,r,i,o,a,s){let l=mn(),u=oi(),c=t+Ji,d=u.firstCreatePass?U$(c,u,l,n,e,r,i,o,a):u.data[c];rp(d,!1);let p=GR(u,l,d,t);yb()&&Eb(u,l,p,d),Fc(p,l);let h=wR(p,l,p,d);return l[c]=h,Ab(l,h),d$(h,d,l),mb(d)&&sS(u,l,d),a!=null&&lS(l,d,s),ce}var GR=$R;function $R(t,n,e,r){return Ml(!0),n[Sr].createComment("")}function H$(t,n,e,r){let i=n[fs],o=!i||cf()||zg(e)||Cb(i,r);if(Ml(o),o)return $R(t,n,e,r);let a=i.data[UW]?.[r]??null;a!==null&&e.tView!==null&&e.tView.ssrId===null&&(e.tView.ssrId=a);let s=Mb(i,t,n,e);xb(i,r,s);let l=QI(i,r);return Rb(l,s)}function z$(){GR=H$}function Ne(t,n,e,r){let i=mn(),o=gb();if(ms(i,o,n)){let a=oi(),s=vb();uG(s,i,t,n,e,r)}return Ne}function KR(t,n,e,r){return ms(t,gb(),e)?n+Ig(e)+r:Ga}function W$(t,n,e,r,i,o){let a=iW(),s=of(t,a,e,i);return HI(2),s?n+Ig(e)+r+Ig(i)+o:Ga}function Dy(t,n){return t<<17|n<<2}function np(t){return t>>17&32767}function q$(t){return(t&2)==2}function G$(t,n){return t&131071|n<<17}function mI(t){return t|2}function af(t){return(t&131068)>>2}function vC(t,n){return t&-131069|n<<2}function $$(t){return(t&1)===1}function gI(t){return t|1}function K$(t,n,e,r,i,o){let a=o?n.classBindings:n.styleBindings,s=np(a),l=af(a);t[r]=e;let u=!1,c;if(Array.isArray(e)){let d=e;c=d[1],(c===null||Bg(d,c)>0)&&(u=!0)}else c=e;if(i)if(l!==0){let p=np(t[s+1]);t[r+1]=Dy(p,s),p!==0&&(t[p+1]=vC(t[p+1],r)),t[s+1]=G$(t[s+1],r)}else t[r+1]=Dy(s,0),s!==0&&(t[s+1]=vC(t[s+1],r)),s=r;else t[r+1]=Dy(l,0),s===0?s=r:t[l+1]=vC(t[l+1],r),l=r;u&&(t[r+1]=mI(t[r+1])),ak(t,c,r,!0),ak(t,c,r,!1),Y$(n,c,t,r,o),a=Dy(s,l),o?n.classBindings=a:n.styleBindings=a}function Y$(t,n,e,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof n=="string"&&Bg(o,n)>=0&&(e[r+1]=gI(e[r+1]))}function ak(t,n,e,r){let i=t[e+1],o=n===null,a=r?np(i):af(i),s=!1;for(;a!==0&&(s===!1||o);){let l=t[a],u=t[a+1];X$(l,n)&&(s=!0,t[a+1]=r?gI(u):mI(u)),a=r?np(u):af(u)}s&&(t[e+1]=r?mI(i):gI(i))}function X$(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?Bg(t,n)>=0:!1}var ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YR(t){return t.substring(ji.key,ji.keyEnd)}function Q$(t){return t.substring(ji.value,ji.valueEnd)}function Z$(t){return ZR(t),XR(t,sf(t,0,ji.textEnd))}function XR(t,n){let e=ji.textEnd;return e===n?-1:(n=ji.keyEnd=eK(t,ji.key=n,e),sf(t,n,e))}function J$(t){return ZR(t),QR(t,sf(t,0,ji.textEnd))}function QR(t,n){let e=ji.textEnd,r=ji.key=sf(t,n,e);return e===r?-1:(r=ji.keyEnd=tK(t,r,e),r=sk(t,r,e,58),r=ji.value=sf(t,r,e),r=ji.valueEnd=nK(t,r,e),sk(t,r,e,59))}function ZR(t){ji.key=0,ji.keyEnd=0,ji.value=0,ji.valueEnd=0,ji.textEnd=t.length}function sf(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function eK(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function tK(t,n,e){let r;for(;n<e&&((r=t.charCodeAt(n))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)n++;return n}function sk(t,n,e,r){return n=sf(t,n,e),n<e&&n++,n}function nK(t,n,e){let r=-1,i=-1,o=-1,a=n,s=a;for(;a<e;){let l=t.charCodeAt(a++);if(l===59)return s;l===34||l===39?s=a=lk(t,l,a,e):n===a-4&&o===85&&i===82&&r===76&&l===40?s=a=lk(t,41,a,e):l>32&&(s=a),o=i,i=r,r=l&-33}return s}function lk(t,n,e,r){let i=-1,o=e;for(;o<r;){let a=t.charCodeAt(o++);if(a==n&&i!==92)return o;a==92&&i===92?i=0:i=a}throw new Error}function O(t,n,e){let r=mn(),i=gb();if(ms(r,i,n)){let o=oi(),a=vb();cS(o,a,r,t,n,r[Sr],e,!1)}return O}function vI(t,n,e,r,i){let o=n.inputs,a=i?"class":"style";pS(t,e,o[a],a,r)}function Wg(t,n,e){return JR(t,n,e,!1),Wg}function go(t,n){return JR(t,n,null,!0),go}function Bb(t){eN(rN,rK,t,!1)}function rK(t,n){for(let e=J$(n);e>=0;e=QR(n,e))rN(t,YR(n),Q$(n))}function ft(t){eN(cK,iK,t,!0)}function iK(t,n){for(let e=Z$(n);e>=0;e=XR(n,e))pb(t,YR(n),!0)}function JR(t,n,e,r){let i=mn(),o=oi(),a=HI(2);if(o.firstUpdatePass&&nN(o,t,a,r),n!==Ga&&ms(i,a,n)){let s=o.data[Lc()];iN(o,s,i,i[Sr],t,i[a+1]=pK(n,e),r,a)}}function eN(t,n,e,r){let i=oi(),o=HI(2);i.firstUpdatePass&&nN(i,null,o,r);let a=mn();if(e!==Ga&&ms(a,o,e)){let s=i.data[Lc()];if(oN(s,r)&&!tN(i,o)){let l=r?s.classesWithoutHost:s.stylesWithoutHost;l!==null&&(e=xC(l,e||"")),vI(i,s,a,e,r)}else dK(i,s,a,a[Sr],a[o+1],a[o+1]=uK(t,n,e),r,o)}}function tN(t,n){return n>=t.expandoStartIndex}function nN(t,n,e,r){let i=t.data;if(i[e+1]===null){let o=i[Lc()],a=tN(t,e);oN(o,r)&&n===null&&!a&&(n=!1),n=oK(i,o,n,r),K$(i,o,n,e,a,r)}}function oK(t,n,e,r){let i=uW(t),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(e=yC(null,t,n,e,r),e=Og(e,n.attrs,r),o=null);else{let a=n.directiveStylingLast;if(a===-1||t[a]!==i)if(e=yC(i,t,n,e,r),o===null){let l=aK(t,n,r);l!==void 0&&Array.isArray(l)&&(l=yC(null,t,n,l[1],r),l=Og(l,n.attrs,r),sK(t,n,r,l))}else o=lK(t,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),e}function aK(t,n,e){let r=e?n.classBindings:n.styleBindings;if(af(r)!==0)return t[np(r)]}function sK(t,n,e,r){let i=e?n.classBindings:n.styleBindings;t[np(i)]=r}function lK(t,n,e){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let a=t[o].hostAttrs;r=Og(r,a,e)}return Og(r,n.attrs,e)}function yC(t,n,e,r,i){let o=null,a=e.directiveEnd,s=e.directiveStylingLast;for(s===-1?s=e.directiveStart:s++;s<a&&(o=n[s],r=Og(r,o.hostAttrs,i),o!==t);)s++;return t!==null&&(e.directiveStylingLast=s),r}function Og(t,n,e){let r=e?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let a=n[o];typeof a=="number"?i=a:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),pb(t,a,e?!0:n[++o]))}return t===void 0?null:t}function uK(t,n,e){if(e==null||e==="")return Yo;let r=[],i=Rl(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function rN(t,n,e){pb(t,n,Rl(e))}function cK(t,n,e){let r=String(n);r!==""&&!r.includes(" ")&&pb(t,r,e)}function dK(t,n,e,r,i,o,a,s){i===Ga&&(i=Yo);let l=0,u=0,c=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;c!==null||d!==null;){let p=l<i.length?i[l+1]:void 0,h=u<o.length?o[u+1]:void 0,f=null,m;c===d?(l+=2,u+=2,p!==h&&(f=d,m=h)):d===null||c!==null&&c<d?(l+=2,f=c):(u+=2,f=d,m=h),f!==null&&iN(t,n,e,r,f,m,a,s),c=l<i.length?i[l]:null,d=u<o.length?o[u]:null}}function iN(t,n,e,r,i,o,a,s){if(!(n.type&3))return;let l=t.data,u=l[s+1],c=$$(u)?uk(l,n,e,i,af(u),a):void 0;if(!ob(c)){ob(o)||q$(u)&&(o=uk(l,null,e,i,s,a));let d=tM(Lc(),e);Vq(r,a,d,i,o)}}function uk(t,n,e,r,i,o){let a=n===null,s;for(;i>0;){let l=t[i],u=Array.isArray(l),c=u?l[1]:l,d=c===null,p=e[i+1];p===Ga&&(p=d?Yo:void 0);let h=d?aC(p,r):c===r?p:void 0;if(u&&!ob(h)&&(h=aC(l,r)),ob(h)&&(s=h,a))return s;let f=t[i+1];i=a?np(f):af(f)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(s=aC(l,r))}return s}function ob(t){return t!==void 0}function pK(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=Xo(Rl(t)))),t}function oN(t,n){return(t.flags&(n?8:16))!==0}function hK(t,n,e,r,i,o){let a=n.consts,s=nf(a,i),l=hf(n,t,2,r,s);return dS(n,e,l,nf(a,o)),l.attrs!==null&&Jy(l,l.attrs,!1),l.mergedAttrs!==null&&Jy(l,l.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,l),l}function ie(t,n,e,r){let i=mn(),o=oi(),a=Ji+t,s=i[Sr],l=o.firstCreatePass?hK(a,o,i,n,e,r):o.data[a],u=aN(o,i,l,s,n,t);i[a]=u;let c=mb(l);return rp(l,!0),dR(s,u,l),!zg(l)&&yb()&&Eb(o,i,u,l),Xz()===0&&Fc(u,i),Qz(),c&&(sS(o,i,l),aS(o,l,i)),r!==null&&lS(i,l),ie}function oe(){let t=Qo();jI()?UI():(t=t.parent,rp(t,!1));let n=t;Jz(n)&&tW(),Zz();let e=oi();return e.firstCreatePass&&(bb(e,t),LI(t)&&e.queries.elementEnd(t)),n.classesWithoutHost!=null&&mW(n)&&vI(e,n,mn(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&gW(n)&&vI(e,n,mn(),n.stylesWithoutHost,!1),oe}function Ve(t,n,e,r){return ie(t,n,e,r),oe(),Ve}var aN=(t,n,e,r,i,o)=>(Ml(!0),Sb(r,i,fM()));function fK(t,n,e,r,i,o){let a=n[fs],s=!a||cf()||zg(e)||Cb(a,o);if(Ml(s),s)return Sb(r,i,fM());let l=Mb(a,t,n,e);return jM(a,o)&&xb(a,o,l.nextSibling),a&&(TM(e)||AM(l))&&jg(e)&&(eW(e),lR(l)),l}function mK(){aN=fK}function gK(t,n,e,r,i){let o=n.consts,a=nf(o,r),s=hf(n,t,8,"ng-container",a);a!==null&&Jy(s,a,!0);let l=nf(o,i);return dS(n,e,s,l),n.queries!==null&&n.queries.elementStart(n,s),s}function yt(t,n,e){let r=mn(),i=oi(),o=t+Ji,a=i.firstCreatePass?gK(o,i,r,n,e):i.data[o];rp(a,!0);let s=sN(i,r,a,t);return r[o]=s,yb()&&Eb(i,r,s,a),Fc(s,r),mb(a)&&(sS(i,r,a),aS(i,a,r)),e!=null&&lS(r,a),yt}function bt(){let t=Qo(),n=oi();return jI()?UI():(t=t.parent,rp(t,!1)),n.firstCreatePass&&(bb(n,t),LI(t)&&n.queries.elementEnd(t)),bt}function St(t,n,e){return yt(t,n,e),bt(),St}var sN=(t,n,e,r)=>(Ml(!0),nS(n[Sr],""));function vK(t,n,e,r){let i,o=n[fs],a=!o||cf()||zg(e);if(Ml(a),a)return nS(n[Sr],"");let s=Mb(o,t,n,e),l=ZW(o,r);return xb(o,r,s),i=Rb(l,s),i}function yK(){sN=vK}function jt(){return mn()}var $d=void 0;function bK(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var _K=["en",[["a","p"],["AM","PM"],$d],[["AM","PM"],$d,$d],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$d,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$d,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$d,"{1} 'at' {0}",$d],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bK],bC={};function Vb(t){let n=wK(t),e=ck(n);if(e)return e;let r=n.split("-")[0];if(e=ck(r),e)return e;if(r==="en")return _K;throw new At(701,!1)}function ck(t){return t in bC||(bC[t]=Ui.ng&&Ui.ng.common&&Ui.ng.common.locales&&Ui.ng.common.locales[t]),bC[t]}var op=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(op||{});function wK(t){return t.toLowerCase().replace(/_/g,"-")}var ab="en-US",xK="USD";var CK=ab;function IK(t){typeof t=="string"&&(CK=t.toLowerCase().replace(/_/g,"-"))}function lN(t,n,e){let r=t[Sr];switch(e){case Node.COMMENT_NODE:return nS(r,n);case Node.TEXT_NODE:return tS(r,n);case Node.ELEMENT_NODE:return Sb(r,n,null)}}var SK=(t,n,e,r)=>(Ml(!0),lN(t,e,r));function EK(t,n,e,r){return Ml(!0),lN(t,e,r)}function DK(){SK=EK}function et(t,n,e,r){let i=mn(),o=oi(),a=Qo();return uN(o,i,i[Sr],a,t,n,r),et}function TK(t,n,e,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===e&&i[o+1]===r){let s=n[Tg],l=i[o+2];return s.length>l?s[l]:null}typeof a=="string"&&(o+=2)}return null}function uN(t,n,e,r,i,o,a){let s=mb(r),u=t.firstCreatePass&&IR(t),c=n[Ws],d=CR(n),p=!0;if(r.type&3||a){let m=qa(r,n),g=a?a(m):m,y=d.length,b=a?x=>a(qs(x[r.index])):r.index,w=null;if(!a&&s&&(w=TK(t,n,i,r.index)),w!==null){let x=w.__ngLastListenerFn__||w;x.__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,p=!1}else{o=pk(r,n,c,o,!1);let x=e.listen(g,i,o);d.push(o,x),u&&u.push(i,b,y,y+1)}}else o=pk(r,n,c,o,!1);let h=r.outputs,f;if(p&&h!==null&&(f=h[i])){let m=f.length;if(m)for(let g=0;g<m;g+=2){let y=f[g],b=f[g+1],I=n[y][b].subscribe(o),D=d.length;d.push(o,I),u&&u.push(i,r.index,D,-(D+1))}}}function dk(t,n,e,r){let i=sr(null);try{return Il(6,n,e),e(r)!==!1}catch(o){return SR(t,o),!1}finally{Il(7,n,e),sr(i)}}function pk(t,n,e,r,i){return function o(a){if(a===Function)return r;let s=t.componentOffset>-1?Pc(t.index,n):n;fS(s);let l=dk(n,e,r,a),u=o.__ngNextListenerFn__;for(;u;)l=dk(n,e,u,a)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&a.preventDefault(),l}}function j(t=1){return dW(t)}function AK(t,n){let e=null,r=gz(t);for(let i=0;i<n.length;i++){let o=n[i];if(o==="*"){e=i;continue}if(r===null?Nk(t,o,!0):bz(r,o))return i}return e}function Xs(t){let n=mn()[za][Wa];if(!n.projection){let e=t?t.length:1,r=n.projection=az(e,null),i=r.slice(),o=n.child;for(;o!==null;){let a=t?AK(o,t):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function gs(t,n=0,e){let r=mn(),i=oi(),o=hf(i,Ji+t,16,null,e||null);o.projection===null&&(o.projection=n),UI(),(!r[fs]||cf())&&(o.flags&32)!==32&&Lq(i,r,o)}function Nu(t,n,e){return cN(t,"",n,"",e),Nu}function cN(t,n,e,r,i){let o=mn(),a=KR(o,n,e,r);if(a!==Ga){let s=oi(),l=vb();cS(s,l,o,t,a,o[Sr],i,!1)}return cN}function vi(t,n,e,r){w$(t,n,e,r)}function Zn(t,n,e){_$(t,n,e)}function sn(t){let n=mn(),e=oi(),r=lM();zI(r+1);let i=yS(e,r);if(t.dirty&&qz(n)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=I$(n,r);t.reset(o,TW),t.notifyOnChanges()}return!0}return!1}function ln(){return b$(mn(),lM())}function kK(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}function yi(t){let n=rW();return rM(n,Ji+t)}function st(t,n=""){let e=mn(),r=oi(),i=t+Ji,o=r.firstCreatePass?hf(r,i,1,n,null):r.data[i],a=dN(r,e,o,n,t);e[i]=a,yb()&&Eb(r,e,a,o),rp(o,!1)}var dN=(t,n,e,r,i)=>(Ml(!0),tS(n[Sr],r));function MK(t,n,e,r,i){let o=n[fs],a=!o||cf()||zg(e)||Cb(o,i);return Ml(a),a?tS(n[Sr],r):Mb(o,t,n,e)}function RK(){dN=MK}function ir(t){return fr("",t,""),ir}function fr(t,n,e){let r=mn(),i=KR(r,t,n,e);return i!==Ga&&ER(r,Lc(),i),fr}function _S(t,n,e,r,i){let o=mn(),a=W$(o,t,n,e,r,i);return a!==Ga&&ER(o,Lc(),a),_S}function Ai(t,n,e){zR(n)&&(n=n());let r=mn(),i=gb();if(ms(r,i,n)){let o=oi(),a=vb();cS(o,a,r,t,n,r[Sr],e,!1)}return Ai}function Hi(t,n){let e=zR(t);return e&&t.set(n),e}function ki(t,n){let e=mn(),r=oi(),i=Qo();return uN(r,e,e[Sr],i,t,n),ki}function NK(t,n,e){let r=oi();if(r.firstCreatePass){let i=Nc(t);yI(e,r.data,r.blueprint,i,!0),yI(n,r.data,r.blueprint,i,!1)}}function yI(t,n,e,r,i){if(t=Ko(t),Array.isArray(t))for(let o=0;o<t.length;o++)yI(t[o],n,e,r,i);else{let o=oi(),a=mn(),s=Qo(),l=Jh(t)?t:Ko(t.provide),u=Wk(t),c=s.providerIndexes&1048575,d=s.directiveStart,p=s.providerIndexes>>20;if(Jh(t)||!t.multi){let h=new Jd(u,i,Oe),f=wC(l,n,i?c:c+p,d);f===-1?(FC(qy(s,a),o,l),_C(o,t,n.length),n.push(l),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),e.push(h),a.push(h)):(e[f]=h,a[f]=h)}else{let h=wC(l,n,c+p,d),f=wC(l,n,c,c+p),m=h>=0&&e[h],g=f>=0&&e[f];if(i&&!g||!i&&!m){FC(qy(s,a),o,l);let y=PK(i?OK:FK,e.length,i,r,u);!i&&g&&(e[f].providerFactory=y),_C(o,t,n.length,0),n.push(l),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),e.push(y),a.push(y)}else{let y=pN(e[i?f:h],u,!i&&r);_C(o,t,h>-1?h:f,y)}!i&&r&&g&&e[f].componentProviders++}}}function _C(t,n,e,r){let i=Jh(n),o=kz(n);if(i||o){let l=(o?Ko(n.useClass):n).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&n.multi){let c=u.indexOf(e);c===-1?u.push(e,[r,l]):u[c+1].push(r,l)}else u.push(e,l)}}}function pN(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function wC(t,n,e,r){for(let i=e;i<r;i++)if(n[i]===t)return i;return-1}function FK(t,n,e,r){return bI(this.multi,[])}function OK(t,n,e,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=ep(e,e[Sn],this.providerFactory.index,r);o=s.slice(0,a),bI(i,o);for(let l=a;l<s.length;l++)o.push(s[l])}else o=[],bI(i,o);return o}function bI(t,n){for(let e=0;e<t.length;e++){let r=t[e];n.push(r())}return n}function PK(t,n,e,r,i){let o=new Jd(t,e,Oe);return o.multi=[],o.index=n,o.componentProviders=0,pN(o,i,r&&!e),o}function ai(t,n=[]){return e=>{e.providersResolver=(r,i)=>NK(r,i?i(t):t,n)}}var LK=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Uk(!1,e.type),i=r.length>0?Ob([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=xt({token:t,providedIn:"environment",factory:()=>new t(Bt(Eo))})}}return t})();function Wt(t){Mu("NgStandalone"),t.getStandaloneInjector=n=>n.get(LK).getOrCreateStandaloneInjector(t)}function Jo(t,n,e){let r=kl()+t,i=mn();return i[r]===Ga?Ru(i,r,e?n.call(e):n()):Pb(i,r)}function Gt(t,n,e,r){return BK(mn(),kl(),t,n,e,r)}function si(t,n,e,r,i){return fN(mn(),kl(),t,n,e,r,i)}function vo(t,n,e,r,i,o){return VK(mn(),kl(),t,n,e,r,i,o)}function wS(t,n,e,r,i,o,a){return jK(mn(),kl(),t,n,e,r,i,o,a)}function ff(t,n,e,r,i,o,a,s){let l=kl()+t,u=mn(),c=Lb(u,l,e,r,i,o);return ms(u,l+4,a)||c?Ru(u,l+5,s?n.call(s,e,r,i,o,a):n(e,r,i,o,a)):Pb(u,l+5)}function ap(t,n,e,r,i,o,a,s,l){let u=kl()+t,c=mn(),d=Lb(c,u,e,r,i,o);return of(c,u+4,a,s)||d?Ru(c,u+6,l?n.call(l,e,r,i,o,a,s):n(e,r,i,o,a,s)):Pb(c,u+6)}function hN(t,n,e,r,i,o,a,s,l,u){let c=kl()+t,d=mn(),p=Lb(d,c,e,r,i,o);return qR(d,c+4,a,s,l)||p?Ru(d,c+7,u?n.call(u,e,r,i,o,a,s,l):n(e,r,i,o,a,s,l)):Pb(d,c+7)}function xS(t,n,e,r){return UK(mn(),kl(),t,n,e,r)}function qg(t,n){let e=t[n];return e===Ga?void 0:e}function BK(t,n,e,r,i,o){let a=n+e;return ms(t,a,i)?Ru(t,a+1,o?r.call(o,i):r(i)):qg(t,a+1)}function fN(t,n,e,r,i,o,a){let s=n+e;return of(t,s,i,o)?Ru(t,s+2,a?r.call(a,i,o):r(i,o)):qg(t,s+2)}function VK(t,n,e,r,i,o,a,s){let l=n+e;return qR(t,l,i,o,a)?Ru(t,l+3,s?r.call(s,i,o,a):r(i,o,a)):qg(t,l+3)}function jK(t,n,e,r,i,o,a,s,l){let u=n+e;return Lb(t,u,i,o,a,s)?Ru(t,u+4,l?r.call(l,i,o,a,s):r(i,o,a,s)):qg(t,u+4)}function UK(t,n,e,r,i,o){let a=n+e,s=!1;for(let l=0;l<i.length;l++)ms(t,a++,i[l])&&(s=!0);return s?Ru(t,a,r.apply(o,i)):qg(t,a)}function CS(t,n){let e=oi(),r,i=t+Ji;e.firstCreatePass?(r=HK(n,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=Yd(r.type,!0)),a,s=ga(Oe);try{let l=Wy(!1),u=o();return Wy(l),kK(e,mn(),i,u),u}finally{ga(s)}}function HK(t,n){if(n)for(let e=n.length-1;e>=0;e--){let r=n[e];if(t===r.name)return r}}function IS(t,n,e,r){let i=t+Ji,o=mn(),a=rM(o,i);return zK(o,i)?fN(o,kl(),n,a.transform,e,r,a):a.transform(e,r)}function zK(t,n){return t[Sn].data[n].pure}function ya(t,n){return kb(t,n)}var Ty=null;function WK(t){Ty!==null&&(t.defaultEncapsulation!==Ty.defaultEncapsulation||t.preserveWhitespaces!==Ty.preserveWhitespaces)||(Ty=t)}var jb=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var SS=new Lt(""),Gg=new Lt(""),Ub=(()=>{class t{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ES||(qK(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{En.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(e)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),e()},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}static{this.\u0275fac=function(r){return new(r||t)(Bt(En),Bt(Hb),Bt(Gg))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),Hb=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return ES?.findTestabilityInTree(this,e,r)??null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function qK(t){ES=t}var ES;function sp(t){return!!t&&typeof t.then=="function"}function mN(t){return!!t&&typeof t.subscribe=="function"}var zb=new Lt(""),gN=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=Qe(zb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=i();if(sp(o))e.push(o);else if(mN(o)){let a=new Promise((s,l)=>{o.subscribe({complete:s,error:l})});e.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),mf=new Lt("");function GK(){JA(()=>{throw new At(600,!1)})}function $K(t){return t.isBoundToModule}function KK(t,n,e){try{let r=e();return sp(r)?r.catch(i=>{throw n.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}function vN(t,n){return Array.isArray(n)?n.reduce(vN,t):nt(nt({},t),n)}var Fu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qe(DM),this.afterRenderEffectManager=Qe(gS),this.externalTestViews=new Set,this.beforeRender=new Fr,this.afterTick=new Fr,this.componentTypes=[],this.components=[],this.isStable=Qe(Vc).hasPendingTasks.pipe(_n(e=>!e)),this._injector=Qe(Eo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){let i=e instanceof Zy;if(!this._injector.get(gN).done){let p=!i&&Lk(e),h=!1;throw new At(405,h)}let a;i?a=e:a=this._injector.get(Nb).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let s=$K(a)?void 0:this._injector.get(Oc),l=r||a.selector,u=a.create(Zo.NULL,[],l,s),c=u.location.nativeElement,d=u.injector.get(SS,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Py(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new At(101,!1);let r=sr(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,sr(r)}}detectChangesInAttachedViews(e){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===TR)throw new At(103,!1);if(e){let o=r===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:s}of this._views)YK(a,o,s)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>_I(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>_I(o))))break}}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Py(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let r=this._injector.get(mf,[]);[...this._bootstrapListeners,...r].forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Py(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new At(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Py(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var Ay;function DS(t){Ay??=new WeakMap;let n=Ay.get(t);if(n)return n;let e=t.isStable.pipe(Us(r=>r)).toPromise().then(()=>{});return Ay.set(t,e),t.onDestroy(()=>Ay?.delete(t)),e}function YK(t,n,e){!n&&!_I(t)||XK(t,e,n)}function _I(t){return VI(t)}function XK(t,n,e){let r;e?(r=0,t[an]|=1024):t[an]&64?r=0:r=1,AR(t,n,r)}var wI=class{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},Wb=(()=>{class t{compileModuleSync(e){return new ib(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Bk(e),o=eR(i.declarations).reduce((a,s)=>{let l=Rc(s);return l&&a.push(new rf(l)),a},[]);return new wI(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),QK=new Lt("");function ZK(t,n,e){let r=new ib(e);return Promise.resolve(r)}function hk(t){for(let n=t.length-1;n>=0;n--)if(t[n]!==void 0)return t[n]}var JK=(()=>{class t{constructor(){this.zone=Qe(En),this.applicationRef=Qe(Fu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function eY(t){return[{provide:En,useFactory:t},{provide:Xd,multi:!0,useFactory:()=>{let n=Qe(JK,{optional:!0});return()=>n.initialize()}},{provide:Xd,multi:!0,useFactory:()=>{let n=Qe(rY);return()=>{n.initialize()}}},{provide:DM,useFactory:tY}]}function tY(){let t=Qe(En),n=Qe(Gs);return e=>t.runOutsideAngular(()=>n.handleError(e))}function nY(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var rY=(()=>{class t{constructor(){this.subscription=new Bi,this.initialized=!1,this.zone=Qe(En),this.pendingTasks=Qe(Vc)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{En.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{En.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function iY(){return typeof $localize<"u"&&$localize.locale||ab}var qb=new Lt("",{providedIn:"root",factory:()=>Qe(qb,jn.Optional|jn.SkipSelf)||iY()}),yN=new Lt("",{providedIn:"root",factory:()=>xK});var bN=new Lt(""),_N=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){let i=ZG(r?.ngZone,nY({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{let o=V$(e.moduleType,this.injector,eY(()=>i)),a=o.injector.get(Gs,null);return i.runOutsideAngular(()=>{let s=i.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{Py(this._modules,o),s.unsubscribe()})}),KK(a,i,()=>{let s=o.injector.get(gN);return s.runInitializers(),s.donePromise.then(()=>{let l=o.injector.get(qb,ab);return IK(l||ab),this._moduleDoBootstrap(o),o})})})}bootstrapModule(e,r=[]){let i=vN({},r);return ZK(this.injector,i,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){let r=e.injector.get(Fu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(r);else throw new At(-403,!1);this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new At(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let e=this._injector.get(bN,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||t)(Bt(Zo))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Cg=null,wN=new Lt("");function oY(t){if(Cg&&!Cg.get(wN,!1))throw new At(400,!1);GK(),Cg=t;let n=t.get(_N);return lY(t),n}function TS(t,n,e=[]){let r=`Platform: ${n}`,i=new Lt(r);return(o=[])=>{let a=xN();if(!a||a.injector.get(wN,!1)){let s=[...e,...o,{provide:i,useValue:!0}];t?t(s):oY(aY(s,r))}return sY(i)}}function aY(t=[],n){return Zo.create({name:n,providers:[{provide:hb,useValue:"platform"},{provide:bN,useValue:new Set([()=>Cg=null])},...t]})}function sY(t){let n=xN();if(!n)throw new At(401,!1);return n}function xN(){return Cg?.get(_N)??null}function lY(t){t.get($I,null)?.forEach(e=>e())}var br=(()=>{class t{static{this.__NG_ELEMENT_ID__=uY}}return t})();function uY(t){return cY(Qo(),mn(),(t&16)===16)}function cY(t,n,e){if(jg(t)&&!e){let r=Pc(t.index,n);return new tp(r,r)}else if(t.type&47){let r=n[za];return new tp(r,n)}return null}var xI=class{constructor(){}supports(n){return WR(n)}create(n){return new CI(n)}},dY=(t,n)=>n,CI=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||dY}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let a=!r||e&&e.currentIndex<fk(r,i,o)?e:r,s=fk(a,i,o),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(e=e._next,a.previousIndex==null)i++;else{o||(o=[]);let u=s-i,c=l-i;if(u!=c){for(let p=0;p<u;p++){let h=p<o.length?o[p]:o[p]=0,f=h+p;c<=f&&f<u&&(o[p]=h+1)}let d=a.previousIndex;o[d]=c-u}}s!==l&&n(a,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!WR(n))throw new At(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,r=!1,i,o,a;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)o=n[s],a=this._trackByFn(s,o),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,o,a,s),r=!0):(r&&(e=this._verifyReinsertion(e,o,a,s)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,j$(n,s=>{a=this._trackByFn(i,s),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,s,a,i),r=!0):(r&&(e=this._verifyReinsertion(e,s,a,i)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,i){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,i)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,i),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,i)):n=this._addAfter(new II(e,r),o,i)),n}_verifyReinsertion(n,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let i=n._prevRemoved,o=n._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){let i=e===null?this._itHead:e._next;return n._next=i,n._prev=e,i===null?this._itTail=n:i._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new sb),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,r=n._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sb),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},II=class{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},SI=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){let e=n._prevDup,r=n._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},sb=class{constructor(){this.map=new Map}put(n){let e=n.trackById,r=this.map.get(e);r||(r=new SI,this.map.set(e,r)),r.add(n)}get(n,e){let r=n,i=this.map.get(r);return i?i.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fk(t,n,e){let r=t.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+n+i}var EI=class{constructor(){}supports(n){return n instanceof Map||bS(n)}create(){return new DI}},DI=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||bS(n)))throw new At(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let i=this._records.get(n);this._maybeAddToChanges(i,e);let o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}let r=new TI(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}},TI=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function mk(){return new AS([new xI])}var AS=(()=>{class t{static{this.\u0275prov=xt({token:t,providedIn:"root",factory:mk})}constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||mk()),deps:[[t,new db,new Lg]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new At(901,!1)}}return t})();function gk(){return new kS([new EI])}var kS=(()=>{class t{static{this.\u0275prov=xt({token:t,providedIn:"root",factory:gk})}constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||gk()),deps:[[t,new db,new Lg]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new At(901,!1)}}return t})();var CN=TS(null,"core",[]),IN=(()=>{class t{constructor(e){}static{this.\u0275fac=function(r){return new(r||t)(Bt(Fu))}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({})}}return t})();var vk=!1,pY=!1;function hY(){vk||(vk=!0,KW(),mK(),RK(),yK(),z$(),f$(),HG(),$q(),DK())}function fY(t,n){return DS(t)}function SN(){return lf([{provide:Cy,useFactory:()=>{let t=!0;return wg()&&(t=!!Qe(ip,{optional:!0})?.get(BM,null)),t&&Mu("NgHydration"),t}},{provide:Xd,useValue:()=>{pY=!!Qe(JW,{optional:!0}),wg()&&Qe(Cy)&&(mY(),hY())},multi:!0},{provide:HM,useFactory:()=>wg()&&Qe(Cy)},{provide:mf,useFactory:()=>{if(wg()&&Qe(Cy)){let t=Qe(Fu),n=Qe(Zo);return()=>{fY(t,n).then(()=>{NG(t)})}}return()=>{}},multi:!0}])}function mY(){let t=wb(),n;for(let e of t.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===GW){n=e;break}if(!n)throw new At(-507,!1)}function We(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function pn(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function $g(t,n){Mu("NgSignals");let e=XA(t);return n?.equal&&(e[Cl].equal=n.equal),e}var gY=new Lt("",{providedIn:"root",factory:()=>Qe(vY)}),vY=(()=>{class t{static{this.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new AI})}}return t})(),AI=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Qe(Vc),this.taskId=null}scheduleEffect(n){if(this.enqueue(n),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(n){let e=n.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(n)||(this.queuedEffectCount++,r.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}},kI=class{constructor(n,e,r,i,o,a){this.scheduler=n,this.effectFn=e,this.creationZone=r,this.injector=o,this.watcher=r4(s=>this.runEffect(s),()=>this.schedule(),a),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(n){try{this.effectFn(n)}catch(e){this.injector.get(Gs,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function MS(t,n){Mu("NgSignals"),!n?.injector&&Gk(MS);let e=n?.injector??Qe(Zo),r=n?.manualCleanup!==!0?e.get(_b):null,i=new kI(e.get(gY),t,typeof Zone>"u"?null:Zone.current,r,e,n?.allowSignalWrites??!1),o=e.get(br,null,{optional:!0});return!o||!(o._lView[an]&8)?i.watcher.notify():(o._lView[My]??=[]).push(i.watcher.notify),i}function EN(t){let n=Rc(t);if(!n)return null;let e=new rf(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var FN=null;function Fl(){return FN}function ON(t){FN??=t}var Gb=class{};var nr=new Lt(""),jS=(()=>{class t{historyGo(e){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(bY),providedIn:"platform"})}}return t})(),PN=new Lt(""),bY=(()=>{class t extends jS{constructor(){super(),this._doc=Qe(nr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fl().getBaseHref(this._doc)}onPopState(e){let r=Fl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Fl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function US(t,n){if(t.length==0)return n;if(n.length==0)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,e==2?t+n.substring(1):e==1?t+n:t+"/"+n}function DN(t){let n=t.match(/#|\?|$/),e=n&&n.index||t.length,r=e-(t[e-1]==="/"?1:0);return t.slice(0,r)+t.slice(e)}function Ou(t){return t&&t[0]!=="?"?"?"+t:t}var lp=(()=>{class t{historyGo(e){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(HS),providedIn:"root"})}}return t})(),LN=new Lt(""),HS=(()=>{class t extends lp{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Qe(nr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return US(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Ou(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let a=this.prepareExternalUrl(i+Ou(o));this._platformLocation.pushState(e,r,a)}replaceState(e,r,i,o){let a=this.prepareExternalUrl(i+Ou(o));this._platformLocation.replaceState(e,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(r){return new(r||t)(Bt(jS),Bt(LN,8))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),BN=(()=>{class t extends lp{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=US(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let a=this.prepareExternalUrl(i+Ou(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,r,a)}replaceState(e,r,i,o){let a=this.prepareExternalUrl(i+Ou(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(r){return new(r||t)(Bt(jS),Bt(LN,8))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),vf=(()=>{class t{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=xY(DN(TN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ou(r))}normalize(e){return t.stripTrailingSlash(wY(this._basePath,TN(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ou(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ou(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}static{this.normalizeQueryParams=Ou}static{this.joinWithSlash=US}static{this.stripTrailingSlash=DN}static{this.\u0275fac=function(r){return new(r||t)(Bt(lp))}}static{this.\u0275prov=xt({token:t,factory:()=>_Y(),providedIn:"root"})}}return t})();function _Y(){return new vf(Bt(lp))}function wY(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function TN(t){return t.replace(/\/index.html$/,"")}function xY(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var VN={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},jN=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(jN||{});var Pu={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Kg(t,n){let e=Vb(t),r=e[op.NumberSymbols][n];if(typeof r>"u"){if(n===Pu.CurrencyDecimal)return e[op.NumberSymbols][Pu.Decimal];if(n===Pu.CurrencyGroup)return e[op.NumberSymbols][Pu.Group]}return r}function CY(t,n){return Vb(t)[op.NumberFormats][n]}function IY(t){return Vb(t)[op.Currencies]}function SY(t,n,e="en"){let r=IY(e)[t]||VN[t]||[],i=r[1];return n==="narrow"&&typeof i=="string"?i:r[0]||t}var EY=2;function DY(t){let n,e=VN[t];return e&&(n=e[2]),typeof n=="number"?n:EY}var TY=/^(\d+)?\.((\d+)(-(\d+))?)?$/,AN=22,$b=".",Yg="0",AY=";",kY=",",RS="#",kN="\xA4";function MY(t,n,e,r,i,o,a=!1){let s="",l=!1;if(!isFinite(t))s=Kg(e,Pu.Infinity);else{let u=OY(t);a&&(u=FY(u));let c=n.minInt,d=n.minFrac,p=n.maxFrac;if(o){let b=o.match(TY);if(b===null)throw new Error(`${o} is not a valid digit info`);let w=b[1],x=b[3],I=b[5];w!=null&&(c=NS(w)),x!=null&&(d=NS(x)),I!=null?p=NS(I):x!=null&&d>p&&(p=d)}PY(u,d,p);let h=u.digits,f=u.integerLen,m=u.exponent,g=[];for(l=h.every(b=>!b);f<c;f++)h.unshift(0);for(;f<0;f++)h.unshift(0);f>0?g=h.splice(f,h.length):(g=h,h=[0]);let y=[];for(h.length>=n.lgSize&&y.unshift(h.splice(-n.lgSize,h.length).join(""));h.length>n.gSize;)y.unshift(h.splice(-n.gSize,h.length).join(""));h.length&&y.unshift(h.join("")),s=y.join(Kg(e,r)),g.length&&(s+=Kg(e,i)+g.join("")),m&&(s+=Kg(e,Pu.Exponential)+"+"+m)}return t<0&&!l?s=n.negPre+s+n.negSuf:s=n.posPre+s+n.posSuf,s}function RY(t,n,e,r,i){let o=CY(n,jN.Currency),a=NY(o,Kg(n,Pu.MinusSign));return a.minFrac=DY(r),a.maxFrac=a.minFrac,MY(t,a,n,Pu.CurrencyGroup,Pu.CurrencyDecimal,i).replace(kN,e).replace(kN,"").trim()}function NY(t,n="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(AY),i=r[0],o=r[1],a=i.indexOf($b)!==-1?i.split($b):[i.substring(0,i.lastIndexOf(Yg)+1),i.substring(i.lastIndexOf(Yg)+1)],s=a[0],l=a[1]||"";e.posPre=s.substring(0,s.indexOf(RS));for(let c=0;c<l.length;c++){let d=l.charAt(c);d===Yg?e.minFrac=e.maxFrac=c+1:d===RS?e.maxFrac=c+1:e.posSuf+=d}let u=s.split(kY);if(e.gSize=u[1]?u[1].length:0,e.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let c=i.length-e.posPre.length-e.posSuf.length,d=o.indexOf(RS);e.negPre=o.substring(0,d).replace(/'/g,""),e.negSuf=o.slice(d+c).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function FY(t){if(t.digits[0]===0)return t;let n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(n===0?t.digits.push(0,0):n===1&&t.digits.push(0),t.integerLen+=2),t}function OY(t){let n=Math.abs(t)+"",e=0,r,i,o,a,s;for((i=n.indexOf($b))>-1&&(n=n.replace($b,"")),(o=n.search(/e/i))>0?(i<0&&(i=o),i+=+n.slice(o+1),n=n.substring(0,o)):i<0&&(i=n.length),o=0;n.charAt(o)===Yg;o++);if(o===(s=n.length))r=[0],i=1;else{for(s--;n.charAt(s)===Yg;)s--;for(i-=o,r=[],a=0;o<=s;o++,a++)r[a]=Number(n.charAt(o))}return i>AN&&(r=r.splice(0,AN-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function PY(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(n,i),e),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(let d=a;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(let d=1;d<a;d++)r[d]=0}if(s>=5)if(a-1<0){for(let d=0;d>a;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=n+t.integerLen,c=r.reduceRight(function(d,p,h,f){return p=p+d,f[h]=p<10?p:p-10,l&&(f[h]===0&&h>=u?f.pop():l=!1),p>=10?1:0},0);c&&(r.unshift(c),t.integerLen++)}function NS(t){let n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function Kb(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var FS=/\s+/,MN=[],Xr=(()=>{class t{constructor(e,r){this._ngEl=e,this._renderer=r,this.initialClasses=MN,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(FS):MN}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(FS):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(FS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Oe(zn),Oe(Wr))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Se.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var OS=class{constructor(n,e,r,i){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ba=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new OS(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let s=r.get(o);r.move(s,a),RN(s,i)}});for(let i=0,o=r.length;i<o;i++){let s=r.get(i).context;s.index=i,s.count=o,s.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);RN(o,i)})}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Oe(Ys),Oe($s),Oe(AS))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function RN(t,n){t.context.$implicit=n.item}var Or=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new PS,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){NN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){NN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Oe(Ys),Oe($s))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),PS=class{constructor(){this.$implicit=null,this.ngIf=null}};function NN(t,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Xo(n)}'.`)}var bi=(()=>{class t{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),a=i.indexOf("-")===-1?void 0:Tl.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,i,a)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||t)(Oe(zn),Oe(kS),Oe(Wr))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return t})(),li=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(e,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||t)(Oe(Ys))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[eo]})}}return t})();function LY(t,n){return new At(2100,!1)}var UN=(()=>{class t{constructor(e,r="USD"){this._locale=e,this._defaultCurrencyCode=r}transform(e,r=this._defaultCurrencyCode,i="symbol",o,a){if(!BY(e))return null;a||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let s=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?s=SY(s,i==="symbol"?"wide":"narrow",a):s=i);try{let l=VY(e);return RY(l,a,s,r,o)}catch(l){throw LY(t,l.message)}}static{this.\u0275fac=function(r){return new(r||t)(Oe(qb,16),Oe(yN,16))}}static{this.\u0275pipe=Fk({name:"currency",type:t,pure:!0,standalone:!0})}}return t})();function BY(t){return!(t==null||t===""||t!==t)}function VY(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var qr=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({})}}return t})(),zS="browser",jY="server";function Do(t){return t===zS}function Xg(t){return t===jY}var HN=(()=>{class t{static{this.\u0275prov=xt({token:t,providedIn:"root",factory:()=>Do(Qe(zr))?new LS(Qe(nr),window):new BS})}}return t})(),LS=class{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let e=UY(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function UY(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}var BS=class{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}},gf=class{};var Zg=class{},Jg=class{},Ol=class t{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=i.toLowerCase(),a=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var GS=class{encodeKey(n){return zN(n)}encodeValue(n){return zN(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function zY(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],l=e.get(a)||[];l.push(s),e.set(a,l)}),e}var WY=/%(\d[a-f0-9])/gi,qY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zN(t){return encodeURIComponent(t).replace(WY,(n,e)=>qY[e]??n)}function Yb(t){return`${t}`}var Uc=class t{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new GS,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zY(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],i=Array.isArray(r)?r.map(Yb):[Yb(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Yb(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Yb(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var $S=class{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function GY(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function WN(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function qN(t){return typeof Blob<"u"&&t instanceof Blob}function GN(t){return typeof FormData<"u"&&t instanceof FormData}function $Y(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Qg=class t{constructor(n,e,r,i){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let o;if(GY(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ol,this.context??=new $S,!this.params)this.params=new Uc,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),l=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||WN(this.body)||qN(this.body)||GN(this.body)||$Y(this.body)?this.body:this.body instanceof Uc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||GN(this.body)?null:qN(this.body)?this.body.type||null:WN(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Uc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.transferCache??this.transferCache,a=n.body!==void 0?n.body:this.body,s=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,u=n.headers||this.headers,c=n.params||this.params,d=n.context??this.context;return n.setHeaders!==void 0&&(u=Object.keys(n.setHeaders).reduce((p,h)=>p.set(h,n.setHeaders[h]),u)),n.setParams&&(c=Object.keys(n.setParams).reduce((p,h)=>p.set(h,n.setParams[h]),c)),new t(e,r,a,{params:c,headers:u,context:d,reportProgress:l,responseType:i,withCredentials:s,transferCache:o})}},Hc=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Hc||{}),e0=class{constructor(n,e=t0.Ok,r="OK"){this.headers=n.headers||new Ol,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Qb=class t extends e0{constructor(n={}){super(n),this.type=Hc.ResponseHeader}clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},up=class t extends e0{constructor(n={}){super(n),this.type=Hc.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},jc=class extends e0{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},t0=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(t0||{});function WS(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var cp=(()=>{class t{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Qg)o=e;else{let l;i.headers instanceof Ol?l=i.headers:l=new Ol(i.headers);let u;i.params&&(i.params instanceof Uc?u=i.params:u=new Uc({fromObject:i.params})),o=new Qg(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=tn(o).pipe(Iu(l=>this.handler.handle(l)));if(e instanceof Qg||i.observe==="events")return a;let s=a.pipe(fa(l=>l instanceof up));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(_n(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return s.pipe(_n(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return s.pipe(_n(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return s.pipe(_n(l=>l.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Uc().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,WS(i,r))}post(e,r,i={}){return this.request("POST",e,WS(i,r))}put(e,r,i={}){return this.request("PUT",e,WS(i,r))}static{this.\u0275fac=function(r){return new(r||t)(Bt(Zg))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),KY=/^\)\]\}',?\n/,YY="X-Request-URL";function $N(t){if(t.url)return t.url;let n=YY.toLocaleLowerCase();return t.headers.get(n)}var qS=(()=>{class t{constructor(){this.fetchImpl=Qe(KS,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=Qe(En)}handle(e){return new Xn(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(YS,o=>r.error(new jc({error:o}))),()=>i.abort()})}doRequest(e,r,i){return xu(this,null,function*(){let o=this.createRequestInit(e),a;try{let h=this.fetchImpl(e.urlWithParams,nt({signal:r},o));XY(h),i.next({type:Hc.Sent}),a=yield h}catch(h){i.error(new jc({error:h,status:h.status??0,statusText:h.statusText,url:e.urlWithParams,headers:h.headers}));return}let s=new Ol(a.headers),l=a.statusText,u=$N(a)??e.urlWithParams,c=a.status,d=null;if(e.reportProgress&&i.next(new Qb({headers:s,status:c,statusText:l,url:u})),a.body){let h=a.headers.get("content-length"),f=[],m=a.body.getReader(),g=0,y,b,w=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>xu(this,null,function*(){for(;;){let{done:I,value:D}=yield m.read();if(I)break;if(f.push(D),g+=D.length,e.reportProgress){b=e.responseType==="text"?(b??"")+(y??=new TextDecoder).decode(D,{stream:!0}):void 0;let A=()=>i.next({type:Hc.DownloadProgress,total:h?+h:void 0,loaded:g,partialText:b});w?w.run(A):A()}}}));let x=this.concatChunks(f,g);try{let I=a.headers.get("Content-Type")??"";d=this.parseBody(e,x,I)}catch(I){i.error(new jc({error:I,headers:new Ol(a.headers),status:a.status,statusText:a.statusText,url:$N(a)??e.urlWithParams}));return}}c===0&&(c=d?t0.Ok:0),c>=200&&c<300?(i.next(new up({body:d,headers:s,status:c,statusText:l,url:u})),i.complete()):i.error(new jc({error:d,headers:s,status:c,statusText:l,url:u}))})}parseBody(e,r,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(r).replace(KY,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,a)=>r[o]=a.join(",")),r.Accept??="application/json, text/plain, */*",!r["Content-Type"]){let o=e.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),KS=class{};function YS(){}function XY(t){t.then(YS,YS)}function iF(t,n){return n(t)}function QY(t,n){return(e,r)=>n.intercept(e,{handle:i=>t(i,r)})}function ZY(t,n,e){return(r,i)=>Ks(e,()=>n(r,o=>t(o,i)))}var JY=new Lt(""),XS=new Lt(""),oF=new Lt(""),aF=new Lt("");function eX(){let t=null;return(n,e)=>{t===null&&(t=(Qe(JY,{optional:!0})??[]).reduceRight(QY,iF));let r=Qe(Vc),i=r.add();return t(n,e).pipe(Ac(()=>r.remove(i)))}}var KN=(()=>{class t extends Zg{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=Qe(Vc);let i=Qe(aF,{optional:!0});this.backend=i??e}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(XS),...this.injector.get(oF,[])]));this.chain=i.reduceRight((o,a)=>ZY(o,a,this.injector),iF)}let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(Ac(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||t)(Bt(Jg),Bt(Eo))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})();var tX=/^\)\]\}',?\n/;function nX(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var YN=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new At(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Vr(r.\u0275loadImpl()):tn(null)).pipe(ma(()=>new Xn(o=>{let a=r.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((m,g)=>a.setRequestHeader(m,g.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let m=e.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(e.responseType){let m=e.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let s=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let m=a.statusText||"OK",g=new Ol(a.getAllResponseHeaders()),y=nX(a)||e.url;return l=new Qb({headers:g,status:a.status,statusText:m,url:y}),l},c=()=>{let{headers:m,status:g,statusText:y,url:b}=u(),w=null;g!==t0.NoContent&&(w=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=w?t0.Ok:0);let x=g>=200&&g<300;if(e.responseType==="json"&&typeof w=="string"){let I=w;w=w.replace(tX,"");try{w=w!==""?JSON.parse(w):null}catch(D){w=I,x&&(x=!1,w={error:D,text:w})}}x?(o.next(new up({body:w,headers:m,status:g,statusText:y,url:b||void 0})),o.complete()):o.error(new jc({error:w,headers:m,status:g,statusText:y,url:b||void 0}))},d=m=>{let{url:g}=u(),y=new jc({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});o.error(y)},p=!1,h=m=>{p||(o.next(u()),p=!0);let g={type:Hc.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),o.next(g)},f=m=>{let g={type:Hc.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),o.next(g)};return a.addEventListener("load",c),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),e.reportProgress&&(a.addEventListener("progress",h),s!==null&&a.upload&&a.upload.addEventListener("progress",f)),a.send(s),o.next({type:Hc.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",c),a.removeEventListener("timeout",d),e.reportProgress&&(a.removeEventListener("progress",h),s!==null&&a.upload&&a.upload.removeEventListener("progress",f)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(Bt(gf))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),sF=new Lt(""),rX="XSRF-TOKEN",iX=new Lt("",{providedIn:"root",factory:()=>rX}),oX="X-XSRF-TOKEN",aX=new Lt("",{providedIn:"root",factory:()=>oX}),Zb=class{},sX=(()=>{class t{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Kb(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr),Bt(zr),Bt(iX))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})();function lX(t,n){let e=t.url.toLowerCase();if(!Qe(sF)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=Qe(Zb).getToken(),i=Qe(aX);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}var QS=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(QS||{});function lF(t,n){return{\u0275kind:t,\u0275providers:n}}function ZS(...t){let n=[cp,YN,KN,{provide:Zg,useExisting:KN},{provide:Jg,useExisting:YN},{provide:XS,useValue:lX,multi:!0},{provide:sF,useValue:!0},{provide:Zb,useClass:sX}];for(let e of t)n.push(...e.\u0275providers);return lf(n)}var XN=new Lt("");function uX(){return lF(QS.LegacyInterceptors,[{provide:XN,useFactory:eX},{provide:XS,useExisting:XN,multi:!0}])}function uF(){return lF(QS.Fetch,[qS,{provide:Jg,useExisting:qS},{provide:aF,useExisting:qS}])}var cF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({providers:[ZS(uX())]})}}return t})();var QN="b",ZN="h",JN="s",eF="st",tF="u",nF="rt",Xb=new Lt(""),cX=["GET","HEAD"];function dX(t,n){let d=Qe(Xb),{isCacheActive:e}=d,r=HA(d,["isCacheActive"]),{transferCache:i,method:o}=t;if(!e||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!cX.includes(o)||i===!1||r.filter?.(t)===!1)return n(t);let a=Qe(ip),s=hX(t),l=a.get(s,null),u=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(u=i.includeHeaders),l){let{[QN]:p,[nF]:h,[ZN]:f,[JN]:m,[eF]:g,[tF]:y}=l,b=p;switch(h){case"arraybuffer":b=new TextEncoder().encode(p).buffer;break;case"blob":b=new Blob([p]);break}let w=new Ol(f);return tn(new up({body:b,headers:w,status:m,statusText:g,url:y}))}let c=Xg(Qe(zr));return n(t).pipe(Vi(p=>{p instanceof up&&c&&a.set(s,{[QN]:p.body,[ZN]:pX(p.headers,u),[JN]:p.status,[eF]:p.statusText,[tF]:p.url||"",[nF]:t.responseType})}))}function pX(t,n){if(!n)return{};let e={};for(let r of n){let i=t.getAll(r);i!==null&&(e[r]=i)}return e}function rF(t){return[...t.keys()].sort().map(n=>`${n}=${t.getAll(n)}`).join("&")}function hX(t){let{params:n,method:e,responseType:r,url:i}=t,o=rF(n),a=t.serializeBody();a instanceof URLSearchParams?a=rF(a):typeof a!="string"&&(a="");let s=[e,r,i,a,o].join("|"),l=fX(s);return l}function fX(t){let n=0;for(let e of t)n=Math.imul(31,n)+e.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function dF(t){return[{provide:Xb,useFactory:()=>(Mu("NgHttpTransferCache"),nt({isCacheActive:!0},t))},{provide:oF,useValue:dX,multi:!0,deps:[ip,Xb]},{provide:mf,multi:!0,useFactory:()=>{let n=Qe(Fu),e=Qe(Xb);return()=>{DS(n).then(()=>{e.isCacheActive=!1})}}}]}var nE=class extends Gb{constructor(){super(...arguments),this.supportsDOMEvents=!0}},rE=class t extends nE{static makeCurrent(){ON(new t)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=mX();return e==null?null:gX(e)}resetBaseElement(){n0=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Kb(document.cookie,n)}},n0=null;function mX(){return n0=n0||document.querySelector("base"),n0?n0.getAttribute("href"):null}function gX(t){return new URL(t,document.baseURI).pathname}var iE=class{addToWindow(n){Ui.getAngularTestability=(r,i=!0)=>{let o=n.findTestabilityInTree(r,i);if(o==null)throw new At(5103,!1);return o},Ui.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ui.getAllAngularRootElements=()=>n.getAllRootElements();let e=r=>{let i=Ui.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};Ui.frameworkStabilizers||(Ui.frameworkStabilizers=[]),Ui.frameworkStabilizers.push(e)}findTestabilityInTree(n,e,r){if(e==null)return null;let i=n.getTestability(e);return i??(r?Fl().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},vX=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),oE=new Lt(""),mF=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new At(5101,!1);return this._eventNameToPlugin.set(e,r),r}static{this.\u0275fac=function(r){return new(r||t)(Bt(oE),Bt(En))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),Jb=class{constructor(n){this._doc=n}},eE="ng-app-id",gF=(()=>{class t{constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xg(o),this.resetHostNodes()}addStyles(e){for(let r of e)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(e){for(let r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){let r=this.styleRef;r.get(e)?.elements?.forEach(i=>i.remove()),r.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${eE}="${this.appId}"]`);if(e?.length){let r=new Map;return e.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(e,r){let i=this.styleRef;if(i.has(e)){let o=i.get(e);return o.usage+=r,o.usage}return i.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===e)return i.delete(r),o.removeAttribute(eE),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(eE,this.appId),e.appendChild(a),a}}addStyleToHost(e,r){let i=this.getStyleElement(e,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr),Bt(Ug),Bt(KI,8),Bt(zr))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),tE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lE=/%COMP%/g,vF="%COMP%",yX=`_nghost-${vF}`,bX=`_ngcontent-${vF}`,_X=!0,wX=new Lt("",{providedIn:"root",factory:()=>_X});function xX(t){return bX.replace(lE,t)}function CX(t){return yX.replace(lE,t)}function yF(t,n){return n.map(e=>e.replace(lE,t))}var pF=(()=>{class t{constructor(e,r,i,o,a,s,l,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Xg(s),this.defaultRenderer=new r0(e,a,l,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===El.ShadowDom&&(r=Rn(nt({},r),{encapsulation:El.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof e_?i.applyToHost(e):i instanceof i0&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case El.Emulated:o=new e_(l,u,r,this.appId,c,a,s,d);break;case El.ShadowDom:return new aE(l,u,e,r,a,s,this.nonce,d);default:o=new i0(l,u,r,c,a,s,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(Bt(mF),Bt(gF),Bt(Ug),Bt(wX),Bt(nr),Bt(zr),Bt(En),Bt(KI))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),r0=class{constructor(n,e,r,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(tE[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(hF(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(hF(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new At(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;let o=tE[i];o?n.setAttributeNS(o,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let i=tE[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(Tl.DashCase|Tl.Important)?n.style.setProperty(e,r,i&Tl.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&Tl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r){if(typeof n=="string"&&(n=Fl().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function hF(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var aE=class extends r0{constructor(n,e,r,i,o,a,s,l){super(n,o,a,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=yF(i.id,i.styles);for(let c of u){let d=document.createElement("style");s&&d.setAttribute("nonce",s),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},i0=class extends r0{constructor(n,e,r,i,o,a,s,l){super(n,o,a,s),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=l?yF(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},e_=class extends i0{constructor(n,e,r,i,o,a,s,l){let u=i+"-"+r.id;super(n,e,r,o,a,s,l,u),this.contentAttr=xX(u),this.hostAttr=CX(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}},IX=(()=>{class t extends Jb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})(),fF=["alt","control","meta","shift"],SX={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EX={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DX=(()=>{class t extends Jb{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,i){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fl().onAndCancel(e,o.domEventName,a))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),a="code."),fF.forEach(u=>{let c=r.indexOf(u);c>-1&&(r.splice(c,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(e,r){let i=SX[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fF.forEach(a=>{if(a!==i){let s=EX[a];s(e)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{t.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})();function TX(){rE.makeCurrent()}function AX(){return new Gs}function kX(){return FM(document),document}var MX=[{provide:zr,useValue:zS},{provide:$I,useValue:TX,multi:!0},{provide:nr,useFactory:kX,deps:[]}],bF=TS(CN,"browser",MX),RX=new Lt(""),NX=[{provide:Gg,useClass:iE,deps:[]},{provide:SS,useClass:Ub,deps:[En,Hb,Gg]},{provide:Ub,useClass:Ub,deps:[En,Hb,Gg]}],FX=[{provide:hb,useValue:"root"},{provide:Gs,useFactory:AX,deps:[]},{provide:oE,useClass:IX,multi:!0,deps:[nr,En,zr]},{provide:oE,useClass:DX,multi:!0,deps:[nr]},pF,gF,mF,{provide:Ng,useExisting:pF},{provide:gf,useClass:vX,deps:[]},[]],_F=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ug,useValue:e.appId}]}}static{this.\u0275fac=function(r){return new(r||t)(Bt(RX,12))}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({providers:[...FX,...NX],imports:[qr,IN]})}}return t})();var wF=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var uE=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=Bt(OX),i},providedIn:"root"})}}return t})(),OX=(()=>{class t extends uE{constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Bc.NONE:return r;case Bc.HTML:return pf(r,"HTML")?Rl(r):JM(this._doc,String(r)).toString();case Bc.STYLE:return pf(r,"Style")?Rl(r):r;case Bc.SCRIPT:if(pf(r,"Script"))return Rl(r);throw new At(5200,!1);case Bc.URL:return pf(r,"URL")?Rl(r):ZI(String(r));case Bc.RESOURCE_URL:if(pf(r,"ResourceURL"))return Rl(r);throw new At(5201,!1);default:throw new At(5202,!1)}}bypassSecurityTrustHtml(e){return zM(e)}bypassSecurityTrustStyle(e){return WM(e)}bypassSecurityTrustScript(e){return qM(e)}bypassSecurityTrustUrl(e){return GM(e)}bypassSecurityTrustResourceUrl(e){return $M(e)}static{this.\u0275fac=function(r){return new(r||t)(Bt(nr))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),sE=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(sE||{});function xF(...t){let n=[],e=new Set,r=e.has(sE.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)e.add(o),i.length&&n.push(i);return lf([[],SN(),e.has(sE.NoHttpTransferCache)||r?[]:dF({}),n])}var zc=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(zc||{});function t_(t,n){return{type:zc.Trigger,name:t,definitions:n,options:{}}}function Wc(t,n=null){return{type:zc.Animate,styles:n,timings:t}}function Pl(t){return{type:zc.Style,styles:t,offset:null}}function CF(t,n,e){return{type:zc.State,name:t,styles:n,options:e}}function qc(t,n,e=null){return{type:zc.Transition,expr:t,animation:n,options:e}}function dE(t,n=null){return{type:zc.Reference,animation:t,options:n}}function pE(t,n=null){return{type:zc.AnimateRef,animation:t,options:n}}var NF=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(r){return new(r||t)(Oe(Wr),Oe(zn))}}static{this.\u0275dir=Un({type:t})}}return t})(),l_=(()=>{class t extends NF{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275dir=Un({type:t,features:[Vt]})}}return t})(),yo=new Lt("");var PX={provide:yo,useExisting:ii(()=>vs),multi:!0};function LX(){let t=Fl()?Fl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var BX=new Lt(""),vs=(()=>{class t extends NF{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!LX())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(r){return new(r||t)(Oe(Wr),Oe(zn),Oe(BX,8))}}static{this.\u0275dir=Un({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&et("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[ai([PX]),Vt]})}}return t})();function VX(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var fE=new Lt(""),FF=new Lt("");function jX(t){return VX(t.value)?{required:!0}:null}function IF(t){return null}function OF(t){return t!=null}function PF(t){return sp(t)?Vr(t):t}function LF(t){let n={};return t.forEach(e=>{n=e!=null?nt(nt({},n),e):n}),Object.keys(n).length===0?null:n}function BF(t,n){return n.map(e=>e(t))}function UX(t){return!t.validate}function VF(t){return t.map(n=>UX(n)?n:e=>n.validate(e))}function HX(t){if(!t)return null;let n=t.filter(OF);return n.length==0?null:function(e){return LF(BF(e,n))}}function mE(t){return t!=null?HX(VF(t)):null}function zX(t){if(!t)return null;let n=t.filter(OF);return n.length==0?null:function(e){let r=BF(e,n).map(PF);return eC(r).pipe(_n(LF))}}function gE(t){return t!=null?zX(VF(t)):null}function SF(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function WX(t){return t._rawValidators}function qX(t){return t._rawAsyncValidators}function hE(t){return t?Array.isArray(t)?t:[t]:[]}function r_(t,n){return Array.isArray(t)?t.includes(n):t===n}function EF(t,n){let e=hE(n);return hE(t).forEach(i=>{r_(e,i)||e.push(i)}),e}function DF(t,n){return hE(n).filter(e=>!r_(t,e))}var i_=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=mE(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=gE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},bf=class extends i_{get formDirective(){return null}get path(){return null}},dp=class extends i_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},o_=class{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},GX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lAe=Rn(nt({},GX),{"[class.ng-submitted]":"isSubmitted"}),ys=(()=>{class t extends o_{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||t)(Oe(dp,2))}}static{this.\u0275dir=Un({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&go("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Vt]})}}return t})(),u_=(()=>{class t extends o_{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||t)(Oe(bf,10))}}static{this.\u0275dir=Un({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&go("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Vt]})}}return t})();var o0="VALID",n_="INVALID",yf="PENDING",a0="DISABLED";function jF(t){return(c_(t)?t.validators:t)||null}function $X(t){return Array.isArray(t)?mE(t):t||null}function UF(t,n){return(c_(n)?n.asyncValidators:t)||null}function KX(t){return Array.isArray(t)?gE(t):t||null}function c_(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function YX(t,n,e){let r=t.controls;if(!(n?Object.keys(r):r).length)throw new At(1e3,"");if(!r[e])throw new At(1001,"")}function XX(t,n,e){t._forEachChild((r,i)=>{if(e[i]===void 0)throw new At(1002,"")})}var a_=class{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===o0}get invalid(){return this.status===n_}get pending(){return this.status==yf}get disabled(){return this.status===a0}get enabled(){return this.status!==a0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(EF(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(EF(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(DF(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(DF(n,this._rawAsyncValidators))}hasValidator(n){return r_(this._rawValidators,n)}hasAsyncValidator(n){return r_(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=yf,n.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=a0,this.errors=null,this._forEachChild(r=>{r.disable(Rn(nt({},n),{onlySelf:!0}))}),this._updateValue(),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Rn(nt({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=o0,this._forEachChild(r=>{r.enable(Rn(nt({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Rn(nt({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===o0||this.status===yf)&&this._runAsyncValidator(n.emitEvent)),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?a0:o0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=yf,this._hasOwnPendingAsyncValidator=!0;let e=PF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(n,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?a0:this.errors?n_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yf)?yf:this._anyControlsHaveStatus(n_)?n_:o0}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){c_(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=$X(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=KX(this._rawAsyncValidators)}},s_=class extends a_{constructor(n,e,r){super(jF(e),UF(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){XX(this,!0,n),Object.keys(n).forEach(r=>{YX(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(r=>{let i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var vE=new Lt("CallSetDisabledState",{providedIn:"root",factory:()=>yE}),yE="always";function QX(t,n){return[...n.path,t]}function HF(t,n,e=yE){zF(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),JX(t,n),tQ(t,n),eQ(t,n),ZX(t,n)}function TF(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function ZX(t,n){if(n.valueAccessor.setDisabledState){let e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function zF(t,n){let e=WX(t);n.validator!==null?t.setValidators(SF(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let r=qX(t);n.asyncValidator!==null?t.setAsyncValidators(SF(r,n.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();TF(n._rawValidators,i),TF(n._rawAsyncValidators,i)}function JX(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&WF(t,n)})}function eQ(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&WF(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function WF(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tQ(t,n){let e=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function nQ(t,n){t==null,zF(t,n)}function rQ(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function iQ(t){return Object.getPrototypeOf(t.constructor)===l_}function oQ(t,n){t._syncPendingControls(),n.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aQ(t,n){if(!n)return null;Array.isArray(n);let e,r,i;return n.forEach(o=>{o.constructor===vs?e=o:iQ(o)?r=o:i=o}),i||r||e||null}var sQ={provide:bf,useExisting:ii(()=>l0)},s0=Promise.resolve(),l0=(()=>{class t extends bf{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new s_({},mE(e),gE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){s0.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),HF(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){s0.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){s0.then(()=>{let r=this._findContainer(e.path),i=new s_({});nQ(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){s0.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){s0.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,oQ(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(r){return new(r||t)(Oe(fE,10),Oe(FF,10),Oe(vE,8))}}static{this.\u0275dir=Un({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&et("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[Se.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ai([sQ]),Vt]})}}return t})();function AF(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function kF(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var lQ=class extends a_{constructor(n=null,e,r){super(jF(e),UF(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),c_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(kF(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){AF(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){AF(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){kF(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var uQ={provide:dp,useExisting:ii(()=>ea)},MF=Promise.resolve(),ea=(()=>{class t extends dp{constructor(e,r,i,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this.control=new lQ,this._registered=!1,this.name="",this.update=new it,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aQ(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),rQ(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){MF.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&We(r);MF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?QX(e,this._parent):[e]}static{this.\u0275fac=function(r){return new(r||t)(Oe(bf,9),Oe(fE,10),Oe(FF,10),Oe(yo,10),Oe(br,8),Oe(vE,8))}}static{this.\u0275dir=Un({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Se.None,"disabled","isDisabled"],model:[Se.None,"ngModel","model"],options:[Se.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ai([uQ]),Vt,eo]})}}return t})(),d_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Un({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),cQ={provide:yo,useExisting:ii(()=>u0),multi:!0},u0=(()=>{class t extends l_{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275dir=Un({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&et("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[ai([cQ]),Vt]})}}return t})();var dQ={provide:yo,useExisting:ii(()=>p_),multi:!0};function qF(t,n){return t==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function pQ(t){return t.split(":")[0]}var p_=(()=>{class t extends l_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let r=this._getOptionId(e),i=qF(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=pQ(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275dir=Un({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&et("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ai([dQ]),Vt]})}}return t})(),GF=(()=>{class t{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(qF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(Oe(zn),Oe(Wr),Oe(p_,9))}}static{this.\u0275dir=Un({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),hQ={provide:yo,useExisting:ii(()=>$F),multi:!0};function RF(t,n){return t==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function fQ(t){return t.split(":")[0]}var $F=(()=>{class t extends l_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let l=a[s],u=this._getOptionValue(l.value);i.push(u)}}else{let a=r.options;for(let s=0;s<a.length;s++){let l=a[s];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=fQ(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275dir=Un({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&et("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ai([hQ]),Vt]})}}return t})(),KF=(()=>{class t{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(RF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(RF(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(Oe(zn),Oe(Wr),Oe($F,9))}}static{this.\u0275dir=Un({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();var mQ=(()=>{class t{constructor(){this._validator=IF}ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):IF,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Un({type:t,features:[eo]})}}return t})();var gQ={provide:fE,useExisting:ii(()=>bE),multi:!0};var bE=(()=>{class t extends mQ{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=We,this.createValidator=e=>jX}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275dir=Un({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ne("required",i._enabled?"":null)},inputs:{required:"required"},features:[ai([gQ]),Vt]})}}return t})();var vQ=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({})}}return t})();var pp=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:vE,useValue:e.callSetDisabledState??yE}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({imports:[vQ]})}}return t})();var rt=class t{static isArray(n,e=!0){return Array.isArray(n)&&(e||n.length!==0)}static isObject(n,e=!0){return typeof n=="object"&&!Array.isArray(n)&&n!=null&&(e||Object.keys(n).length!==0)}static equals(n,e,r){return r?this.resolveFieldData(n,r)===this.resolveFieldData(e,r):this.equalsByValue(n,e)}static equalsByValue(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var r=Array.isArray(n),i=Array.isArray(e),o,a,s;if(r&&i){if(a=n.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.equalsByValue(n[o],e[o]))return!1;return!0}if(r!=i)return!1;var l=this.isDate(n),u=this.isDate(e);if(l!=u)return!1;if(l&&u)return n.getTime()==e.getTime();var c=n instanceof RegExp,d=e instanceof RegExp;if(c!=d)return!1;if(c&&d)return n.toString()==e.toString();var p=Object.keys(n);if(a=p.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,p[o]))return!1;for(o=a;o--!==0;)if(s=p[o],!this.equalsByValue(n[s],e[s]))return!1;return!0}return n!==n&&e!==e}static resolveFieldData(n,e){if(n&&e){if(this.isFunction(e))return e(n);if(e.indexOf(".")==-1)return n[e];{let r=e.split("."),i=n;for(let o=0,a=r.length;o<a;++o){if(i==null)return null;i=i[r[o]]}return i}}else return null}static isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)}static reorderArray(n,e,r){let i;n&&e!==r&&(r>=n.length&&(r%=n.length,e%=n.length),n.splice(r,0,n.splice(e,1)[0]))}static insertIntoOrderedArray(n,e,r,i){if(r.length>0){let o=!1;for(let a=0;a<r.length;a++)if(this.findIndexInList(r[a],i)>e){r.splice(a,0,n),o=!0;break}o||r.push(n)}else r.push(n)}static findIndexInList(n,e){let r=-1;if(e){for(let i=0;i<e.length;i++)if(e[i]==n){r=i;break}}return r}static contains(n,e){if(n!=null&&e&&e.length){for(let r of e)if(this.equals(n,r))return!0}return!1}static removeAccents(n){return n&&(n=n.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),n}static isDate(n){return Object.prototype.toString.call(n)==="[object Date]"}static isEmpty(n){return n==null||n===""||Array.isArray(n)&&n.length===0||!this.isDate(n)&&typeof n=="object"&&Object.keys(n).length===0}static isNotEmpty(n){return!this.isEmpty(n)}static compare(n,e,r,i=1){let o=-1,a=this.isEmpty(n),s=this.isEmpty(e);return a&&s?o=0:a?o=i:s?o=-i:typeof n=="string"&&typeof e=="string"?o=n.localeCompare(e,r,{numeric:!0}):o=n<e?-1:n>e?1:0,o}static sort(n,e,r=1,i,o=1){let a=t.compare(n,e,i,r),s=r;return(t.isEmpty(n)||t.isEmpty(e))&&(s=o===1?r:o),s*a}static merge(n,e){if(!(n==null&&e==null)){{if((n==null||typeof n=="object")&&(e==null||typeof e=="object"))return nt(nt({},n||{}),e||{});if((n==null||typeof n=="string")&&(e==null||typeof e=="string"))return[n||"",e||""].join(" ")}return e||n}}static isPrintableCharacter(n=""){return this.isNotEmpty(n)&&n.length===1&&n.match(/\S| /)}static getItemValue(n,...e){return this.isFunction(n)?n(...e):n}static findLastIndex(n,e){let r=-1;if(this.isNotEmpty(n))try{r=n.findLastIndex(e)}catch{r=n.lastIndexOf([...n].reverse().find(e))}return r}static findLast(n,e){let r;if(this.isNotEmpty(n))try{r=n.findLast(e)}catch{r=[...n].reverse().find(e)}return r}static deepEquals(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var r=Array.isArray(n),i=Array.isArray(e),o,a,s;if(r&&i){if(a=n.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.deepEquals(n[o],e[o]))return!1;return!0}if(r!=i)return!1;var l=n instanceof Date,u=e instanceof Date;if(l!=u)return!1;if(l&&u)return n.getTime()==e.getTime();var c=n instanceof RegExp,d=e instanceof RegExp;if(c!=d)return!1;if(c&&d)return n.toString()==e.toString();var p=Object.keys(n);if(a=p.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,p[o]))return!1;for(o=a;o--!==0;)if(s=p[o],!this.deepEquals(n[s],e[s]))return!1;return!0}return n!==n&&e!==e}},YF=0;function mr(t="pn_id_"){return YF++,`${t}${YF}`}function yQ(){let t=[],n=(o,a)=>{let s=t.length>0?t[t.length-1]:{key:o,value:a},l=s.value+(s.key===o?0:a)+2;return t.push({key:o,value:l}),l},e=o=>{t=t.filter(a=>a.value!==o)},r=()=>t.length>0?t[t.length-1].value:0,i=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:i,set:(o,a,s)=>{a&&(a.style.zIndex=String(n(o,s)))},clear:o=>{o&&(e(i(o)),o.style.zIndex="")},getCurrent:()=>r()}}var _a=yQ();var to=(()=>{class t{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return t})(),_E=(()=>{class t{static AND="and";static OR="or"}return t})(),h_=(()=>{class t{filter(e,r,i,o,a){let s=[];if(e)for(let l of e)for(let u of r){let c=rt.resolveFieldData(l,u);if(this.filters[o](c,i,a)){s.push(l);break}}return s}filters={startsWith:(e,r,i)=>{if(r==null||r.trim()==="")return!0;if(e==null)return!1;let o=rt.removeAccents(r.toString()).toLocaleLowerCase(i);return rt.removeAccents(e.toString()).toLocaleLowerCase(i).slice(0,o.length)===o},contains:(e,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(e==null)return!1;let o=rt.removeAccents(r.toString()).toLocaleLowerCase(i);return rt.removeAccents(e.toString()).toLocaleLowerCase(i).indexOf(o)!==-1},notContains:(e,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(e==null)return!1;let o=rt.removeAccents(r.toString()).toLocaleLowerCase(i);return rt.removeAccents(e.toString()).toLocaleLowerCase(i).indexOf(o)===-1},endsWith:(e,r,i)=>{if(r==null||r.trim()==="")return!0;if(e==null)return!1;let o=rt.removeAccents(r.toString()).toLocaleLowerCase(i),a=rt.removeAccents(e.toString()).toLocaleLowerCase(i);return a.indexOf(o,a.length-o.length)!==-1},equals:(e,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!0:e==null?!1:e.getTime&&r.getTime?e.getTime()===r.getTime():e==r?!0:rt.removeAccents(e.toString()).toLocaleLowerCase(i)==rt.removeAccents(r.toString()).toLocaleLowerCase(i),notEquals:(e,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!1:e==null?!0:e.getTime&&r.getTime?e.getTime()!==r.getTime():e==r?!1:rt.removeAccents(e.toString()).toLocaleLowerCase(i)!=rt.removeAccents(r.toString()).toLocaleLowerCase(i),in:(e,r)=>{if(r==null||r.length===0)return!0;for(let i=0;i<r.length;i++)if(rt.equals(e,r[i]))return!0;return!1},between:(e,r)=>r==null||r[0]==null||r[1]==null?!0:e==null?!1:e.getTime?r[0].getTime()<=e.getTime()&&e.getTime()<=r[1].getTime():r[0]<=e&&e<=r[1],lt:(e,r,i)=>r==null?!0:e==null?!1:e.getTime&&r.getTime?e.getTime()<r.getTime():e<r,lte:(e,r,i)=>r==null?!0:e==null?!1:e.getTime&&r.getTime?e.getTime()<=r.getTime():e<=r,gt:(e,r,i)=>r==null?!0:e==null?!1:e.getTime&&r.getTime?e.getTime()>r.getTime():e>r,gte:(e,r,i)=>r==null?!0:e==null?!1:e.getTime&&r.getTime?e.getTime()>=r.getTime():e>=r,is:(e,r,i)=>this.filters.equals(e,r,i),isNot:(e,r,i)=>this.filters.notEquals(e,r,i),before:(e,r,i)=>this.filters.lt(e,r,i),after:(e,r,i)=>this.filters.gt(e,r,i),dateIs:(e,r)=>r==null?!0:e==null?!1:e.toDateString()===r.toDateString(),dateIsNot:(e,r)=>r==null?!0:e==null?!1:e.toDateString()!==r.toDateString(),dateBefore:(e,r)=>r==null?!0:e==null?!1:e.getTime()<r.getTime(),dateAfter:(e,r)=>{if(r==null)return!0;if(e==null)return!1;let i=new Date(e);return i.setHours(0,0,0,0),i.getTime()>r.getTime()}};register(e,r){this.filters[e]=r}static \u0275fac=function(r){return new(r||t)};static \u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _f=(()=>{class t{clickSource=new Fr;clickObservable=this.clickSource.asObservable();add(e){e&&this.clickSource.next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mi=(()=>{class t{ripple=!1;inputStyle=Nl("outlined");overlayOptions={};csp=Nl({nonce:void 0});filterMatchModeOptions={text:[to.STARTS_WITH,to.CONTAINS,to.NOT_CONTAINS,to.ENDS_WITH,to.EQUALS,to.NOT_EQUALS],numeric:[to.EQUALS,to.NOT_EQUALS,to.LESS_THAN,to.LESS_THAN_OR_EQUAL_TO,to.GREATER_THAN,to.GREATER_THAN_OR_EQUAL_TO],date:[to.DATE_IS,to.DATE_IS_NOT,to.DATE_BEFORE,to.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Fr;translationObserver=this.translationSource.asObservable();getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=nt(nt({},this.translation),e),this.translationSource.next(this.translation)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Dr=(()=>{class t{template;type;name;constructor(e){this.template=e}getType(){return this.name}static \u0275fac=function(r){return new(r||t)(Oe($s))};static \u0275dir=Un({type:t,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[Se.None,"pTemplate","name"]},standalone:!0})}return t})(),kr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({})}return t})(),To=(()=>{class t{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage";static SHOW_FILTER_MENU="showFilterMenu";static HIDE_FILTER_MENU="hideFilterMenu";static SELECTION_MESSAGE="selectionMessage";static ARIA="aria";static SELECT_COLOR="selectColor";static BROWSE_FILES="browseFiles"}return t})();var ve=(()=>{class t{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(e,r){e&&r&&(e.classList?e.classList.add(r):e.className+=" "+r)}static addMultipleClasses(e,r){if(e&&r)if(e.classList){let i=r.trim().split(" ");for(let o=0;o<i.length;o++)e.classList.add(i[o])}else{let i=r.split(" ");for(let o=0;o<i.length;o++)e.className+=" "+i[o]}}static removeClass(e,r){e&&r&&(e.classList?e.classList.remove(r):e.className=e.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(e,r){e&&r&&[r].flat().filter(Boolean).forEach(i=>i.split(" ").forEach(o=>this.removeClass(e,o)))}static hasClass(e,r){return e&&r?e.classList?e.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(e.className):!1}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(r){return r!==e})}static find(e,r){return Array.from(e.querySelectorAll(r))}static findSingle(e,r){return this.isElement(e)?e.querySelector(r):null}static index(e){let r=e.parentNode.childNodes,i=0;for(var o=0;o<r.length;o++){if(r[o]==e)return i;r[o].nodeType==1&&i++}return-1}static indexWithinGroup(e,r){let i=e.parentNode?e.parentNode.childNodes:[],o=0;for(var a=0;a<i.length;a++){if(i[a]==e)return o;i[a].attributes&&i[a].attributes[r]&&i[a].nodeType==1&&o++}return-1}static appendOverlay(e,r,i="self"){i!=="self"&&e&&r&&this.appendChild(e,r)}static alignOverlay(e,r,i="self",o=!0){e&&r&&(o&&(e.style.minWidth=`${t.getOuterWidth(r)}px`),i==="self"?this.relativePosition(e,r):this.absolutePosition(e,r))}static relativePosition(e,r,i=!0){let o=b=>{if(b)return getComputedStyle(b).getPropertyValue("position")==="relative"?b:o(b.parentElement)},a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.offsetHeight??r.getBoundingClientRect().height,l=r.getBoundingClientRect(),u=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),d=this.getViewport(),h=o(e)?.getBoundingClientRect()||{top:-1*u,left:-1*c},f,m;l.top+s+a.height>d.height?(f=l.top-h.top-a.height,e.style.transformOrigin="bottom",l.top+f<0&&(f=-1*l.top)):(f=s+l.top-h.top,e.style.transformOrigin="top");let g=l.left+a.width-d.width,y=l.left-h.left;a.width>d.width?m=(l.left-h.left)*-1:g>0?m=y-g:m=l.left-h.left,e.style.top=f+"px",e.style.left=m+"px",i&&(e.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static absolutePosition(e,r,i=!0){let o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),a=o.height,s=o.width,l=r.offsetHeight??r.getBoundingClientRect().height,u=r.offsetWidth??r.getBoundingClientRect().width,c=r.getBoundingClientRect(),d=this.getWindowScrollTop(),p=this.getWindowScrollLeft(),h=this.getViewport(),f,m;c.top+l+a>h.height?(f=c.top+d-a,e.style.transformOrigin="bottom",f<0&&(f=d)):(f=l+c.top+d,e.style.transformOrigin="top"),c.left+s>h.width?m=Math.max(0,c.left+p+u-s):m=c.left+p,e.style.top=f+"px",e.style.left=m+"px",i&&(e.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static getParents(e,r=[]){return e.parentNode===null?r:this.getParents(e.parentNode,r.concat([e.parentNode]))}static getScrollableParents(e){let r=[];if(e){let i=this.getParents(e),o=/(auto|scroll)/,a=s=>{let l=window.getComputedStyle(s,null);return o.test(l.getPropertyValue("overflow"))||o.test(l.getPropertyValue("overflowX"))||o.test(l.getPropertyValue("overflowY"))};for(let s of i){let l=s.nodeType===1&&s.dataset.scrollselectors;if(l){let u=l.split(",");for(let c of u){let d=this.findSingle(s,c);d&&a(d)&&r.push(d)}}s.nodeType!==9&&a(s)&&r.push(s)}}return r}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let r=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",r}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let r=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",r}static getHiddenElementDimensions(e){let r={};return e.style.visibility="hidden",e.style.display="block",r.width=e.offsetWidth,r.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",r}static scrollInView(e,r){let i=getComputedStyle(e).getPropertyValue("borderTopWidth"),o=i?parseFloat(i):0,a=getComputedStyle(e).getPropertyValue("paddingTop"),s=a?parseFloat(a):0,l=e.getBoundingClientRect(),c=r.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-o-s,d=e.scrollTop,p=e.clientHeight,h=this.getOuterHeight(r);c<0?e.scrollTop=d+c:c+h>p&&(e.scrollTop=d+c-p+h)}static fadeIn(e,r){e.style.opacity=0;let i=+new Date,o=0,a=function(){o=+e.style.opacity.replace(",",".")+(new Date().getTime()-i)/r,e.style.opacity=o,i=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16))};a()}static fadeOut(e,r){var i=1,o=50,a=r,s=o/a;let l=setInterval(()=>{i=i-s,i<=0&&(i=0,clearInterval(l)),e.style.opacity=i},o)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,r){var i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(a){return[].indexOf.call(document.querySelectorAll(a),this)!==-1};return o.call(e,r)}static getOuterWidth(e,r){let i=e.offsetWidth;if(r){let o=getComputedStyle(e);i+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return i}static getHorizontalPadding(e){let r=getComputedStyle(e);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(e){let r=getComputedStyle(e);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(e){let r=e.offsetWidth,i=getComputedStyle(e);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(e){let r=e.offsetWidth,i=getComputedStyle(e);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(e){let r=e.offsetHeight,i=getComputedStyle(e);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(e,r){let i=e.offsetHeight;if(r){let o=getComputedStyle(e);i+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return i}static getHeight(e){let r=e.offsetHeight,i=getComputedStyle(e);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(e){let r=e.offsetWidth,i=getComputedStyle(e);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let e=window,r=document,i=r.documentElement,o=r.getElementsByTagName("body")[0],a=e.innerWidth||i.clientWidth||o.clientWidth,s=e.innerHeight||i.clientHeight||o.clientHeight;return{width:a,height:s}}static getOffset(e){var r=e.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,r){let i=e.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent,r=e.indexOf("MSIE ");if(r>0)return!0;var i=e.indexOf("Trident/");if(i>0){var o=e.indexOf("rv:");return!0}var a=e.indexOf("Edge/");return a>0}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,r){if(this.isElement(r))r.appendChild(e);else if(r&&r.el&&r.el.nativeElement)r.el.nativeElement.appendChild(e);else throw"Cannot append "+r+" to "+e}static removeChild(e,r){if(this.isElement(r))r.removeChild(e);else if(r.el&&r.el.nativeElement)r.el.nativeElement.removeChild(e);else throw"Cannot remove "+e+" from "+r}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"}static calculateScrollbarWidth(e){if(e){let r=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}else{if(this.calculatedScrollbarWidth!==null)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(this.calculatedScrollbarHeight!==null)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(e,r,i){e[r].apply(e,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||e.offsetParent===null}static isVisible(e){return e&&e.offsetParent!=null}static isExist(e){return e!==null&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,r){e&&document.activeElement!==e&&e.focus(r)}static getFocusableSelectorString(e=""){return`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        .p-inputtext:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        .p-button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`}static getFocusableElements(e,r=""){let i=this.find(e,this.getFocusableSelectorString(r)),o=[];for(let a of i){let s=getComputedStyle(a);this.isVisible(a)&&s.display!="none"&&s.visibility!="hidden"&&o.push(a)}return o}static getFocusableElement(e,r=""){let i=this.findSingle(e,this.getFocusableSelectorString(r));if(i){let o=getComputedStyle(i);if(this.isVisible(i)&&o.display!="none"&&o.visibility!="hidden")return i}return null}static getFirstFocusableElement(e,r=""){let i=this.getFocusableElements(e,r);return i.length>0?i[0]:null}static getLastFocusableElement(e,r){let i=this.getFocusableElements(e,r);return i.length>0?i[i.length-1]:null}static getNextFocusableElement(e,r=!1){let i=t.getFocusableElements(e),o=0;if(i&&i.length>0){let a=i.indexOf(i[0].ownerDocument.activeElement);r?a==-1||a===0?o=i.length-1:o=a-1:a!=-1&&a!==i.length-1&&(o=a+1)}return i[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,r){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:let i=typeof e;if(i==="string")return document.querySelector(e);if(i==="object"&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;let a=(s=>!!(s&&s.constructor&&s.call&&s.apply))(e)?e():e;return a&&a.nodeType===9||this.isExist(a)?a:null}}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,r){if(e){let i=e.getAttribute(r);return isNaN(i)?i==="true"||i==="false"?i==="true":i:+i}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(e="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,e)}static unblockBodyScroll(e="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,e)}static createElement(e,r={},...i){if(e){let o=document.createElement(e);return this.setAttributes(o,r),o.append(...i),o}}static setAttribute(e,r="",i){this.isElement(e)&&i!==null&&i!==void 0&&e.setAttribute(r,i)}static setAttributes(e,r={}){if(this.isElement(e)){let i=(o,a)=>{let s=e?.$attrs?.[o]?[e?.$attrs?.[o]]:[];return[a].flat().reduce((l,u)=>{if(u!=null){let c=typeof u;if(c==="string"||c==="number")l.push(u);else if(c==="object"){let d=Array.isArray(u)?i(o,u):Object.entries(u).map(([p,h])=>o==="style"&&(h||h===0)?`${p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${h}`:h?p:void 0);l=d.length?l.concat(d.filter(p=>!!p)):l}}return l},s)};Object.entries(r).forEach(([o,a])=>{if(a!=null){let s=o.match(/^on(.+)/);s?e.addEventListener(s[1].toLowerCase(),a):o==="pBind"?this.setAttributes(e,a):(a=o==="class"?[...new Set(i("class",a))].join(" ").trim():o==="style"?i("style",a).join(";").trim():a,(e.$attrs=e.$attrs||{})&&(e.$attrs[o]=a),e.setAttribute(o,a))}})}}static isFocusableElement(e,r=""){return this.isElement(e)?e.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r}`):!1}}return t})(),Lu=class{element;listener;scrollableParents;constructor(n,e=()=>{}){this.element=n,this.listener=e}bindScrollListener(){this.scrollableParents=ve.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}};var bs=(()=>{class t{autofocus=!1;focused=!1;platformId=Qe(zr);document=Qe(nr);host=Qe(zn);ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){Do(this.platformId)&&this.autofocus&&setTimeout(()=>{let e=ve.getFocusableElements(this.host?.nativeElement);e.length===0&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Un({type:t,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We]},standalone:!0,features:[Er]})}return t})(),Ll=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({})}return t})();var bQ=["*"],rn=(()=>{class t{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){let e=rt.isEmpty(this.label);this.role=e?void 0:"img",this.ariaLabel=e?void 0:this.label,this.ariaHidden=e}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ct({type:t,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:[Se.HasDecoratorInputTransform,"spin","spin",We],styleClass:"styleClass"},standalone:!0,features:[Er,Wt],ngContentSelectors:bQ,decls:1,vars:0,template:function(r,i){r&1&&(Xs(),gs(0))},encapsulation:2,changeDetection:0})}return t})();var Gc=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["SpinnerIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var Bl=(()=>{class t{document;platformId;renderer;el;zone;config;constructor(e,r,i,o,a,s){this.document=e,this.platformId=r,this.renderer=i,this.el=o,this.zone=a,this.config=s}animationListener;mouseDownListener;timeout;ngAfterViewInit(){Do(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(e){let r=this.getInk();if(!r||this.document.defaultView?.getComputedStyle(r,null).display==="none")return;if(ve.removeClass(r,"p-ink-active"),!ve.getHeight(r)&&!ve.getWidth(r)){let s=Math.max(ve.getOuterWidth(this.el.nativeElement),ve.getOuterHeight(this.el.nativeElement));r.style.height=s+"px",r.style.width=s+"px"}let i=ve.getOffset(this.el.nativeElement),o=e.pageX-i.left+this.document.body.scrollTop-ve.getWidth(r)/2,a=e.pageY-i.top+this.document.body.scrollLeft-ve.getHeight(r)/2;this.renderer.setStyle(r,"top",a+"px"),this.renderer.setStyle(r,"left",o+"px"),ve.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let s=this.getInk();s&&ve.removeClass(s,"p-ink-active")},401)}getInk(){let e=this.el.nativeElement.children;for(let r=0;r<e.length;r++)if(typeof e[r].className=="string"&&e[r].className.indexOf("p-ink")!==-1)return e[r];return null}resetInk(){let e=this.getInk();e&&ve.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),ve.removeClass(e.currentTarget,"p-ink-active")}create(){let e=this.renderer.createElement("span");this.renderer.addClass(e,"p-ink"),this.renderer.appendChild(this.el.nativeElement,e),this.renderer.setAttribute(e,"aria-hidden","true"),this.renderer.setAttribute(e,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(e,"animationend",this.onAnimationEnd.bind(this)))}remove(){let e=this.getInk();e&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,ve.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zr),Oe(Wr),Oe(zn),Oe(En),Oe(Mi,8))};static \u0275dir=Un({type:t,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"],standalone:!0})}return t})(),$c=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({})}return t})();var _Q=["*"],XF=t=>({class:t});function wQ(t,n){t&1&&St(0)}function xQ(t,n){if(t&1&&Ve(0,"span",8),t&2){let e=j(3);O("ngClass",e.iconClass()),Ne("aria-hidden",!0)("data-pc-section","loadingicon")}}function CQ(t,n){if(t&1&&Ve(0,"SpinnerIcon",9),t&2){let e=j(3);O("styleClass",e.spinnerIconClass())("spin",!0),Ne("aria-hidden",!0)("data-pc-section","loadingicon")}}function IQ(t,n){if(t&1&&(yt(0),ce(1,xQ,1,3,"span",6)(2,CQ,1,4,"SpinnerIcon",7),bt()),t&2){let e=j(2);P(),O("ngIf",e.loadingIcon),P(),O("ngIf",!e.loadingIcon)}}function SQ(t,n){}function EQ(t,n){if(t&1&&ce(0,SQ,0,0,"ng-template",10),t&2){let e=j(2);O("ngIf",e.loadingIconTemplate)}}function DQ(t,n){if(t&1&&(yt(0),ce(1,IQ,3,2,"ng-container",2)(2,EQ,1,1,null,5),bt()),t&2){let e=j();P(),O("ngIf",!e.loadingIconTemplate),P(),O("ngTemplateOutlet",e.loadingIconTemplate)("ngTemplateOutletContext",Gt(3,XF,e.iconClass()))}}function TQ(t,n){if(t&1&&Ve(0,"span",8),t&2){let e=j(2);O("ngClass",e.iconClass()),Ne("data-pc-section","icon")}}function AQ(t,n){}function kQ(t,n){if(t&1&&ce(0,AQ,0,0,"ng-template",10),t&2){let e=j(2);O("ngIf",!e.icon&&e.iconTemplate)}}function MQ(t,n){if(t&1&&(yt(0),ce(1,TQ,1,2,"span",6)(2,kQ,1,1,null,5),bt()),t&2){let e=j();P(),O("ngIf",e.icon&&!e.iconTemplate),P(),O("ngTemplateOutlet",e.iconTemplate)("ngTemplateOutletContext",Gt(3,XF,e.iconClass()))}}function RQ(t,n){if(t&1&&(ie(0,"span",11),st(1),oe()),t&2){let e=j();Ne("aria-hidden",e.icon&&!e.label)("data-pc-section","label"),P(),ir(e.label)}}function NQ(t,n){if(t&1&&(ie(0,"span",8),st(1),oe()),t&2){let e=j();ft(e.badgeClass),O("ngClass",e.badgeStyleClass()),Ne("data-pc-section","badge"),P(),ir(e.badge)}}var Kc={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"},m_=(()=>{class t{el;document;iconPos="left";loadingIcon;get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}severity;raised=!1;rounded=!1;text=!1;outlined=!1;size=null;plain=!1;_label;_icon;_loading=!1;initialized;get htmlElement(){return this.el.nativeElement}_internalClasses=Object.values(Kc);constructor(e,r){this.el=e,this.document=r}ngAfterViewInit(){ve.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let e=[Kc.button,Kc.component];return this.icon&&!this.label&&rt.isEmpty(this.htmlElement.textContent)&&e.push(Kc.iconOnly),this.loading&&(e.push(Kc.disabled,Kc.loading),!this.icon&&this.label&&e.push(Kc.labelOnly),this.icon&&!this.label&&!rt.isEmpty(this.htmlElement.textContent)&&e.push(Kc.iconOnly)),this.text&&e.push("p-button-text"),this.severity&&e.push(`p-button-${this.severity}`),this.plain&&e.push("p-button-plain"),this.raised&&e.push("p-button-raised"),this.size&&e.push(`p-button-${this.size}`),this.outlined&&e.push("p-button-outlined"),this.rounded&&e.push("p-button-rounded"),this.size==="small"&&e.push("p-button-sm"),this.size==="large"&&e.push("p-button-lg"),e}setStyleClass(){let e=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...e)}createLabel(){if(!ve.findSingle(this.htmlElement,".p-button-label")&&this.label){let r=this.document.createElement("span");this.icon&&!this.label&&r.setAttribute("aria-hidden","true"),r.className="p-button-label",r.appendChild(this.document.createTextNode(this.label)),this.htmlElement.appendChild(r)}}createIcon(){if(!ve.findSingle(this.htmlElement,".p-button-icon")&&(this.icon||this.loading)){let r=this.document.createElement("span");r.className="p-button-icon",r.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&ve.addClass(r,i);let o=this.getIconClass();o&&ve.addMultipleClasses(r,o),this.htmlElement.insertBefore(r,this.htmlElement.firstChild)}}updateLabel(){let e=ve.findSingle(this.htmlElement,".p-button-label");if(!this.label){e&&this.htmlElement.removeChild(e);return}e?e.textContent=this.label:this.createLabel()}updateIcon(){let e=ve.findSingle(this.htmlElement,".p-button-icon"),r=ve.findSingle(this.htmlElement,".p-button-label");e?this.iconPos?e.className="p-button-icon "+(r?"p-button-icon-"+this.iconPos:"")+" "+this.getIconClass():e.className="p-button-icon "+this.getIconClass():this.createIcon()}getIconClass(){return this.loading?"p-button-loading-icon pi-spin "+(this.loadingIcon??"pi pi-spinner"):this.icon||"p-hidden"}ngOnDestroy(){this.initialized=!1}static \u0275fac=function(r){return new(r||t)(Oe(zn),Oe(nr))};static \u0275dir=Un({type:t,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading",severity:"severity",raised:[Se.HasDecoratorInputTransform,"raised","raised",We],rounded:[Se.HasDecoratorInputTransform,"rounded","rounded",We],text:[Se.HasDecoratorInputTransform,"text","text",We],outlined:[Se.HasDecoratorInputTransform,"outlined","outlined",We],size:"size",plain:[Se.HasDecoratorInputTransform,"plain","plain",We]},standalone:!0,features:[Er]})}return t})(),wE=(()=>{class t{el;type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;tabindex;size;style;styleClass;badgeClass;ariaLabel;autofocus;onClick=new it;onFocus=new it;onBlur=new it;contentTemplate;loadingIconTemplate;iconTemplate;templates;constructor(e){this.el=e}spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,e])=>!!e).reduce((e,[r])=>e+` ${r}`,"p-button-loading-icon")}iconClass(){let e={"p-button-icon":!0,"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label};return this.loading?e[`p-button-loading-icon pi-spin ${this.loadingIcon??""}`]=!0:this.icon&&(e[this.icon]=!0),e}get buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":(this.icon||this.iconTemplate||this.loadingIcon||this.loadingIconTemplate)&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label&&!this.loadingIcon&&this.iconPos==="left","p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":this.size==="small","p-button-lg":this.size==="large","p-button-plain":this.plain,[`${this.styleClass}`]:this.styleClass}}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"icon":this.iconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&String(this.badge).length===1}}focus(){this.el.nativeElement.firstChild.focus()}static \u0275fac=function(r){return new(r||t)(Oe(zn))};static \u0275cmp=ct({type:t,selectors:[["p-button"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(r,i){r&2&&go("p-disabled",i.disabled)},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:[Se.HasDecoratorInputTransform,"disabled","disabled",We],loading:[Se.HasDecoratorInputTransform,"loading","loading",We],loadingIcon:"loadingIcon",raised:[Se.HasDecoratorInputTransform,"raised","raised",We],rounded:[Se.HasDecoratorInputTransform,"rounded","rounded",We],text:[Se.HasDecoratorInputTransform,"text","text",We],plain:[Se.HasDecoratorInputTransform,"plain","plain",We],severity:"severity",outlined:[Se.HasDecoratorInputTransform,"outlined","outlined",We],link:[Se.HasDecoratorInputTransform,"link","link",We],tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],size:"size",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel",autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},standalone:!0,features:[Er,Wt],ngContentSelectors:_Q,decls:7,vars:14,consts:[["pRipple","","pAutoFocus","",3,"click","focus","blur","ngStyle","disabled","ngClass","autofocus"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass",4,"ngIf"],[3,"styleClass","spin",4,"ngIf"],[3,"ngClass"],[3,"styleClass","spin"],[3,"ngIf"],[1,"p-button-label"]],template:function(r,i){r&1&&(Xs(),ie(0,"button",0),et("click",function(a){return i.onClick.emit(a)})("focus",function(a){return i.onFocus.emit(a)})("blur",function(a){return i.onBlur.emit(a)}),gs(1),ce(2,wQ,1,0,"ng-container",1)(3,DQ,3,5,"ng-container",2)(4,MQ,3,5,"ng-container",2)(5,RQ,2,3,"span",3)(6,NQ,2,5,"span",4),oe()),r&2&&(O("ngStyle",i.style)("disabled",i.disabled||i.loading)("ngClass",i.buttonClass)("autofocus",i.autofocus),Ne("type",i.type)("aria-label",i.ariaLabel)("data-pc-name","button")("data-pc-section","root")("tabindex",i.tabindex),P(2),O("ngTemplateOutlet",i.contentTemplate),P(),O("ngIf",i.loading),P(),O("ngIf",!i.loading),P(),O("ngIf",!i.contentTemplate&&i.label),P(),O("ngIf",!i.contentTemplate&&i.badge))},dependencies:[Or,li,bi,Xr,Bl,bs,Gc],encapsulation:2,changeDetection:0})}return t})(),Bu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[wE,kr]})}return t})();var CE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var IE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ChevronRightIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var SE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ChevronUpIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var wf=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ChevronDownIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var _s=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["TimesIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var EE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["CalendarIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var FQ=["container"],OQ=["inputfield"],PQ=["contentWrapper"],LQ=[[["p-header"]],[["p-footer"]]],BQ=["p-header","p-footer"],VQ=(t,n,e,r,i)=>({"p-calendar":!0,"p-input-icon-right":t,"p-calendar-w-btn":n,"p-calendar-timeonly":e,"p-calendar-disabled":r,"p-focus":i}),jQ=t=>({clickCallBack:t}),UQ=t=>({"p-datepicker-icon":t}),HQ=(t,n,e,r,i,o)=>({"p-datepicker p-component":!0,"p-datepicker-inline":t,"p-disabled":n,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":r,"p-datepicker-monthpicker":i,"p-datepicker-touch-ui":o}),QF=(t,n)=>({showTransitionParams:t,hideTransitionParams:n}),zQ=t=>({value:"visibleTouchUI",params:t}),WQ=t=>({value:"visible",params:t}),DE=t=>({$implicit:t}),qQ=(t,n)=>({"p-datepicker-other-month":t,"p-datepicker-today":n}),GQ=(t,n)=>({"p-highlight p-datepicker-current-day":t,"p-disabled":n}),JF=(t,n)=>({"p-highlight":t,"p-disabled":n}),ZF=t=>[t];function $Q(t,n){if(t&1){let e=jt();ie(0,"TimesIcon",11),et("click",function(){Ee(e);let i=j(3);return De(i.clear())}),oe()}t&2&&O("styleClass","p-calendar-clear-icon")}function KQ(t,n){}function YQ(t,n){t&1&&ce(0,KQ,0,0,"ng-template")}function XQ(t,n){if(t&1){let e=jt();ie(0,"span",12),et("click",function(){Ee(e);let i=j(3);return De(i.clear())}),ce(1,YQ,1,0,null,13),oe()}if(t&2){let e=j(3);P(),O("ngTemplateOutlet",e.clearIconTemplate)}}function QQ(t,n){if(t&1&&(yt(0),ce(1,$Q,1,1,"TimesIcon",9)(2,XQ,2,1,"span",10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.clearIconTemplate),P(),O("ngIf",e.clearIconTemplate)}}function ZQ(t,n){if(t&1&&Ve(0,"span",16),t&2){let e=j(3);O("ngClass",e.icon)}}function JQ(t,n){t&1&&Ve(0,"CalendarIcon")}function eZ(t,n){}function tZ(t,n){t&1&&ce(0,eZ,0,0,"ng-template")}function nZ(t,n){if(t&1&&(yt(0),ce(1,JQ,1,0,"CalendarIcon",7)(2,tZ,1,0,null,13),bt()),t&2){let e=j(3);P(),O("ngIf",!e.triggerIconTemplate),P(),O("ngTemplateOutlet",e.triggerIconTemplate)}}function rZ(t,n){if(t&1){let e=jt();ie(0,"button",14),et("click",function(i){Ee(e),j();let o=yi(1),a=j();return De(a.onButtonClick(i,o))}),ce(1,ZQ,1,1,"span",15)(2,nZ,3,2,"ng-container",7),oe()}if(t&2){let e,r=j(2);O("disabled",r.disabled),Ne("aria-label",r.iconButtonAriaLabel)("aria-expanded",(e=r.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",r.overlayVisible?r.panelId:null),P(),O("ngIf",r.icon),P(),O("ngIf",!r.icon)}}function iZ(t,n){if(t&1){let e=jt();ie(0,"CalendarIcon",19),et("click",function(i){Ee(e);let o=j(3);return De(o.onButtonClick(i))}),oe()}if(t&2){let e=j(3);O("ngClass",Gt(1,UQ,e.showOnFocus))}}function oZ(t,n){t&1&&St(0)}function aZ(t,n){if(t&1&&(yt(0),ce(1,iZ,1,3,"CalendarIcon",17)(2,oZ,1,0,"ng-container",18),bt()),t&2){let e=j(2);P(),O("ngIf",!e.inputIconTemplate),P(),O("ngTemplateOutlet",e.inputIconTemplate)("ngTemplateOutletContext",Gt(3,jQ,e.onButtonClick.bind(e)))}}function sZ(t,n){if(t&1){let e=jt();ie(0,"input",6,1),et("focus",function(i){Ee(e);let o=j();return De(o.onInputFocus(i))})("keydown",function(i){Ee(e);let o=j();return De(o.onInputKeydown(i))})("click",function(){Ee(e);let i=j();return De(i.onInputClick())})("blur",function(i){Ee(e);let o=j();return De(o.onInputBlur(i))})("input",function(i){Ee(e);let o=j();return De(o.onUserInput(i))}),oe(),ce(2,QQ,3,2,"ng-container",7)(3,rZ,3,6,"button",8)(4,aZ,3,5,"ng-container",7)}if(t&2){let e,r=j();ft(r.inputStyleClass),O("value",r.inputFieldValue)("readonly",r.readonlyInput)("ngStyle",r.inputStyle)("placeholder",r.placeholder||"")("disabled",r.disabled)("ngClass",r.inputClass)("autofocus",r.autofocus),Ne("id",r.inputId)("name",r.name)("required",r.required)("aria-required",r.required)("aria-expanded",(e=r.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",r.overlayVisible?r.panelId:null)("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("tabindex",r.tabindex)("inputmode",r.touchUI?"off":null),P(2),O("ngIf",r.showClear&&!r.disabled&&r.value!=null),P(),O("ngIf",r.showIcon&&r.iconDisplay==="button"),P(),O("ngIf",r.iconDisplay==="input"&&r.showIcon)}}function lZ(t,n){t&1&&St(0)}function uZ(t,n){t&1&&Ve(0,"ChevronLeftIcon",40),t&2&&O("styleClass","p-datepicker-prev-icon")}function cZ(t,n){}function dZ(t,n){t&1&&ce(0,cZ,0,0,"ng-template")}function pZ(t,n){if(t&1&&(ie(0,"span",41),ce(1,dZ,1,0,null,13),oe()),t&2){let e=j(5);P(),O("ngTemplateOutlet",e.previousIconTemplate)}}function hZ(t,n){if(t&1){let e=jt();ie(0,"button",38),et("keydown",function(i){Ee(e);let o=j(4);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(4);return De(o.onPrevButtonClick(i))}),ce(1,uZ,1,1,"ChevronLeftIcon",35)(2,pZ,2,1,"span",39),oe()}if(t&2){let e=j(4);Ne("aria-label",e.prevIconAriaLabel),P(),O("ngIf",!e.previousIconTemplate),P(),O("ngIf",e.previousIconTemplate)}}function fZ(t,n){if(t&1){let e=jt();ie(0,"button",42),et("click",function(i){Ee(e);let o=j(4);return De(o.switchToMonthView(i))})("keydown",function(i){Ee(e);let o=j(4);return De(o.onContainerButtonKeydown(i))}),st(1),oe()}if(t&2){let e=j().$implicit,r=j(3);O("disabled",r.switchViewButtonDisabled()),Ne("aria-label",r.getTranslation("chooseMonth")),P(),fr(" ",r.getMonthName(e.month)," ")}}function mZ(t,n){if(t&1){let e=jt();ie(0,"button",43),et("click",function(i){Ee(e);let o=j(4);return De(o.switchToYearView(i))})("keydown",function(i){Ee(e);let o=j(4);return De(o.onContainerButtonKeydown(i))}),st(1),oe()}if(t&2){let e=j().$implicit,r=j(3);O("disabled",r.switchViewButtonDisabled()),Ne("aria-label",r.getTranslation("chooseYear")),P(),fr(" ",r.getYear(e)," ")}}function gZ(t,n){if(t&1&&(yt(0),st(1),bt()),t&2){let e=j(5);P(),_S("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function vZ(t,n){t&1&&St(0)}function yZ(t,n){if(t&1&&(ie(0,"span",44),ce(1,gZ,2,2,"ng-container",7)(2,vZ,1,0,"ng-container",18),oe()),t&2){let e=j(4);P(),O("ngIf",!e.decadeTemplate),P(),O("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",Gt(3,DE,e.yearPickerValues))}}function bZ(t,n){t&1&&Ve(0,"ChevronRightIcon",40),t&2&&O("styleClass","p-datepicker-next-icon")}function _Z(t,n){}function wZ(t,n){t&1&&ce(0,_Z,0,0,"ng-template")}function xZ(t,n){if(t&1&&(ie(0,"span",45),ce(1,wZ,1,0,null,13),oe()),t&2){let e=j(4);P(),O("ngTemplateOutlet",e.nextIconTemplate)}}function CZ(t,n){if(t&1&&(ie(0,"th",51)(1,"span"),st(2),oe()()),t&2){let e=j(5);P(2),ir(e.getTranslation("weekHeader"))}}function IZ(t,n){if(t&1&&(ie(0,"th",52)(1,"span"),st(2),oe()()),t&2){let e=n.$implicit;P(2),ir(e)}}function SZ(t,n){if(t&1&&(ie(0,"td",55)(1,"span",56),st(2),oe()()),t&2){let e=j().index,r=j(2).$implicit;P(2),fr(" ",r.weekNumbers[e]," ")}}function EZ(t,n){if(t&1&&(yt(0),st(1),bt()),t&2){let e=j(2).$implicit;P(),ir(e.day)}}function DZ(t,n){t&1&&St(0)}function TZ(t,n){if(t&1&&(yt(0),ce(1,DZ,1,0,"ng-container",18),bt()),t&2){let e=j(2).$implicit,r=j(6);P(),O("ngTemplateOutlet",r.dateTemplate)("ngTemplateOutletContext",Gt(2,DE,e))}}function AZ(t,n){t&1&&St(0)}function kZ(t,n){if(t&1&&(yt(0),ce(1,AZ,1,0,"ng-container",18),bt()),t&2){let e=j(2).$implicit,r=j(6);P(),O("ngTemplateOutlet",r.disabledDateTemplate)("ngTemplateOutletContext",Gt(2,DE,e))}}function MZ(t,n){if(t&1&&(ie(0,"div",59),st(1),oe()),t&2){let e=j(2).$implicit;P(),fr(" ",e.day," ")}}function RZ(t,n){if(t&1){let e=jt();yt(0),ie(1,"span",57),et("click",function(i){Ee(e);let o=j().$implicit,a=j(6);return De(a.onDateSelect(i,o))})("keydown",function(i){Ee(e);let o=j().$implicit,a=j(3).index,s=j(3);return De(s.onDateCellKeydown(i,o,a))}),ce(2,EZ,2,1,"ng-container",7)(3,TZ,2,4,"ng-container",7)(4,kZ,2,4,"ng-container",7),oe(),ce(5,MZ,2,1,"div",58),bt()}if(t&2){let e=j().$implicit,r=j(6);P(),O("ngClass",si(6,GQ,r.isSelected(e)&&e.selectable,!e.selectable)),Ne("data-date",r.formatDateKey(r.formatDateMetaToDate(e))),P(),O("ngIf",!r.dateTemplate&&(e.selectable||!r.disabledDateTemplate)),P(),O("ngIf",e.selectable||!r.disabledDateTemplate),P(),O("ngIf",!e.selectable),P(),O("ngIf",r.isSelected(e))}}function NZ(t,n){if(t&1&&(ie(0,"td",16),ce(1,RZ,6,9,"ng-container",7),oe()),t&2){let e=n.$implicit,r=j(6);O("ngClass",si(3,qQ,e.otherMonth,e.today)),Ne("aria-label",e.day),P(),O("ngIf",e.otherMonth?r.showOtherMonths:!0)}}function FZ(t,n){if(t&1&&(ie(0,"tr"),ce(1,SZ,3,1,"td",53)(2,NZ,2,6,"td",54),oe()),t&2){let e=n.$implicit,r=j(5);P(),O("ngIf",r.showWeek),P(),O("ngForOf",e)}}function OZ(t,n){if(t&1&&(ie(0,"div",46)(1,"table",47)(2,"thead")(3,"tr"),ce(4,CZ,3,1,"th",48)(5,IZ,3,1,"th",49),oe()(),ie(6,"tbody"),ce(7,FZ,3,2,"tr",50),oe()()()),t&2){let e=j().$implicit,r=j(3);P(4),O("ngIf",r.showWeek),P(),O("ngForOf",r.weekDays),P(2),O("ngForOf",e.dates)}}function PZ(t,n){if(t&1){let e=jt();ie(0,"div",27)(1,"div",28),ce(2,hZ,3,3,"button",29),ie(3,"div",30),ce(4,fZ,2,3,"button",31)(5,mZ,2,3,"button",32)(6,yZ,3,5,"span",33),oe(),ie(7,"button",34),et("keydown",function(i){Ee(e);let o=j(3);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(3);return De(o.onNextButtonClick(i))}),ce(8,bZ,1,1,"ChevronRightIcon",35)(9,xZ,2,1,"span",36),oe()(),ce(10,OZ,8,3,"div",37),oe()}if(t&2){let e=n.index,r=j(3);P(2),O("ngIf",e===0),P(2),O("ngIf",r.currentView==="date"),P(),O("ngIf",r.currentView!=="year"),P(),O("ngIf",r.currentView==="year"),P(),Wg("display",r.numberOfMonths===1||e===r.numberOfMonths-1?"inline-flex":"none"),Ne("aria-label",r.nextIconAriaLabel),P(),O("ngIf",!r.nextIconTemplate),P(),O("ngIf",r.nextIconTemplate),P(),O("ngIf",r.currentView==="date")}}function LZ(t,n){if(t&1&&(ie(0,"div",59),st(1),oe()),t&2){let e=j().$implicit;P(),fr(" ",e," ")}}function BZ(t,n){if(t&1){let e=jt();ie(0,"span",62),et("click",function(i){let o=Ee(e).index,a=j(4);return De(a.onMonthSelect(i,o))})("keydown",function(i){let o=Ee(e).index,a=j(4);return De(a.onMonthCellKeydown(i,o))}),st(1),ce(2,LZ,2,1,"div",58),oe()}if(t&2){let e=n.$implicit,r=n.index,i=j(4);O("ngClass",si(3,JF,i.isMonthSelected(r),i.isMonthDisabled(r))),P(),fr(" ",e," "),P(),O("ngIf",i.isMonthSelected(r))}}function VZ(t,n){if(t&1&&(ie(0,"div",60),ce(1,BZ,3,6,"span",61),oe()),t&2){let e=j(3);P(),O("ngForOf",e.monthPickerValues())}}function jZ(t,n){if(t&1&&(ie(0,"div",59),st(1),oe()),t&2){let e=j().$implicit;P(),fr(" ",e," ")}}function UZ(t,n){if(t&1){let e=jt();ie(0,"span",65),et("click",function(i){let o=Ee(e).$implicit,a=j(4);return De(a.onYearSelect(i,o))})("keydown",function(i){let o=Ee(e).$implicit,a=j(4);return De(a.onYearCellKeydown(i,o))}),st(1),ce(2,jZ,2,1,"div",58),oe()}if(t&2){let e=n.$implicit,r=j(4);O("ngClass",si(3,JF,r.isYearSelected(e),r.isYearDisabled(e))),P(),fr(" ",e," "),P(),O("ngIf",r.isYearSelected(e))}}function HZ(t,n){if(t&1&&(ie(0,"div",63),ce(1,UZ,3,6,"span",64),oe()),t&2){let e=j(3);P(),O("ngForOf",e.yearPickerValues())}}function zZ(t,n){if(t&1&&(yt(0),ie(1,"div",23),ce(2,PZ,11,10,"div",24),oe(),ce(3,VZ,2,1,"div",25)(4,HZ,2,1,"div",26),bt()),t&2){let e=j(2);P(2),O("ngForOf",e.months),P(),O("ngIf",e.currentView==="month"),P(),O("ngIf",e.currentView==="year")}}function WZ(t,n){t&1&&Ve(0,"ChevronUpIcon")}function qZ(t,n){}function GZ(t,n){t&1&&ce(0,qZ,0,0,"ng-template")}function $Z(t,n){t&1&&(yt(0),st(1,"0"),bt())}function KZ(t,n){t&1&&Ve(0,"ChevronDownIcon")}function YZ(t,n){}function XZ(t,n){t&1&&ce(0,YZ,0,0,"ng-template")}function QZ(t,n){t&1&&Ve(0,"ChevronUpIcon")}function ZZ(t,n){}function JZ(t,n){t&1&&ce(0,ZZ,0,0,"ng-template")}function eJ(t,n){t&1&&(yt(0),st(1,"0"),bt())}function tJ(t,n){t&1&&Ve(0,"ChevronDownIcon")}function nJ(t,n){}function rJ(t,n){t&1&&ce(0,nJ,0,0,"ng-template")}function iJ(t,n){if(t&1&&(ie(0,"div",69)(1,"span"),st(2),oe()()),t&2){let e=j(3);P(2),ir(e.timeSeparator)}}function oJ(t,n){t&1&&Ve(0,"ChevronUpIcon")}function aJ(t,n){}function sJ(t,n){t&1&&ce(0,aJ,0,0,"ng-template")}function lJ(t,n){t&1&&(yt(0),st(1,"0"),bt())}function uJ(t,n){t&1&&Ve(0,"ChevronDownIcon")}function cJ(t,n){}function dJ(t,n){t&1&&ce(0,cJ,0,0,"ng-template")}function pJ(t,n){if(t&1){let e=jt();ie(0,"div",74)(1,"button",68),et("keydown",function(i){Ee(e);let o=j(3);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(3);return De(o.incrementSecond(i))})("keydown.space",function(i){Ee(e);let o=j(3);return De(o.incrementSecond(i))})("mousedown",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseDown(i,2,1))})("mouseup",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(3);return De(i.onTimePickerElementMouseLeave())}),ce(2,oJ,1,0,"ChevronUpIcon",7)(3,sJ,1,0,null,13),oe(),ie(4,"span"),ce(5,lJ,2,0,"ng-container",7),st(6),oe(),ie(7,"button",68),et("keydown",function(i){Ee(e);let o=j(3);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(3);return De(o.decrementSecond(i))})("keydown.space",function(i){Ee(e);let o=j(3);return De(o.decrementSecond(i))})("mousedown",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseDown(i,2,-1))})("mouseup",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(3);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(3);return De(i.onTimePickerElementMouseLeave())}),ce(8,uJ,1,0,"ChevronDownIcon",7)(9,dJ,1,0,null,13),oe()()}if(t&2){let e=j(3);P(),Ne("aria-label",e.getTranslation("nextSecond")),P(),O("ngIf",!e.incrementIconTemplate),P(),O("ngTemplateOutlet",e.incrementIconTemplate),P(2),O("ngIf",e.currentSecond<10),P(),ir(e.currentSecond),P(),Ne("aria-label",e.getTranslation("prevSecond")),P(),O("ngIf",!e.decrementIconTemplate),P(),O("ngTemplateOutlet",e.decrementIconTemplate)}}function hJ(t,n){t&1&&Ve(0,"ChevronUpIcon")}function fJ(t,n){}function mJ(t,n){t&1&&ce(0,fJ,0,0,"ng-template")}function gJ(t,n){t&1&&Ve(0,"ChevronDownIcon")}function vJ(t,n){}function yJ(t,n){t&1&&ce(0,vJ,0,0,"ng-template")}function bJ(t,n){if(t&1){let e=jt();ie(0,"div",75)(1,"button",76),et("keydown",function(i){Ee(e);let o=j(3);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(3);return De(o.toggleAMPM(i))})("keydown.enter",function(i){Ee(e);let o=j(3);return De(o.toggleAMPM(i))}),ce(2,hJ,1,0,"ChevronUpIcon",7)(3,mJ,1,0,null,13),oe(),ie(4,"span"),st(5),oe(),ie(6,"button",76),et("keydown",function(i){Ee(e);let o=j(3);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(3);return De(o.toggleAMPM(i))})("keydown.enter",function(i){Ee(e);let o=j(3);return De(o.toggleAMPM(i))}),ce(7,gJ,1,0,"ChevronDownIcon",7)(8,yJ,1,0,null,13),oe()()}if(t&2){let e=j(3);P(),Ne("aria-label",e.getTranslation("am")),P(),O("ngIf",!e.incrementIconTemplate),P(),O("ngTemplateOutlet",e.incrementIconTemplate),P(2),ir(e.pm?"PM":"AM"),P(),Ne("aria-label",e.getTranslation("pm")),P(),O("ngIf",!e.decrementIconTemplate),P(),O("ngTemplateOutlet",e.decrementIconTemplate)}}function _J(t,n){if(t&1){let e=jt();ie(0,"div",66)(1,"div",67)(2,"button",68),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(2);return De(o.incrementHour(i))})("keydown.space",function(i){Ee(e);let o=j(2);return De(o.incrementHour(i))})("mousedown",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseDown(i,0,1))})("mouseup",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(2);return De(i.onTimePickerElementMouseLeave())}),ce(3,WZ,1,0,"ChevronUpIcon",7)(4,GZ,1,0,null,13),oe(),ie(5,"span"),ce(6,$Z,2,0,"ng-container",7),st(7),oe(),ie(8,"button",68),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(2);return De(o.decrementHour(i))})("keydown.space",function(i){Ee(e);let o=j(2);return De(o.decrementHour(i))})("mousedown",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseDown(i,0,-1))})("mouseup",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(2);return De(i.onTimePickerElementMouseLeave())}),ce(9,KZ,1,0,"ChevronDownIcon",7)(10,XZ,1,0,null,13),oe()(),ie(11,"div",69)(12,"span"),st(13),oe()(),ie(14,"div",70)(15,"button",68),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(2);return De(o.incrementMinute(i))})("keydown.space",function(i){Ee(e);let o=j(2);return De(o.incrementMinute(i))})("mousedown",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseDown(i,1,1))})("mouseup",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(2);return De(i.onTimePickerElementMouseLeave())}),ce(16,QZ,1,0,"ChevronUpIcon",7)(17,JZ,1,0,null,13),oe(),ie(18,"span"),ce(19,eJ,2,0,"ng-container",7),st(20),oe(),ie(21,"button",68),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("keydown.enter",function(i){Ee(e);let o=j(2);return De(o.decrementMinute(i))})("keydown.space",function(i){Ee(e);let o=j(2);return De(o.decrementMinute(i))})("mousedown",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseDown(i,1,-1))})("mouseup",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.enter",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("keyup.space",function(i){Ee(e);let o=j(2);return De(o.onTimePickerElementMouseUp(i))})("mouseleave",function(){Ee(e);let i=j(2);return De(i.onTimePickerElementMouseLeave())}),ce(22,tJ,1,0,"ChevronDownIcon",7)(23,rJ,1,0,null,13),oe()(),ce(24,iJ,3,1,"div",71)(25,pJ,10,8,"div",72)(26,bJ,9,7,"div",73),oe()}if(t&2){let e=j(2);P(2),Ne("aria-label",e.getTranslation("nextHour")),P(),O("ngIf",!e.incrementIconTemplate),P(),O("ngTemplateOutlet",e.incrementIconTemplate),P(2),O("ngIf",e.currentHour<10),P(),ir(e.currentHour),P(),Ne("aria-label",e.getTranslation("prevHour")),P(),O("ngIf",!e.decrementIconTemplate),P(),O("ngTemplateOutlet",e.decrementIconTemplate),P(3),ir(e.timeSeparator),P(2),Ne("aria-label",e.getTranslation("nextMinute")),P(),O("ngIf",!e.incrementIconTemplate),P(),O("ngTemplateOutlet",e.incrementIconTemplate),P(2),O("ngIf",e.currentMinute<10),P(),ir(e.currentMinute),P(),Ne("aria-label",e.getTranslation("prevMinute")),P(),O("ngIf",!e.decrementIconTemplate),P(),O("ngTemplateOutlet",e.decrementIconTemplate),P(),O("ngIf",e.showSeconds),P(),O("ngIf",e.showSeconds),P(),O("ngIf",e.hourFormat=="12")}}function wJ(t,n){if(t&1){let e=jt();ie(0,"div",77)(1,"button",78),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(2);return De(o.onTodayButtonClick(i))}),oe(),ie(2,"button",78),et("keydown",function(i){Ee(e);let o=j(2);return De(o.onContainerButtonKeydown(i))})("click",function(i){Ee(e);let o=j(2);return De(o.onClearButtonClick(i))}),oe()()}if(t&2){let e=j(2);P(),O("label",e.getTranslation("today"))("ngClass",Gt(4,ZF,e.todayButtonStyleClass)),P(),O("label",e.getTranslation("clear"))("ngClass",Gt(6,ZF,e.clearButtonStyleClass))}}function xJ(t,n){t&1&&St(0)}function CJ(t,n){if(t&1){let e=jt();ie(0,"div",20,2),et("@overlayAnimation.start",function(i){Ee(e);let o=j();return De(o.onOverlayAnimationStart(i))})("@overlayAnimation.done",function(i){Ee(e);let o=j();return De(o.onOverlayAnimationDone(i))})("click",function(i){Ee(e);let o=j();return De(o.onOverlayClick(i))}),gs(2),ce(3,lZ,1,0,"ng-container",13)(4,zZ,5,3,"ng-container",7)(5,_J,27,20,"div",21)(6,wJ,3,8,"div",22),gs(7,1),ce(8,xJ,1,0,"ng-container",13),oe()}if(t&2){let e=j();ft(e.panelStyleClass),O("ngStyle",e.panelStyle)("ngClass",ap(15,HQ,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,e.view==="month",e.touchUI))("@overlayAnimation",e.touchUI?Gt(25,zQ,si(22,QF,e.showTransitionOptions,e.hideTransitionOptions)):Gt(30,WQ,si(27,QF,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),Ne("id",e.panelId)("aria-label",e.getTranslation("chooseDate"))("role",e.inline?null:"dialog")("aria-modal",e.inline?null:"true"),P(3),O("ngTemplateOutlet",e.headerTemplate),P(),O("ngIf",!e.timeOnly),P(),O("ngIf",(e.showTime||e.timeOnly)&&e.currentView==="date"),P(),O("ngIf",e.showButtonBar),P(2),O("ngTemplateOutlet",e.footerTemplate)}}var IJ={provide:yo,useExisting:ii(()=>SJ),multi:!0},SJ=(()=>{class t{document;el;renderer;cd;zone;config;overlayService;iconDisplay="button";style;styleClass;inputStyle;inputId;name;inputStyleClass;placeholder;ariaLabelledBy;ariaLabel;iconAriaLabel;disabled;dateFormat;multipleSeparator=",";rangeSeparator="-";inline=!1;showOtherMonths=!0;selectOtherMonths;showIcon;icon;appendTo;readonlyInput;shortYearCutoff="+10";monthNavigator;yearNavigator;hourFormat="24";timeOnly;stepYearPicker=10;stepHour=1;stepMinute=1;stepSecond=1;showSeconds=!1;required;showOnFocus=!0;showWeek=!1;startWeekFromFirstDayOfYear=!1;showClear=!1;dataType="date";selectionMode="single";maxDateCount;showButtonBar;todayButtonStyleClass="p-button-text";clearButtonStyleClass="p-button-text";autofocus;autoZIndex=!0;baseZIndex=0;panelStyleClass;panelStyle;keepInvalid=!1;hideOnDateTimeSelect=!0;touchUI;timeSeparator=":";focusTrap=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";tabindex;variant="outlined";get minDate(){return this._minDate}set minDate(e){this._minDate=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){let r=e.split(":"),i=parseInt(r[0]),o=parseInt(r[1]);this.populateYearOptions(i,o)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,this.currentHour===void 0&&this.initTime(this.value||new Date),this.updateInputfield()}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){let r=e||new Date;this.currentMonth=r.getMonth(),this.currentYear=r.getFullYear(),this.initTime(r),this.createMonths(this.currentMonth,this.currentYear)}}get inputClass(){return{"p-inputtext p-component":!0,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}onFocus=new it;onBlur=new it;onClose=new it;onSelect=new it;onClear=new it;onInput=new it;onTodayClick=new it;onClearClick=new it;onMonthChange=new it;onYearChange=new it;onClickOutside=new it;onShow=new it;templates;containerViewChild;inputfieldViewChild;set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):!this.focus&&!this.inline&&this.initFocusableCell())}contentViewChild;value;dates;months;weekDays;currentMonth;currentYear;currentHour;currentMinute;currentSecond;pm;mask;maskClickListener;overlay;responsiveStyleElement;overlayVisible;onModelChange=()=>{};onModelTouched=()=>{};calendarElement;timePickerTimer;documentClickListener;animationEndListener;ticksTo1970;yearOptions;focus;isKeydown;filled;inputFieldValue=null;_minDate;_maxDate;_showTime;_yearRange;preventDocumentListener;dateTemplate;headerTemplate;footerTemplate;disabledDateTemplate;decadeTemplate;previousIconTemplate;nextIconTemplate;triggerIconTemplate;clearIconTemplate;decrementIconTemplate;incrementIconTemplate;inputIconTemplate;_disabledDates;_disabledDays;selectElement;todayElement;focusElement;scrollHandler;documentResizeListener;navigationState=null;isMonthNavigate;initialized;translationSubscription;_locale;_responsiveOptions;currentView;attributeSelector;panelId;_numberOfMonths=1;_firstDayOfWeek;_view="date";preventFocus;_defaultDate;_focusKey=null;window;get locale(){return this._locale}get iconButtonAriaLabel(){return this.iconAriaLabel?this.iconAriaLabel:this.getTranslation("chooseDate")}get prevIconAriaLabel(){return this.currentView==="year"?this.getTranslation("prevDecade"):this.currentView==="month"?this.getTranslation("prevYear"):this.getTranslation("prevMonth")}get nextIconAriaLabel(){return this.currentView==="year"?this.getTranslation("nextDecade"):this.currentView==="month"?this.getTranslation("nextYear"):this.getTranslation("nextMonth")}constructor(e,r,i,o,a,s,l){this.document=e,this.el=r,this.renderer=i,this.cd=o,this.zone=a,this.config=s,this.overlayService=l,this.window=this.document.defaultView}ngOnInit(){this.attributeSelector=mr(),this.panelId=this.attributeSelector+"_panel";let e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.yearOptions=[],this.currentView=this.view,this.view==="date"&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"inputicon":this.inputIconTemplate=e.template;break;case"previousicon":this.previousIconTemplate=e.template;break;case"nexticon":this.nextIconTemplate=e.template;break;case"triggericon":this.triggerIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"decrementicon":this.decrementIconTemplate=e.template;break;case"incrementicon":this.incrementIconTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.dateTemplate=e.template;break}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),!this.disabled&&!this.inline&&(this.initFocusableCell(),this.numberOfMonths===1&&this.contentViewChild&&this.contentViewChild.nativeElement&&(this.contentViewChild.nativeElement.style.width=ve.getOuterWidth(this.containerViewChild?.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,r){this.yearOptions=[];for(let i=e;i<=r;i++)this.yearOptions.push(i)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),r=this.getTranslation(To.DAY_NAMES_MIN);for(let i=0;i<7;i++)this.weekDays.push(r[e]),e=e==6?0:++e}monthPickerValues(){let e=[];for(let r=0;r<=11;r++)e.push(this.config.getTranslation("monthNamesShort")[r]);return e}yearPickerValues(){let e=[],r=this.currentYear-this.currentYear%this.stepYearPicker;for(let i=0;i<this.stepYearPicker;i++)e.push(r+i);return e}createMonths(e,r){this.months=this.months=[];for(let i=0;i<this.numberOfMonths;i++){let o=e+i,a=r;o>11&&(o=o%11-1,a=r+1),this.months.push(this.createMonth(o,a))}}getWeekNumber(e){let r=new Date(e.getTime());if(this.startWeekFromFirstDayOfYear){let o=+this.getFirstDateOfWeek();r.setDate(r.getDate()+6+o-r.getDay())}else r.setDate(r.getDate()+4-(r.getDay()||7));let i=r.getTime();return r.setMonth(0),r.setDate(1),Math.floor(Math.round((i-r.getTime())/864e5)/7)+1}createMonth(e,r){let i=[],o=this.getFirstDayOfMonthIndex(e,r),a=this.getDaysCountInMonth(e,r),s=this.getDaysCountInPrevMonth(e,r),l=1,u=new Date,c=[],d=Math.ceil((a+o)/7);for(let p=0;p<d;p++){let h=[];if(p==0){for(let m=s-o+1;m<=s;m++){let g=this.getPreviousMonthAndYear(e,r);h.push({day:m,month:g.month,year:g.year,otherMonth:!0,today:this.isToday(u,m,g.month,g.year),selectable:this.isSelectable(m,g.month,g.year,!0)})}let f=7-h.length;for(let m=0;m<f;m++)h.push({day:l,month:e,year:r,today:this.isToday(u,l,e,r),selectable:this.isSelectable(l,e,r,!1)}),l++}else for(let f=0;f<7;f++){if(l>a){let m=this.getNextMonthAndYear(e,r);h.push({day:l-a,month:m.month,year:m.year,otherMonth:!0,today:this.isToday(u,l-a,m.month,m.year),selectable:this.isSelectable(l-a,m.month,m.year,!0)})}else h.push({day:l,month:e,year:r,today:this.isToday(u,l,e,r),selectable:this.isSelectable(l,e,r,!1)});l++}this.showWeek&&c.push(this.getWeekNumber(new Date(h[0].year,h[0].month,h[0].day))),i.push(h)}return{month:e,year:r,dates:i,weekNumbers:c}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){if(this.disabled){e.preventDefault();return}this.isMonthNavigate=!0,this.currentView==="month"?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):this.currentView==="year"?(this.decrementYearPickerStep(),setTimeout(()=>{this.updateFocus()},1)):(this.currentMonth===0?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear))}navForward(e){if(this.disabled){e.preventDefault();return}this.isMonthNavigate=!0,this.currentView==="month"?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):this.currentView==="year"?(this.incrementYearPickerStep(),setTimeout(()=>{this.updateFocus()},1)):(this.currentMonth===11?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear))}decrementYear(){this.currentYear--;let e=this.yearOptions;if(this.yearNavigator&&this.currentYear<e[0]){let r=e[e.length-1]-e[0];this.populateYearOptions(e[0]-r,e[e.length-1]-r)}}decrementYearPickerStep(){this.currentYear=this.currentYear-this.stepYearPicker}incrementYearPickerStep(){this.currentYear=this.currentYear+this.stepYearPicker}incrementYear(){this.currentYear++;let e=this.yearOptions;if(this.yearNavigator&&this.currentYear>e[e.length-1]){let r=e[e.length-1]-e[0];this.populateYearOptions(e[0]+r,e[e.length-1]+r)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,r){if(this.disabled||!r.selectable){e.preventDefault();return}this.isMultipleSelection()&&this.isSelected(r)?(this.value=this.value.filter((i,o)=>!this.isDateEquals(i,r)),this.value.length===0&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(r)&&this.selectDate(r),this.hideOnDateTimeSelect&&(this.isSingleSelection()||this.isRangeSelection()&&this.value[1])&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()}shouldSelectDate(e){return this.isMultipleSelection()&&this.maxDateCount!=null?this.maxDateCount>(this.value?this.value.length:0):!0}onMonthSelect(e,r){this.view==="month"?this.onDateSelect(e,{year:this.currentYear,month:r,day:1,selectable:!0}):(this.currentMonth=r,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,r){this.view==="year"?this.onDateSelect(e,{year:r,month:0,day:1,selectable:!0}):(this.currentYear=r,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value){if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let r=0;r<this.value.length;r++){let i=this.formatDateTime(this.value[r]);e+=i,r!==this.value.length-1&&(e+=this.multipleSeparator+" ")}else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[0],i=this.value[1];e=this.formatDateTime(r),i&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(i))}}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let r=this.keepInvalid?e:null,i=this.isValidDateForTimeConstraints(e);return this.isValidDate(e)?this.timeOnly?r=this.formatTime(e):(r=this.formatDate(e,this.getDateFormat()),this.showTime&&(r+=" "+this.formatTime(e))):this.dataType==="string"&&(r=e),r=i?r:"",r}formatDateMetaToDate(e){return new Date(e.year,e.month,e.day)}formatDateKey(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}setCurrentHourPM(e){this.hourFormat=="12"?(this.pm=e>11,e>=12?this.currentHour=e==12?12:e-12:this.currentHour=e==0?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let r=this.formatDateMetaToDate(e);if(this.showTime&&(this.hourFormat=="12"?this.currentHour===12?r.setHours(this.pm?12:0):r.setHours(this.pm?this.currentHour+12:this.currentHour):r.setHours(this.currentHour),r.setMinutes(this.currentMinute),r.setSeconds(this.currentSecond)),this.minDate&&this.minDate>r&&(r=this.minDate,this.setCurrentHourPM(r.getHours()),this.currentMinute=r.getMinutes(),this.currentSecond=r.getSeconds()),this.maxDate&&this.maxDate<r&&(r=this.maxDate,this.setCurrentHourPM(r.getHours()),this.currentMinute=r.getMinutes(),this.currentSecond=r.getSeconds()),this.isSingleSelection())this.updateModel(r);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,r]:[r]);else if(this.isRangeSelection())if(this.value&&this.value.length){let i=this.value[0],o=this.value[1];!o&&r.getTime()>=i.getTime()?o=r:(i=r,o=null),this.updateModel([i,o])}else this.updateModel([r,null]);this.onSelect.emit(r)}updateModel(e){if(this.value=e,this.dataType=="date")this.onModelChange(this.value);else if(this.dataType=="string")if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let r=null;Array.isArray(this.value)&&(r=this.value.map(i=>this.formatDateTime(i))),this.onModelChange(r)}}getFirstDayOfMonthIndex(e,r){let i=new Date;i.setDate(1),i.setMonth(e),i.setFullYear(r);let o=i.getDay()+this.getSundayIndex();return o>=7?o-7:o}getDaysCountInMonth(e,r){return 32-this.daylightSavingAdjust(new Date(r,e,32)).getDate()}getDaysCountInPrevMonth(e,r){let i=this.getPreviousMonthAndYear(e,r);return this.getDaysCountInMonth(i.month,i.year)}getPreviousMonthAndYear(e,r){let i,o;return e===0?(i=11,o=r-1):(i=e-1,o=r),{month:i,year:o}}getNextMonthAndYear(e,r){let i,o;return e===11?(i=0,o=r+1):(i=e+1,o=r),{month:i,year:o}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(this.value){if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let r=!1;for(let i of this.value)if(r=this.isDateEquals(i,e),r)break;return r}else if(this.isRangeSelection())return this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e)}else return!1}isComparable(){return this.value!=null&&typeof this.value!="string"}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){let[r,i]=this.isRangeSelection()?this.value:[this.value,this.value],o=new Date(this.currentYear,e,1);return o>=r&&o<=(i??r)}return!1}isMonthDisabled(e,r){let i=r??this.currentYear;for(let o=1;o<this.getDaysCountInMonth(e,i)+1;o++)if(this.isSelectable(o,e,i,!1))return!1;return!0}isYearDisabled(e){return Array(12).fill(0).every((r,i)=>this.isMonthDisabled(i,e))}isYearSelected(e){if(!this.isComparable()||this.isMultipleSelection())return!1;let r=this.isRangeSelection()?this.value[0]:this.value;return r?r.getFullYear()===e:!1}isDateEquals(e,r){return e&&rt.isDate(e)?e.getDate()===r.day&&e.getMonth()===r.month&&e.getFullYear()===r.year:!1}isDateBetween(e,r,i){let o=!1;if(rt.isDate(e)&&rt.isDate(r)){let a=this.formatDateMetaToDate(i);return e.getTime()<=a.getTime()&&r.getTime()>=a.getTime()}return o}isSingleSelection(){return this.selectionMode==="single"}isRangeSelection(){return this.selectionMode==="range"}isMultipleSelection(){return this.selectionMode==="multiple"}isToday(e,r,i,o){return e.getDate()===r&&e.getMonth()===i&&e.getFullYear()===o}isSelectable(e,r,i,o){let a=!0,s=!0,l=!0,u=!0;return o&&!this.selectOtherMonths?!1:(this.minDate&&(this.minDate.getFullYear()>i||this.minDate.getFullYear()===i&&this.currentView!="year"&&(this.minDate.getMonth()>r||this.minDate.getMonth()===r&&this.minDate.getDate()>e))&&(a=!1),this.maxDate&&(this.maxDate.getFullYear()<i||this.maxDate.getFullYear()===i&&(this.maxDate.getMonth()<r||this.maxDate.getMonth()===r&&this.maxDate.getDate()<e))&&(s=!1),this.disabledDates&&(l=!this.isDateDisabled(e,r,i)),this.disabledDays&&(u=!this.isDayDisabled(e,r,i)),a&&s&&l&&u)}isDateDisabled(e,r,i){if(this.disabledDates){for(let o of this.disabledDates)if(o.getFullYear()===i&&o.getMonth()===r&&o.getDate()===e)return!0}return!1}isDayDisabled(e,r,i){if(this.disabledDays){let a=new Date(i,r,e).getDay();return this.disabledDays.indexOf(a)!==-1}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,r=this.inputfieldViewChild?.nativeElement){this.overlayVisible?this.hideOverlay():(r.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return this.currentView==="month"?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:if(this.inline||this.trapFocus(e),this.inline){let r=ve.findSingle(this.containerViewChild?.nativeElement,".p-datepicker-header"),i=e.target;if(this.timeOnly)return;i==r.children[r?.children?.length-1]&&this.initFocusableCell()}break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break;default:break}}onInputKeydown(e){this.isKeydown=!0,e.keyCode===40&&this.contentViewChild?this.trapFocus(e):e.keyCode===27?this.overlayVisible&&(this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault()):e.keyCode===13?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):e.keyCode===9&&this.contentViewChild&&(ve.getFocusableElements(this.contentViewChild.nativeElement).forEach(r=>r.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,r,i){let o=e.currentTarget,a=o.parentElement,s=this.formatDateMetaToDate(r);switch(e.which){case 40:{o.tabIndex="-1";let f=ve.index(a),m=a.parentElement.nextElementSibling;if(m){let g=m.children[f].children[0];ve.hasClass(g,"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(m.children[f].children[0].tabIndex="0",m.children[f].children[0].focus())}else this.navigationState={backward:!1},this.navForward(e);e.preventDefault();break}case 38:{o.tabIndex="-1";let f=ve.index(a),m=a.parentElement.previousElementSibling;if(m){let g=m.children[f].children[0];ve.hasClass(g,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(g.tabIndex="0",g.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{o.tabIndex="-1";let f=a.previousElementSibling;if(f){let m=f.children[0];ve.hasClass(m,"p-disabled")||ve.hasClass(m.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,i):(m.tabIndex="0",m.focus())}else this.navigateToMonth(!0,i);e.preventDefault();break}case 39:{o.tabIndex="-1";let f=a.nextElementSibling;if(f){let m=f.children[0];ve.hasClass(m,"p-disabled")?this.navigateToMonth(!1,i):(m.tabIndex="0",m.focus())}else this.navigateToMonth(!1,i);e.preventDefault();break}case 13:case 32:{this.onDateSelect(e,r),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.inline||this.trapFocus(e);break}case 33:{o.tabIndex="-1";let f=new Date(s.getFullYear(),s.getMonth()-1,s.getDate()),m=this.formatDateKey(f);this.navigateToMonth(!0,i,`span[data-date='${m}']:not(.p-disabled):not(.p-ink)`),e.preventDefault();break}case 34:{o.tabIndex="-1";let f=new Date(s.getFullYear(),s.getMonth()+1,s.getDate()),m=this.formatDateKey(f);this.navigateToMonth(!1,i,`span[data-date='${m}']:not(.p-disabled):not(.p-ink)`),e.preventDefault();break}case 36:o.tabIndex="-1";let l=new Date(s.getFullYear(),s.getMonth(),1),u=this.formatDateKey(l),c=ve.findSingle(o.offsetParent,`span[data-date='${u}']:not(.p-disabled):not(.p-ink)`);c&&(c.tabIndex="0",c.focus()),e.preventDefault();break;case 35:o.tabIndex="-1";let d=new Date(s.getFullYear(),s.getMonth()+1,0),p=this.formatDateKey(d),h=ve.findSingle(o.offsetParent,`span[data-date='${p}']:not(.p-disabled):not(.p-ink)`);d&&(h.tabIndex="0",h.focus()),e.preventDefault();break;default:break}}onMonthCellKeydown(e,r){let i=e.currentTarget;switch(e.which){case 38:case 40:{i.tabIndex="-1";var o=i.parentElement.children,a=ve.index(i);let s=o[e.which===40?a+3:a-3];s&&(s.tabIndex="0",s.focus()),e.preventDefault();break}case 37:{i.tabIndex="-1";let s=i.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{i.tabIndex="-1";let s=i.nextElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:{this.onMonthSelect(e,r),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.inline||this.trapFocus(e);break}default:break}}onYearCellKeydown(e,r){let i=e.currentTarget;switch(e.which){case 38:case 40:{i.tabIndex="-1";var o=i.parentElement.children,a=ve.index(i);let s=o[e.which===40?a+2:a-2];s&&(s.tabIndex="0",s.focus()),e.preventDefault();break}case 37:{i.tabIndex="-1";let s=i.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{i.tabIndex="-1";let s=i.nextElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:{this.onYearSelect(e,r),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.trapFocus(e);break}default:break}}navigateToMonth(e,r,i){if(e)if(this.numberOfMonths===1||r===0)this.navigationState={backward:!0},this._focusKey=i,this.navBackward(event);else{let o=this.contentViewChild.nativeElement.children[r-1];if(i){let a=ve.findSingle(o,i);a.tabIndex="0",a.focus()}else{let a=ve.find(o,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),s=a[a.length-1];s.tabIndex="0",s.focus()}}else if(this.numberOfMonths===1||r===this.numberOfMonths-1)this.navigationState={backward:!1},this._focusKey=i,this.navForward(event);else{let o=this.contentViewChild.nativeElement.children[r+1];if(i){let a=ve.findSingle(o,i);a.tabIndex="0",a.focus()}else{let a=ve.findSingle(o,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");a.tabIndex="0",a.focus()}}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?ve.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():ve.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let r;this.currentView==="month"?r=ve.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"):this.currentView==="year"?r=ve.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"):r=ve.find(this.contentViewChild.nativeElement,this._focusKey||".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),r&&r.length>0&&(e=r[r.length-1])}else this.currentView==="month"?e=ve.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"):this.currentView==="year"?e=ve.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"):e=ve.findSingle(this.contentViewChild.nativeElement,this._focusKey||".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null,this._focusKey=null}else this.initFocusableCell();this.alignOverlay()}initFocusableCell(){let e=this.contentViewChild?.nativeElement,r;if(this.currentView==="month"){let i=ve.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),o=ve.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");i.forEach(a=>a.tabIndex=-1),r=o||i[0],i.length===0&&ve.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(s=>s.tabIndex=-1)}else if(this.currentView==="year"){let i=ve.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),o=ve.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");i.forEach(a=>a.tabIndex=-1),r=o||i[0],i.length===0&&ve.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(s=>s.tabIndex=-1)}else if(r=ve.findSingle(e,"span.p-highlight"),!r){let i=ve.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i?r=i:r=ve.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}r&&(r.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||r.focus()},1),this.preventFocus=!1)}trapFocus(e){let r=ve.getFocusableElements(this.contentViewChild.nativeElement);if(r&&r.length>0)if(!r[0].ownerDocument.activeElement)r[0].focus();else{let i=r.indexOf(r[0].ownerDocument.activeElement);if(e.shiftKey)if(i==-1||i===0)if(this.focusTrap)r[r.length-1].focus();else{if(i===-1)return this.hideOverlay();if(i===0)return}else r[i-1].focus();else if(i==-1)if(this.timeOnly)r[0].focus();else{let o=0;for(let a=0;a<r.length;a++)r[a].tagName==="SPAN"&&(o=a);r[o].focus()}else if(i===r.length-1){if(!this.focusTrap&&i!=-1)return this.hideOverlay();r[0].focus()}else r[i+1].focus()}e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}convertTo24Hour(e,r){return this.hourFormat=="12"?e===12?r?12:0:r?e+12:e:e}constrainTime(e,r,i,o){let a=[e,r,i],s,l=this.value,u=this.convertTo24Hour(e,o),c=this.isRangeSelection(),d=this.isMultipleSelection();(c||d)&&(this.value||(this.value=[new Date,new Date]),c&&(l=this.value[1]||this.value[0]),d&&(l=this.value[this.value.length-1]));let h=l?l.toDateString():null,f=this.minDate&&h&&this.minDate.toDateString()===h,m=this.maxDate&&h&&this.maxDate.toDateString()===h;switch(f&&(s=this.minDate.getHours()>=12),!0){case(f&&s&&this.minDate.getHours()===12&&this.minDate.getHours()>u):a[0]=11;case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()>r):a[1]=this.minDate.getMinutes();case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()===r&&this.minDate.getSeconds()>i):a[2]=this.minDate.getSeconds();break;case(f&&!s&&this.minDate.getHours()-1===u&&this.minDate.getHours()>u):a[0]=11,this.pm=!0;case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()>r):a[1]=this.minDate.getMinutes();case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()===r&&this.minDate.getSeconds()>i):a[2]=this.minDate.getSeconds();break;case(f&&s&&this.minDate.getHours()>u&&u!==12):this.setCurrentHourPM(this.minDate.getHours()),a[0]=this.currentHour;case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()>r):a[1]=this.minDate.getMinutes();case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()===r&&this.minDate.getSeconds()>i):a[2]=this.minDate.getSeconds();break;case(f&&this.minDate.getHours()>u):a[0]=this.minDate.getHours();case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()>r):a[1]=this.minDate.getMinutes();case(f&&this.minDate.getHours()===u&&this.minDate.getMinutes()===r&&this.minDate.getSeconds()>i):a[2]=this.minDate.getSeconds();break;case(m&&this.maxDate.getHours()<u):a[0]=this.maxDate.getHours();case(m&&this.maxDate.getHours()===u&&this.maxDate.getMinutes()<r):a[1]=this.maxDate.getMinutes();case(m&&this.maxDate.getHours()===u&&this.maxDate.getMinutes()===r&&this.maxDate.getSeconds()<i):a[2]=this.maxDate.getSeconds();break}return a}incrementHour(e){let r=this.currentHour??0,i=(this.currentHour??0)+this.stepHour,o=this.pm;this.hourFormat=="24"?i=i>=24?i-24:i:this.hourFormat=="12"&&(r<12&&i>11&&(o=!this.pm),i=i>=13?i-12:i),this.toggleAMPMIfNotMinDate(o),[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(i,this.currentMinute,this.currentSecond,o),e.preventDefault()}toggleAMPMIfNotMinDate(e){let r=this.value;(this.selectionMode=="range"||this.selectionMode=="multiple")&&Array.isArray(r)&&r.length>0&&(r=r[r.length-1]);let i=r?r.toDateString():null;this.minDate&&i&&this.minDate.toDateString()===i&&this.minDate.getHours()>=12?this.pm=!0:this.pm=e}onTimePickerElementMouseDown(e,r,i){this.disabled||(this.repeat(e,null,r,i),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,r,i,o){let a=r||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,i,o),this.cd.markForCheck()},a),i){case 0:o===1?this.incrementHour(e):this.decrementHour(e);break;case 1:o===1?this.incrementMinute(e):this.decrementMinute(e);break;case 2:o===1?this.incrementSecond(e):this.decrementSecond(e);break}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let r=(this.currentHour??0)-this.stepHour,i=this.pm;this.hourFormat=="24"?r=r<0?24+r:r:this.hourFormat=="12"&&(this.currentHour===12&&(i=!this.pm),r=r<=0?12+r:r),this.toggleAMPMIfNotMinDate(i),[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(r,this.currentMinute,this.currentSecond,i),e.preventDefault()}incrementMinute(e){let r=(this.currentMinute??0)+this.stepMinute;r=r>59?r-60:r,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,r,this.currentSecond,this.pm),e.preventDefault()}decrementMinute(e){let r=(this.currentMinute??0)-this.stepMinute;r=r<0?60+r:r,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,r,this.currentSecond,this.pm),e.preventDefault()}incrementSecond(e){let r=this.currentSecond+this.stepSecond;r=r>59?r-60:r,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,r,this.pm),e.preventDefault()}decrementSecond(e){let r=this.currentSecond-this.stepSecond;r=r<0?60+r:r,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,r,this.pm),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,this.hourFormat=="12"?this.currentHour===12?e.setHours(this.pm?12:0):e.setHours(this.pm?this.currentHour+12:this.currentHour):e.setHours(this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(this.value[1]?e=[this.value[0],e]:e=[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){let r=!this.pm;this.pm=r,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,this.currentSecond,r),this.updateTime(),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let r=e.target.value;try{let i=this.parseValueFromString(r);this.isValidSelection(i)?(this.updateModel(i),this.updateUI()):this.keepInvalid&&this.updateModel(i)}catch{let o=this.keepInvalid?r:null;this.updateModel(o)}this.filled=r!=null&&r.length,this.onInput.emit(e)}isValidSelection(e){if(this.isSingleSelection())return this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1);let r=e.every(i=>this.isSelectable(i.getDate(),i.getMonth(),i.getFullYear(),!1));return r&&this.isRangeSelection()&&(r=e.length===1||e.length>1&&e[1]>=e[0]),r}parseValueFromString(e){if(!e||e.trim().length===0)return null;let r;if(this.isSingleSelection())r=this.parseDateTime(e);else if(this.isMultipleSelection()){let i=e.split(this.multipleSeparator);r=[];for(let o of i)r.push(this.parseDateTime(o.trim()))}else if(this.isRangeSelection()){let i=e.split(" "+this.rangeSeparator+" ");r=[];for(let o=0;o<i.length;o++)r[o]=this.parseDateTime(i[o].trim())}return r}parseDateTime(e){let r,i=e.split(" ");if(this.timeOnly)r=new Date,this.populateTime(r,i[0],i[1]);else{let o=this.getDateFormat();if(this.showTime){let a=this.hourFormat=="12"?i.pop():null,s=i.pop();r=this.parseDate(i.join(" "),o),this.populateTime(r,s,a)}else r=this.parseDate(e,o)}return r}populateTime(e,r,i){if(this.hourFormat=="12"&&!i)throw"Invalid Time";this.pm=i==="PM"||i==="pm";let o=this.parseTime(r);e.setHours(o.hour),e.setMinutes(o.minute),e.setSeconds(o.second)}isValidDate(e){return rt.isDate(e)&&rt.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[1]||e[0]);let r=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=r.getMonth(),this.currentYear=r.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(r.getHours()),this.currentMinute=r.getMinutes(),this.currentSecond=r.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild?.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay?.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?_a.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):_a.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e);break}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&_a.clear(e.element);break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.document.body.appendChild(this.overlay):ve.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?(this.view==="date"?(this.overlay.style.width||(this.overlay.style.width=ve.getOuterWidth(this.overlay)+"px"),this.overlay.style.minWidth||(this.overlay.style.minWidth=ve.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px")):this.overlay.style.width||(this.overlay.style.width=ve.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px"),ve.absolutePosition(this.overlay,this.inputfieldViewChild?.nativeElement)):ve.relativePosition(this.overlay,this.inputfieldViewChild?.nativeElement))}enableModality(e){!this.mask&&this.touchUI&&(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(e.style.zIndex)-1)),ve.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",i=>{this.disableModality(),this.overlayVisible=!1}),this.renderer.appendChild(this.document.body,this.mask),ve.blockBodyScroll())}disableModality(){this.mask&&(ve.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener||(this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyMask.bind(this))))}destroyMask(){if(!this.mask)return;this.renderer.removeChild(this.document.body,this.mask);let e=this.document.body.children,r;for(let i=0;i<e.length;i++){let o=e[i];if(ve.hasClass(o,"p-datepicker-mask-scrollblocker")){r=!0;break}}r||ve.unblockBodyScroll(),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&typeof this.value=="string")try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(To.FIRST_DAY_OF_WEEK)}formatDate(e,r){if(!e)return"";let i,o=c=>{let d=i+1<r.length&&r.charAt(i+1)===c;return d&&i++,d},a=(c,d,p)=>{let h=""+d;if(o(c))for(;h.length<p;)h="0"+h;return h},s=(c,d,p,h)=>o(c)?h[d]:p[d],l="",u=!1;if(e)for(i=0;i<r.length;i++)if(u)r.charAt(i)==="'"&&!o("'")?u=!1:l+=r.charAt(i);else switch(r.charAt(i)){case"d":l+=a("d",e.getDate(),2);break;case"D":l+=s("D",e.getDay(),this.getTranslation(To.DAY_NAMES_SHORT),this.getTranslation(To.DAY_NAMES));break;case"o":l+=a("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=a("m",e.getMonth()+1,2);break;case"M":l+=s("M",e.getMonth(),this.getTranslation(To.MONTH_NAMES_SHORT),this.getTranslation(To.MONTH_NAMES));break;case"y":l+=o("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":l+=e.getTime();break;case"!":l+=e.getTime()*1e4+this.ticksTo1970;break;case"'":o("'")?l+="'":u=!0;break;default:l+=r.charAt(i)}return l}formatTime(e){if(!e)return"";let r="",i=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return this.hourFormat=="12"&&i>11&&i!=12&&(i-=12),this.hourFormat=="12"?r+=i===0?12:i<10?"0"+i:i:r+=i<10?"0"+i:i,r+=":",r+=o<10?"0"+o:o,this.showSeconds&&(r+=":",r+=a<10?"0"+a:a),this.hourFormat=="12"&&(r+=e.getHours()>11?" PM":" AM"),r}parseTime(e){let r=e.split(":"),i=this.showSeconds?3:2;if(r.length!==i)throw"Invalid time";let o=parseInt(r[0]),a=parseInt(r[1]),s=this.showSeconds?parseInt(r[2]):null;if(isNaN(o)||isNaN(a)||o>23||a>59||this.hourFormat=="12"&&o>12||this.showSeconds&&(isNaN(s)||s>59))throw"Invalid time";return this.hourFormat=="12"&&(o!==12&&this.pm?o+=12:!this.pm&&o===12&&(o-=12)),{hour:o,minute:a,second:s}}parseDate(e,r){if(r==null||e==null)throw"Invalid arguments";if(e=typeof e=="object"?e.toString():e+"",e==="")return null;let i,o,a,s=0,l=typeof this.shortYearCutoff!="string"?this.shortYearCutoff:new Date().getFullYear()%100+parseInt(this.shortYearCutoff,10),u=-1,c=-1,d=-1,p=-1,h=!1,f,m=w=>{let x=i+1<r.length&&r.charAt(i+1)===w;return x&&i++,x},g=w=>{let x=m(w),I=w==="@"?14:w==="!"?20:w==="y"&&x?4:w==="o"?3:2,D=w==="y"?I:1,A=new RegExp("^\\d{"+D+","+I+"}"),E=e.substring(s).match(A);if(!E)throw"Missing number at position "+s;return s+=E[0].length,parseInt(E[0],10)},y=(w,x,I)=>{let D=-1,A=m(w)?I:x,E=[];for(let R=0;R<A.length;R++)E.push([R,A[R]]);E.sort((R,N)=>-(R[1].length-N[1].length));for(let R=0;R<E.length;R++){let N=E[R][1];if(e.substr(s,N.length).toLowerCase()===N.toLowerCase()){D=E[R][0],s+=N.length;break}}if(D!==-1)return D+1;throw"Unknown name at position "+s},b=()=>{if(e.charAt(s)!==r.charAt(i))throw"Unexpected literal at position "+s;s++};for(this.view==="month"&&(d=1),i=0;i<r.length;i++)if(h)r.charAt(i)==="'"&&!m("'")?h=!1:b();else switch(r.charAt(i)){case"d":d=g("d");break;case"D":y("D",this.getTranslation(To.DAY_NAMES_SHORT),this.getTranslation(To.DAY_NAMES));break;case"o":p=g("o");break;case"m":c=g("m");break;case"M":c=y("M",this.getTranslation(To.MONTH_NAMES_SHORT),this.getTranslation(To.MONTH_NAMES));break;case"y":u=g("y");break;case"@":f=new Date(g("@")),u=f.getFullYear(),c=f.getMonth()+1,d=f.getDate();break;case"!":f=new Date((g("!")-this.ticksTo1970)/1e4),u=f.getFullYear(),c=f.getMonth()+1,d=f.getDate();break;case"'":m("'")?b():h=!0;break;default:b()}if(s<e.length&&(a=e.substr(s),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(u===-1?u=new Date().getFullYear():u<100&&(u+=new Date().getFullYear()-new Date().getFullYear()%100+(u<=l?0:-100)),p>-1){c=1,d=p;do{if(o=this.getDaysCountInMonth(u,c-1),d<=o)break;c++,d-=o}while(!0)}if(this.view==="year"&&(c=c===-1?1:c,d=d===-1?1:d),f=this.daylightSavingAdjust(new Date(u,c-1,d)),f.getFullYear()!==u||f.getMonth()+1!==c||f.getDate()!==d)throw"Invalid date";return f}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&this.inputFieldValue!=""}isValidDateForTimeConstraints(e){return this.keepInvalid?!0:(!this.minDate||e>=this.minDate)&&(!this.maxDate||e<=this.maxDate)}onTodayButtonClick(e){let r=new Date,i={day:r.getDate(),month:r.getMonth(),year:r.getFullYear(),otherMonth:r.getMonth()!==this.currentMonth||r.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.createMonths(r.getMonth(),r.getFullYear()),this.onDateSelect(e,i),this.onTodayClick.emit(r)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",ve.setAttribute(this.responsiveStyleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.body,this.responsiveStyleElement));let e="";if(this.responsiveOptions){let r=[...this.responsiveOptions].filter(i=>!!(i.breakpoint&&i.numMonths)).sort((i,o)=>-1*i.breakpoint.localeCompare(o.breakpoint,void 0,{numeric:!0}));for(let i=0;i<r.length;i++){let{breakpoint:o,numMonths:a}=r[i],s=`
                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${a}) .p-datepicker-next {
                            display: inline-flex !important;
                        }
                    `;for(let l=a;l<this.numberOfMonths;l++)s+=`
                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l+1}) {
                                display: none !important;
                            }
                        `;e+=`
                        @media screen and (max-width: ${o}) {
                            ${s}
                        }
                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{let e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(e,"mousedown",r=>{this.isOutsideClicked(r)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(r),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lu(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return ve.hasClass(e.target,"p-datepicker-prev")||ve.hasClass(e.target,"p-datepicker-prev-icon")||ve.hasClass(e.target,"p-datepicker-next")||ve.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!ve.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&_a.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zn),Oe(Wr),Oe(br),Oe(En),Oe(Mi),Oe(_f))};static \u0275cmp=ct({type:t,selectors:[["p-calendar"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&(Zn(FQ,5),Zn(OQ,5),Zn(PQ,5)),r&2){let o;sn(o=ln())&&(i.containerViewChild=o.first),sn(o=ln())&&(i.inputfieldViewChild=o.first),sn(o=ln())&&(i.content=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(r,i){r&2&&go("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{iconDisplay:"iconDisplay",style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",iconAriaLabel:"iconAriaLabel",disabled:[Se.HasDecoratorInputTransform,"disabled","disabled",We],dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:[Se.HasDecoratorInputTransform,"inline","inline",We],showOtherMonths:[Se.HasDecoratorInputTransform,"showOtherMonths","showOtherMonths",We],selectOtherMonths:[Se.HasDecoratorInputTransform,"selectOtherMonths","selectOtherMonths",We],showIcon:[Se.HasDecoratorInputTransform,"showIcon","showIcon",We],icon:"icon",appendTo:"appendTo",readonlyInput:[Se.HasDecoratorInputTransform,"readonlyInput","readonlyInput",We],shortYearCutoff:"shortYearCutoff",monthNavigator:[Se.HasDecoratorInputTransform,"monthNavigator","monthNavigator",We],yearNavigator:[Se.HasDecoratorInputTransform,"yearNavigator","yearNavigator",We],hourFormat:"hourFormat",timeOnly:[Se.HasDecoratorInputTransform,"timeOnly","timeOnly",We],stepYearPicker:[Se.HasDecoratorInputTransform,"stepYearPicker","stepYearPicker",pn],stepHour:[Se.HasDecoratorInputTransform,"stepHour","stepHour",pn],stepMinute:[Se.HasDecoratorInputTransform,"stepMinute","stepMinute",pn],stepSecond:[Se.HasDecoratorInputTransform,"stepSecond","stepSecond",pn],showSeconds:[Se.HasDecoratorInputTransform,"showSeconds","showSeconds",We],required:[Se.HasDecoratorInputTransform,"required","required",We],showOnFocus:[Se.HasDecoratorInputTransform,"showOnFocus","showOnFocus",We],showWeek:[Se.HasDecoratorInputTransform,"showWeek","showWeek",We],startWeekFromFirstDayOfYear:"startWeekFromFirstDayOfYear",showClear:[Se.HasDecoratorInputTransform,"showClear","showClear",We],dataType:"dataType",selectionMode:"selectionMode",maxDateCount:[Se.HasDecoratorInputTransform,"maxDateCount","maxDateCount",pn],showButtonBar:[Se.HasDecoratorInputTransform,"showButtonBar","showButtonBar",We],todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We],autoZIndex:[Se.HasDecoratorInputTransform,"autoZIndex","autoZIndex",We],baseZIndex:[Se.HasDecoratorInputTransform,"baseZIndex","baseZIndex",pn],panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:[Se.HasDecoratorInputTransform,"keepInvalid","keepInvalid",We],hideOnDateTimeSelect:[Se.HasDecoratorInputTransform,"hideOnDateTimeSelect","hideOnDateTimeSelect",We],touchUI:[Se.HasDecoratorInputTransform,"touchUI","touchUI",We],timeSeparator:"timeSeparator",focusTrap:[Se.HasDecoratorInputTransform,"focusTrap","focusTrap",We],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],variant:"variant",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale",view:"view",defaultDate:"defaultDate"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[ai([IJ]),Er],ngContentSelectors:BQ,decls:4,vars:12,consts:[["container",""],["inputfield",""],["contentWrapper",""],[3,"ngClass","ngStyle"],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","role","combobox","aria-autocomplete","none","aria-haspopup","dialog","autocomplete","off","pAutoFocus","",3,"focus","keydown","click","blur","input","value","readonly","ngStyle","placeholder","disabled","ngClass","autofocus"],[4,"ngIf"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","class","p-datepicker-trigger p-button-icon-only","tabindex","0",3,"disabled","click",4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-calendar-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-calendar-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger","p-button-icon-only",3,"click","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","click",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"click","ngClass"],[3,"click","ngStyle","ngClass"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[3,"styleClass",4,"ngIf"],["class","p-datepicker-next-icon",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],["class","p-datepicker-prev-icon",4,"ngIf"],[3,"styleClass"],[1,"p-datepicker-prev-icon"],["type","button",1,"p-datepicker-month","p-link",3,"click","keydown","disabled"],["type","button",1,"p-datepicker-year","p-link",3,"click","keydown","disabled"],[1,"p-datepicker-decade"],[1,"p-datepicker-next-icon"],[1,"p-datepicker-calendar-container"],["role","grid",1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],["draggable","false","pRipple","",3,"click","keydown","ngClass"],["class","p-hidden-accessible","aria-live","polite",4,"ngIf"],["aria-live","polite",1,"p-hidden-accessible"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"click","keydown","ngClass"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"click","keydown","ngClass"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"keydown","click","label","ngClass"]],template:function(r,i){r&1&&(Xs(LQ),ie(0,"span",3,0),ce(2,sZ,5,22,"ng-template",4)(3,CJ,9,32,"div",5),oe()),r&2&&(ft(i.styleClass),O("ngClass",ff(6,VQ,i.showIcon&&i.iconDisplay==="input",i.showIcon&&i.iconDisplay==="button",i.timeOnly,i.disabled,i.focus||i.overlayVisible))("ngStyle",i.style),P(2),O("ngIf",!i.inline),P(),O("ngIf",i.inline||i.overlayVisible))},dependencies:()=>[Xr,ba,Or,li,bi,m_,Bl,CE,IE,SE,wf,_s,EE,bs],styles:[`@layer primeng{.p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%;text-overflow:ellipsis}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-datepicker-icon{pointer-events:none}.p-calendar-clearable{position:relative}}
`],encapsulation:2,data:{animation:[t_("overlayAnimation",[CF("visibleTouchUI",Pl({transform:"translate(-50%,-50%)",opacity:1})),qc("void => visible",[Pl({opacity:0,transform:"scaleY(0.8)"}),Wc("{{showTransitionParams}}",Pl({opacity:1,transform:"*"}))]),qc("visible => void",[Wc("{{hideTransitionParams}}",Pl({opacity:0}))]),qc("void => visibleTouchUI",[Pl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Wc("{{showTransitionParams}}")]),qc("visibleTouchUI => void",[Wc("{{hideTransitionParams}}",Pl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0})}return t})(),eO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,Bu,kr,$c,CE,IE,SE,wf,_s,EE,Ll,Bu,kr]})}return t})();var EJ=["overlay"],DJ=["content"],TJ=["*"],AJ=(t,n,e,r,i,o,a,s,l,u,c,d,p,h)=>({"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":t,"p-overlay-center":n,"p-overlay-top":e,"p-overlay-top-start":r,"p-overlay-top-end":i,"p-overlay-bottom":o,"p-overlay-bottom-start":a,"p-overlay-bottom-end":s,"p-overlay-left":l,"p-overlay-left-start":u,"p-overlay-left-end":c,"p-overlay-right":d,"p-overlay-right-start":p,"p-overlay-right-end":h}),kJ=(t,n,e)=>({showTransitionParams:t,hideTransitionParams:n,transform:e}),MJ=t=>({value:"visible",params:t}),RJ=t=>({mode:t}),NJ=t=>({$implicit:t});function FJ(t,n){t&1&&St(0)}function OJ(t,n){if(t&1){let e=jt();ie(0,"div",3,1),et("click",function(i){Ee(e);let o=j(2);return De(o.onOverlayContentClick(i))})("@overlayContentAnimation.start",function(i){Ee(e);let o=j(2);return De(o.onOverlayContentAnimationStart(i))})("@overlayContentAnimation.done",function(i){Ee(e);let o=j(2);return De(o.onOverlayContentAnimationDone(i))}),gs(2),ce(3,FJ,1,0,"ng-container",4),oe()}if(t&2){let e=j(2);ft(e.contentStyleClass),O("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",Gt(11,MJ,vo(7,kJ,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),P(3),O("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Gt(15,NJ,Gt(13,RJ,e.overlayMode)))}}function PJ(t,n){if(t&1){let e=jt();ie(0,"div",3,0),et("click",function(){Ee(e);let i=j();return De(i.onOverlayClick())}),ce(2,OJ,4,17,"div",2),oe()}if(t&2){let e=j();ft(e.styleClass),O("ngStyle",e.style)("ngClass",xS(5,AJ,[e.modal,e.modal&&e.overlayResponsiveDirection==="center",e.modal&&e.overlayResponsiveDirection==="top",e.modal&&e.overlayResponsiveDirection==="top-start",e.modal&&e.overlayResponsiveDirection==="top-end",e.modal&&e.overlayResponsiveDirection==="bottom",e.modal&&e.overlayResponsiveDirection==="bottom-start",e.modal&&e.overlayResponsiveDirection==="bottom-end",e.modal&&e.overlayResponsiveDirection==="left",e.modal&&e.overlayResponsiveDirection==="left-start",e.modal&&e.overlayResponsiveDirection==="left-end",e.modal&&e.overlayResponsiveDirection==="right",e.modal&&e.overlayResponsiveDirection==="right-start",e.modal&&e.overlayResponsiveDirection==="right-end"])),P(2),O("ngIf",e.visible)}}var LJ={provide:yo,useExisting:ii(()=>TE),multi:!0},BJ=dE([Pl({transform:"{{transform}}",opacity:0}),Wc("{{showTransitionParams}}")]),VJ=dE([Wc("{{hideTransitionParams}}",Pl({transform:"{{transform}}",opacity:0}))]),TE=(()=>{class t{document;platformId;el;renderer;config;overlayService;cd;zone;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return rt.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return rt.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return rt.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return rt.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){let e=this._target||this.overlayOptions?.target;return e===void 0?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){let e=this._autoZIndex||this.overlayOptions?.autoZIndex;return e===void 0?!0:e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){let e=this._baseZIndex||this.overlayOptions?.baseZIndex;return e===void 0?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){let e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return e===void 0?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){let e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return e===void 0?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}visibleChange=new it;onBeforeShow=new it;onShow=new it;onBeforeHide=new it;onHide=new it;onAnimationStart=new it;onAnimationDone=new it;templates;overlayViewChild;contentViewChild;contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if(Do(this.platformId))return this.mode==="modal"||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return nt(nt({},this.config?.overlayOptions),this.options)}get overlayResponsiveOptions(){return nt(nt({},this.overlayOptions?.responsive),this.responsive)}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return ve.getTargetElement(this.target,this.el?.nativeElement)}constructor(e,r,i,o,a,s,l,u){this.document=e,this.platformId=r,this.el=i,this.renderer=o,this.config=a,this.overlayService=s,this.cd=l,this.zone=u,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}show(e,r=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),r&&ve.focus(this.targetEl),this.modal&&ve.addClass(this.document?.body,"p-overflow-hidden")}hide(e,r=!1){if(this.visible)this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),r&&ve.focus(this.targetEl),this.modal&&ve.removeClass(this.document?.body,"p-overflow-hidden");else return}alignOverlay(){!this.modal&&ve.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&_a.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),ve.appendOverlay(this.overlayEl,this.appendTo==="body"?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&ve.addClass(this.overlayEl,"p-component-overlay-leave");break}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){let r=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.visible&&this.show(r,!0),this.bindListeners();break;case"void":if(!this.visible){this.hide(r,!0),this.modalVisible=!1,this.unbindListeners(),ve.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),_a.clear(r),this.cd.markForCheck();break}}this.handleEvents("onAnimationDone",e)}handleEvents(e,r){this[e].emit(r),this.options&&this.options[e]&&this.options[e](r),this.config?.overlayOptions&&(this.config?.overlayOptions)[e]&&(this.config?.overlayOptions)[e](r)}bindListeners(){this.unbindListeners(),this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lu(this.targetEl,e=>{(this.listener?this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}):!0)&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{let i=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target)))&&!this.isOverlayContentClicked;(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:e.which!==3&&i}):i)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!ve.isTouchDevice()}):!ve.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{if(this.overlayOptions.hideOnEscape===!1||e.code!=="Escape")return;(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!ve.isTouchDevice()}):!ve.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(ve.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),_a.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zr),Oe(zn),Oe(Wr),Oe(Mi),Oe(_f),Oe(br),Oe(En))};static \u0275cmp=ct({type:t,selectors:[["p-overlay"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&(Zn(EJ,5),Zn(DJ,5)),r&2){let o;sn(o=ln())&&(i.overlayViewChild=o.first),sn(o=ln())&&(i.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[ai([LJ])],ngContentSelectors:TJ,decls:1,vars:1,consts:[["overlay",""],["content",""],[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"click","ngStyle","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&(Xs(),ce(0,PJ,3,20,"div",2)),r&2&&O("ngIf",i.modalVisible)},dependencies:[Xr,Or,li,bi],styles:[`@layer primeng{.p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}}
`],encapsulation:2,data:{animation:[t_("overlayContentAnimation",[qc(":enter",[pE(BJ)]),qc(":leave",[pE(VJ)])])]},changeDetection:0})}return t})(),AE=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,kr,kr]})}return t})();var UJ=["element"],HJ=["content"],zJ=["*"],WJ=(t,n,e)=>({"p-scroller":!0,"p-scroller-inline":t,"p-both-scroll":n,"p-horizontal-scroll":e}),kE=(t,n)=>({$implicit:t,options:n}),qJ=t=>({"p-scroller-loading":t}),GJ=t=>({"p-component-overlay":t}),$J=t=>({numCols:t}),tO=t=>({options:t}),KJ=()=>({styleClass:"p-scroller-loading-icon"}),YJ=(t,n)=>({rows:t,columns:n});function XJ(t,n){t&1&&St(0)}function QJ(t,n){if(t&1&&(yt(0),ce(1,XJ,1,0,"ng-container",10),bt()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",si(2,kE,e.loadedItems,e.getContentOptions()))}}function ZJ(t,n){t&1&&St(0)}function JJ(t,n){if(t&1&&(yt(0),ce(1,ZJ,1,0,"ng-container",10),bt()),t&2){let e=n.$implicit,r=n.index,i=j(3);P(),O("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",si(2,kE,e,i.getOptions(r)))}}function eee(t,n){if(t&1&&(ie(0,"div",11,3),ce(2,JJ,2,5,"ng-container",12),oe()),t&2){let e=j(2);O("ngClass",Gt(5,qJ,e.d_loading))("ngStyle",e.contentStyle),Ne("data-pc-section","content"),P(2),O("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function tee(t,n){if(t&1&&Ve(0,"div",13),t&2){let e=j(2);O("ngStyle",e.spacerStyle),Ne("data-pc-section","spacer")}}function nee(t,n){t&1&&St(0)}function ree(t,n){if(t&1&&(yt(0),ce(1,nee,1,0,"ng-container",10),bt()),t&2){let e=n.index,r=j(4);P(),O("ngTemplateOutlet",r.loaderTemplate)("ngTemplateOutletContext",Gt(4,tO,r.getLoaderOptions(e,r.both&&Gt(2,$J,r._numItemsInViewport.cols))))}}function iee(t,n){if(t&1&&(yt(0),ce(1,ree,2,6,"ng-container",15),bt()),t&2){let e=j(3);P(),O("ngForOf",e.loaderArr)}}function oee(t,n){t&1&&St(0)}function aee(t,n){if(t&1&&(yt(0),ce(1,oee,1,0,"ng-container",10),bt()),t&2){let e=j(4);P(),O("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",Gt(3,tO,Jo(2,KJ)))}}function see(t,n){t&1&&Ve(0,"SpinnerIcon",16),t&2&&(O("styleClass","p-scroller-loading-icon pi-spin"),Ne("data-pc-section","loadingIcon"))}function lee(t,n){if(t&1&&ce(0,aee,2,5,"ng-container",6)(1,see,1,2,"ng-template",null,5,ya),t&2){let e=yi(2),r=j(3);O("ngIf",r.loaderIconTemplate)("ngIfElse",e)}}function uee(t,n){if(t&1&&(ie(0,"div",14),ce(1,iee,2,1,"ng-container",6)(2,lee,3,2,"ng-template",null,4,ya),oe()),t&2){let e=yi(3),r=j(2);O("ngClass",Gt(4,GJ,!r.loaderTemplate)),Ne("data-pc-section","loader"),P(),O("ngIf",r.loaderTemplate)("ngIfElse",e)}}function cee(t,n){if(t&1){let e=jt();yt(0),ie(1,"div",7,1),et("scroll",function(i){Ee(e);let o=j();return De(o.onContainerScroll(i))}),ce(3,QJ,2,5,"ng-container",6)(4,eee,3,7,"ng-template",null,2,ya)(6,tee,1,2,"div",8)(7,uee,4,6,"div",9),oe(),bt()}if(t&2){let e=yi(5),r=j();P(),ft(r._styleClass),O("ngStyle",r._style)("ngClass",vo(12,WJ,r.inline,r.both,r.horizontal)),Ne("id",r._id)("tabindex",r.tabindex)("data-pc-name","scroller")("data-pc-section","root"),P(2),O("ngIf",r.contentTemplate)("ngIfElse",e),P(3),O("ngIf",r._showSpacer),P(),O("ngIf",!r.loaderDisabled&&r._showLoader&&r.d_loading)}}function dee(t,n){t&1&&St(0)}function pee(t,n){if(t&1&&(yt(0),ce(1,dee,1,0,"ng-container",10),bt()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",si(5,kE,e.items,si(2,YJ,e._items,e.loadedColumns)))}}function hee(t,n){if(t&1&&(gs(0),ce(1,pee,2,8,"ng-container",17)),t&2){let e=j();P(),O("ngIf",e.contentTemplate)}}var g_=(()=>{class t{document;platformId;renderer;cd;zone;get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>this[`_${r}`]!==i&&(this[`_${r}`]=i))}onLazyLoad=new it;onScroll=new it;onScrollIndexChange=new it;elementViewChild;contentViewChild;templates;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;resizeObserver;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;get vertical(){return this._orientation==="vertical"}get horizontal(){return this._orientation==="horizontal"}get both(){return this._orientation==="both"}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}constructor(e,r,i,o,a){this.document=e,this.platformId=r,this.renderer=i,this.cd=o,this.zone=a}ngOnInit(){this.setInitialState()}ngOnChanges(e){let r=!1;if(e.loading){let{previousValue:i,currentValue:o}=e.loading;this.lazy&&i!==o&&o!==this.d_loading&&(this.d_loading=o,r=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){let{previousValue:i,currentValue:o}=e.numToleratedItems;i!==o&&o!==this.d_numToleratedItems&&(this.d_numToleratedItems=o)}if(e.options){let{previousValue:i,currentValue:o}=e.options;this.lazy&&i?.loading!==o?.loading&&o?.loading!==this.d_loading&&(this.d_loading=o.loading,r=!0),i?.numToleratedItems!==o?.numToleratedItems&&o?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=o.numToleratedItems)}this.initialized&&!r&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){Do(this.platformId)&&!this.initialized&&ve.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.calculateAutoSize(),this.defaultWidth=ve.getWidth(this.elementViewChild?.nativeElement),this.defaultHeight=ve.getHeight(this.elementViewChild?.nativeElement),this.defaultContentWidth=ve.getWidth(this.contentEl),this.defaultContentHeight=ve.getHeight(this.contentEl),this.resizeObserver=new ResizeObserver(()=>this.onResize()),this.resizeObserver.observe(this.elementViewChild?.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||ve.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this._step||1))}isPageChanged(e){return this._step?this.page!==this.getPageByFirst(e??this.first):!0}scrollTo(e){this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,r="auto"){if(this.both?e.every(o=>o>-1):e>-1){let o=this.first,{scrollTop:a=0,scrollLeft:s=0}=this.elementViewChild?.nativeElement,{numToleratedItems:l}=this.calculateNumItems(),u=this.getContentPosition(),c=this.itemSize,d=(y=0,b)=>y<=b?0:y,p=(y,b,w)=>y*b+w,h=(y=0,b=0)=>this.scrollTo({left:y,top:b,behavior:r}),f=this.both?{rows:0,cols:0}:0,m=!1,g=!1;this.both?(f={rows:d(e[0],l[0]),cols:d(e[1],l[1])},h(p(f.cols,c[1],u.left),p(f.rows,c[0],u.top)),g=this.lastScrollPos.top!==a||this.lastScrollPos.left!==s,m=f.rows!==o.rows||f.cols!==o.cols):(f=d(e,l),this.horizontal?h(p(f,c,u.left),a):h(s,p(f,c,u.top)),g=this.lastScrollPos!==(this.horizontal?s:a),m=f!==o),this.isRangeChanged=m,g&&(this.first=f)}}scrollInView(e,r,i="auto"){if(r){let{first:o,viewport:a}=this.getRenderedRange(),s=(c=0,d=0)=>this.scrollTo({left:c,top:d,behavior:i}),l=r==="to-start",u=r==="to-end";if(l){if(this.both)a.first.rows-o.rows>e[0]?s(a.first.cols*this._itemSize[1],(a.first.rows-1)*this._itemSize[0]):a.first.cols-o.cols>e[1]&&s((a.first.cols-1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.first-o>e){let c=(a.first-1)*this._itemSize;this.horizontal?s(c,0):s(0,c)}}else if(u){if(this.both)a.last.rows-o.rows<=e[0]+1?s(a.first.cols*this._itemSize[1],(a.first.rows+1)*this._itemSize[0]):a.last.cols-o.cols<=e[1]+1&&s((a.first.cols+1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.last-o<=e+1){let c=(a.first+1)*this._itemSize;this.horizontal?s(c,0):s(0,c)}}}else this.scrollToIndex(e,i)}getRenderedRange(){let e=(o,a)=>a||o?Math.floor(o/(a||o)):0,r=this.first,i=0;if(this.elementViewChild?.nativeElement){let{scrollTop:o,scrollLeft:a}=this.elementViewChild.nativeElement;if(this.both)r={rows:e(o,this._itemSize[0]),cols:e(a,this._itemSize[1])},i={rows:r.rows+this.numItemsInViewport.rows,cols:r.cols+this.numItemsInViewport.cols};else{let s=this.horizontal?a:o;r=e(s,this._itemSize),i=r+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:r,last:i}}}calculateNumItems(){let e=this.getContentPosition(),r=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0)||0,i=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0)||0,o=(u,c)=>c||u?Math.ceil(u/(c||u)):0,a=u=>Math.ceil(u/2),s=this.both?{rows:o(i,this._itemSize[0]),cols:o(r,this._itemSize[1])}:o(this.horizontal?r:i,this._itemSize),l=this.d_numToleratedItems||(this.both?[a(s.rows),a(s.cols)]:a(s));return{numItemsInViewport:s,numToleratedItems:l}}calculateOptions(){let{numItemsInViewport:e,numToleratedItems:r}=this.calculateNumItems(),i=(s,l,u,c=!1)=>this.getLast(s+l+(s<u?2:3)*u,c),o=this.first,a=this.both?{rows:i(this.first.rows,e.rows,r[0]),cols:i(this.first.cols,e.cols,r[1],!0)}:i(this.first,e,r);this.last=a,this.numItemsInViewport=e,this.d_numToleratedItems=r,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:o.cols}:0:o,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";let[e,r]=[ve.getWidth(this.contentEl),ve.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),r!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");let[i,o]=[ve.getWidth(this.elementViewChild.nativeElement),ve.getHeight(this.elementViewChild.nativeElement)];this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain="",this.defaultWidth=i,this.defaultHeight=o,this.defaultContentWidth=e,this.defaultContentHeight=r,(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=i<this.defaultWidth?i+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=o<this.defaultHeight?o+"px":this._scrollHeight||this.defaultHeight+"px")}})}getLast(e=0,r=!1){return this._items?Math.min(r?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){let e=getComputedStyle(this.contentEl),r=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),i=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),o=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),a=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:r,right:i,top:o,bottom:a,x:r+i,y:o+a}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){let e=this.elementViewChild.nativeElement.parentElement.parentElement,r=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,i=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,o=(a,s)=>this.elementViewChild.nativeElement.style[a]=s;this.both||this.horizontal?(o("height",i),o("width",r)):o("height",i)}}setSpacerSize(){if(this._items){let e=(i,o,a)=>this.spacerStyle=Rn(nt({},this.spacerStyle),{[`${i}`]:o*a+"px"}),r=this._items.length;this.both?(e("height",r,this._itemSize[0]),e("width",this._columns?.length||this._items[1]?.length,this._itemSize[1])):this.horizontal?e("width",this._columns?.length||this._items.length,this._itemSize):e("height",r,this._itemSize)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){let r=e?e.first:this.first,i=(a,s)=>a*s,o=(a=0,s=0)=>this.contentStyle=Rn(nt({},this.contentStyle),{transform:`translate3d(${a}px, ${s}px, 0)`});if(this.both)o(i(r.cols,this._itemSize[1]),i(r.rows,this._itemSize[0]));else{let a=i(r,this._itemSize);this.horizontal?o(a,0):o(0,a)}}}onScrollPositionChange(e){let r=e.target,i=this.getContentPosition(),o=(g,y)=>g?g>y?g-y:g:0,a=(g,y)=>y||g?Math.floor(g/(y||g)):0,s=(g,y,b,w,x,I)=>g<=x?x:I?b-w-x:y+x-1,l=(g,y,b,w,x,I,D)=>g<=I?0:Math.max(0,D?g<y?b:g-I:g>y?b:g-2*I),u=(g,y,b,w,x,I=!1)=>{let D=y+w+2*x;return g>=x&&(D+=x+1),this.getLast(D,I)},c=o(r.scrollTop,i.top),d=o(r.scrollLeft,i.left),p=this.both?{rows:0,cols:0}:0,h=this.last,f=!1,m=this.lastScrollPos;if(this.both){let g=this.lastScrollPos.top<=c,y=this.lastScrollPos.left<=d;if(!this._appendOnly||this._appendOnly&&(g||y)){let b={rows:a(c,this._itemSize[0]),cols:a(d,this._itemSize[1])},w={rows:s(b.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],g),cols:s(b.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],y)};p={rows:l(b.rows,w.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],g),cols:l(b.cols,w.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],y)},h={rows:u(b.rows,p.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:u(b.cols,p.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},f=p.rows!==this.first.rows||h.rows!==this.last.rows||p.cols!==this.first.cols||h.cols!==this.last.cols||this.isRangeChanged,m={top:c,left:d}}}else{let g=this.horizontal?d:c,y=this.lastScrollPos<=g;if(!this._appendOnly||this._appendOnly&&y){let b=a(g,this._itemSize),w=s(b,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,y);p=l(b,w,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,y),h=u(b,p,this.last,this.numItemsInViewport,this.d_numToleratedItems),f=p!==this.first||h!==this.last||this.isRangeChanged,m=g}}return{first:p,last:h,isRangeChanged:f,scrollPos:m}}onScrollChange(e){let{first:r,last:i,isRangeChanged:o,scrollPos:a}=this.onScrollPositionChange(e);if(o){let s={first:r,last:i};if(this.setContentPosition(s),this.first=r,this.last=i,this.lastScrollPos=a,this.handleEvents("onScrollIndexChange",s),this._lazy&&this.isPageChanged(r)){let l={first:this._step?Math.min(this.getPageByFirst(r)*this._step,this.items.length-this._step):r,last:Math.min(this._step?(this.getPageByFirst(r)+1)*this._step:i,this.items.length)};(this.lazyLoadState.first!==l.first||this.lazyLoadState.last!==l.last)&&this.handleEvents("onLazyLoad",l),this.lazyLoadState=l}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged()){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){let{isRangeChanged:r}=this.onScrollPositionChange(e);(r||(this._step?this.isPageChanged():!1))&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||this._loading===void 0)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}unbindResizeListener(){this.resizeObserver&&(this.resizeObserver.unobserve(this.elementViewChild?.nativeElement),this.resizeObserver=null)}onResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(ve.isVisible(this.elementViewChild?.nativeElement)){let[e,r]=[ve.getWidth(this.elementViewChild?.nativeElement),ve.getHeight(this.elementViewChild?.nativeElement)],[i,o]=[e!==this.defaultWidth,r!==this.defaultHeight];(this.both?i||o:this.horizontal?i:this.vertical?o:!1)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.init(),this.calculateAutoSize()})}},this._resizeDelay)}handleEvents(e,r){return this.options&&this.options[e]?this.options[e](r):this[e].emit(r)}getContentOptions(){return{contentStyleClass:`p-scroller-content ${this.d_loading?"p-scroller-loading":""}`,items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,r)=>this.getLoaderOptions(e,r),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){let r=(this._items||[]).length,i=this.both?this.first.rows+e:this.first+e;return{index:i,count:r,first:i===0,last:i===r-1,even:i%2===0,odd:i%2!==0}}getLoaderOptions(e,r){let i=this.loaderArr.length;return nt({index:e,count:i,first:e===0,last:e===i-1,even:e%2===0,odd:e%2!==0},r)}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zr),Oe(Wr),Oe(br),Oe(En))};static \u0275cmp=ct({type:t,selectors:[["p-scroller"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&(Zn(UJ,5),Zn(HJ,5)),r&2){let o;sn(o=ln())&&(i.elementViewChild=o.first),sn(o=ln())&&(i.contentViewChild=o.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[eo],ngContentSelectors:zJ,decls:3,vars:2,consts:[["disabledContainer",""],["element",""],["buildInContent",""],["content",""],["buildInLoader",""],["buildInLoaderIcon",""],[4,"ngIf","ngIfElse"],[3,"scroll","ngStyle","ngClass"],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"styleClass"],[4,"ngIf"]],template:function(r,i){if(r&1&&(Xs(),ce(0,cee,8,16,"ng-container",6)(1,hee,2,1,"ng-template",null,0,ya)),r&2){let o=yi(2);O("ngIf",!i._disabled)("ngIfElse",o)}},dependencies:()=>[Xr,ba,Or,li,bi,Gc],styles:[`@layer primeng{p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{scale:2}.p-scroller-inline .p-scroller-content{position:static}}
`],encapsulation:2})}return t})(),xf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,kr,Gc,kr]})}return t})();var rO=(()=>{class t{platformId;el;zone;config;renderer;viewContainer;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:mr()+"_tooltip"};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;documentEscapeListener;scrollHandler;resizeListener;interactionInProgress=!1;constructor(e,r,i,o,a,s){this.platformId=e,this.el=r,this.zone=i,this.config=o,this.renderer=a,this.viewContainer=s}ngAfterViewInit(){Do(this.platformId)&&this.zone.runOutsideAngular(()=>{let e=this.getOption("tooltipEvent");if((e==="hover"||e==="both")&&(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener)),e==="focus"||e==="both"){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let r=this.el.nativeElement.querySelector(".p-component");r||(r=this.getTarget(this.el.nativeElement)),r.addEventListener("focus",this.focusListener),r.addEventListener("blur",this.blurListener)}})}setAriaDescribedBy(){let e=this.getOption("id");e&&this.active&&this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",e)}removeAriaDescribedBy(){this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.content&&(this.setOption({tooltipLabel:e.content.currentValue}),this.active&&(e.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.id&&this.setOption({id:e.id.currentValue}),e.tooltipOptions&&(this._tooltipOptions=nt(nt({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.isAutoHide()?this.deactivate():!(ve.hasClass(e.relatedTarget,"p-tooltip")||ve.hasClass(e.relatedTarget,"p-tooltip-text")||ve.hasClass(e.relatedTarget,"p-tooltip-arrow"))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}activate(){if(!this.interactionInProgress){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}this.getOption("hideOnEscape")&&(this.documentEscapeListener=this.renderer.listen("document","keydown.escape",()=>{this.deactivate(),this.documentEscapeListener()}))}this.interactionInProgress=!0}deactivate(){this.interactionInProgress=!1,this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide(),this.documentEscapeListener&&this.documentEscapeListener()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")),this.container.setAttribute("role","tooltip");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),this.getOption("appendTo")==="body"?document.body.appendChild(this.container):this.getOption("appendTo")==="target"?ve.appendChild(this.container,this.el.nativeElement):ve.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener()),this.setAriaDescribedBy()}bindContainerMouseleaveListener(){if(!this.containerMouseleaveListener){let e=this.container??this.container.nativeElement;this.containerMouseleaveListener=this.renderer.listen(e,"mouseleave",r=>{this.deactivate()})}}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){if(!this.getOption("tooltipLabel")||this.getOption("disabled"))return;this.create(),this.el.nativeElement.closest("p-dialog")?setTimeout(()=>{this.container&&this.align()},100):this.align(),ve.fadeIn(this.container,250),this.getOption("tooltipZIndex")==="auto"?_a.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener()}hide(){this.getOption("tooltipZIndex")==="auto"&&_a.clear(this.container),this.remove()}updateText(){let e=this.getOption("tooltipLabel");if(e instanceof $s){let r=this.viewContainer.createEmbeddedView(e);r.detectChanges(),r.rootNodes.forEach(i=>this.tooltipText.appendChild(i))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(e))):this.tooltipText.innerHTML=e}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break}}getHostOffset(){if(this.getOption("appendTo")==="body"||this.getOption("appendTo")==="target"){let e=this.el.nativeElement.getBoundingClientRect(),r=e.left+ve.getWindowScrollLeft(),i=e.top+ve.getWindowScrollTop();return{left:r,top:i}}else return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.activeElement,r=this.getHostOffset(),i=r.left+ve.getOuterWidth(e),o=r.top+(ve.getOuterHeight(e)-ve.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}get activeElement(){return this.el.nativeElement.nodeName.includes("P-")?ve.findSingle(this.el.nativeElement,".p-component")||this.el.nativeElement:this.el.nativeElement}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),r=e.left-ve.getOuterWidth(this.container),i=e.top+(ve.getOuterHeight(this.el.nativeElement)-ve.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=i+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),r=e.left+(ve.getOuterWidth(this.el.nativeElement)-ve.getOuterWidth(this.container))/2,i=e.top-ve.getOuterHeight(this.container);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=i+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),r=e.left+(ve.getOuterWidth(this.el.nativeElement)-ve.getOuterWidth(this.container))/2,i=e.top+ve.getOuterHeight(this.el.nativeElement);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=i+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=nt(nt({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}getTarget(e){return ve.hasClass(e,"p-inputwrapper")?ve.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let r="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?r+" "+this.getOption("tooltipStyleClass"):r}isOutOfBounds(){let e=this.container.getBoundingClientRect(),r=e.top,i=e.left,o=ve.getOuterWidth(this.container),a=ve.getOuterHeight(this.container),s=ve.getViewport();return i+o>s.width||i<0||r<0||r+a>s.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Lu(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){let e=this.getOption("tooltipEvent");if((e==="hover"||e==="both")&&(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)),e==="focus"||e==="both"){let r=this.el.nativeElement.querySelector(".p-component");r||(r=this.getTarget(this.el.nativeElement))}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&(this.getOption("appendTo")==="body"?document.body.removeChild(this.container):this.getOption("appendTo")==="target"?this.el.nativeElement.removeChild(this.container):ve.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.removeAriaDescribedBy(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&_a.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.documentEscapeListener&&this.documentEscapeListener()}static \u0275fac=function(r){return new(r||t)(Oe(zr),Oe(zn),Oe(En),Oe(Mi),Oe(Wr),Oe(Ys))};static \u0275dir=Un({type:t,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:[Se.HasDecoratorInputTransform,"escape","escape",We],showDelay:[Se.HasDecoratorInputTransform,"showDelay","showDelay",pn],hideDelay:[Se.HasDecoratorInputTransform,"hideDelay","hideDelay",pn],life:[Se.HasDecoratorInputTransform,"life","life",pn],positionTop:[Se.HasDecoratorInputTransform,"positionTop","positionTop",pn],positionLeft:[Se.HasDecoratorInputTransform,"positionLeft","positionLeft",pn],autoHide:[Se.HasDecoratorInputTransform,"autoHide","autoHide",We],fitContent:[Se.HasDecoratorInputTransform,"fitContent","fitContent",We],hideOnEscape:[Se.HasDecoratorInputTransform,"hideOnEscape","hideOnEscape",We],content:[Se.None,"pTooltip","content"],disabled:[Se.None,"tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Er,eo]})}return t})(),iO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr]})}return t})();var Yc=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["CheckIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var ME=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["BlankIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:0,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg","v-bind","pti()"],["width","1","height","1","fill","currentColor","fill-opacity","0"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"rect",1),oe())},encapsulation:2})}return t})();var RE=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["SearchIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var d0=t=>({height:t}),mee=(t,n,e)=>({"p-dropdown-item":!0,"p-highlight":t,"p-disabled":n,"p-focus":e}),NE=t=>({$implicit:t});function gee(t,n){t&1&&Ve(0,"CheckIcon",4),t&2&&O("styleClass","p-dropdown-check-icon")}function vee(t,n){t&1&&Ve(0,"BlankIcon",4),t&2&&O("styleClass","p-dropdown-blank-icon")}function yee(t,n){if(t&1&&(yt(0),ce(1,gee,1,1,"CheckIcon",3)(2,vee,1,1,"BlankIcon",3),bt()),t&2){let e=j();P(),O("ngIf",e.selected),P(),O("ngIf",!e.selected)}}function bee(t,n){if(t&1&&(ie(0,"span"),st(1),oe()),t&2){let e,r=j();P(),ir((e=r.label)!==null&&e!==void 0?e:"empty")}}function _ee(t,n){t&1&&St(0)}var wee=["container"],xee=["filter"],Cee=["focusInput"],Iee=["editableInput"],See=["items"],Eee=["scroller"],Dee=["overlay"],Tee=["firstHiddenFocusableEl"],Aee=["lastHiddenFocusableEl"],kee=t=>({"max-height":t}),oO=t=>({options:t}),Mee=t=>({"p-variant-filled":t}),aO=(t,n)=>({$implicit:t,options:n}),Ree=()=>({});function Nee(t,n){if(t&1&&(yt(0),st(1),bt()),t&2){let e=j(2);P(),ir(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Fee(t,n){if(t&1&&St(0,25),t&2){let e=j(2);O("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",Gt(2,NE,e.selectedOption))}}function Oee(t,n){if(t&1&&(ie(0,"span"),st(1),oe()),t&2){let e=j(3);P(),ir(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Pee(t,n){if(t&1&&ce(0,Oee,2,1,"span",18),t&2){let e=j(2);O("ngIf",e.isSelectedOptionEmpty())}}function Lee(t,n){if(t&1){let e=jt();ie(0,"span",23,3),et("focus",function(i){Ee(e);let o=j();return De(o.onInputFocus(i))})("blur",function(i){Ee(e);let o=j();return De(o.onInputBlur(i))})("keydown",function(i){Ee(e);let o=j();return De(o.onKeyDown(i))}),ce(2,Nee,2,1,"ng-container",20)(3,Fee,1,4,"ng-container",24)(4,Pee,1,1,"ng-template",null,4,ya),oe()}if(t&2){let e,r=yi(5),i=j();O("ngClass",i.inputClass)("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass)("autofocus",i.autofocus),Ne("aria-disabled",i.disabled)("id",i.inputId)("aria-label",i.ariaLabel||(i.label()==="p-emptylabel"?void 0:i.label()))("aria-labelledby",i.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(e=i.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",i.overlayVisible?i.id+"_list":null)("tabindex",i.disabled?-1:i.tabindex)("aria-activedescendant",i.focused?i.focusedOptionId:void 0)("aria-required",i.required)("required",i.required),P(2),O("ngIf",!i.selectedItemTemplate)("ngIfElse",r),P(),O("ngIf",i.selectedItemTemplate&&!i.isSelectedOptionEmpty())}}function Bee(t,n){if(t&1){let e=jt();ie(0,"input",26,5),et("input",function(i){Ee(e);let o=j();return De(o.onEditableInput(i))})("keydown",function(i){Ee(e);let o=j();return De(o.onKeyDown(i))})("focus",function(i){Ee(e);let o=j();return De(o.onInputFocus(i))})("blur",function(i){Ee(e);let o=j();return De(o.onInputBlur(i))}),oe()}if(t&2){let e=j();O("ngClass",e.inputClass)("disabled",e.disabled)("autofocus",e.autofocus),Ne("id",e.inputId)("maxlength",e.maxlength)("placeholder",e.modelValue()===void 0||e.modelValue()===null?e.placeholder():void 0)("aria-label",e.ariaLabel||(e.label()==="p-emptylabel"?void 0:e.label()))("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function Vee(t,n){if(t&1){let e=jt();ie(0,"TimesIcon",29),et("click",function(i){Ee(e);let o=j(2);return De(o.clear(i))}),oe()}t&2&&(O("styleClass","p-dropdown-clear-icon"),Ne("data-pc-section","clearicon"))}function jee(t,n){}function Uee(t,n){t&1&&ce(0,jee,0,0,"ng-template")}function Hee(t,n){if(t&1){let e=jt();ie(0,"span",30),et("click",function(i){Ee(e);let o=j(2);return De(o.clear(i))}),ce(1,Uee,1,0,null,31),oe()}if(t&2){let e=j(2);Ne("data-pc-section","clearicon"),P(),O("ngTemplateOutlet",e.clearIconTemplate)}}function zee(t,n){if(t&1&&(yt(0),ce(1,Vee,1,2,"TimesIcon",27)(2,Hee,2,2,"span",28),bt()),t&2){let e=j();P(),O("ngIf",!e.clearIconTemplate),P(),O("ngIf",e.clearIconTemplate)}}function Wee(t,n){t&1&&St(0)}function qee(t,n){if(t&1&&(yt(0),ce(1,Wee,1,0,"ng-container",31),bt()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.loadingIconTemplate)}}function Gee(t,n){if(t&1&&Ve(0,"span",34),t&2){let e=j(3);O("ngClass","p-dropdown-trigger-icon pi-spin "+e.loadingIcon)}}function $ee(t,n){t&1&&Ve(0,"span",35),t&2&&ft("p-dropdown-trigger-icon pi pi-spinner pi-spin")}function Kee(t,n){if(t&1&&(yt(0),ce(1,Gee,1,1,"span",32)(2,$ee,1,2,"span",33),bt()),t&2){let e=j(2);P(),O("ngIf",e.loadingIcon),P(),O("ngIf",!e.loadingIcon)}}function Yee(t,n){if(t&1&&(yt(0),ce(1,qee,2,1,"ng-container",18)(2,Kee,3,2,"ng-container",18),bt()),t&2){let e=j();P(),O("ngIf",e.loadingIconTemplate),P(),O("ngIf",!e.loadingIconTemplate)}}function Xee(t,n){if(t&1&&Ve(0,"span",39),t&2){let e=j(3);O("ngClass",e.dropdownIcon)}}function Qee(t,n){t&1&&Ve(0,"ChevronDownIcon",40),t&2&&O("styleClass","p-dropdown-trigger-icon")}function Zee(t,n){if(t&1&&(yt(0),ce(1,Xee,1,1,"span",37)(2,Qee,1,1,"ChevronDownIcon",38),bt()),t&2){let e=j(2);P(),O("ngIf",e.dropdownIcon),P(),O("ngIf",!e.dropdownIcon)}}function Jee(t,n){}function ete(t,n){t&1&&ce(0,Jee,0,0,"ng-template")}function tte(t,n){if(t&1&&(ie(0,"span",41),ce(1,ete,1,0,null,31),oe()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.dropdownIconTemplate)}}function nte(t,n){if(t&1&&ce(0,Zee,3,2,"ng-container",18)(1,tte,2,1,"span",36),t&2){let e=j();O("ngIf",!e.dropdownIconTemplate),P(),O("ngIf",e.dropdownIconTemplate)}}function rte(t,n){t&1&&St(0)}function ite(t,n){t&1&&St(0)}function ote(t,n){if(t&1&&(yt(0),ce(1,ite,1,0,"ng-container",48),bt()),t&2){let e=j(3);P(),O("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Gt(2,oO,e.filterOptions))}}function ate(t,n){t&1&&Ve(0,"SearchIcon",40),t&2&&O("styleClass","p-dropdown-filter-icon")}function ste(t,n){}function lte(t,n){t&1&&ce(0,ste,0,0,"ng-template")}function ute(t,n){if(t&1&&(ie(0,"span",52),ce(1,lte,1,0,null,31),oe()),t&2){let e=j(4);P(),O("ngTemplateOutlet",e.filterIconTemplate)}}function cte(t,n){if(t&1){let e=jt();ie(0,"div",49)(1,"input",50,10),et("input",function(i){Ee(e);let o=j(3);return De(o.onFilterInputChange(i))})("keydown",function(i){Ee(e);let o=j(3);return De(o.onFilterKeyDown(i))})("blur",function(i){Ee(e);let o=j(3);return De(o.onFilterBlur(i))}),oe(),ce(3,ate,1,1,"SearchIcon",38)(4,ute,2,1,"span",51),oe()}if(t&2){let e=j(3);P(),O("value",e._filterValue()||"")("ngClass",Gt(8,Mee,e.variant==="filled"||e.config.inputStyle()==="filled")),Ne("placeholder",e.filterPlaceholder)("aria-owns",e.id+"_list")("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.focusedOptionId),P(2),O("ngIf",!e.filterIconTemplate),P(),O("ngIf",e.filterIconTemplate)}}function dte(t,n){if(t&1){let e=jt();ie(0,"div",47),et("click",function(i){return Ee(e),De(i.stopPropagation())}),ce(1,ote,2,4,"ng-container",20)(2,cte,5,10,"ng-template",null,9,ya),oe()}if(t&2){let e=yi(3),r=j(2);P(),O("ngIf",r.filterTemplate)("ngIfElse",e)}}function pte(t,n){t&1&&St(0)}function hte(t,n){if(t&1&&ce(0,pte,1,0,"ng-container",48),t&2){let e=n.$implicit,r=n.options;j(2);let i=yi(9);O("ngTemplateOutlet",i)("ngTemplateOutletContext",si(2,aO,e,r))}}function fte(t,n){t&1&&St(0)}function mte(t,n){if(t&1&&ce(0,fte,1,0,"ng-container",48),t&2){let e=n.options,r=j(4);O("ngTemplateOutlet",r.loaderTemplate)("ngTemplateOutletContext",Gt(2,oO,e))}}function gte(t,n){t&1&&(yt(0),ce(1,mte,1,4,"ng-template",54),bt())}function vte(t,n){if(t&1){let e=jt();ie(0,"p-scroller",53,11),et("onLazyLoad",function(i){Ee(e);let o=j(2);return De(o.onLazyLoad.emit(i))}),ce(2,hte,1,5,"ng-template",22)(3,gte,2,0,"ng-container",18),oe()}if(t&2){let e=j(2);Bb(Gt(8,d0,e.scrollHeight)),O("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),P(3),O("ngIf",e.loaderTemplate)}}function yte(t,n){t&1&&St(0)}function bte(t,n){if(t&1&&(yt(0),ce(1,yte,1,0,"ng-container",48),bt()),t&2){j();let e=yi(9),r=j();P(),O("ngTemplateOutlet",e)("ngTemplateOutletContext",si(3,aO,r.visibleOptions(),Jo(2,Ree)))}}function _te(t,n){if(t&1&&(ie(0,"span"),st(1),oe()),t&2){let e=j(2).$implicit,r=j(3);P(),ir(r.getOptionGroupLabel(e.optionGroup))}}function wte(t,n){t&1&&St(0)}function xte(t,n){if(t&1&&(yt(0),ie(1,"li",58),ce(2,_te,2,1,"span",18)(3,wte,1,0,"ng-container",48),oe(),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j().options,a=j(2);P(),O("ngStyle",Gt(5,d0,o.itemSize+"px")),Ne("id",a.id+"_"+a.getOptionIndex(i,o)),P(),O("ngIf",!a.groupTemplate),P(),O("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",Gt(7,NE,r.optionGroup))}}function Cte(t,n){if(t&1){let e=jt();yt(0),ie(1,"p-dropdownItem",59),et("onClick",function(i){Ee(e);let o=j().$implicit,a=j(3);return De(a.onOptionSelect(i,o))})("onMouseEnter",function(i){Ee(e);let o=j().index,a=j().options,s=j(2);return De(s.onOptionMouseEnter(i,s.getOptionIndex(o,a)))}),oe(),bt()}if(t&2){let e=j(),r=e.$implicit,i=e.index,o=j().options,a=j(2);P(),O("id",a.id+"_"+a.getOptionIndex(i,o))("option",r)("checkmark",a.checkmark)("selected",a.isSelected(r))("label",a.getOptionLabel(r))("disabled",a.isOptionDisabled(r))("template",a.itemTemplate)("focused",a.focusedOptionIndex()===a.getOptionIndex(i,o))("ariaPosInset",a.getAriaPosInset(a.getOptionIndex(i,o)))("ariaSetSize",a.ariaSetSize)}}function Ite(t,n){if(t&1&&ce(0,xte,4,9,"ng-container",18)(1,Cte,2,10,"ng-container",18),t&2){let e=n.$implicit,r=j(3);O("ngIf",r.isOptionGroup(e)),P(),O("ngIf",!r.isOptionGroup(e))}}function Ste(t,n){if(t&1&&(yt(0),st(1),bt()),t&2){let e=j(4);P(),fr(" ",e.emptyFilterMessageLabel," ")}}function Ete(t,n){t&1&&St(0,null,13)}function Dte(t,n){if(t&1&&(ie(0,"li",60),ce(1,Ste,2,1,"ng-container",20)(2,Ete,2,0,"ng-container",31),oe()),t&2){let e=j().options,r=j(2);O("ngStyle",Gt(4,d0,e.itemSize+"px")),P(),O("ngIf",!r.emptyFilterTemplate&&!r.emptyTemplate)("ngIfElse",r.emptyFilter),P(),O("ngTemplateOutlet",r.emptyFilterTemplate||r.emptyTemplate)}}function Tte(t,n){if(t&1&&(yt(0),st(1),bt()),t&2){let e=j(4);P(),fr(" ",e.emptyMessageLabel," ")}}function Ate(t,n){t&1&&St(0,null,14)}function kte(t,n){if(t&1&&(ie(0,"li",60),ce(1,Tte,2,1,"ng-container",20)(2,Ate,2,0,"ng-container",31),oe()),t&2){let e=j().options,r=j(2);O("ngStyle",Gt(4,d0,e.itemSize+"px")),P(),O("ngIf",!r.emptyTemplate)("ngIfElse",r.empty),P(),O("ngTemplateOutlet",r.emptyTemplate)}}function Mte(t,n){if(t&1&&(ie(0,"ul",55,12),ce(2,Ite,2,2,"ng-template",56)(3,Dte,3,6,"li",57)(4,kte,3,6,"li",57),oe()),t&2){let e=n.$implicit,r=n.options,i=j(2);O("ngClass",r.contentStyleClass)("ngStyle",r.contentStyle),Ne("id",i.id+"_list")("aria-label",i.listLabel),P(2),O("ngForOf",e),P(),O("ngIf",i.filterValue&&i.isEmpty()),P(),O("ngIf",!i.filterValue&&i.isEmpty())}}function Rte(t,n){t&1&&St(0)}function Nte(t,n){if(t&1){let e=jt();ie(0,"div",42)(1,"span",43,6),et("focus",function(i){Ee(e);let o=j();return De(o.onFirstHiddenFocus(i))}),oe(),ce(3,rte,1,0,"ng-container",31)(4,dte,4,2,"div",44),ie(5,"div",45),ce(6,vte,4,10,"p-scroller",46)(7,bte,2,6,"ng-container",18)(8,Mte,5,7,"ng-template",null,7,ya),oe(),ce(10,Rte,1,0,"ng-container",31),ie(11,"span",43,8),et("focus",function(i){Ee(e);let o=j();return De(o.onLastHiddenFocus(i))}),oe()()}if(t&2){let e=j();ft(e.panelStyleClass),O("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),P(),Ne("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),P(2),O("ngTemplateOutlet",e.headerTemplate),P(),O("ngIf",e.filter),P(),O("ngStyle",Gt(16,kee,e.virtualScroll?"auto":e.scrollHeight||"auto")),P(),O("ngIf",e.virtualScroll),P(),O("ngIf",!e.virtualScroll),P(3),O("ngTemplateOutlet",e.footerTemplate),P(),Ne("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var Fte={provide:yo,useExisting:ii(()=>FE),multi:!0},Ote=(()=>{class t{id;option;selected;focused;label;disabled;visible;itemSize;ariaPosInset;ariaSetSize;template;checkmark;onClick=new it;onMouseEnter=new it;ngOnInit(){}onOptionClick(e){this.onClick.emit(e)}onOptionMouseEnter(e){this.onMouseEnter.emit(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ct({type:t,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[Se.HasDecoratorInputTransform,"selected","selected",We],focused:[Se.HasDecoratorInputTransform,"focused","focused",We],label:"label",disabled:[Se.HasDecoratorInputTransform,"disabled","disabled",We],visible:[Se.HasDecoratorInputTransform,"visible","visible",We],itemSize:[Se.HasDecoratorInputTransform,"itemSize","itemSize",pn],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkmark:[Se.HasDecoratorInputTransform,"checkmark","checkmark",We]},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[Er],decls:4,vars:22,consts:[["role","option","pRipple","",3,"click","mouseenter","id","ngStyle","ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(r,i){r&1&&(ie(0,"li",0),et("click",function(a){return i.onOptionClick(a)})("mouseenter",function(a){return i.onOptionMouseEnter(a)}),ce(1,yee,3,2,"ng-container",1)(2,bee,2,1,"span",1)(3,_ee,1,0,"ng-container",2),oe()),r&2&&(O("id",i.id)("ngStyle",Gt(14,d0,i.itemSize+"px"))("ngClass",vo(16,mee,i.selected,i.disabled,i.focused)),Ne("aria-label",i.label)("aria-setsize",i.ariaSetSize)("aria-posinset",i.ariaPosInset)("aria-selected",i.selected)("data-p-focused",i.focused)("data-p-highlight",i.selected)("data-p-disabled",i.disabled),P(),O("ngIf",i.checkmark),P(),O("ngIf",!i.template),P(),O("ngTemplateOutlet",i.template)("ngTemplateOutletContext",Gt(20,NE,i.option)))},dependencies:()=>[Xr,Or,li,bi,Bl,ME,Yc],encapsulation:2})}return t})(),FE=(()=>{class t{el;renderer;cd;zone;filterService;config;id;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}loadingIcon;filterPlaceholder;filterLocale;variant="outlined";inputId;dataKey;filterBy;filterFields;autofocus;resetFilterOnHide=!1;checkmark=!1;dropdownIcon;loading=!1;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;focusOnHover=!1;selectOnFocus=!1;autoOptionFocus=!0;autofocusFilter=!0;autoShowPanelOnPrintableCharacterKeyDown=!0;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue()}set filterValue(e){setTimeout(()=>{this._filterValue.set(e)})}get options(){return this._options()}set options(e){rt.deepEquals(e,this._options())||this._options.set(e)}onChange=new it;onFilter=new it;onFocus=new it;onBlur=new it;onClick=new it;onShow=new it;onHide=new it;onClear=new it;onLazyLoad=new it;containerViewChild;filterViewChild;focusInputViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;templates;_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;loadingIconTemplate;clearIconTemplate;filterIconTemplate;filterOptions;_options=Nl(null);_placeholder=Nl(void 0);modelValue=Nl(null);value;onModelChange=()=>{};onModelTouched=()=>{};hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue=Nl(null);searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;focusedOptionIndex=Nl(-1);labelId;listId;clicked=Nl(!1);get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(To.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(To.EMPTY_FILTER_MESSAGE)}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled}get listLabel(){return this.config.getTranslation(To.ARIA).listLabel}get containerClass(){return{"p-dropdown p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue()!==void 0&&this.modelValue()!==null&&!this.modelValue().length,"p-inputwrapper-focus":this.focused||this.overlayVisible,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled","p-dropdown-open":this.overlayVisible}}get inputClass(){let e=this.label();return{"p-dropdown-label p-inputtext":!0,"p-placeholder":this.placeholder()&&e===this.placeholder(),"p-dropdown-label-empty":!this.editable&&!this.selectedItemTemplate&&(e==null||e==="p-emptylabel"||e.length===0)}}get panelClass(){return{"p-dropdown-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}visibleOptions=$g(()=>{let e=this.getAllVisibleAndNonVisibleOptions();if(this._filterValue()){let i=!(this.filterBy||this.optionLabel)&&!this.filterFields&&!this.optionValue?this.options.filter(o=>o.label?o.label.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1:o.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1):this.filterService.filter(e,this.searchFields(),this._filterValue().trim(),this.filterMatchMode,this.filterLocale);if(this.group){let o=this.options||[],a=[];return o.forEach(s=>{let u=this.getOptionGroupChildren(s).filter(c=>i.includes(c));u.length>0&&a.push(Rn(nt({},s),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...u]}))}),this.flatOptions(a)}return i}return e});label=$g(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),r=e.findIndex(i=>this.isOptionValueEqualsModelValue(i));return r!==-1?this.getOptionLabel(e[r]):this.placeholder()||"p-emptylabel"});filled=$g(()=>{if(typeof this.modelValue()=="string")return!!this.modelValue();let r=this.getAllVisibleAndNonVisibleOptions().findIndex(i=>this.isOptionValueEqualsModelValue(i))!==-1;return this.label()!=="p-emptylabel"&&r});selectedOption;editableInputValue=$g(()=>this.getOptionLabel(this.selectedOption)||this.modelValue()||"");constructor(e,r,i,o,a,s){this.el=e,this.renderer=r,this.cd=i,this.zone=o,this.filterService=a,this.config=s,MS(()=>{let l=this.modelValue(),u=this.visibleOptions();if(u&&rt.isNotEmpty(u)){let c=this.findSelectedOptionIndex();(c!==-1||l===void 0||typeof l=="string"&&l.length===0||this.isModelValueNotSet()||this.editable)&&(this.selectedOption=u[c])}rt.isEmpty(u)&&(l===void 0||this.isModelValueNotSet())&&rt.isNotEmpty(this.selectedOption)&&(this.selectedOption=null),l!==void 0&&this.editable&&this.updateEditableLabel(),this.cd.markForCheck()})}isModelValueNotSet(){return this.modelValue()===null&&!this.isOptionValueEqualsModelValue(this.selectedOption)}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}ngOnInit(){this.id=this.id||mr(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=ve.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-highlight");e&&ve.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}flatOptions(e){return(e||[]).reduce((r,i,o)=>{r.push({optionGroup:i,group:!0,index:o});let a=this.getOptionGroupChildren(i);return a&&a.forEach(s=>r.push(s)),r},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex()),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)),this.autoDisplayFirst&&(this.modelValue()===null||this.modelValue()===void 0)&&!this.placeholder()){let e=this.findFirstOptionIndex();this.onOptionSelect(null,this.visibleOptions()[e],!1,!0)}}onOptionSelect(e,r,i=!0,o=!1){if(!this.isSelected(r)){let a=this.getOptionValue(r);this.updateModel(a,e),this.focusedOptionIndex.set(this.findSelectedOptionIndex()),o===!1&&this.onChange.emit({originalEvent:e,value:a})}i&&this.hide(!0)}onOptionMouseEnter(e,r){this.focusOnHover&&this.changeFocusedOptionIndex(e,r)}updateModel(e,r){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.selectedOptionUpdated=!0}writeValue(e,r=!0){this.filter&&this.resetFilter(),this.value=e,r&&this.allowModelChange()&&this.onModelChange(e),this.modelValue.set(this.value),this.updateEditableLabel(),this.cd.markForCheck()}allowModelChange(){return this.autoDisplayFirst&&!this.placeholder()&&(this.modelValue()===void 0||this.modelValue()===null)&&!this.editable&&this.options&&this.options.length}isSelectedOptionEmpty(){return rt.isEmpty(this.selectedOption)}isSelected(e){return this.isValidOption(e)&&this.isOptionValueEqualsModelValue(e)}isOptionValueEqualsModelValue(e){return rt.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}ngAfterViewInit(){this.editable&&this.updateEditableLabel(),this.updatePlaceHolderForFloatingLabel()}updatePlaceHolderForFloatingLabel(){if(this._placeholder()!==null&&this._placeholder()!==void 0)return;let e=this.el.nativeElement.parentElement,r=e?.classList.contains("p-float-label");if(e&&r&&!this.selectedOption){let i=e.querySelector("label");i&&this._placeholder.set(i.textContent)}}updateEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value=this.getOptionLabel(this.selectedOption)||this.modelValue()||"")}clearEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value="")}getOptionIndex(e,r){return this.virtualScrollerDisabled?e:r&&r.getItemOptions(e).index}getOptionLabel(e){return this.optionLabel!==void 0&&this.optionLabel!==null?rt.resolveFieldData(e,this.optionLabel):e&&e.label!==void 0?e.label:e}getOptionValue(e){return this.optionValue&&this.optionValue!==null?rt.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}isOptionDisabled(e){return this.getOptionValue(this.modelValue())===this.getOptionValue(e)||this.getOptionLabel(this.modelValue()===this.getOptionLabel(e))&&e.disabled===!1?!1:this.optionDisabled?rt.resolveFieldData(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}getOptionGroupLabel(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null?rt.resolveFieldData(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren!==void 0&&this.optionGroupChildren!==null?rt.resolveFieldData(e,this.optionGroupChildren):e.items}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(r=>this.isOptionGroup(r)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}resetFilter(){this._filterValue.set(null),this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onContainerClick(e){this.disabled||this.readonly||this.loading||(this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),!(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]'))&&((!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.onClick.emit(e),this.clicked.set(!0),this.cd.detectChanges()))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}onEditableInput(e){let r=e.target.value;this.searchValue="",!this.searchOptions(e,r)&&this.focusedOptionIndex.set(-1),this.onModelChange(r),this.updateModel(r,e),setTimeout(()=>{this.onChange.emit({originalEvent:e,value:r})},1),!this.overlayVisible&&rt.isNotEmpty(r)&&this.show()}show(e){this.overlayVisible=!0;let r=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex();this.focusedOptionIndex.set(r),e&&ve.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"){if(this.itemsWrapper=ve.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){let r=this.modelValue()?this.focusedOptionIndex():-1;r!==-1&&this.scroller?.scrollToIndex(r)}else{let r=ve.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");r&&r.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&!this.editable&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}e.toState==="void"&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.clicked.set(!1),this.searchValue="",this.overlayOptions?.mode==="modal"&&ve.unblockBodyScroll(),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&(this.focusInputViewChild&&setTimeout(()=>{ve.focus(this.focusInputViewChild?.nativeElement)}),this.editable&&this.editableInputViewChild&&setTimeout(()=>{ve.focus(this.editableInputViewChild?.nativeElement)})),this.cd.markForCheck()}onInputFocus(e){if(this.disabled)return;this.focused=!0;let r=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(r),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onMouseDown(e){e.preventDefault()}onKeyDown(e,r){if(!(this.disabled||this.readonly||this.loading)){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Delete":this.onDeleteKey(e);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,r);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!e.metaKey&&rt.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.autoShowPanelOnPrintableCharacterKeyDown&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked.set(!1)}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e,!0);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onArrowDownKey(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{let r=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,r)}e.preventDefault(),e.stopPropagation()}changeFocusedOptionIndex(e,r){if(this.focusedOptionIndex()!==r&&(this.focusedOptionIndex.set(r),this.scrollInView(),this.selectOnFocus)){let i=this.visibleOptions()[r];this.onOptionSelect(e,i,!1)}}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let r=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let i=ve.findSingle(this.itemsViewChild.nativeElement,`li[id="${r}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}hasSelectedOption(){return this.modelValue()!==void 0}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}equalityKey(){return this.optionValue?null:this.dataKey}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let r=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(i=>this.isValidOption(i)):-1;return r>-1?r+e+1:e}findPrevOptionIndex(e){let r=e>0?rt.findLastIndex(this.visibleOptions().slice(0,e),i=>this.isValidOption(i)):-1;return r>-1?r:e}findLastOptionIndex(){return rt.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}isValidOption(e){return e!=null&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionGroup(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null&&e.optionGroup!==void 0&&e.optionGroup!==null&&e.group}onArrowUpKey(e,r=!1){if(e.altKey&&!r){if(this.focusedOptionIndex()!==-1){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}this.overlayVisible&&this.hide()}else{let i=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,i),!this.overlayVisible&&this.show()}e.preventDefault(),e.stopPropagation()}onArrowLeftKey(e,r=!1){r&&this.focusedOptionIndex.set(-1)}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onHomeKey(e,r=!1){if(r){let i=e.currentTarget;e.shiftKey?i.setSelectionRange(0,i.value.length):(i.setSelectionRange(0,0),this.focusedOptionIndex.set(-1))}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onEndKey(e,r=!1){if(r){let i=e.currentTarget;if(e.shiftKey)i.setSelectionRange(0,i.value.length);else{let o=i.value.length;i.setSelectionRange(o,o),this.focusedOptionIndex.set(-1)}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onSpaceKey(e,r=!1){!this.editable&&!r&&this.onEnterKey(e)}onEnterKey(e,r=!1){if(!this.overlayVisible)this.focusedOptionIndex.set(-1),this.onArrowDownKey(e);else{if(this.focusedOptionIndex()!==-1){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}!r&&this.hide()}e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e,r=!1){if(!r)if(this.overlayVisible&&this.hasFocusableElements())ve.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault();else{if(this.focusedOptionIndex()!==-1&&this.overlayVisible){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}this.overlayVisible&&this.hide(this.filter)}e.stopPropagation()}onFirstHiddenFocus(e){let r=e.relatedTarget===this.focusInputViewChild?.nativeElement?ve.getFirstFocusableElement(this.overlayViewChild.el?.nativeElement,":not(.p-hidden-focusable)"):this.focusInputViewChild?.nativeElement;ve.focus(r)}onLastHiddenFocus(e){let r=e.relatedTarget===this.focusInputViewChild?.nativeElement?ve.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;ve.focus(r)}hasFocusableElements(){return ve.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"]):not([class="p-dropdown-items-wrapper"])').length>0}onBackspaceKey(e,r=!1){r&&!this.overlayVisible&&this.show()}searchFields(){return this.filterBy?.split(",")||this.filterFields||[this.optionLabel]}searchOptions(e,r){this.searchValue=(this.searchValue||"")+r;let i=-1,o=!1;return this.focusedOptionIndex()!==-1?(i=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)),i=i===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)):i+this.focusedOptionIndex()):i=this.visibleOptions().findIndex(a=>this.isOptionMatched(a)),i!==-1&&(o=!0),i===-1&&this.focusedOptionIndex()===-1&&(i=this.findFirstFocusedOptionIndex()),i!==-1&&this.changeFocusedOptionIndex(e,i),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}onFilterInputChange(e){let r=e.target.value;this._filterValue.set(r),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()}),this.cd.markForCheck()}applyFocus(){this.editable?ve.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ve.focus(this.focusInputViewChild?.nativeElement)}focus(){this.applyFocus()}clear(e){this.updateModel(null,e),this.clearEditableLabel(),this.onModelTouched(),this.onChange.emit({originalEvent:e,value:this.value}),this.onClear.emit(e),this.resetFilter()}static \u0275fac=function(r){return new(r||t)(Oe(zn),Oe(Wr),Oe(br),Oe(En),Oe(h_),Oe(Mi))};static \u0275cmp=ct({type:t,selectors:[["p-dropdown"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&(Zn(wee,5),Zn(xee,5),Zn(Cee,5),Zn(Iee,5),Zn(See,5),Zn(Eee,5),Zn(Dee,5),Zn(Tee,5),Zn(Aee,5)),r&2){let o;sn(o=ln())&&(i.containerViewChild=o.first),sn(o=ln())&&(i.filterViewChild=o.first),sn(o=ln())&&(i.focusInputViewChild=o.first),sn(o=ln())&&(i.editableInputViewChild=o.first),sn(o=ln())&&(i.itemsViewChild=o.first),sn(o=ln())&&(i.scroller=o.first),sn(o=ln())&&(i.overlayViewChild=o.first),sn(o=ln())&&(i.firstHiddenFocusableElementOnOverlay=o.first),sn(o=ln())&&(i.lastHiddenFocusableElementOnOverlay=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(r,i){r&2&&go("p-inputwrapper-filled",i.filled())("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{id:"id",scrollHeight:"scrollHeight",filter:[Se.HasDecoratorInputTransform,"filter","filter",We],name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:[Se.HasDecoratorInputTransform,"readonly","readonly",We],required:[Se.HasDecoratorInputTransform,"required","required",We],editable:[Se.HasDecoratorInputTransform,"editable","editable",We],appendTo:"appendTo",tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],placeholder:"placeholder",loadingIcon:"loadingIcon",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",variant:"variant",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",filterFields:"filterFields",autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We],resetFilterOnHide:[Se.HasDecoratorInputTransform,"resetFilterOnHide","resetFilterOnHide",We],checkmark:[Se.HasDecoratorInputTransform,"checkmark","checkmark",We],dropdownIcon:"dropdownIcon",loading:[Se.HasDecoratorInputTransform,"loading","loading",We],optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:[Se.HasDecoratorInputTransform,"autoDisplayFirst","autoDisplayFirst",We],group:[Se.HasDecoratorInputTransform,"group","group",We],showClear:[Se.HasDecoratorInputTransform,"showClear","showClear",We],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:[Se.HasDecoratorInputTransform,"lazy","lazy",We],virtualScroll:[Se.HasDecoratorInputTransform,"virtualScroll","virtualScroll",We],virtualScrollItemSize:[Se.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",pn],virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:[Se.HasDecoratorInputTransform,"maxlength","maxlength",pn],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",focusOnHover:[Se.HasDecoratorInputTransform,"focusOnHover","focusOnHover",We],selectOnFocus:[Se.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",We],autoOptionFocus:[Se.HasDecoratorInputTransform,"autoOptionFocus","autoOptionFocus",We],autofocusFilter:[Se.HasDecoratorInputTransform,"autofocusFilter","autofocusFilter",We],autoShowPanelOnPrintableCharacterKeyDown:[Se.HasDecoratorInputTransform,"autoShowPanelOnPrintableCharacterKeyDown","autoShowPanelOnPrintableCharacterKeyDown",We],disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[ai([Fte]),Er],decls:12,vars:20,consts:[["container",""],["elseBlock",""],["overlay",""],["focusInput",""],["defaultPlaceholder",""],["editableInput",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["filter",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],["role","combobox","pAutoFocus","",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus","focus","blur","keydown",4,"ngIf"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"ngClass","disabled","autofocus","input","keydown","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger",3,"mousedown"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"input","keydown","focus","blur","ngClass","disabled","autofocus"],[3,"styleClass","click",4,"ngIf"],["class","p-dropdown-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-dropdown-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-dropdown-trigger-icon",4,"ngIf"],["class","p-dropdown-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-dropdown-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-dropdown-header",3,"click",4,"ngIf"],["tabindex","0",1,"p-dropdown-items-wrapper",3,"ngStyle"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[1,"p-dropdown-header",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dropdown-filter-container"],["type","text","role","searchbox","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"input","keydown","blur","value","ngClass"],["class","p-dropdown-filter-icon",4,"ngIf"],[1,"p-dropdown-filter-icon"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-dropdown-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-dropdown-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","checkmark","selected","label","disabled","template","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-dropdown-empty-message",3,"ngStyle"]],template:function(r,i){if(r&1){let o=jt();ie(0,"div",15,0),et("click",function(s){return Ee(o),De(i.onContainerClick(s))}),ce(2,Lee,6,20,"span",16)(3,Bee,2,8,"input",17)(4,zee,3,2,"ng-container",18),ie(5,"div",19),et("mousedown",function(s){return Ee(o),De(i.onMouseDown(s))}),ce(6,Yee,3,2,"ng-container",20)(7,nte,2,2,"ng-template",null,1,ya),oe(),ie(9,"p-overlay",21,2),ki("visibleChange",function(s){return Ee(o),Hi(i.overlayVisible,s)||(i.overlayVisible=s),De(s)}),et("onAnimationStart",function(s){return Ee(o),De(i.onOverlayAnimationStart(s))})("onHide",function(){return Ee(o),De(i.hide())}),ce(11,Nte,13,18,"ng-template",22),oe()()}if(r&2){let o,a=yi(8);ft(i.styleClass),O("ngClass",i.containerClass)("ngStyle",i.style),Ne("id",i.id),P(2),O("ngIf",!i.editable),P(),O("ngIf",i.editable),P(),O("ngIf",i.isVisibleClearIcon),P(),Ne("aria-expanded",(o=i.overlayVisible)!==null&&o!==void 0?o:!1)("data-pc-section","trigger"),P(),O("ngIf",i.loading)("ngIfElse",a),P(3),Ai("visible",i.overlayVisible),O("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}},dependencies:()=>[Xr,ba,Or,li,bi,TE,Dr,rO,g_,bs,_s,wf,RE,Ote],styles:[`@layer primeng{.p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;opacity:0}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-item-group{cursor:auto}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}.p-float-label .p-dropdown .p-placeholder{opacity:0}}
`],encapsulation:2,changeDetection:0})}return t})(),p0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,AE,kr,iO,$c,xf,Ll,_s,wf,RE,ME,Yc,AE,kr,xf]})}return t})();var OE=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ArrowDownIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var PE=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["ArrowUpIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var sO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["FilterIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var lO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["FilterSlashIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var uO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["PlusIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var cO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["SortAltIcon"]],standalone:!0,features:[Vt,Wt],decls:9,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z","fill","currentColor"],["d","M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z","fill","currentColor"],["d","M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z","fill","currentColor"],["d","M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4),oe(),ie(6,"defs")(7,"clipPath",5),Ve(8,"rect",6),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(6),O("id",i.pathId))},encapsulation:2})}return t})();var dO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["SortAmountDownIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var pO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["SortAmountUpAltIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var hO=(()=>{class t extends rn{pathId;ngOnInit(){this.pathId="url(#"+mr()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["TrashIcon"]],standalone:!0,features:[Vt,Wt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0)(1,"g"),Ve(2,"path",1),oe(),ie(3,"defs")(4,"clipPath",2),Ve(5,"rect",3),oe()()()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),P(),Ne("clip-path",i.pathId),P(3),O("id",i.pathId))},encapsulation:2})}return t})();var LE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleDownIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var BE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleUpIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var fO=(()=>{class t{el;ngModel;cd;config;variant="outlined";filled;constructor(e,r,i,o){this.el=e,this.ngModel=r,this.cd=i,this.config=o}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(r){return new(r||t)(Oe(zn),Oe(ea,8),Oe(br),Oe(Mi))};static \u0275dir=Un({type:t,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(r,i){r&1&&et("input",function(a){return i.onInput(a)}),r&2&&go("p-filled",i.filled)("p-variant-filled",i.variant==="filled"||i.config.inputStyle()==="filled")},inputs:{variant:"variant"}})}return t})(),v_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr]})}return t})();var Bte=["input"],Vte=(t,n,e)=>({"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":t,"p-inputnumber-buttons-horizontal":n,"p-inputnumber-buttons-vertical":e}),mO=()=>({"p-inputnumber-button p-inputnumber-button-up":!0}),gO=()=>({"p-inputnumber-button p-inputnumber-button-down":!0});function jte(t,n){if(t&1){let e=jt();ie(0,"TimesIcon",8),et("click",function(){Ee(e);let i=j(2);return De(i.clear())}),oe()}t&2&&(O("ngClass","p-inputnumber-clear-icon"),Ne("data-pc-section","clearIcon"))}function Ute(t,n){}function Hte(t,n){t&1&&ce(0,Ute,0,0,"ng-template")}function zte(t,n){if(t&1){let e=jt();ie(0,"span",9),et("click",function(){Ee(e);let i=j(2);return De(i.clear())}),ce(1,Hte,1,0,null,10),oe()}if(t&2){let e=j(2);Ne("data-pc-section","clearIcon"),P(),O("ngTemplateOutlet",e.clearIconTemplate)}}function Wte(t,n){if(t&1&&(yt(0),ce(1,jte,1,2,"TimesIcon",6)(2,zte,2,2,"span",7),bt()),t&2){let e=j();P(),O("ngIf",!e.clearIconTemplate),P(),O("ngIf",e.clearIconTemplate)}}function qte(t,n){if(t&1&&Ve(0,"span",14),t&2){let e=j(2);O("ngClass",e.incrementButtonIcon),Ne("data-pc-section","incrementbuttonicon")}}function Gte(t,n){t&1&&Ve(0,"AngleUpIcon"),t&2&&Ne("data-pc-section","incrementbuttonicon")}function $te(t,n){}function Kte(t,n){t&1&&ce(0,$te,0,0,"ng-template")}function Yte(t,n){if(t&1&&(yt(0),ce(1,Gte,1,1,"AngleUpIcon",3)(2,Kte,1,0,null,10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.incrementButtonIconTemplate),P(),O("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function Xte(t,n){if(t&1&&Ve(0,"span",14),t&2){let e=j(2);O("ngClass",e.decrementButtonIcon),Ne("data-pc-section","decrementbuttonicon")}}function Qte(t,n){t&1&&Ve(0,"AngleDownIcon"),t&2&&Ne("data-pc-section","decrementbuttonicon")}function Zte(t,n){}function Jte(t,n){t&1&&ce(0,Zte,0,0,"ng-template")}function ene(t,n){if(t&1&&(yt(0),ce(1,Qte,1,1,"AngleDownIcon",3)(2,Jte,1,0,null,10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.decrementButtonIconTemplate),P(),O("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function tne(t,n){if(t&1){let e=jt();ie(0,"span",11)(1,"button",12),et("mousedown",function(i){Ee(e);let o=j();return De(o.onUpButtonMouseDown(i))})("mouseup",function(){Ee(e);let i=j();return De(i.onUpButtonMouseUp())})("mouseleave",function(){Ee(e);let i=j();return De(i.onUpButtonMouseLeave())})("keydown",function(i){Ee(e);let o=j();return De(o.onUpButtonKeyDown(i))})("keyup",function(){Ee(e);let i=j();return De(i.onUpButtonKeyUp())}),ce(2,qte,1,2,"span",13)(3,Yte,3,2,"ng-container",3),oe(),ie(4,"button",12),et("mousedown",function(i){Ee(e);let o=j();return De(o.onDownButtonMouseDown(i))})("mouseup",function(){Ee(e);let i=j();return De(i.onDownButtonMouseUp())})("mouseleave",function(){Ee(e);let i=j();return De(i.onDownButtonMouseLeave())})("keydown",function(i){Ee(e);let o=j();return De(o.onDownButtonKeyDown(i))})("keyup",function(){Ee(e);let i=j();return De(i.onDownButtonKeyUp())}),ce(5,Xte,1,2,"span",13)(6,ene,3,2,"ng-container",3),oe()()}if(t&2){let e=j();Ne("data-pc-section","buttonGroup"),P(),ft(e.incrementButtonClass),O("ngClass",Jo(17,mO))("disabled",e.disabled),Ne("aria-hidden",!0)("data-pc-section","incrementbutton"),P(),O("ngIf",e.incrementButtonIcon),P(),O("ngIf",!e.incrementButtonIcon),P(),ft(e.decrementButtonClass),O("ngClass",Jo(18,gO))("disabled",e.disabled),Ne("aria-hidden",!0)("data-pc-section",e.decrementbutton),P(),O("ngIf",e.decrementButtonIcon),P(),O("ngIf",!e.decrementButtonIcon)}}function nne(t,n){if(t&1&&Ve(0,"span",14),t&2){let e=j(2);O("ngClass",e.incrementButtonIcon),Ne("data-pc-section","incrementbuttonicon")}}function rne(t,n){t&1&&Ve(0,"AngleUpIcon"),t&2&&Ne("data-pc-section","incrementbuttonicon")}function ine(t,n){}function one(t,n){t&1&&ce(0,ine,0,0,"ng-template")}function ane(t,n){if(t&1&&(yt(0),ce(1,rne,1,1,"AngleUpIcon",3)(2,one,1,0,null,10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.incrementButtonIconTemplate),P(),O("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function sne(t,n){if(t&1){let e=jt();ie(0,"button",12),et("mousedown",function(i){Ee(e);let o=j();return De(o.onUpButtonMouseDown(i))})("mouseup",function(){Ee(e);let i=j();return De(i.onUpButtonMouseUp())})("mouseleave",function(){Ee(e);let i=j();return De(i.onUpButtonMouseLeave())})("keydown",function(i){Ee(e);let o=j();return De(o.onUpButtonKeyDown(i))})("keyup",function(){Ee(e);let i=j();return De(i.onUpButtonKeyUp())}),ce(1,nne,1,2,"span",13)(2,ane,3,2,"ng-container",3),oe()}if(t&2){let e=j();ft(e.incrementButtonClass),O("ngClass",Jo(8,mO))("disabled",e.disabled),Ne("aria-hidden",!0)("data-pc-section","incrementbutton"),P(),O("ngIf",e.incrementButtonIcon),P(),O("ngIf",!e.incrementButtonIcon)}}function lne(t,n){if(t&1&&Ve(0,"span",14),t&2){let e=j(2);O("ngClass",e.decrementButtonIcon),Ne("data-pc-section","decrementbuttonicon")}}function une(t,n){t&1&&Ve(0,"AngleDownIcon"),t&2&&Ne("data-pc-section","decrementbuttonicon")}function cne(t,n){}function dne(t,n){t&1&&ce(0,cne,0,0,"ng-template")}function pne(t,n){if(t&1&&(yt(0),ce(1,une,1,1,"AngleDownIcon",3)(2,dne,1,0,null,10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.decrementButtonIconTemplate),P(),O("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function hne(t,n){if(t&1){let e=jt();ie(0,"button",12),et("mousedown",function(i){Ee(e);let o=j();return De(o.onDownButtonMouseDown(i))})("mouseup",function(){Ee(e);let i=j();return De(i.onDownButtonMouseUp())})("mouseleave",function(){Ee(e);let i=j();return De(i.onDownButtonMouseLeave())})("keydown",function(i){Ee(e);let o=j();return De(o.onDownButtonKeyDown(i))})("keyup",function(){Ee(e);let i=j();return De(i.onDownButtonKeyUp())}),ce(1,lne,1,2,"span",13)(2,pne,3,2,"ng-container",3),oe()}if(t&2){let e=j();ft(e.decrementButtonClass),O("ngClass",Jo(8,gO))("disabled",e.disabled),Ne("aria-hidden",!0)("data-pc-section","decrementbutton"),P(),O("ngIf",e.decrementButtonIcon),P(),O("ngIf",!e.decrementButtonIcon)}}var fne={provide:yo,useExisting:ii(()=>VE),multi:!0},VE=(()=>{class t{document;el;cd;injector;config;showButtons=!1;format=!0;buttonLayout="stacked";inputId;styleClass;style;placeholder;size;maxlength;tabindex;title;ariaLabelledBy;ariaLabel;ariaRequired;name;required;autocomplete;min;max;incrementButtonClass;decrementButtonClass;incrementButtonIcon;decrementButtonIcon;readonly=!1;step=1;allowEmpty=!0;locale;localeMatcher;mode="decimal";currency;currencyDisplay;useGrouping=!0;variant="outlined";minFractionDigits;maxFractionDigits;prefix;suffix;inputStyle;inputStyleClass;showClear=!1;autofocus;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}onInput=new it;onFocus=new it;onBlur=new it;onKeyDown=new it;onClear=new it;input;templates;clearIconTemplate;incrementButtonIconTemplate;decrementButtonIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};focused;initialized;groupChar="";prefixChar="";suffixChar="";isSpecialChar;timer;lastValue;_numeral;numberFormat;_decimal;_decimalChar;_group;_minusSign;_currency;_prefix;_suffix;_index;_disabled;ngControl=null;constructor(e,r,i,o,a){this.document=e,this.el=r,this.cd=i,this.injector=o,this.config=a}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(i=>!!e[i])&&this.updateConstructParser()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"clearicon":this.clearIconTemplate=e.template;break;case"incrementbuttonicon":this.incrementButtonIconTemplate=e.template;break;case"decrementbuttonicon":this.decrementButtonIconTemplate=e.template;break}})}ngOnInit(){this.ngControl=this.injector.get(dp,null,{optional:!0}),this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits??void 0,maximumFractionDigits:this.maxFractionDigits??void 0}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());let e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),r=new Map(e.map((i,o)=>[i,o]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._decimalChar=this.getDecimalChar(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=i=>r.get(i)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){let e=this.getDecimalChar();return new RegExp(`[${e}]`,"g")}getDecimalChar(){return new Intl.NumberFormat(this.locale,Rn(nt({},this.getOptions()),{useGrouping:!1})).format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}getGroupingExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){let e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}get isBlurUpdateOnMode(){return this.ngControl?.control?.updateOn==="blur"}formatValue(e){if(e!=null){if(e==="-")return e;if(this.format){let i=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&e!=this.prefix&&(i=this.prefix+i),this.suffix&&e!=this.suffix&&(i=i+this.suffix),i}return e.toString()}return""}parseValue(e){let r=new RegExp(this._suffix,""),i=new RegExp(this._prefix,""),o=new RegExp(this._currency,""),a=e.replace(r,"").replace(i,"").trim().replace(/\s/g,"").replace(o,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(a){if(a==="-")return a;let s=+a;return isNaN(s)?null:s}return null}repeat(e,r,i){if(this.readonly)return;let o=r||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,i)},o),this.spin(e,i)}spin(e,r){let i=this.step*r,o=this.parseValue(this.input?.nativeElement.value)||0,a=this.validateValue(o+i);this.maxlength&&this.maxlength<this.formatValue(a).length||(this.updateInput(a,null,"spin",null),this.updateModel(e,a),this.handleOnInput(e,o,a))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault())}onUpButtonMouseUp(){this.disabled||this.clearTimer()}onUpButtonMouseLeave(){this.disabled||this.clearTimer()}onUpButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault())}onDownButtonMouseUp(){this.disabled||this.clearTimer()}onDownButtonMouseLeave(){this.disabled||this.clearTimer()}onDownButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey||e.key==="Dead"){this.isSpecialChar=!0;return}let r=e.target.selectionStart,i=e.target.selectionEnd,o=e.target.value,a=null;switch(e.altKey&&e.preventDefault(),e.key){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":for(let s=r;s<=o.length;s++){let l=s===0?0:s-1;if(this.isNumeralChar(o.charAt(l))){this.input.nativeElement.setSelectionRange(s,s);break}}break;case"ArrowRight":for(let s=i;s>=0;s--)if(this.isNumeralChar(o.charAt(s))){this.input.nativeElement.setSelectionRange(s,s);break}break;case"Tab":case"Enter":a=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(a),this.input.nativeElement.setAttribute("aria-valuenow",a),this.updateModel(e,a);break;case"Backspace":{if(e.preventDefault(),r===i){if(r==1&&this.prefix||r==o.length&&this.suffix)break;let s=o.charAt(r-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:u}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(s)){let c=this.getDecimalLength(o);if(this._group.test(s))this._group.lastIndex=0,a=o.slice(0,r-2)+o.slice(r-1);else if(this._decimal.test(s))this._decimal.lastIndex=0,c?this.input?.nativeElement.setSelectionRange(r-1,r-1):a=o.slice(0,r-1)+o.slice(r);else if(l>0&&r>l){let d=this.isDecimalMode()&&(this.minFractionDigits||0)<c?"":"0";a=o.slice(0,r-1)+d+o.slice(r)}else u===1?(a=o.slice(0,r-1)+"0"+o.slice(r),a=this.parseValue(a)>0?a:""):a=o.slice(0,r-1)+o.slice(r)}else this.mode==="currency"&&s.search(this._currency)!=-1&&(a=o.slice(1));this.updateValue(e,a,null,"delete-single")}else a=this.deleteRange(o,r,i),this.updateValue(e,a,null,"delete-range");break}case"Delete":if(e.preventDefault(),r===i){if(r==0&&this.prefix||r==o.length-1&&this.suffix)break;let s=o.charAt(r),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:u}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(s)){let c=this.getDecimalLength(o);if(this._group.test(s))this._group.lastIndex=0,a=o.slice(0,r)+o.slice(r+2);else if(this._decimal.test(s))this._decimal.lastIndex=0,c?this.input?.nativeElement.setSelectionRange(r+1,r+1):a=o.slice(0,r)+o.slice(r+1);else if(l>0&&r>l){let d=this.isDecimalMode()&&(this.minFractionDigits||0)<c?"":"0";a=o.slice(0,r)+d+o.slice(r+1)}else u===1?(a=o.slice(0,r)+"0"+o.slice(r+1),a=this.parseValue(a)>0?a:""):a=o.slice(0,r)+o.slice(r+1)}this.updateValue(e,a,null,"delete-back-single")}else a=this.deleteRange(o,r,i),this.updateValue(e,a,null,"delete-range");break;case"Home":this.min&&(this.updateModel(e,this.min),e.preventDefault());break;case"End":this.max&&(this.updateModel(e,this.max),e.preventDefault());break;default:break}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let r=e.which||e.keyCode,i=String.fromCharCode(r),o=this.isDecimalSign(i),a=this.isMinusSign(i);r!=13&&e.preventDefault(),!o&&e.code==="NumpadDecimal"&&(o=!0,i=this._decimalChar,r=i.charCodeAt(0));let{value:s,selectionStart:l,selectionEnd:u}=this.input.nativeElement,c=this.parseValue(s+i),d=c!=null?c.toString():"",p=s.substring(l,u),h=this.parseValue(p),f=h!=null?h.toString():"";if(l!==u&&f.length>0){this.insert(e,i,{isDecimalSign:o,isMinusSign:a});return}this.maxlength&&d.length>this.maxlength||(48<=r&&r<=57||a||o)&&this.insert(e,i,{isDecimalSign:o,isMinusSign:a})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let r=(e.clipboardData||this.document.defaultView.clipboardData).getData("Text");if(r){this.maxlength&&(r=r.toString().substring(0,this.maxlength));let i=this.parseValue(r);i!=null&&this.insert(e,i.toString())}}}allowMinusSign(){return this.min==null||this.min<0}isMinusSign(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1}isDecimalSign(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1}isDecimalMode(){return this.mode==="decimal"}getDecimalCharIndexes(e){let r=e.search(this._decimal);this._decimal.lastIndex=0;let o=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:r,decimalCharIndexWithoutPrefix:o}}getCharIndexes(e){let r=e.search(this._decimal);this._decimal.lastIndex=0;let i=e.search(this._minusSign);this._minusSign.lastIndex=0;let o=e.search(this._suffix);this._suffix.lastIndex=0;let a=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:r,minusCharIndex:i,suffixCharIndex:o,currencyCharIndex:a}}insert(e,r,i={isDecimalSign:!1,isMinusSign:!1}){let o=r.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&o!==-1)return;let a=this.input?.nativeElement.selectionStart,s=this.input?.nativeElement.selectionEnd,l=this.input?.nativeElement.value.trim(),{decimalCharIndex:u,minusCharIndex:c,suffixCharIndex:d,currencyCharIndex:p}=this.getCharIndexes(l),h;if(i.isMinusSign)a===0&&(h=l,(c===-1||s!==0)&&(h=this.insertText(l,r,0,s)),this.updateValue(e,h,r,"insert"));else if(i.isDecimalSign)u>0&&a===u?this.updateValue(e,l,r,"insert"):u>a&&u<s?(h=this.insertText(l,r,a,s),this.updateValue(e,h,r,"insert")):u===-1&&this.maxFractionDigits&&(h=this.insertText(l,r,a,s),this.updateValue(e,h,r,"insert"));else{let f=this.numberFormat.resolvedOptions().maximumFractionDigits,m=a!==s?"range-insert":"insert";if(u>0&&a>u){if(a+r.length-(u+1)<=f){let g=p>=a?p-1:d>=a?d:l.length;h=l.slice(0,a)+r+l.slice(a+r.length,g)+l.slice(g),this.updateValue(e,h,r,m)}}else h=this.insertText(l,r,a,s),this.updateValue(e,h,r,m)}}insertText(e,r,i,o){if((r==="."?r:r.split(".")).length===2){let s=e.slice(i,o).search(this._decimal);return this._decimal.lastIndex=0,s>0?e.slice(0,i)+this.formatValue(r)+e.slice(o):e||this.formatValue(r)}else return o-i===e.length?this.formatValue(r):i===0?r+e.slice(o):o===e.length?e.slice(0,i)+r:e.slice(0,i)+r+e.slice(o)}deleteRange(e,r,i){let o;return i-r===e.length?o="":r===0?o=e.slice(i):i===e.length?o=e.slice(0,r):o=e.slice(0,r)+e.slice(i),o}initCursor(){let e=this.input?.nativeElement.selectionStart,r=this.input?.nativeElement.selectionEnd,i=this.input?.nativeElement.value,o=i.length,a=null,s=(this.prefixChar||"").length;i=i.replace(this._prefix,""),(e===r||e!==0||r<s)&&(e-=s);let l=i.charAt(e);if(this.isNumeralChar(l))return e+s;let u=e-1;for(;u>=0;)if(l=i.charAt(u),this.isNumeralChar(l)){a=u+s;break}else u--;if(a!==null)this.input?.nativeElement.setSelectionRange(a+1,a+1);else{for(u=e;u<o;)if(l=i.charAt(u),this.isNumeralChar(l)){a=u+s;break}else u++;a!==null&&this.input?.nativeElement.setSelectionRange(a,a)}return a||0}onInputClick(){let e=this.input?.nativeElement.value;!this.readonly&&e!==ve.getSelection()&&this.initCursor()}isNumeralChar(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,r,i,o){let a=this.input?.nativeElement.value,s=null;r!=null&&(s=this.parseValue(r),s=!s&&!this.allowEmpty?0:s,this.updateInput(s,i,o,r),this.handleOnInput(e,a,s))}handleOnInput(e,r,i){this.isValueChanged(r,i)&&(this.input.nativeElement.value=this.formatValue(i),this.input?.nativeElement.setAttribute("aria-valuenow",i),!this.isBlurUpdateOnMode&&this.updateModel(e,i),this.onInput.emit({originalEvent:e,value:i,formattedValue:r}))}isValueChanged(e,r){if(r===null&&e!==null)return!0;if(r!=null){let i=typeof e=="string"?this.parseValue(e):e;return r!==i}return!1}validateValue(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e}updateInput(e,r,i,o){r=r||"";let a=this.input?.nativeElement.value,s=this.formatValue(e),l=a.length;if(s!==o&&(s=this.concatValues(s,o)),l===0){this.input.nativeElement.value=s,this.input.nativeElement.setSelectionRange(0,0);let c=this.initCursor()+r.length;this.input.nativeElement.setSelectionRange(c,c)}else{let u=this.input.nativeElement.selectionStart,c=this.input.nativeElement.selectionEnd;if(this.maxlength&&s.length>this.maxlength&&(s=s.slice(0,this.maxlength),u=Math.min(u,this.maxlength),c=Math.min(c,this.maxlength)),this.maxlength&&this.maxlength<s.length)return;this.input.nativeElement.value=s;let d=s.length;if(i==="range-insert"){let p=this.parseValue((a||"").slice(0,u)),f=(p!==null?p.toString():"").split("").join(`(${this.groupChar})?`),m=new RegExp(f,"g");m.test(s);let g=r.split("").join(`(${this.groupChar})?`),y=new RegExp(g,"g");y.test(s.slice(m.lastIndex)),c=m.lastIndex+y.lastIndex,this.input.nativeElement.setSelectionRange(c,c)}else if(d===l)i==="insert"||i==="delete-back-single"?this.input.nativeElement.setSelectionRange(c+1,c+1):i==="delete-single"?this.input.nativeElement.setSelectionRange(c-1,c-1):(i==="delete-range"||i==="spin")&&this.input.nativeElement.setSelectionRange(c,c);else if(i==="delete-back-single"){let p=a.charAt(c-1),h=a.charAt(c),f=l-d,m=this._group.test(h);m&&f===1?c+=1:!m&&this.isNumeralChar(p)&&(c+=-1*f+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(c,c)}else if(a==="-"&&i==="insert"){this.input.nativeElement.setSelectionRange(0,0);let h=this.initCursor()+r.length+1;this.input.nativeElement.setSelectionRange(h,h)}else c=c+(d-l),this.input.nativeElement.setSelectionRange(c,c)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,r){if(e&&r){let i=r.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?i!==-1?e:e.replace(this.suffixChar,"").split(this._decimal)[0]+r.replace(this.suffixChar,"").slice(i)+this.suffixChar:i!==-1?e.split(this._decimal)[0]+r.slice(i):e}return e}getDecimalLength(e){if(e){let r=e.split(this._decimal);if(r.length===2)return r[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let r=this.validateValue(this.parseValue(this.input.nativeElement.value)),i=r?.toString();this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(e,r),this.onBlur.emit(e)}formattedValue(){let e=!this.value&&!this.allowEmpty?0:this.value;return this.formatValue(e)}updateModel(e,r){this.value!==r&&(this.value=r,this.isBlurUpdateOnMode&&this.focused?this.isBlurUpdateOnMode&&this.onModelChange(r):this.onModelChange(r)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return this.value!=null&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zn),Oe(br),Oe(Zo),Oe(Mi))};static \u0275cmp=ct({type:t,selectors:[["p-inputNumber"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&Zn(Bte,5),r&2){let o;sn(o=ln())&&(i.input=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(r,i){r&2&&go("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputnumber-clearable",i.showClear&&i.buttonLayout!="vertical")},inputs:{showButtons:[Se.HasDecoratorInputTransform,"showButtons","showButtons",We],format:[Se.HasDecoratorInputTransform,"format","format",We],buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:[Se.HasDecoratorInputTransform,"size","size",pn],maxlength:[Se.HasDecoratorInputTransform,"maxlength","maxlength",pn],tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],title:"title",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",ariaRequired:[Se.HasDecoratorInputTransform,"ariaRequired","ariaRequired",We],name:"name",required:[Se.HasDecoratorInputTransform,"required","required",We],autocomplete:"autocomplete",min:[Se.HasDecoratorInputTransform,"min","min",pn],max:[Se.HasDecoratorInputTransform,"max","max",pn],incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:[Se.HasDecoratorInputTransform,"readonly","readonly",We],step:[Se.HasDecoratorInputTransform,"step","step",pn],allowEmpty:[Se.HasDecoratorInputTransform,"allowEmpty","allowEmpty",We],locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:[Se.HasDecoratorInputTransform,"useGrouping","useGrouping",We],variant:"variant",minFractionDigits:[Se.HasDecoratorInputTransform,"minFractionDigits","minFractionDigits",e=>pn(e,null)],maxFractionDigits:[Se.HasDecoratorInputTransform,"maxFractionDigits","maxFractionDigits",e=>pn(e,null)],prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:[Se.HasDecoratorInputTransform,"showClear","showClear",We],autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We],disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[ai([fne]),Er,eo],decls:7,vars:43,consts:[["input",""],[3,"ngClass","ngStyle"],["pInputText","","role","spinbutton","inputmode","decimal","pAutoFocus","",3,"input","keydown","keypress","paste","click","focus","blur","ngClass","ngStyle","value","disabled","readonly","autofocus"],[4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","class","p-button-icon-only","tabindex","0",3,"ngClass","class","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["class","p-inputnumber-clear-icon",3,"click",4,"ngIf"],[3,"click","ngClass"],[1,"p-inputnumber-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","0",1,"p-button-icon-only",3,"mousedown","mouseup","mouseleave","keydown","keyup","ngClass","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(r,i){if(r&1){let o=jt();ie(0,"span",1)(1,"input",2,0),et("input",function(s){return Ee(o),De(i.onUserInput(s))})("keydown",function(s){return Ee(o),De(i.onInputKeyDown(s))})("keypress",function(s){return Ee(o),De(i.onInputKeyPress(s))})("paste",function(s){return Ee(o),De(i.onPaste(s))})("click",function(){return Ee(o),De(i.onInputClick())})("focus",function(s){return Ee(o),De(i.onInputFocus(s))})("blur",function(s){return Ee(o),De(i.onInputBlur(s))}),oe(),ce(3,Wte,3,2,"ng-container",3)(4,tne,7,19,"span",4)(5,sne,3,9,"button",5)(6,hne,3,9,"button",5),oe()}r&2&&(ft(i.styleClass),O("ngClass",vo(39,Vte,i.showButtons&&i.buttonLayout==="stacked",i.showButtons&&i.buttonLayout==="horizontal",i.showButtons&&i.buttonLayout==="vertical"))("ngStyle",i.style),Ne("data-pc-name","inputnumber")("data-pc-section","root"),P(),ft(i.inputStyleClass),go("p-variant-filled",i.variant==="filled"||i.config.inputStyle()==="filled"),O("ngClass","p-inputnumber-input")("ngStyle",i.inputStyle)("value",i.formattedValue())("disabled",i.disabled)("readonly",i.readonly)("autofocus",i.autofocus),Ne("id",i.inputId)("variant",i.variant)("aria-valuemin",i.min)("aria-valuemax",i.max)("aria-valuenow",i.value)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("title",i.title)("size",i.size)("name",i.name)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-required",i.ariaRequired)("required",i.required)("min",i.min)("max",i.max)("data-pc-section","input"),P(2),O("ngIf",i.buttonLayout!="vertical"&&i.showClear&&i.value),P(),O("ngIf",i.showButtons&&i.buttonLayout==="stacked"),P(),O("ngIf",i.showButtons&&i.buttonLayout!=="stacked"),P(),O("ngIf",i.showButtons&&i.buttonLayout!=="stacked"))},dependencies:()=>[Xr,Or,li,bi,fO,m_,bs,_s,BE,LE],styles:[`@layer primeng{p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return t})(),h0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,v_,Bu,Ll,_s,BE,LE,kr]})}return t})();var jE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleDoubleLeftIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var UE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleDoubleRightIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var HE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleLeftIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var zE=(()=>{class t extends rn{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})();static \u0275cmp=ct({type:t,selectors:[["AngleRightIcon"]],standalone:!0,features:[Vt,Wt],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(r,i){r&1&&(nn(),ie(0,"svg",0),Ve(1,"path",1),oe()),r&2&&(ft(i.getClassNames()),Ne("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var y_=t=>({"p-disabled":t}),b_=t=>({$implicit:t}),gne=t=>({"p-highlight":t});function vne(t,n){t&1&&St(0)}function yne(t,n){if(t&1&&(ie(0,"div",15),ce(1,vne,1,0,"ng-container",16),oe()),t&2){let e=j(2);Ne("data-pc-section","start"),P(),O("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",Gt(3,b_,e.paginatorState))}}function bne(t,n){if(t&1&&(ie(0,"span",17),st(1),oe()),t&2){let e=j(2);P(),ir(e.currentPageReport)}}function _ne(t,n){t&1&&Ve(0,"AngleDoubleLeftIcon",19),t&2&&O("styleClass","p-paginator-icon")}function wne(t,n){}function xne(t,n){t&1&&ce(0,wne,0,0,"ng-template")}function Cne(t,n){if(t&1&&(ie(0,"span",20),ce(1,xne,1,0,null,21),oe()),t&2){let e=j(3);P(),O("ngTemplateOutlet",e.firstPageLinkIconTemplate)}}function Ine(t,n){if(t&1){let e=jt();ie(0,"button",18),et("click",function(i){Ee(e);let o=j(2);return De(o.changePageToFirst(i))}),ce(1,_ne,1,1,"AngleDoubleLeftIcon",6)(2,Cne,2,1,"span",7),oe()}if(t&2){let e=j(2);O("disabled",e.isFirstPage()||e.empty())("ngClass",Gt(5,y_,e.isFirstPage()||e.empty())),Ne("aria-label",e.getAriaLabel("firstPageLabel")),P(),O("ngIf",!e.firstPageLinkIconTemplate),P(),O("ngIf",e.firstPageLinkIconTemplate)}}function Sne(t,n){t&1&&Ve(0,"AngleLeftIcon",19),t&2&&O("styleClass","p-paginator-icon")}function Ene(t,n){}function Dne(t,n){t&1&&ce(0,Ene,0,0,"ng-template")}function Tne(t,n){if(t&1&&(ie(0,"span",20),ce(1,Dne,1,0,null,21),oe()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.previousPageLinkIconTemplate)}}function Ane(t,n){if(t&1){let e=jt();ie(0,"button",24),et("click",function(i){let o=Ee(e).$implicit,a=j(3);return De(a.onPageLinkClick(i,o-1))}),st(1),oe()}if(t&2){let e=n.$implicit,r=j(3);O("ngClass",Gt(4,gne,e-1==r.getPage())),Ne("aria-label",r.getPageAriaLabel(e))("aria-current",e-1==r.getPage()?"page":void 0),P(),fr(" ",r.getLocalization(e)," ")}}function kne(t,n){if(t&1&&(ie(0,"span",22),ce(1,Ane,2,6,"button",23),oe()),t&2){let e=j(2);P(),O("ngForOf",e.pageLinks)}}function Mne(t,n){if(t&1&&st(0),t&2){let e=j(3);ir(e.currentPageReport)}}function Rne(t,n){t&1&&St(0)}function Nne(t,n){if(t&1&&ce(0,Rne,1,0,"ng-container",16),t&2){let e=n.$implicit,r=j(4);O("ngTemplateOutlet",r.jumpToPageItemTemplate)("ngTemplateOutletContext",Gt(2,b_,e))}}function Fne(t,n){t&1&&(yt(0),ce(1,Nne,1,4,"ng-template",28),bt())}function One(t,n){t&1&&St(0)}function Pne(t,n){if(t&1&&ce(0,One,1,0,"ng-container",21),t&2){let e=j(4);O("ngTemplateOutlet",e.dropdownIconTemplate)}}function Lne(t,n){t&1&&ce(0,Pne,1,1,"ng-template",29)}function Bne(t,n){if(t&1){let e=jt();ie(0,"p-dropdown",25),et("onChange",function(i){Ee(e);let o=j(2);return De(o.onPageDropdownChange(i))}),ce(1,Mne,1,1,"ng-template",26)(2,Fne,2,0,"ng-container",27)(3,Lne,1,0,null,27),oe()}if(t&2){let e=j(2);O("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),Ne("aria-label",e.getAriaLabel("jumpToPageDropdownLabel")),P(2),O("ngIf",e.jumpToPageItemTemplate),P(),O("ngIf",e.dropdownIconTemplate)}}function Vne(t,n){t&1&&Ve(0,"AngleRightIcon",19),t&2&&O("styleClass","p-paginator-icon")}function jne(t,n){}function Une(t,n){t&1&&ce(0,jne,0,0,"ng-template")}function Hne(t,n){if(t&1&&(ie(0,"span",20),ce(1,Une,1,0,null,21),oe()),t&2){let e=j(2);P(),O("ngTemplateOutlet",e.nextPageLinkIconTemplate)}}function zne(t,n){t&1&&Ve(0,"AngleDoubleRightIcon",19),t&2&&O("styleClass","p-paginator-icon")}function Wne(t,n){}function qne(t,n){t&1&&ce(0,Wne,0,0,"ng-template")}function Gne(t,n){if(t&1&&(ie(0,"span",20),ce(1,qne,1,0,null,21),oe()),t&2){let e=j(3);P(),O("ngTemplateOutlet",e.lastPageLinkIconTemplate)}}function $ne(t,n){if(t&1){let e=jt();ie(0,"button",30),et("click",function(i){Ee(e);let o=j(2);return De(o.changePageToLast(i))}),ce(1,zne,1,1,"AngleDoubleRightIcon",6)(2,Gne,2,1,"span",7),oe()}if(t&2){let e=j(2);O("disabled",e.isLastPage()||e.empty())("ngClass",Gt(5,y_,e.isLastPage()||e.empty())),Ne("aria-label",e.getAriaLabel("lastPageLabel")),P(),O("ngIf",!e.lastPageLinkIconTemplate),P(),O("ngIf",e.lastPageLinkIconTemplate)}}function Kne(t,n){if(t&1){let e=jt();ie(0,"p-inputNumber",31),et("ngModelChange",function(i){Ee(e);let o=j(2);return De(o.changePage(i-1))}),oe()}if(t&2){let e=j(2);O("ngModel",e.currentPage())("disabled",e.empty())}}function Yne(t,n){t&1&&St(0)}function Xne(t,n){if(t&1&&ce(0,Yne,1,0,"ng-container",16),t&2){let e=n.$implicit,r=j(4);O("ngTemplateOutlet",r.dropdownItemTemplate)("ngTemplateOutletContext",Gt(2,b_,e))}}function Qne(t,n){t&1&&(yt(0),ce(1,Xne,1,4,"ng-template",28),bt())}function Zne(t,n){t&1&&St(0)}function Jne(t,n){if(t&1&&ce(0,Zne,1,0,"ng-container",21),t&2){let e=j(4);O("ngTemplateOutlet",e.dropdownIconTemplate)}}function ere(t,n){t&1&&ce(0,Jne,1,1,"ng-template",29)}function tre(t,n){if(t&1){let e=jt();ie(0,"p-dropdown",32),ki("ngModelChange",function(i){Ee(e);let o=j(2);return Hi(o.rows,i)||(o.rows=i),De(i)}),et("onChange",function(i){Ee(e);let o=j(2);return De(o.onRppChange(i))}),ce(1,Qne,2,0,"ng-container",27)(2,ere,1,0,null,27),oe()}if(t&2){let e=j(2);O("options",e.rowsPerPageItems),Ai("ngModel",e.rows),O("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)("ariaLabel",e.getAriaLabel("rowsPerPageLabel")),P(),O("ngIf",e.dropdownItemTemplate),P(),O("ngIf",e.dropdownIconTemplate)}}function nre(t,n){t&1&&St(0)}function rre(t,n){if(t&1&&(ie(0,"div",33),ce(1,nre,1,0,"ng-container",16),oe()),t&2){let e=j(2);Ne("data-pc-section","end"),P(),O("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",Gt(3,b_,e.paginatorState))}}function ire(t,n){if(t&1){let e=jt();ie(0,"div",1),ce(1,yne,2,5,"div",2)(2,bne,2,1,"span",3)(3,Ine,3,7,"button",4),ie(4,"button",5),et("click",function(i){Ee(e);let o=j();return De(o.changePageToPrev(i))}),ce(5,Sne,1,1,"AngleLeftIcon",6)(6,Tne,2,1,"span",7),oe(),ce(7,kne,2,1,"span",8)(8,Bne,4,8,"p-dropdown",9),ie(9,"button",10),et("click",function(i){Ee(e);let o=j();return De(o.changePageToNext(i))}),ce(10,Vne,1,1,"AngleRightIcon",6)(11,Hne,2,1,"span",7),oe(),ce(12,$ne,3,7,"button",11)(13,Kne,1,2,"p-inputNumber",12)(14,tre,3,8,"p-dropdown",13)(15,rre,2,5,"div",14),oe()}if(t&2){let e=j();ft(e.styleClass),O("ngStyle",e.style)("ngClass","p-paginator p-component"),Ne("data-pc-section","paginator")("data-pc-section","root"),P(),O("ngIf",e.templateLeft),P(),O("ngIf",e.showCurrentPageReport),P(),O("ngIf",e.showFirstLastIcon),P(),O("disabled",e.isFirstPage()||e.empty())("ngClass",Gt(25,y_,e.isFirstPage()||e.empty())),Ne("aria-label",e.getAriaLabel("prevPageLabel")),P(),O("ngIf",!e.previousPageLinkIconTemplate),P(),O("ngIf",e.previousPageLinkIconTemplate),P(),O("ngIf",e.showPageLinks),P(),O("ngIf",e.showJumpToPageDropdown),P(),O("disabled",e.isLastPage()||e.empty())("ngClass",Gt(27,y_,e.isLastPage()||e.empty())),Ne("aria-label",e.getAriaLabel("nextPageLabel")),P(),O("ngIf",!e.nextPageLinkIconTemplate),P(),O("ngIf",e.nextPageLinkIconTemplate),P(),O("ngIf",e.showFirstLastIcon),P(),O("ngIf",e.showJumpToPageInput),P(),O("ngIf",e.rowsPerPageOptions),P(),O("ngIf",e.templateRight)}}var vO=(()=>{class t{cd;config;pageLinkSize=5;style;styleClass;alwaysShow=!0;dropdownAppendTo;templateLeft;templateRight;appendTo;dropdownScrollHeight="200px";currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showFirstLastIcon=!0;totalRecords=0;rows=0;rowsPerPageOptions;showJumpToPageDropdown;showJumpToPageInput;jumpToPageItemTemplate;showPageLinks=!0;locale;dropdownItemTemplate;get first(){return this._first}set first(e){this._first=e}onPageChange=new it;templates;dropdownIconTemplate;firstPageLinkIconTemplate;previousPageLinkIconTemplate;lastPageLinkIconTemplate;nextPageLinkIconTemplate;pageLinks;pageItems;rowsPerPageItems;paginatorState;_first=0;_page=0;constructor(e,r){this.cd=e,this.config=r}ngOnInit(){this.updatePaginatorState()}getAriaLabel(e){return this.config.translation.aria?this.config.translation.aria[e]:void 0}getPageAriaLabel(e){return this.config.translation.aria?this.config.translation.aria.pageLabel.replace(/{page}/g,`${e}`):void 0}getLocalization(e){let r=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(r.map((o,a)=>[a,o]));return e>9?String(e).split("").map(a=>i.get(Number(a))).join(""):i.get(e)}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"firstpagelinkicon":this.firstPageLinkIconTemplate=e.template;break;case"previouspagelinkicon":this.previousPageLinkIconTemplate=e.template;break;case"lastpagelinkicon":this.lastPageLinkIconTemplate=e.template;break;case"nextpagelinkicon":this.nextPageLinkIconTemplate=e.template;break}})}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions(),e.pageLinkSize&&this.updatePageLinks()}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)typeof e=="object"&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(this.getLocalization(e)),value:e})}}isFirstPage(){return this.getPage()===0}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),r=Math.min(this.pageLinkSize,e),i=Math.max(0,Math.ceil(this.getPage()-r/2)),o=Math.min(e-1,i+r-1);var a=this.pageLinkSize-(o-i+1);return i=Math.max(0,i-a),[i,o]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[0],i=e[1];for(let o=r;o<=i;o++)this.pageLinks.push(o+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let o=0;o<this.getPageCount();o++)this.pageItems.push({label:String(o+1),value:o})}}changePage(e){var r=this.getPageCount();if(e>=0&&e<r){this._first=this.rows*e;var i={page:e,first:this.first,rows:this.rows,pageCount:r};this.updatePageLinks(),this.onPageChange.emit(i),this.updatePaginatorState()}}updateFirst(){let e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,r){this.changePage(r),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return this.getPageCount()===0}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}static \u0275fac=function(r){return new(r||t)(Oe(br),Oe(Mi))};static \u0275cmp=ct({type:t,selectors:[["p-paginator"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},hostAttrs:[1,"p-element"],inputs:{pageLinkSize:[Se.HasDecoratorInputTransform,"pageLinkSize","pageLinkSize",pn],style:"style",styleClass:"styleClass",alwaysShow:[Se.HasDecoratorInputTransform,"alwaysShow","alwaysShow",We],dropdownAppendTo:"dropdownAppendTo",templateLeft:"templateLeft",templateRight:"templateRight",appendTo:"appendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[Se.HasDecoratorInputTransform,"showCurrentPageReport","showCurrentPageReport",We],showFirstLastIcon:[Se.HasDecoratorInputTransform,"showFirstLastIcon","showFirstLastIcon",We],totalRecords:[Se.HasDecoratorInputTransform,"totalRecords","totalRecords",pn],rows:[Se.HasDecoratorInputTransform,"rows","rows",pn],rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:[Se.HasDecoratorInputTransform,"showJumpToPageDropdown","showJumpToPageDropdown",We],showJumpToPageInput:[Se.HasDecoratorInputTransform,"showJumpToPageInput","showJumpToPageInput",We],jumpToPageItemTemplate:"jumpToPageItemTemplate",showPageLinks:[Se.HasDecoratorInputTransform,"showPageLinks","showPageLinks",We],locale:"locale",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[Er,eo],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"click","disabled","ngClass"],[3,"styleClass",4,"ngIf"],["class","p-paginator-icon",4,"ngIf"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"click","disabled","ngClass"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ariaLabel","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"click","disabled","ngClass"],[3,"styleClass"],[1,"p-paginator-icon"],[4,"ngTemplateOutlet"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"click","ngClass"],["styleClass","p-paginator-page-options",3,"onChange","options","ngModel","disabled","appendTo","scrollHeight"],["pTemplate","selectedItem"],[4,"ngIf"],["pTemplate","item"],["pTemplate","dropdownicon"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"click","disabled","ngClass"],[1,"p-paginator-page-input",3,"ngModelChange","ngModel","disabled"],["styleClass","p-paginator-rpp-options",3,"ngModelChange","onChange","options","ngModel","disabled","appendTo","scrollHeight","ariaLabel"],[1,"p-paginator-right-content"]],template:function(r,i){r&1&&ce(0,ire,16,29,"div",0),r&2&&O("ngIf",i.alwaysShow?!0:i.pageLinks&&i.pageLinks.length>1)},dependencies:()=>[Xr,ba,Or,li,bi,FE,Dr,VE,ys,ea,Bl,jE,UE,HE,zE],styles:[`@layer primeng{.p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}}
`],encapsulation:2,changeDetection:0})}return t})(),yO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,p0,h0,pp,kr,$c,jE,UE,HE,zE,p0,h0,pp,kr]})}return t})();var are=["container"],sre=(t,n,e)=>({"p-highlight":t,"p-disabled":n,"p-button-icon-only":e}),lre=(t,n)=>({$implicit:t,index:n});function ure(t,n){if(t&1&&Ve(0,"span",8),t&2){let e=j(2).$implicit;ft(e.icon),O("ngClass","p-button-icon p-button-icon-left"),Ne("data-pc-section","icon")}}function cre(t,n){if(t&1&&(yt(0),ce(1,ure,1,4,"span",6),ie(2,"span",7),st(3),oe(),bt()),t&2){let e=j().$implicit,r=j();P(),O("ngIf",e.icon),P(),Ne("data-pc-section","label"),P(),ir(r.getOptionLabel(e))}}function dre(t,n){t&1&&St(0)}function pre(t,n){if(t&1&&ce(0,dre,1,0,"ng-container",9),t&2){let e=j(),r=e.$implicit,i=e.index,o=j();O("ngTemplateOutlet",o.selectButtonTemplate)("ngTemplateOutletContext",si(2,lre,r,i))}}function hre(t,n){if(t&1){let e=jt();ie(0,"div",4),et("click",function(i){let o=Ee(e),a=o.$implicit,s=o.index,l=j();return De(l.onOptionSelect(i,a,s))})("keydown",function(i){let o=Ee(e),a=o.$implicit,s=o.index,l=j();return De(l.onKeyDown(i,a,s))})("focus",function(i){let o=Ee(e).index,a=j();return De(a.onFocus(i,o))})("blur",function(){Ee(e);let i=j();return De(i.onBlur())}),ce(1,cre,4,3,"ng-container",5)(2,pre,1,5,"ng-template",null,1,ya),oe()}if(t&2){let e=n.$implicit,r=n.index,i=yi(3),o=j();ft(e.styleClass),O("role",o.multiple?"checkbox":"radio")("ngClass",vo(14,sre,o.isSelected(e),o.disabled||o.isOptionDisabled(e),e.icon&&!o.getOptionLabel(e)))("autofocus",o.autofocus),Ne("tabindex",r===o.focusedIndex&&!o.disabled?"0":"-1")("aria-label",e.label)("aria-checked",o.isSelected(e))("aria-disabled",o.optionDisabled)("title",e.title)("aria-labelledby",o.getOptionLabel(e))("data-pc-section","button"),P(),O("ngIf",!o.itemTemplate)("ngIfElse",i)}}var fre={provide:yo,useExisting:ii(()=>mre),multi:!0},mre=(()=>{class t{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;autofocus;onOptionClick=new it;onChange=new it;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(e){this.cd=e}getOptionLabel(e){return this.optionLabel?rt.resolveFieldData(e,this.optionLabel):e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?rt.resolveFieldData(e,this.optionValue):this.optionLabel||e.value===void 0?e:e.value}isOptionDisabled(e){return this.optionDisabled?rt.resolveFieldData(e,this.optionDisabled):e.disabled!==void 0?e.disabled:!1}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionSelect(e,r,i){if(this.disabled||this.isOptionDisabled(r))return;let o=this.isSelected(r);if(o&&this.unselectable)return;let a=this.getOptionValue(r),s;if(this.multiple)o?s=this.value.filter(l=>!rt.equals(l,a,this.equalityKey)):s=this.value?[...this.value,a]:[a];else{if(o&&!this.allowEmpty)return;s=o?null:a}this.focusedIndex=i,this.value=s,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.onOptionClick.emit({originalEvent:e,option:r,index:i})}onKeyDown(e,r,i){switch(e.code){case"Space":{this.onOptionSelect(e,r,i),e.preventDefault();break}case"ArrowDown":case"ArrowRight":{this.changeTabIndexes(e,"next"),e.preventDefault();break}case"ArrowUp":case"ArrowLeft":{this.changeTabIndexes(e,"prev"),e.preventDefault();break}default:break}}changeTabIndexes(e,r){let i,o;for(let a=0;a<=this.container.nativeElement.children.length-1;a++)this.container.nativeElement.children[a].getAttribute("tabindex")==="0"&&(i={elem:this.container.nativeElement.children[a],index:a});r==="prev"?i.index===0?o=this.container.nativeElement.children.length-1:o=i.index-1:i.index===this.container.nativeElement.children.length-1?o=0:o=i.index+1,this.focusedIndex=o,this.container.nativeElement.children[o].focus()}onFocus(e,r){this.focusedIndex=r}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(r=>!rt.equals(r,this.getOptionValue(e),this.dataKey))}isSelected(e){let r=!1,i=this.getOptionValue(e);if(this.multiple){if(this.value&&Array.isArray(this.value)){for(let o of this.value)if(rt.equals(o,i,this.dataKey)){r=!0;break}}}else r=rt.equals(this.getOptionValue(e),this.value,this.equalityKey);return r}static \u0275fac=function(r){return new(r||t)(Oe(br))};static \u0275cmp=ct({type:t,selectors:[["p-selectButton"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,5),r&2){let a;sn(a=ln())&&(i.itemTemplate=a.first)}},viewQuery:function(r,i){if(r&1&&Zn(are,5),r&2){let o;sn(o=ln())&&(i.container=o.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:[Se.HasDecoratorInputTransform,"unselectable","unselectable",We],tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],multiple:[Se.HasDecoratorInputTransform,"multiple","multiple",We],allowEmpty:[Se.HasDecoratorInputTransform,"allowEmpty","allowEmpty",We],style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:[Se.HasDecoratorInputTransform,"disabled","disabled",We],dataKey:"dataKey",autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We]},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[ai([fre]),Er],decls:3,vars:8,consts:[["container",""],["customcontent",""],["role","group",3,"ngClass","ngStyle"],["pRipple","","class","p-button p-component","pAutoFocus","",3,"role","class","ngClass","autofocus","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","","pAutoFocus","",1,"p-button","p-component",3,"click","keydown","focus","blur","role","ngClass","autofocus"],[4,"ngIf","ngIfElse"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&(ie(0,"div",2,0),ce(2,hre,4,18,"div",3),oe()),r&2&&(ft(i.styleClass),O("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),Ne("aria-labelledby",i.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),P(2),O("ngForOf",i.options))},dependencies:[Xr,ba,Or,li,bi,Bl,bs],styles:[`@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-button-group .p-button{margin:0}.p-button-group .p-button:focus,.p-button-group p-button:focus .p-button,.p-buttonset .p-button:focus,.p-buttonset p-button:focus .p-button{position:relative;z-index:1}.p-button-group .p-button:not(:last-child),.p-button-group .p-button:not(:last-child):hover,.p-button-group p-button:not(:last-child) .p-button,.p-button-group p-button:not(:last-child) .p-button:hover,.p-buttonset .p-button:not(:last-child),.p-buttonset .p-button:not(:last-child):hover,.p-buttonset p-button:not(:last-child) .p-button,.p-buttonset p-button:not(:last-child) .p-button:hover{border-right:0 none}.p-button-group .p-button:not(:first-of-type):not(:last-of-type),.p-button-group p-button:not(:first-of-type):not(:last-of-type) .p-button,.p-buttonset .p-button:not(:first-of-type):not(:last-of-type),.p-buttonset p-button:not(:first-of-type):not(:last-of-type) .p-button{border-radius:0}.p-button-group .p-button:first-of-type:not(:only-of-type),.p-button-group p-button:first-of-type:not(:only-of-type) .p-button,.p-buttonset .p-button:first-of-type:not(:only-of-type),.p-buttonset p-button:first-of-type:not(:only-of-type) .p-button{border-top-right-radius:0;border-bottom-right-radius:0}.p-button-group .p-button:last-of-type:not(:only-of-type),.p-button-group p-button:last-of-type:not(:only-of-type) .p-button,.p-buttonset .p-button:last-of-type:not(:only-of-type),.p-buttonset p-button:last-of-type:not(:only-of-type) .p-button{border-top-left-radius:0;border-bottom-left-radius:0}p-button[iconpos=right] spinnericon{order:1}}
`],encapsulation:2,changeDetection:0})}return t})(),bO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,$c,kr,Ll,kr]})}return t})();var gre=(t,n,e)=>({"p-checkbox p-component":!0,"p-checkbox-disabled":t,"p-checkbox-focused":n,"p-variant-filled":e}),vre=(t,n,e)=>({"p-highlight":t,"p-disabled":n,"p-focus":e}),yre=(t,n,e)=>({"p-checkbox-label-active":t,"p-disabled":n,"p-checkbox-label-focus":e});function bre(t,n){if(t&1&&Ve(0,"span",8),t&2){let e=j(2);O("ngClass",e.checkboxTrueIcon),Ne("data-pc-section","checkIcon")}}function _re(t,n){t&1&&Ve(0,"CheckIcon",11),t&2&&(O("styleClass","p-checkbox-icon"),Ne("data-pc-section","checkIcon"))}function wre(t,n){}function xre(t,n){t&1&&ce(0,wre,0,0,"ng-template")}function Cre(t,n){if(t&1&&(ie(0,"span",12),ce(1,xre,1,0,null,13),oe()),t&2){let e=j(3);Ne("data-pc-section","checkIcon"),P(),O("ngTemplateOutlet",e.checkIconTemplate)}}function Ire(t,n){if(t&1&&(yt(0),ce(1,_re,1,2,"CheckIcon",9)(2,Cre,2,2,"span",10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.checkIconTemplate),P(),O("ngIf",e.checkIconTemplate)}}function Sre(t,n){if(t&1&&(yt(0),ce(1,bre,1,2,"span",7)(2,Ire,3,2,"ng-container",5),bt()),t&2){let e=j();P(),O("ngIf",e.checkboxTrueIcon),P(),O("ngIf",!e.checkboxTrueIcon)}}function Ere(t,n){if(t&1&&Ve(0,"span",8),t&2){let e=j(2);O("ngClass",e.checkboxFalseIcon),Ne("data-pc-section","uncheckIcon")}}function Dre(t,n){t&1&&Ve(0,"TimesIcon",11),t&2&&(O("styleClass","p-checkbox-icon"),Ne("data-pc-section","uncheckIcon"))}function Tre(t,n){}function Are(t,n){t&1&&ce(0,Tre,0,0,"ng-template")}function kre(t,n){if(t&1&&(ie(0,"span",12),ce(1,Are,1,0,null,13),oe()),t&2){let e=j(3);Ne("data-pc-section","uncheckIcon"),P(),O("ngTemplateOutlet",e.uncheckIconTemplate)}}function Mre(t,n){if(t&1&&(yt(0),ce(1,Dre,1,2,"TimesIcon",9)(2,kre,2,2,"span",10),bt()),t&2){let e=j(2);P(),O("ngIf",!e.uncheckIconTemplate),P(),O("ngIf",e.uncheckIconTemplate)}}function Rre(t,n){if(t&1&&(yt(0),ce(1,Ere,1,2,"span",7)(2,Mre,3,2,"ng-container",5),bt()),t&2){let e=j();P(),O("ngIf",e.checkboxFalseIcon),P(),O("ngIf",!e.checkboxFalseIcon)}}function Nre(t,n){if(t&1){let e=jt();ie(0,"label",14),et("click",function(i){Ee(e);let o=j(),a=yi(3);return De(o.onClick(i,a))}),st(1),oe()}if(t&2){let e=j();O("ngClass",vo(3,yre,e.value!=null,e.disabled,e.focused)),Ne("for",e.inputId),P(),ir(e.label)}}var Fre={provide:yo,useExisting:ii(()=>Ore),multi:!0},Ore=(()=>{class t{cd;config;constructor(e,r){this.cd=e,this.config=r}disabled;name;ariaLabel;ariaLabelledBy;variant="outlined";tabindex;inputId;style;styleClass;label;readonly;checkboxTrueIcon;checkboxFalseIcon;autofocus;onChange=new it;templates;checkIconTemplate;uncheckIconTemplate;focused;value;onModelChange=()=>{};onModelTouched=()=>{};onClick(e,r){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,r.focus())}onKeyDown(e){e.key==="Enter"&&(this.toggle(e),e.preventDefault())}toggle(e){this.value==null||this.value==null?this.value=!0:this.value==!0?this.value=!1:this.value==!1&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"checkicon":this.checkIconTemplate=e.template;break;case"uncheckicon":this.uncheckIconTemplate=e.template;break}})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}static \u0275fac=function(r){return new(r||t)(Oe(br),Oe(Mi))};static \u0275cmp=ct({type:t,selectors:[["p-triStateCheckbox"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},hostAttrs:[1,"p-element"],inputs:{disabled:[Se.HasDecoratorInputTransform,"disabled","disabled",We],name:"name",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",variant:"variant",tabindex:[Se.HasDecoratorInputTransform,"tabindex","tabindex",pn],inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:[Se.HasDecoratorInputTransform,"readonly","readonly",We],checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon",autofocus:[Se.HasDecoratorInputTransform,"autofocus","autofocus",We]},outputs:{onChange:"onChange"},features:[ai([Fre]),Er],decls:8,vars:28,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox","inputmode","none","pAutoFocus","",3,"keydown","focus","blur","name","readonly","disabled","autofocus"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[1,"p-checkbox-label",3,"click","ngClass"]],template:function(r,i){if(r&1){let o=jt();ie(0,"div",1),et("click",function(s){Ee(o);let l=yi(3);return De(i.onClick(s,l))}),ie(1,"div",2)(2,"input",3,0),et("keydown",function(s){return Ee(o),De(i.onKeyDown(s))})("focus",function(){return Ee(o),De(i.onFocus())})("blur",function(){return Ee(o),De(i.onBlur())}),oe()(),ie(4,"div",4),ce(5,Sre,3,2,"ng-container",5)(6,Rre,3,2,"ng-container",5),oe()(),ce(7,Nre,2,7,"label",6)}r&2&&(ft(i.styleClass),O("ngStyle",i.style)("ngClass",vo(20,gre,i.disabled,i.focused,i.variant==="filled"||i.config.inputStyle()==="filled")),Ne("data-pc-name","tristatecheckbox")("data-pc-section","root"),P(2),O("name",i.name)("readonly",i.readonly)("disabled",i.disabled)("autofocus",i.autofocus),Ne("id",i.inputId)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy)("aria-label",i.ariaLabel)("data-pc-section","hiddenInput"),P(2),O("ngClass",vo(24,vre,i.value!=null,i.disabled,i.focused)),Ne("aria-checked",i.value===!0),P(),O("ngIf",i.value===!0),P(),O("ngIf",i.value===!1),P(),O("ngIf",i.label))},dependencies:()=>[Xr,Or,li,bi,bs,Yc,_s],encapsulation:2,changeDetection:0})}return t})(),_O=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,kr,Ll,Yc,_s,kr]})}return t})();var Pre=["container"],Lre=["resizeHelper"],Bre=["reorderIndicatorUp"],Vre=["reorderIndicatorDown"],jre=["wrapper"],Ure=["table"],Hre=["thead"],zre=["tfoot"],Wre=["scroller"],qre=(t,n,e)=>({"p-datatable p-component":!0,"p-datatable-hoverable-rows":t,"p-datatable-scrollable":n,"p-datatable-flex-scrollable":e}),Gre=t=>({maxHeight:t}),wO=t=>({height:t}),xO=(t,n)=>({$implicit:t,options:n}),$re=t=>({columns:t}),Kre=(t,n,e)=>({"p-datatable-table":!0,"p-datatable-scrollable-table":t,"p-datatable-resizable-table":n,"p-datatable-resizable-table-fit":e}),WE=t=>({$implicit:t}),qE=()=>({display:"none"});function Yre(t,n){if(t&1&&Ve(0,"i"),t&2){let e=j(2);ft("p-datatable-loading-icon "+e.loadingIcon)}}function Xre(t,n){t&1&&Ve(0,"SpinnerIcon",25),t&2&&O("spin",!0)("styleClass","p-datatable-loading-icon")}function Qre(t,n){}function Zre(t,n){t&1&&ce(0,Qre,0,0,"ng-template")}function Jre(t,n){if(t&1&&(ie(0,"span",26),ce(1,Zre,1,0,null,27),oe()),t&2){let e=j(3);P(),O("ngTemplateOutlet",e.loadingIconTemplate)}}function eie(t,n){if(t&1&&(yt(0),ce(1,Xre,1,2,"SpinnerIcon",23)(2,Jre,2,1,"span",24),bt()),t&2){let e=j(2);P(),O("ngIf",!e.loadingIconTemplate),P(),O("ngIf",e.loadingIconTemplate)}}function tie(t,n){if(t&1&&(ie(0,"div",21),ce(1,Yre,1,2,"i",22)(2,eie,3,2,"ng-container",16),oe()),t&2){let e=j();P(),O("ngIf",e.loadingIcon),P(),O("ngIf",!e.loadingIcon)}}function nie(t,n){t&1&&St(0)}function rie(t,n){if(t&1&&(ie(0,"div",28),ce(1,nie,1,0,"ng-container",27),oe()),t&2){let e=j();P(),O("ngTemplateOutlet",e.captionTemplate)}}function iie(t,n){t&1&&St(0)}function oie(t,n){if(t&1&&ce(0,iie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorDropdownIconTemplate)}}function aie(t,n){t&1&&ce(0,oie,1,1,"ng-template",30)}function sie(t,n){t&1&&St(0)}function lie(t,n){if(t&1&&ce(0,sie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function uie(t,n){t&1&&ce(0,lie,1,1,"ng-template",31)}function cie(t,n){t&1&&St(0)}function die(t,n){if(t&1&&ce(0,cie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function pie(t,n){t&1&&ce(0,die,1,1,"ng-template",32)}function hie(t,n){t&1&&St(0)}function fie(t,n){if(t&1&&ce(0,hie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function mie(t,n){t&1&&ce(0,fie,1,1,"ng-template",33)}function gie(t,n){t&1&&St(0)}function vie(t,n){if(t&1&&ce(0,gie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function yie(t,n){t&1&&ce(0,vie,1,1,"ng-template",34)}function bie(t,n){if(t&1){let e=jt();ie(0,"p-paginator",29),et("onPageChange",function(i){Ee(e);let o=j();return De(o.onPageChange(i))}),ce(1,aie,1,0,null,16)(2,uie,1,0,null,16)(3,pie,1,0,null,16)(4,mie,1,0,null,16)(5,yie,1,0,null,16),oe()}if(t&2){let e=j();O("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)("styleClass",e.getPaginatorStyleClasses("p-paginator-top"))("locale",e.paginatorLocale),P(),O("ngIf",e.paginatorDropdownIconTemplate),P(),O("ngIf",e.paginatorFirstPageLinkIconTemplate),P(),O("ngIf",e.paginatorPreviousPageLinkIconTemplate),P(),O("ngIf",e.paginatorLastPageLinkIconTemplate),P(),O("ngIf",e.paginatorNextPageLinkIconTemplate)}}function _ie(t,n){t&1&&St(0)}function wie(t,n){if(t&1&&ce(0,_ie,1,0,"ng-container",37),t&2){let e=n.$implicit,r=n.options;j(2);let i=yi(10);O("ngTemplateOutlet",i)("ngTemplateOutletContext",si(2,xO,e,r))}}function xie(t,n){if(t&1){let e=jt();ie(0,"p-scroller",35,3),et("onLazyLoad",function(i){Ee(e);let o=j();return De(o.onLazyItemLoad(i))}),ce(2,wie,1,5,"ng-template",36),oe()}if(t&2){let e=j();Bb(Gt(15,wO,e.scrollHeight!=="flex"?e.scrollHeight:void 0)),O("items",e.processedData)("columns",e.columns)("scrollHeight",e.scrollHeight!=="flex"?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("step",e.rows)("delay",e.lazy?e.virtualScrollDelay:0)("inline",!0)("autoSize",!0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function Cie(t,n){t&1&&St(0)}function Iie(t,n){if(t&1&&(yt(0),ce(1,Cie,1,0,"ng-container",37),bt()),t&2){let e=j(),r=yi(10);P(),O("ngTemplateOutlet",r)("ngTemplateOutletContext",si(4,xO,e.processedData,Gt(2,$re,e.columns)))}}function Sie(t,n){t&1&&St(0)}function Eie(t,n){t&1&&St(0)}function Die(t,n){if(t&1&&Ve(0,"tbody",44),t&2){let e=j().options,r=j();O("value",r.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",r.frozenBodyTemplate)("frozen",!0)}}function Tie(t,n){if(t&1&&Ve(0,"tbody",45),t&2){let e=j().options;O("ngStyle",Gt(1,wO,"calc("+e.spacerStyle.height+" - "+e.rows.length*e.itemSize+"px)"))}}function Aie(t,n){t&1&&St(0)}function kie(t,n){if(t&1&&(ie(0,"tfoot",46,6),ce(2,Aie,1,0,"ng-container",37),oe()),t&2){let e=j().options,r=j();P(2),O("ngTemplateOutlet",r.footerGroupedTemplate||r.footerTemplate)("ngTemplateOutletContext",Gt(2,WE,e.columns))}}function Mie(t,n){if(t&1&&(ie(0,"table",38,4),ce(2,Sie,1,0,"ng-container",37),ie(3,"thead",39,5),ce(5,Eie,1,0,"ng-container",37),oe(),ce(6,Die,1,5,"tbody",40),Ve(7,"tbody",41),ce(8,Tie,1,3,"tbody",42)(9,kie,3,4,"tfoot",43),oe()),t&2){let e=n.options,r=j();ft(r.tableStyleClass),O("ngClass",vo(18,Kre,r.scrollable,r.resizableColumns,r.resizableColumns&&r.columnResizeMode==="fit"))("ngStyle",r.tableStyle),Ne("id",r.id+"-table"),P(2),O("ngTemplateOutlet",r.colGroupTemplate)("ngTemplateOutletContext",Gt(22,WE,e.columns)),P(3),O("ngTemplateOutlet",r.headerGroupedTemplate||r.headerTemplate)("ngTemplateOutletContext",Gt(24,WE,e.columns)),P(),O("ngIf",r.frozenValue||r.frozenBodyTemplate),P(),O("ngClass",e.contentStyleClass)("ngStyle",e.contentStyle)("value",r.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",r.bodyTemplate)("scrollerOptions",e),P(),O("ngIf",e.spacerStyle),P(),O("ngIf",r.footerGroupedTemplate||r.footerTemplate)}}function Rie(t,n){t&1&&St(0)}function Nie(t,n){if(t&1&&ce(0,Rie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorDropdownIconTemplate)}}function Fie(t,n){t&1&&ce(0,Nie,1,1,"ng-template",30)}function Oie(t,n){t&1&&St(0)}function Pie(t,n){if(t&1&&ce(0,Oie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function Lie(t,n){t&1&&ce(0,Pie,1,1,"ng-template",31)}function Bie(t,n){t&1&&St(0)}function Vie(t,n){if(t&1&&ce(0,Bie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function jie(t,n){t&1&&ce(0,Vie,1,1,"ng-template",32)}function Uie(t,n){t&1&&St(0)}function Hie(t,n){if(t&1&&ce(0,Uie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function zie(t,n){t&1&&ce(0,Hie,1,1,"ng-template",33)}function Wie(t,n){t&1&&St(0)}function qie(t,n){if(t&1&&ce(0,Wie,1,0,"ng-container",27),t&2){let e=j(3);O("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function Gie(t,n){t&1&&ce(0,qie,1,1,"ng-template",34)}function $ie(t,n){if(t&1){let e=jt();ie(0,"p-paginator",29),et("onPageChange",function(i){Ee(e);let o=j();return De(o.onPageChange(i))}),ce(1,Fie,1,0,null,16)(2,Lie,1,0,null,16)(3,jie,1,0,null,16)(4,zie,1,0,null,16)(5,Gie,1,0,null,16),oe()}if(t&2){let e=j();O("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)("styleClass",e.getPaginatorStyleClasses("p-paginator-bottom"))("locale",e.paginatorLocale),P(),O("ngIf",e.paginatorDropdownIconTemplate),P(),O("ngIf",e.paginatorFirstPageLinkIconTemplate),P(),O("ngIf",e.paginatorPreviousPageLinkIconTemplate),P(),O("ngIf",e.paginatorLastPageLinkIconTemplate),P(),O("ngIf",e.paginatorNextPageLinkIconTemplate)}}function Kie(t,n){t&1&&St(0)}function Yie(t,n){if(t&1&&(ie(0,"div",47),ce(1,Kie,1,0,"ng-container",27),oe()),t&2){let e=j();P(),O("ngTemplateOutlet",e.summaryTemplate)}}function Xie(t,n){t&1&&Ve(0,"div",48,7),t&2&&O("ngStyle",Jo(1,qE))}function Qie(t,n){t&1&&Ve(0,"ArrowDownIcon")}function Zie(t,n){}function Jie(t,n){t&1&&ce(0,Zie,0,0,"ng-template")}function eoe(t,n){if(t&1&&(ie(0,"span",49,8),ce(2,Qie,1,0,"ArrowDownIcon",16)(3,Jie,1,0,null,27),oe()),t&2){let e=j();O("ngStyle",Jo(3,qE)),P(2),O("ngIf",!e.reorderIndicatorUpIconTemplate),P(),O("ngTemplateOutlet",e.reorderIndicatorUpIconTemplate)}}function toe(t,n){t&1&&Ve(0,"ArrowUpIcon")}function noe(t,n){}function roe(t,n){t&1&&ce(0,noe,0,0,"ng-template")}function ioe(t,n){if(t&1&&(ie(0,"span",50,9),ce(2,toe,1,0,"ArrowUpIcon",16)(3,roe,1,0,null,27),oe()),t&2){let e=j();O("ngStyle",Jo(3,qE)),P(2),O("ngIf",!e.reorderIndicatorDownIconTemplate),P(),O("ngTemplateOutlet",e.reorderIndicatorDownIconTemplate)}}var ooe=["pTableBody",""],GE=(t,n,e,r,i)=>({$implicit:t,rowIndex:n,columns:e,editing:r,frozen:i}),aoe=(t,n,e,r,i,o,a)=>({$implicit:t,rowIndex:n,columns:e,editing:r,frozen:i,rowgroup:o,rowspan:a}),w_=(t,n,e,r,i,o)=>({$implicit:t,rowIndex:n,columns:e,expanded:r,editing:i,frozen:o}),CO=(t,n,e,r)=>({$implicit:t,rowIndex:n,columns:e,frozen:r}),IO=(t,n)=>({$implicit:t,frozen:n});function soe(t,n){t&1&&St(0)}function loe(t,n){if(t&1&&(yt(0,3),ce(1,soe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",ff(2,GE,r,o.getRowIndex(i),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function uoe(t,n){t&1&&St(0)}function coe(t,n){if(t&1&&(yt(0),ce(1,uoe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",r?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",ff(2,GE,r,o.getRowIndex(i),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function doe(t,n){t&1&&St(0)}function poe(t,n){if(t&1&&(yt(0),ce(1,doe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",r?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",hN(2,aoe,r,o.getRowIndex(i),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen,o.shouldRenderRowspan(o.value,r,i),o.calculateRowGroupSize(o.value,r,i)))}}function hoe(t,n){t&1&&St(0)}function foe(t,n){if(t&1&&(yt(0,3),ce(1,hoe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",ff(2,GE,r,o.getRowIndex(i),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function moe(t,n){if(t&1&&ce(0,loe,2,8,"ng-container",2)(1,coe,2,8,"ng-container",0)(2,poe,2,10,"ng-container",0)(3,foe,2,8,"ng-container",2),t&2){let e=n.$implicit,r=n.index,i=j(2);O("ngIf",i.dt.groupHeaderTemplate&&!i.dt.virtualScroll&&i.dt.rowGroupMode==="subheader"&&i.shouldRenderRowGroupHeader(i.value,e,i.getRowIndex(r))),P(),O("ngIf",i.dt.rowGroupMode!=="rowspan"),P(),O("ngIf",i.dt.rowGroupMode==="rowspan"),P(),O("ngIf",i.dt.groupFooterTemplate&&!i.dt.virtualScroll&&i.dt.rowGroupMode==="subheader"&&i.shouldRenderRowGroupFooter(i.value,e,r))}}function goe(t,n){if(t&1&&(yt(0),ce(1,moe,4,4,"ng-template",1),bt()),t&2){let e=j();P(),O("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function voe(t,n){t&1&&St(0)}function yoe(t,n){if(t&1&&(yt(0),ce(1,voe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.template)("ngTemplateOutletContext",ap(2,w_,r,o.getRowIndex(i),o.columns,o.dt.isRowExpanded(r),o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function boe(t,n){t&1&&St(0)}function _oe(t,n){if(t&1&&(yt(0,3),ce(1,boe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",ap(2,w_,r,o.getRowIndex(i),o.columns,o.dt.isRowExpanded(r),o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function woe(t,n){t&1&&St(0)}function xoe(t,n){t&1&&St(0)}function Coe(t,n){if(t&1&&(yt(0,3),ce(1,xoe,1,0,"ng-container",4),bt()),t&2){let e=j(2),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",ap(2,w_,r,o.getRowIndex(i),o.columns,o.dt.isRowExpanded(r),o.dt.editMode==="row"&&o.dt.isRowEditing(r),o.frozen))}}function Ioe(t,n){if(t&1&&(yt(0),ce(1,woe,1,0,"ng-container",4)(2,Coe,2,9,"ng-container",2),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.expandedRowTemplate)("ngTemplateOutletContext",wS(3,CO,r,o.getRowIndex(i),o.columns,o.frozen)),P(),O("ngIf",o.dt.groupFooterTemplate&&o.dt.rowGroupMode==="subheader"&&o.shouldRenderRowGroupFooter(o.value,r,o.getRowIndex(i)))}}function Soe(t,n){if(t&1&&ce(0,yoe,2,9,"ng-container",0)(1,_oe,2,9,"ng-container",2)(2,Ioe,3,8,"ng-container",0),t&2){let e=n.$implicit,r=n.index,i=j(2);O("ngIf",!i.dt.groupHeaderTemplate),P(),O("ngIf",i.dt.groupHeaderTemplate&&i.dt.rowGroupMode==="subheader"&&i.shouldRenderRowGroupHeader(i.value,e,i.getRowIndex(r))),P(),O("ngIf",i.dt.isRowExpanded(e))}}function Eoe(t,n){if(t&1&&(yt(0),ce(1,Soe,3,3,"ng-template",1),bt()),t&2){let e=j();P(),O("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Doe(t,n){t&1&&St(0)}function Toe(t,n){t&1&&St(0)}function Aoe(t,n){if(t&1&&(yt(0),ce(1,Toe,1,0,"ng-container",4),bt()),t&2){let e=j(),r=e.$implicit,i=e.index,o=j(2);P(),O("ngTemplateOutlet",o.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",wS(2,CO,r,o.getRowIndex(i),o.columns,o.frozen))}}function koe(t,n){if(t&1&&ce(0,Doe,1,0,"ng-container",4)(1,Aoe,2,7,"ng-container",0),t&2){let e=n.$implicit,r=n.index,i=j(2);O("ngTemplateOutlet",i.template)("ngTemplateOutletContext",ap(3,w_,e,i.getRowIndex(r),i.columns,i.dt.isRowExpanded(e),i.dt.editMode==="row"&&i.dt.isRowEditing(e),i.frozen)),P(),O("ngIf",i.dt.isRowExpanded(e))}}function Moe(t,n){if(t&1&&(yt(0),ce(1,koe,2,10,"ng-template",1),bt()),t&2){let e=j();P(),O("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Roe(t,n){t&1&&St(0)}function Noe(t,n){if(t&1&&(yt(0),ce(1,Roe,1,0,"ng-container",4),bt()),t&2){let e=j();P(),O("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",si(2,IO,e.columns,e.frozen))}}function Foe(t,n){t&1&&St(0)}function Ooe(t,n){if(t&1&&(yt(0),ce(1,Foe,1,0,"ng-container",4),bt()),t&2){let e=j();P(),O("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",si(2,IO,e.columns,e.frozen))}}var __=(()=>{class t{sortSource=new Fr;selectionSource=new Fr;contextMenuSource=new Fr;valueSource=new Fr;totalRecordsSource=new Fr;columnsSource=new Fr;isHeaderCheckboxSelection=new Fr;sortSource$=this.sortSource.asObservable();isHeaderCheckboxSelection$=this.isHeaderCheckboxSelection.asObservable();selectionSource$=this.selectionSource.asObservable();contextMenuSource$=this.contextMenuSource.asObservable();valueSource$=this.valueSource.asObservable();totalRecordsSource$=this.totalRecordsSource.asObservable();columnsSource$=this.columnsSource.asObservable();onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}onHeaderCheckboxSelection(e){this.isHeaderCheckboxSelection.next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=xt({token:t,factory:t.\u0275fac})}return t})(),x_=(()=>{class t{document;platformId;renderer;el;zone;tableService;cd;filterService;overlayService;config;domSanitizer;frozenColumns;frozenValue;style;styleClass;tableStyle;tableStyleClass;paginator;pageLinks=5;rowsPerPageOptions;alwaysShowPaginator=!0;paginatorPosition="bottom";paginatorStyleClass;paginatorDropdownAppendTo;paginatorDropdownScrollHeight="200px";currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showJumpToPageDropdown;showJumpToPageInput;showFirstLastIcon=!0;showPageLinks=!0;defaultSortOrder=1;sortMode="single";resetPageOnSort=!0;selectionMode;selectionPageOnly;contextMenuSelection;contextMenuSelectionChange=new it;contextMenuSelectionMode="separate";dataKey;metaKeySelection=!1;rowSelectable;rowTrackBy=(e,r)=>r;lazy=!1;lazyLoadOnInit=!0;compareSelectionBy="deepEquals";csvSeparator=",";exportFilename="download";filters={};globalFilterFields;filterDelay=300;filterLocale;expandedRowKeys={};editingRowKeys={};rowExpandMode="multiple";scrollable;scrollDirection="vertical";rowGroupMode;scrollHeight;virtualScroll;virtualScrollItemSize;virtualScrollOptions;virtualScrollDelay=250;frozenWidth;get responsive(){return this._responsive}set responsive(e){this._responsive=e,console.warn("responsive property is deprecated as table is always responsive with scrollable behavior.")}_responsive;contextMenu;resizableColumns;columnResizeMode="fit";reorderableColumns;loading;loadingIcon;showLoader=!0;rowHover;customSort;showInitialSortBadge=!0;autoLayout;exportFunction;exportHeader;stateKey;stateStorage="session";editMode="cell";groupRowsBy;groupRowsByOrder=1;responsiveLayout="scroll";breakpoint="960px";paginatorLocale;get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}selectAllChange=new it;selectionChange=new it;onRowSelect=new it;onRowUnselect=new it;onPage=new it;onSort=new it;onFilter=new it;onLazyLoad=new it;onRowExpand=new it;onRowCollapse=new it;onContextMenuSelect=new it;onColResize=new it;onColReorder=new it;onRowReorder=new it;onEditInit=new it;onEditComplete=new it;onEditCancel=new it;onHeaderCheckboxToggle=new it;sortFunction=new it;firstChange=new it;rowsChange=new it;onStateSave=new it;onStateRestore=new it;containerViewChild;resizeHelperViewChild;reorderIndicatorUpViewChild;reorderIndicatorDownViewChild;wrapperViewChild;tableViewChild;tableHeaderViewChild;tableFooterViewChild;scroller;templates;get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated.")}_virtualRowHeight=28;_value=[];_columns;_totalRecords=0;_first=0;_rows;filteredValue;headerTemplate;headerGroupedTemplate;bodyTemplate;loadingBodyTemplate;captionTemplate;footerTemplate;footerGroupedTemplate;summaryTemplate;colGroupTemplate;expandedRowTemplate;groupHeaderTemplate;groupFooterTemplate;frozenExpandedRowTemplate;frozenHeaderTemplate;frozenBodyTemplate;frozenFooterTemplate;frozenColGroupTemplate;emptyMessageTemplate;paginatorLeftTemplate;paginatorRightTemplate;paginatorDropdownItemTemplate;loadingIconTemplate;reorderIndicatorUpIconTemplate;reorderIndicatorDownIconTemplate;sortIconTemplate;checkboxIconTemplate;headerCheckboxIconTemplate;paginatorDropdownIconTemplate;paginatorFirstPageLinkIconTemplate;paginatorLastPageLinkIconTemplate;paginatorPreviousPageLinkIconTemplate;paginatorNextPageLinkIconTemplate;selectionKeys={};lastResizerHelperX;reorderIconWidth;reorderIconHeight;draggedColumn;draggedRowIndex;droppedRowIndex;rowDragging;dropPosition;editingCell;editingCellData;editingCellField;editingCellRowIndex;selfClick;documentEditListener;_multiSortMeta;_sortField;_sortOrder=1;preventSelectionSetterPropagation;_selection;_selectAll=null;anchorRowIndex;rangeRowIndex;filterTimeout;initialized;rowTouched;restoringSort;restoringFilter;stateRestored;columnOrderStateRestored;columnWidthsState;tableWidthState;overlaySubscription;resizeColumnElement;columnResizing=!1;rowGroupHeaderStyleObject={};id=mr();styleElement;responsiveStyleElement;window;constructor(e,r,i,o,a,s,l,u,c,d,p){this.document=e,this.platformId=r,this.renderer=i,this.el=o,this.zone=a,this.tableService=s,this.cd=l,this.filterService=u,this.overlayService=c,this.config=d,this.domSanitizer=p,this.window=this.document.defaultView}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),this.responsiveLayout==="stack"&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownicon":this.paginatorDropdownIconTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=e.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=e.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=e.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=e.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=e.template;break;case"sorticon":this.sortIconTemplate=e.template;break;case"checkboxicon":this.checkboxIconTemplate=e.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break}})}ngAfterViewInit(){Do(this.platformId)&&this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&Do(this.platformId)&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,this.sortMode=="single"&&(this.sortField||this.groupRowsBy)?this.sortSingle():this.sortMode=="multiple"&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this.isStateful()||(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue)),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&(this.restoreColumnOrder(),this.tableService.onColumnsChange(this._columns))),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,this.sortMode==="multiple"&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get processedData(){return this.filteredValue||this.value||[]}_initialColWidths;dataToRender(e){let r=e||this.processedData;if(r&&this.paginator){let i=this.lazy?0:this.first;return r.slice(i,i+this.rows)}return r}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(rt.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(rt.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let r=e.originalEvent;if(this.sortMode==="single"&&(this._sortOrder=this.sortField===e.field?this.sortOrder*-1:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),this.sortMode==="multiple"){let i=r.metaKey||r.ctrlKey,o=this.getSortMeta(e.field);o?i?o.order=o.order*-1:(this._multiSortMeta=[{field:e.field,order:o.order*-1}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!i||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,r=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField){this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],this.sortMultiple();return}if(e&&r){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:r}):(this.value.sort((o,a)=>{let s=rt.resolveFieldData(o,e),l=rt.resolveFieldData(a,e),u=null;return s==null&&l!=null?u=-1:s!=null&&l==null?u=1:s==null&&l==null?u=0:typeof s=="string"&&typeof l=="string"?u=s.localeCompare(l):u=s<l?-1:s>l?1:0,r*u}),this._value=[...this.value]),this.hasFilter()&&this._filter());let i={field:e,order:r};this.onSort.emit(i),this.tableService.onSort(i)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,r)=>this.multisortField(e,r,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,r,i,o){let a=rt.resolveFieldData(e,i[o].field),s=rt.resolveFieldData(r,i[o].field);return rt.compare(a,s,this.filterLocale)===0?i.length-1>o?this.multisortField(e,r,i,o+1):0:this.compareValuesOnSort(a,s,i[o].order)}compareValuesOnSort(e,r,i){return rt.sort(e,r,i,this.filterLocale,this.sortOrder)}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length){for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field===e)return this.multiSortMeta[r]}return null}isSorted(e){if(this.sortMode==="single")return this.sortField&&this.sortField===e;if(this.sortMode==="multiple"){let r=!1;if(this.multiSortMeta){for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field==e){r=!0;break}}return r}}handleRowClick(e){let r=e.originalEvent.target,i=r.nodeName,o=r.parentElement&&r.parentElement.nodeName;if(!(i=="INPUT"||i=="BUTTON"||i=="A"||o=="INPUT"||o=="BUTTON"||o=="A"||ve.hasClass(e.originalEvent.target,"p-clickable"))){if(this.selectionMode){let a=e.rowData,s=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&this.anchorRowIndex!=null)ve.clearSelection(),this.rangeRowIndex!=null&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=s,this.selectRange(e.originalEvent,s);else{let l=this.isSelected(a);if(!l&&!this.isRowSelectable(a,s))return;let u=this.rowTouched?!1:this.metaKeySelection,c=this.dataKey?String(rt.resolveFieldData(a,this.dataKey)):null;if(this.anchorRowIndex=s,this.rangeRowIndex=s,u){let d=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(l&&d){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let p=this.findIndexInSelection(a);this._selection=this.selection.filter((h,f)=>f!=p),this.selectionChange.emit(this.selection),c&&delete this.selectionKeys[c]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row"})}else this.isSingleSelectionMode()?(this._selection=a,this.selectionChange.emit(a),c&&(this.selectionKeys={},this.selectionKeys[c]=1)):this.isMultipleSelectionMode()&&(d?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,a],this.selectionChange.emit(this.selection),c&&(this.selectionKeys[c]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:s})}else if(this.selectionMode==="single")l?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:s})):(this._selection=a,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:s}),c&&(this.selectionKeys={},this.selectionKeys[c]=1));else if(this.selectionMode==="multiple")if(l){let d=this.findIndexInSelection(a);this._selection=this.selection.filter((p,h)=>h!=d),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:s}),c&&delete this.selectionKeys[c]}else this._selection=this.selection?[...this.selection,a]:[a],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:a,type:"row",index:s}),c&&(this.selectionKeys[c]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){let r=e.rowData,i=e.rowIndex;if(this.contextMenuSelectionMode==="separate")this.contextMenuSelection=r,this.contextMenuSelectionChange.emit(r),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:r,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(r);else if(this.contextMenuSelectionMode==="joint"){this.preventSelectionSetterPropagation=!0;let o=this.isSelected(r),a=this.dataKey?String(rt.resolveFieldData(r,this.dataKey)):null;if(!o){if(!this.isRowSelectable(r,i))return;this.isSingleSelectionMode()?(this.selection=r,this.selectionChange.emit(r),a&&(this.selectionKeys={},this.selectionKeys[a]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,r]:[r],this.selectionChange.emit(this.selection),a&&(this.selectionKeys[a]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:r,index:e.rowIndex})}}}selectRange(e,r,i){let o,a;this.anchorRowIndex>r?(o=r,a=this.anchorRowIndex):this.anchorRowIndex<r?(o=this.anchorRowIndex,a=r):(o=r,a=r),this.lazy&&this.paginator&&(o-=this.first,a-=this.first);let s=[];for(let l=o;l<=a;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)&&!i){if(!this.isRowSelectable(u,r))continue;s.push(u),this._selection=[...this.selection,u];let c=this.dataKey?String(rt.resolveFieldData(u,this.dataKey)):null;c&&(this.selectionKeys[c]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:s,type:"row"})}clearSelectionRange(e){let r,i,o=this.rangeRowIndex,a=this.anchorRowIndex;o>a?(r=this.anchorRowIndex,i=this.rangeRowIndex):o<a?(r=this.rangeRowIndex,i=this.anchorRowIndex):(r=this.rangeRowIndex,i=this.rangeRowIndex);for(let s=r;s<=i;s++){let l=this.value[s],u=this.findIndexInSelection(l);this._selection=this.selection.filter((d,p)=>p!=u);let c=this.dataKey?String(rt.resolveFieldData(l,this.dataKey)):null;c&&delete this.selectionKeys[c],this.onRowUnselect.emit({originalEvent:e,data:l,type:"row"})}}isSelected(e){return e&&this.selection?this.dataKey?this.selectionKeys[rt.resolveFieldData(e,this.dataKey)]!==void 0:Array.isArray(this.selection)?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1}findIndexInSelection(e){let r=-1;if(this.selection&&this.selection.length){for(let i=0;i<this.selection.length;i++)if(this.equals(e,this.selection[i])){r=i;break}}return r}isRowSelectable(e,r){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:r}))}toggleRowWithRadio(e,r){if(this.preventSelectionSetterPropagation=!0,this.selection!=r){if(!this.isRowSelectable(r,e.rowIndex))return;this._selection=r,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:r,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(rt.resolveFieldData(r,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:r,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,r){this.selection=this.selection||[];let i=this.isSelected(r),o=this.dataKey?String(rt.resolveFieldData(r,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,i){let a=this.findIndexInSelection(r);this._selection=this.selection.filter((s,l)=>l!=a),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:r,type:"checkbox"}),o&&delete this.selectionKeys[o]}else{if(!this.isRowSelectable(r,e.rowIndex))return;this._selection=this.selection?[...this.selection,r]:[r],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:r,type:"checkbox"}),o&&(this.selectionKeys[o]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,r){if(this._selectAll!==null)this.selectAllChange.emit({originalEvent:e,checked:r});else{let i=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData,o=this.selectionPageOnly&&this._selection?this._selection.filter(a=>!i.some(s=>this.equals(a,s))):[];r&&(o=this.frozenValue?[...o,...this.frozenValue,...i]:[...o,...i],o=this.rowSelectable?o.filter((a,s)=>this.rowSelectable({data:a,index:s})):o),this._selection=o,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:r}),this.isStateful()&&this.saveState()}}equals(e,r){return this.compareSelectionBy==="equals"?e===r:rt.equals(e,r,this.dataKey)}filter(e,r,i){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[r]&&delete this.filters[r]:this.filters[r]={value:e,matchMode:i},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,r){this.filter(e,"global",r)}isFilterBlank(e){return e!=null?!!(typeof e=="string"&&e.trim().length==0||Array.isArray(e)&&e.length==0):!0}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(!this.hasFilter())this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0);else{let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let r=0;r<this.value.length;r++){let i=!0,o=!1,a=!1;for(let l in this.filters)if(this.filters.hasOwnProperty(l)&&l!=="global"){a=!0;let u=l,c=this.filters[u];if(Array.isArray(c)){for(let d of c)if(i=this.executeLocalFilter(u,this.value[r],d),d.operator===_E.OR&&i||d.operator===_E.AND&&!i)break}else i=this.executeLocalFilter(u,this.value[r],c);if(!i)break}if(this.filters.global&&!o&&e)for(let l=0;l<e.length;l++){let u=e[l].field||e[l];if(o=this.filterService.filters[this.filters.global.matchMode](rt.resolveFieldData(this.value[r],u),this.filters.global.value,this.filterLocale),o)break}let s;this.filters.global?s=a?a&&i&&o:o:s=a&&i,s&&this.filteredValue.push(this.value[r])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,r,i){let o=i.value,a=i.matchMode||to.STARTS_WITH,s=rt.resolveFieldData(r,e),l=this.filterService.filters[a];return l(s,o,this.filterLocale)}hasFilter(){let e=!0;for(let r in this.filters)if(this.filters.hasOwnProperty(r)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.clearFilterValues(),this.filteredValue=null,this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}clearFilterValues(){for(let[,e]of Object.entries(this.filters))if(Array.isArray(e))for(let r of e)r.value=null;else e&&(e.value=null)}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let r,i="",o=this.columns;e&&e.selectionOnly?r=this.selection||[]:e&&e.allValues?r=this.value||[]:(r=this.filteredValue||this.value,this.frozenValue&&(r=r?[...this.frozenValue,...r]:this.frozenValue));let a=o.filter(c=>c.exportable!==!1&&c.field);i+=a.map(c=>'"'+this.getExportHeader(c)+'"').join(this.csvSeparator);let s=r.map(c=>a.map(d=>{let p=rt.resolveFieldData(c,d.field);return p!=null?this.exportFunction?p=this.exportFunction({data:p,field:d.field}):p=String(p).replace(/"/g,'""'):p="",'"'+p+'"'}).join(this.csvSeparator)).join(`
`);s.length&&(i+=`
`+s);let l=new Blob([new Uint8Array([239,187,191]),i],{type:"text/csv;charset=utf-8;"}),u=this.renderer.createElement("a");u.style.display="none",this.renderer.appendChild(this.document.body,u),u.download!==void 0?(u.setAttribute("href",URL.createObjectURL(l)),u.setAttribute("download",this.exportFilename+".csv"),u.click()):(i="data:text/csv;charset=utf-8,"+i,this.window.open(encodeURI(i))),this.renderer.removeChild(this.document.body,u)}onLazyItemLoad(e){this.onLazyLoad.emit(Rn(nt(nt({},this.createLazyLoadMetadata()),e),{rows:e.last-e.first}))}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller?.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,r,i,o){this.editingCell=e,this.editingCellData=r,this.editingCellField=i,this.editingCellRowIndex=o,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&ve.find(this.editingCell,".ng-invalid.ng-dirty").length===0}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(ve.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}initRowEdit(e){let r=String(rt.resolveFieldData(e,this.dataKey));this.editingRowKeys[r]=!0}saveRowEdit(e,r){if(ve.find(r,".ng-invalid.ng-dirty").length===0){let i=String(rt.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[i]}}cancelRowEdit(e){let r=String(rt.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}toggleRow(e,r){if(!this.dataKey&&!this.groupRowsBy)throw new Error("dataKey or groupRowsBy must be defined to use row expansion");let i=this.groupRowsBy?String(rt.resolveFieldData(e,this.groupRowsBy)):String(rt.resolveFieldData(e,this.dataKey));this.expandedRowKeys[i]!=null?(delete this.expandedRowKeys[i],this.onRowCollapse.emit({originalEvent:r,data:e})):(this.rowExpandMode==="single"&&(this.expandedRowKeys={}),this.expandedRowKeys[i]=!0,this.onRowExpand.emit({originalEvent:r,data:e})),r&&r.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return this.groupRowsBy?this.expandedRowKeys[String(rt.resolveFieldData(e,this.groupRowsBy))]===!0:this.expandedRowKeys[String(rt.resolveFieldData(e,this.dataKey))]===!0}isRowEditing(e){return this.editingRowKeys[String(rt.resolveFieldData(e,this.dataKey))]===!0}isSingleSelectionMode(){return this.selectionMode==="single"}isMultipleSelectionMode(){return this.selectionMode==="multiple"}onColumnResizeBegin(e){let r=ve.getOffset(this.containerViewChild?.nativeElement).left;this.resizeColumnElement=e.target.closest("th"),this.columnResizing=!0,e.type=="touchstart"?this.lastResizerHelperX=e.changedTouches[0].clientX-r+this.containerViewChild?.nativeElement.scrollLeft:this.lastResizerHelperX=e.pageX-r+this.containerViewChild?.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let r=ve.getOffset(this.containerViewChild?.nativeElement).left;ve.addClass(this.containerViewChild?.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild?.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",e.type=="touchmove"?this.resizeHelperViewChild.nativeElement.style.left=e.changedTouches[0].clientX-r+this.containerViewChild?.nativeElement.scrollLeft+"px":this.resizeHelperViewChild.nativeElement.style.left=e.pageX-r+this.containerViewChild?.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild?.nativeElement.offsetLeft-this.lastResizerHelperX,i=this.resizeColumnElement.offsetWidth+e,o=this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,""),a=o?parseFloat(o):15;if(i>=a){if(this.columnResizeMode==="fit"){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;i>15&&l>15&&this.resizeTableCells(i,l)}else if(this.columnResizeMode==="expand"){this._initialColWidths=this._totalTableWidth();let s=this.tableViewChild?.nativeElement.offsetWidth+e;this.setResizeTableWidth(s+"px"),this.resizeTableCells(i,null)}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",ve.removeClass(this.containerViewChild?.nativeElement,"p-unselectable-text")}_totalTableWidth(){let e=[],r=ve.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");return ve.find(r,"tr > th").forEach(o=>e.push(ve.getOuterWidth(o))),e}onColumnDragStart(e,r){this.reorderIconWidth=ve.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild?.nativeElement),this.reorderIconHeight=ve.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild?.nativeElement),this.draggedColumn=r,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,r){if(this.reorderableColumns&&this.draggedColumn&&r){e.preventDefault();let i=ve.getOffset(this.containerViewChild?.nativeElement),o=ve.getOffset(r);if(this.draggedColumn!=r){let a=ve.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=ve.indexWithinGroup(r,"preorderablecolumn"),l=o.left-i.left,u=i.top-o.top,c=o.left+r.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=o.top-i.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=o.top-i.top+r.offsetHeight+"px",e.pageX>c?(this.reorderIndicatorUpViewChild.nativeElement.style.left=l+r.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l+r.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&e.preventDefault()}onColumnDrop(e,r){if(e.preventDefault(),this.draggedColumn){let i=ve.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),o=ve.indexWithinGroup(r,"preorderablecolumn"),a=i!=o;if(a&&(o-i==1&&this.dropPosition===-1||i-o==1&&this.dropPosition===1)&&(a=!1),a&&o<i&&this.dropPosition===1&&(o=o+1),a&&o>i&&this.dropPosition===-1&&(o=o-1),a&&(rt.reorderArray(this.columns,i,o),this.onColReorder.emit({dragIndex:i,dropIndex:o,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.resizableColumns&&this.resizeColumnElement){let s=this.columnResizeMode==="expand"?this._initialColWidths:this._totalTableWidth();rt.reorderArray(s,i+1,o+1),this.updateStyleElement(s,i,null,null)}this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}resizeTableCells(e,r){let i=ve.index(this.resizeColumnElement),o=this.columnResizeMode==="expand"?this._initialColWidths:this._totalTableWidth();this.updateStyleElement(o,i,e,r)}updateStyleElement(e,r,i,o){this.destroyStyleElement(),this.createStyleElement();let a="";e.forEach((s,l)=>{let u=l===r?i:o&&l===r+1?o:s,c=`width: ${u}px !important; max-width: ${u}px !important;`;a+=`
                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${l+1}),
                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${l+1}),
                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${l+1}) {
                    ${c}
                }
            `}),this.renderer.setProperty(this.styleElement,"innerHTML",this.domSanitizer.bypassSecurityTrustStyle(a))}onRowDragStart(e,r){this.rowDragging=!0,this.draggedRowIndex=r,e.dataTransfer.setData("text","b")}onRowDragOver(e,r,i){if(this.rowDragging&&this.draggedRowIndex!==r){let o=ve.getOffset(i).top,a=e.pageY,s=o+ve.getOuterHeight(i)/2,l=i.previousElementSibling;a<s?(ve.removeClass(i,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=r,l?ve.addClass(l,"p-datatable-dragpoint-bottom"):ve.addClass(i,"p-datatable-dragpoint-top")):(l?ve.removeClass(l,"p-datatable-dragpoint-bottom"):ve.addClass(i,"p-datatable-dragpoint-top"),this.droppedRowIndex=r+1,ve.addClass(i,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,r){let i=r.previousElementSibling;i&&ve.removeClass(i,"p-datatable-dragpoint-bottom"),ve.removeClass(r,"p-datatable-dragpoint-bottom"),ve.removeClass(r,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,r){if(this.droppedRowIndex!=null){let i=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1;rt.reorderArray(this.value,this.draggedRowIndex,i),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:i})}this.onRowDragLeave(e,r),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return e==null||e.length==0}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){if(Do(this.platformId))switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}else throw new Error("Browser storage is not available in the server side.")}isStateful(){return this.stateKey!=null}saveState(){let e=this.getStorage(),r={};this.paginator&&(r.first=this.first,r.rows=this.rows),this.sortField&&(r.sortField=this.sortField,r.sortOrder=this.sortOrder),this.multiSortMeta&&(r.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(r.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(r),this.reorderableColumns&&this.saveColumnOrder(r),this.selection&&(r.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(r.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(r)),this.onStateSave.emit(r)}clearState(){let e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){let r=this.getStorage().getItem(this.stateKey),i=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,o=function(a,s){return typeof s=="string"&&i.test(s)?new Date(s):s};if(r){let a=JSON.parse(r,o);this.paginator&&(this.first!==void 0&&(this.first=a.first,this.firstChange.emit(this.first)),this.rows!==void 0&&(this.rows=a.rows,this.rowsChange.emit(this.rows))),a.sortField&&(this.restoringSort=!0,this._sortField=a.sortField,this._sortOrder=a.sortOrder),a.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=a.multiSortMeta),a.filters&&(this.restoringFilter=!0,this.filters=a.filters),this.resizableColumns&&(this.columnWidthsState=a.columnWidths,this.tableWidthState=a.tableWidth),a.expandedRowKeys&&(this.expandedRowKeys=a.expandedRowKeys),a.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(a.selection)),this.stateRestored=!0,this.onStateRestore.emit(a)}}saveColumnWidths(e){let r=[],i=[],o=this.containerViewChild?.nativeElement;o&&(i=ve.find(o,".p-datatable-thead > tr > th")),i.forEach(a=>r.push(ve.getOuterWidth(a))),e.columnWidths=r.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=ve.getOuterWidth(this.tableViewChild?.nativeElement))}setResizeTableWidth(e){this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if(this.columnResizeMode==="expand"&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),rt.isNotEmpty(e)){this.createStyleElement();let r="";e.forEach((i,o)=>{let a=`width: ${i}px !important; max-width: ${i}px !important`;r+=`
                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${o+1}),
                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${o+1}),
                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${o+1}) {
                            ${a}
                        }
                    `}),this.styleElement.textContent=r}}}saveColumnOrder(e){if(this.columns){let r=[];this.columns.map(i=>{r.push(i.field||i.key)}),e.columnOrder=r}}restoreColumnOrder(){let r=this.getStorage().getItem(this.stateKey);if(r){let o=JSON.parse(r).columnOrder;if(o){let a=[];o.map(s=>{let l=this.findColumnByKey(s);l&&a.push(l)}),this.columnOrderStateRestored=!0,this.columns=a}}}findColumnByKey(e){if(this.columns){for(let r of this.columns)if(r.key===e||r.field===e)return r}else return null}createStyleElement(){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",ve.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){if(Do(this.platformId)&&!this.responsiveStyleElement){this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",ve.setAttribute(this.responsiveStyleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.responsiveStyleElement);let e=`
    @media screen and (max-width: ${this.breakpoint}) {
        #${this.id}-table > .p-datatable-thead > tr > th,
        #${this.id}-table > .p-datatable-tfoot > tr > td {
            display: none !important;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td {
            display: flex;
            width: 100% !important;
            align-items: center;
            justify-content: space-between;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {
            border: 0 none;
        }

        #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {
            border-top: 0;
            border-right: 0;
            border-left: 0;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {
            display: block;
        }
    }
    `;this.renderer.setProperty(this.responsiveStyleElement,"innerHTML",this.domSanitizer.bypassSecurityTrustStyle(e))}}destroyResponsiveStyle(){this.responsiveStyleElement&&(this.renderer.removeChild(this.document.head,this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}getPaginatorStyleClasses(e){return[this.paginatorStyleClass,e].filter(r=>!!r).join(" ").trim()}static \u0275fac=function(r){return new(r||t)(Oe(nr),Oe(zr),Oe(Wr),Oe(zn),Oe(En),Oe(__),Oe(br),Oe(h_),Oe(_f),Oe(Mi),Oe(uE))};static \u0275cmp=ct({type:t,selectors:[["p-table"]],contentQueries:function(r,i,o){if(r&1&&vi(o,Dr,4),r&2){let a;sn(a=ln())&&(i.templates=a)}},viewQuery:function(r,i){if(r&1&&(Zn(Pre,5),Zn(Lre,5),Zn(Bre,5),Zn(Vre,5),Zn(jre,5),Zn(Ure,5),Zn(Hre,5),Zn(zre,5),Zn(Wre,5)),r&2){let o;sn(o=ln())&&(i.containerViewChild=o.first),sn(o=ln())&&(i.resizeHelperViewChild=o.first),sn(o=ln())&&(i.reorderIndicatorUpViewChild=o.first),sn(o=ln())&&(i.reorderIndicatorDownViewChild=o.first),sn(o=ln())&&(i.wrapperViewChild=o.first),sn(o=ln())&&(i.tableViewChild=o.first),sn(o=ln())&&(i.tableHeaderViewChild=o.first),sn(o=ln())&&(i.tableFooterViewChild=o.first),sn(o=ln())&&(i.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:[Se.HasDecoratorInputTransform,"paginator","paginator",We],pageLinks:[Se.HasDecoratorInputTransform,"pageLinks","pageLinks",pn],rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:[Se.HasDecoratorInputTransform,"alwaysShowPaginator","alwaysShowPaginator",We],paginatorPosition:"paginatorPosition",paginatorStyleClass:"paginatorStyleClass",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[Se.HasDecoratorInputTransform,"showCurrentPageReport","showCurrentPageReport",We],showJumpToPageDropdown:[Se.HasDecoratorInputTransform,"showJumpToPageDropdown","showJumpToPageDropdown",We],showJumpToPageInput:[Se.HasDecoratorInputTransform,"showJumpToPageInput","showJumpToPageInput",We],showFirstLastIcon:[Se.HasDecoratorInputTransform,"showFirstLastIcon","showFirstLastIcon",We],showPageLinks:[Se.HasDecoratorInputTransform,"showPageLinks","showPageLinks",We],defaultSortOrder:[Se.HasDecoratorInputTransform,"defaultSortOrder","defaultSortOrder",pn],sortMode:"sortMode",resetPageOnSort:[Se.HasDecoratorInputTransform,"resetPageOnSort","resetPageOnSort",We],selectionMode:"selectionMode",selectionPageOnly:[Se.HasDecoratorInputTransform,"selectionPageOnly","selectionPageOnly",We],contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:[Se.HasDecoratorInputTransform,"metaKeySelection","metaKeySelection",We],rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:[Se.HasDecoratorInputTransform,"lazy","lazy",We],lazyLoadOnInit:[Se.HasDecoratorInputTransform,"lazyLoadOnInit","lazyLoadOnInit",We],compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:[Se.HasDecoratorInputTransform,"filterDelay","filterDelay",pn],filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:[Se.HasDecoratorInputTransform,"scrollable","scrollable",We],scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:[Se.HasDecoratorInputTransform,"virtualScroll","virtualScroll",We],virtualScrollItemSize:[Se.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",pn],virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:[Se.HasDecoratorInputTransform,"virtualScrollDelay","virtualScrollDelay",pn],frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:[Se.HasDecoratorInputTransform,"resizableColumns","resizableColumns",We],columnResizeMode:"columnResizeMode",reorderableColumns:[Se.HasDecoratorInputTransform,"reorderableColumns","reorderableColumns",We],loading:[Se.HasDecoratorInputTransform,"loading","loading",We],loadingIcon:"loadingIcon",showLoader:[Se.HasDecoratorInputTransform,"showLoader","showLoader",We],rowHover:[Se.HasDecoratorInputTransform,"rowHover","rowHover",We],customSort:[Se.HasDecoratorInputTransform,"customSort","customSort",We],showInitialSortBadge:[Se.HasDecoratorInputTransform,"showInitialSortBadge","showInitialSortBadge",We],autoLayout:[Se.HasDecoratorInputTransform,"autoLayout","autoLayout",We],exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:[Se.HasDecoratorInputTransform,"groupRowsByOrder","groupRowsByOrder",pn],responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",paginatorLocale:"paginatorLocale",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll",virtualRowHeight:"virtualRowHeight"},outputs:{contextMenuSelectionChange:"contextMenuSelectionChange",selectAllChange:"selectAllChange",selectionChange:"selectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[ai([__]),Er,eo],decls:16,vars:22,consts:[["container",""],["wrapper",""],["buildInTable",""],["scroller",""],["table",""],["thead",""],["tfoot",""],["resizeHelper",""],["reorderIndicatorUp",""],["reorderIndicatorDown",""],[3,"ngStyle","ngClass"],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],[3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","autoSize","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper",3,"ngStyle",4,"ngIf"],["class","p-datatable-reorder-indicator-up",3,"ngStyle",4,"ngIf"],["class","p-datatable-reorder-indicator-down",3,"ngStyle",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-datatable-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-datatable-loading-icon"],[4,"ngTemplateOutlet"],[1,"p-datatable-header"],[3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","styleClass","locale"],["pTemplate","dropdownicon"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],[3,"onLazyLoad","items","columns","scrollHeight","itemSize","step","delay","inline","autoSize","lazy","loaderDisabled","showSpacer","showLoader","options"],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-datatable-thead"],["role","rowgroup","class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],["role","rowgroup",1,"p-datatable-tbody",3,"ngClass","ngStyle","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["role","rowgroup","class","p-datatable-scroller-spacer",3,"ngStyle",4,"ngIf"],["role","rowgroup","class","p-datatable-tfoot",4,"ngIf"],["role","rowgroup",1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],["role","rowgroup",1,"p-datatable-scroller-spacer",3,"ngStyle"],["role","rowgroup",1,"p-datatable-tfoot"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",3,"ngStyle"],[1,"p-datatable-reorder-indicator-up",3,"ngStyle"],[1,"p-datatable-reorder-indicator-down",3,"ngStyle"]],template:function(r,i){r&1&&(ie(0,"div",10,0),ce(2,tie,3,2,"div",11)(3,rie,2,1,"div",12)(4,bie,6,24,"p-paginator",13),ie(5,"div",14,1),ce(7,xie,3,17,"p-scroller",15)(8,Iie,2,7,"ng-container",16)(9,Mie,10,26,"ng-template",null,2,ya),oe(),ce(11,$ie,6,24,"p-paginator",13)(12,Yie,2,1,"div",17)(13,Xie,2,2,"div",18)(14,eoe,4,4,"span",19)(15,ioe,4,4,"span",20),oe()),r&2&&(ft(i.styleClass),O("ngStyle",i.style)("ngClass",vo(16,qre,i.rowHover||i.selectionMode,i.scrollable,i.scrollable&&i.scrollHeight==="flex")),Ne("id",i.id),P(2),O("ngIf",i.loading&&i.showLoader),P(),O("ngIf",i.captionTemplate),P(),O("ngIf",i.paginator&&(i.paginatorPosition==="top"||i.paginatorPosition=="both")),P(),O("ngStyle",Gt(20,Gre,i.virtualScroll?"":i.scrollHeight)),P(2),O("ngIf",i.virtualScroll),P(),O("ngIf",!i.virtualScroll),P(3),O("ngIf",i.paginator&&(i.paginatorPosition==="bottom"||i.paginatorPosition=="both")),P(),O("ngIf",i.summaryTemplate),P(),O("ngIf",i.resizableColumns),P(),O("ngIf",i.reorderableColumns),P(),O("ngIf",i.reorderableColumns))},dependencies:()=>[Xr,Or,li,bi,vO,Dr,g_,OE,PE,Gc,Poe],styles:[`@layer primeng{.p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-icon-wrapper{display:inline}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:2}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit;z-index:1}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:2}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:3}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}}
`],encapsulation:2})}return t})(),Poe=(()=>{class t{dt;tableService;cd;el;columns;template;get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&this.dt.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()}frozen;frozenRows;scrollerOptions;subscription;_value;ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&this.dt.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()}constructor(e,r,i,o){this.dt=e,this.tableService=r,this.cd=i,this.el=o,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}shouldRenderRowGroupHeader(e,r,i){let o=rt.resolveFieldData(r,this.dt.groupRowsBy),a=e[i-(1+this.dt._first)];if(a){let s=rt.resolveFieldData(a,this.dt.groupRowsBy);return o!==s}else return!0}shouldRenderRowGroupFooter(e,r,i){let o=rt.resolveFieldData(r,this.dt.groupRowsBy),a=e[i+(1+this.dt._first)];if(a){let s=rt.resolveFieldData(a,this.dt.groupRowsBy);return o!==s}else return!0}shouldRenderRowspan(e,r,i){let o=rt.resolveFieldData(r,this.dt.groupRowsBy),a=e[i-1];if(a){let s=rt.resolveFieldData(a,this.dt.groupRowsBy);return o!==s}else return!0}calculateRowGroupSize(e,r,i){let o=rt.resolveFieldData(r,this.dt.groupRowsBy),a=o,s=0;for(;o===a;){s++;let l=e[++i];if(l)a=rt.resolveFieldData(l,this.dt.groupRowsBy);else break}return s===1?null:s}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=ve.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=ve.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}getScrollerOption(e,r){return this.dt.virtualScroll?(r=r||this.scrollerOptions,r?r[e]:null):null}getRowIndex(e){let r=this.dt.paginator?this.dt.first+e:e,i=this.getScrollerOption("getItemOptions");return i?i(r).index:r}static \u0275fac=function(r){return new(r||t)(Oe(x_),Oe(__),Oe(br),Oe(zn))};static \u0275cmp=ct({type:t,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:[Se.None,"pTableBody","columns"],template:[Se.None,"pTableBodyTemplate","template"],value:"value",frozen:[Se.HasDecoratorInputTransform,"frozen","frozen",We],frozenRows:[Se.HasDecoratorInputTransform,"frozenRows","frozenRows",We],scrollerOptions:"scrollerOptions"},features:[Er],attrs:ooe,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&ce(0,goe,2,2,"ng-container",0)(1,Eoe,2,2,"ng-container",0)(2,Moe,2,2,"ng-container",0)(3,Noe,2,5,"ng-container",0)(4,Ooe,2,5,"ng-container",0),r&2&&(O("ngIf",!i.dt.expandedRowTemplate),P(),O("ngIf",i.dt.expandedRowTemplate&&!(i.frozen&&i.dt.frozenExpandedRowTemplate)),P(),O("ngIf",i.dt.frozenExpandedRowTemplate&&i.frozen),P(),O("ngIf",i.dt.loading),P(),O("ngIf",i.dt.isEmpty()&&!i.dt.loading))},dependencies:[ba,Or,li],encapsulation:2})}return t})();var SO=(()=>{class t{dt;tableService;el;data;index;pSelectableRowDisabled;selected;subscription;constructor(e,r,i){this.dt=e,this.tableService=r,this.el=i,this.isEnabled()&&(this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.selected=this.dt.isSelected(this.data)}))}setRowTabIndex(){if(this.dt.selectionMode==="single"||this.dt.selectionMode==="multiple")return this.dt.selection?this.dt.anchorRowIndex===this.index?0:-1:0}ngOnInit(){this.isEnabled()&&(this.selected=this.dt.isSelected(this.data))}onClick(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onTouchEnd(e){this.isEnabled()&&this.dt.handleRowTouchEnd(e)}onKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":this.onEnterKey(e);break;default:if(e.code==="KeyA"&&(e.metaKey||e.ctrlKey)&&this.dt.selectionMode==="multiple"){let r=this.dt.dataToRender(this.dt.processedData);this.dt.selection=[...r],this.dt.selectRange(e,r.length-1,!0),e.preventDefault()}break}}onArrowDownKey(e){if(!this.isEnabled())return;let r=e.currentTarget,i=this.findNextSelectableRow(r);i&&i.focus(),e.preventDefault()}onArrowUpKey(e){if(!this.isEnabled())return;let r=e.currentTarget,i=this.findPrevSelectableRow(r);i&&i.focus(),e.preventDefault()}onEnterKey(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onEndKey(e){let r=this.findLastSelectableRow();if(r&&this.focusRowChange(this.el.nativeElement,r),e.ctrlKey&&e.shiftKey){let i=this.dt.dataToRender(this.dt.rows),o=ve.getAttribute(r,"index");this.dt.anchorRowIndex=o,this.dt.selection=i.slice(this.index,i.length),this.dt.selectRange(e,this.index)}e.preventDefault()}onHomeKey(e){let r=this.findFirstSelectableRow();if(r&&this.focusRowChange(this.el.nativeElement,r),e.ctrlKey&&e.shiftKey){let i=this.dt.dataToRender(this.dt.rows),o=ve.getAttribute(r,"index");this.dt.anchorRowIndex=this.dt.anchorRowIndex||o,this.dt.selection=i.slice(0,this.index+1),this.dt.selectRange(e,this.index)}e.preventDefault()}onSpaceKey(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement||e.target instanceof HTMLTextAreaElement)){if(this.onEnterKey(e),e.shiftKey&&this.dt.selection!==null){let i=this.dt.dataToRender(this.dt.rows),o;if(rt.isNotEmpty(this.dt.selection)&&this.dt.selection.length>0){let a,s;a=rt.findIndexInList(this.dt.selection[0],i),s=rt.findIndexInList(this.dt.selection[this.dt.selection.length-1],i),o=this.index<=a?s:a}else o=rt.findIndexInList(this.dt.selection,i);this.dt.anchorRowIndex=o,this.dt.selection=o!==this.index?i.slice(Math.min(o,this.index),Math.max(o,this.index)+1):[this.data],this.dt.selectRange(e,this.index)}e.preventDefault()}}focusRowChange(e,r){e.tabIndex="-1",r.tabIndex="0",ve.focus(r)}findLastSelectableRow(){let e=ve.find(this.dt.el.nativeElement,".p-selectable-row");return e?e[e.length-1]:null}findFirstSelectableRow(){return ve.findSingle(this.dt.el.nativeElement,".p-selectable-row")}findNextSelectableRow(e){let r=e.nextElementSibling;return r?ve.hasClass(r,"p-selectable-row")?r:this.findNextSelectableRow(r):null}findPrevSelectableRow(e){let r=e.previousElementSibling;return r?ve.hasClass(r,"p-selectable-row")?r:this.findPrevSelectableRow(r):null}isEnabled(){return this.pSelectableRowDisabled!==!0}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)(Oe(x_),Oe(__),Oe(zn))};static \u0275dir=Un({type:t,selectors:[["","pSelectableRow",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(r,i){r&1&&et("click",function(a){return i.onClick(a)})("touchend",function(a){return i.onTouchEnd(a)})("keydown",function(a){return i.onKeyDown(a)}),r&2&&(Ne("tabindex",i.setRowTabIndex())("data-p-highlight",i.selected)("data-p-selectable-row",!0),go("p-selectable-row",i.isEnabled())("p-highlight",i.selected))},inputs:{data:[Se.None,"pSelectableRow","data"],index:[Se.None,"pSelectableRowIndex","index"],pSelectableRowDisabled:[Se.HasDecoratorInputTransform,"pSelectableRowDisabled","pSelectableRowDisabled",We]},features:[Er]})}return t})();var EO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=cn({imports:[qr,yO,v_,p0,pp,Bu,bO,eO,h0,_O,xf,OE,PE,Gc,cO,pO,dO,Yc,sO,lO,uO,hO,kr,xf]})}return t})();var An="primary",T0=Symbol("RouteTitle"),QE=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Df(t){return new QE(t)}function Boe(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Voe(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Vl(t[e],n[e]))return!1;return!0}function Vl(t,n){let e=t?ZE(t):void 0,r=n?ZE(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!OO(t[i],n[i]))return!1;return!0}function ZE(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function OO(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((i,o)=>r[o]===i)}else return t===n}function PO(t){return t.length>0?t[t.length-1]:null}function Jc(t){return Jx(t)?t:sp(t)?Vr(Promise.resolve(t)):tn(t)}var joe={exact:BO,subset:VO},LO={exact:Uoe,subset:Hoe,ignored:()=>!0};function DO(t,n,e){return joe[e.paths](t.root,n.root,e.matrixParams)&&LO[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Uoe(t,n){return Vl(t,n)}function BO(t,n,e){if(!mp(t.segments,n.segments)||!S_(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!BO(t.children[r],n.children[r],e))return!1;return!0}function Hoe(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>OO(t[e],n[e]))}function VO(t,n,e){return jO(t,n,n.segments,e)}function jO(t,n,e,r){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!mp(i,e)||n.hasChildren()||!S_(i,e,r))}else if(t.segments.length===e.length){if(!mp(t.segments,e)||!S_(t.segments,e,r))return!1;for(let i in n.children)if(!t.children[i]||!VO(t.children[i],n.children[i],r))return!1;return!0}else{let i=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!mp(t.segments,i)||!S_(t.segments,i,r)||!t.children[An]?!1:jO(t.children[An],n,o,r)}}function S_(t,n,e){return n.every((r,i)=>LO[e](t[i].parameters,r.parameters))}var Xc=class{constructor(n=new gr([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Df(this.queryParams),this._queryParamMap}toString(){return qoe.serialize(this)}},gr=class{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return E_(this)}},fp=class{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Df(this.parameters),this._parameterMap}toString(){return HO(this)}};function zoe(t,n){return mp(t,n)&&t.every((e,r)=>Vl(e.parameters,n[r].parameters))}function mp(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function Woe(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===An&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==An&&(e=e.concat(n(i,r)))}),e}var A0=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>new _0,providedIn:"root"})}}return t})(),_0=class{parse(n){let e=new eD(n);return new Xc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${f0(n.root,!0)}`,r=Koe(n.queryParams),i=typeof n.fragment=="string"?`#${Goe(n.fragment)}`:"";return`${e}${r}${i}`}},qoe=new _0;function E_(t){return t.segments.map(n=>HO(n)).join("/")}function f0(t,n){if(!t.hasChildren())return E_(t);if(n){let e=t.children[An]?f0(t.children[An],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==An&&r.push(`${i}:${f0(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Woe(t,(r,i)=>i===An?[f0(t.children[An],!1)]:[`${i}:${f0(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[An]!=null?`${E_(t)}/${e[0]}`:`${E_(t)}/(${e.join("//")})`}}function UO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function C_(t){return UO(t).replace(/%3B/gi,";")}function Goe(t){return encodeURI(t)}function JE(t){return UO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function D_(t){return decodeURIComponent(t)}function TO(t){return D_(t.replace(/\+/g,"%20"))}function HO(t){return`${JE(t.path)}${$oe(t.parameters)}`}function $oe(t){return Object.entries(t).map(([n,e])=>`;${JE(n)}=${JE(e)}`).join("")}function Koe(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(i=>`${C_(e)}=${C_(i)}`).join("&"):`${C_(e)}=${C_(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Yoe=/^[^\/()?;#]+/;function $E(t){let n=t.match(Yoe);return n?n[0]:""}var Xoe=/^[^\/()?;=#]+/;function Qoe(t){let n=t.match(Xoe);return n?n[0]:""}var Zoe=/^[^=?&#]+/;function Joe(t){let n=t.match(Zoe);return n?n[0]:""}var eae=/^[^&#]+/;function tae(t){let n=t.match(eae);return n?n[0]:""}var eD=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new gr([],{}):new gr([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[An]=new gr(n,e)),r}parseSegment(){let n=$E(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new At(4009,!1);return this.capture(n),new fp(D_(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Qoe(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=$E(this.remaining);i&&(r=i,this.capture(r))}n[D_(e)]=D_(r)}parseQueryParam(n){let e=Joe(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let a=tae(this.remaining);a&&(r=a,this.capture(r))}let i=TO(e),o=TO(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$E(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new At(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=An);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[An]:new gr([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new At(4011,!1)}};function zO(t){return t.segments.length>0?new gr([],{[An]:t}):t}function WO(t){let n={};for(let[r,i]of Object.entries(t.children)){let o=WO(i);if(r===An&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let e=new gr(t.segments,n);return nae(e)}function nae(t){if(t.numberOfChildren===1&&t.children[An]){let n=t.children[An];return new gr(t.segments.concat(n.segments),n.children)}return t}function Tf(t){return t instanceof Xc}function rae(t,n,e=null,r=null){let i=qO(t);return GO(i,n,e,r)}function qO(t){let n;function e(o){let a={};for(let l of o.children){let u=e(l);a[l.outlet]=u}let s=new gr(o.url,a);return o===t&&(n=s),s}let r=e(t.root),i=zO(r);return n??i}function GO(t,n,e,r){let i=t;for(;i.parent;)i=i.parent;if(n.length===0)return KE(i,i,i,e,r);let o=iae(n);if(o.toRoot())return KE(i,i,new gr([],{}),e,r);let a=oae(o,i,t),s=a.processChildren?v0(a.segmentGroup,a.index,o.commands):KO(a.segmentGroup,a.index,o.commands);return KE(i,a.segmentGroup,s,e,r)}function T_(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function w0(t){return typeof t=="object"&&t!=null&&t.outlets}function KE(t,n,e,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let a;t===n?a=e:a=$O(t,n,e);let s=zO(WO(a));return new Xc(s,o,i)}function $O(t,n,e){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===n?r[i]=e:r[i]=$O(o,n,e)}),new gr(t.segments,r)}var A_=class{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&T_(r[0]))throw new At(4003,!1);let i=r.find(w0);if(i&&i!==PO(r))throw new At(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iae(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new A_(!0,0,t);let n=0,e=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,u])=>{s[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?n++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new A_(e,n,r)}var Sf=class{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function oae(t,n,e){if(t.isAbsolute)return new Sf(n,!0,0);if(!e)return new Sf(n,!1,NaN);if(e.parent===null)return new Sf(e,!0,0);let r=T_(t.commands[0])?0:1,i=e.segments.length-1+r;return aae(e,i,t.numberOfDoubleDots)}function aae(t,n,e){let r=t,i=n,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new At(4005,!1);i=r.segments.length}return new Sf(r,!1,i-o)}function sae(t){return w0(t[0])?t[0].outlets:{[An]:t}}function KO(t,n,e){if(t??=new gr([],{}),t.segments.length===0&&t.hasChildren())return v0(t,n,e);let r=lae(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new gr(t.segments.slice(0,r.pathIndex),{});return o.children[An]=new gr(t.segments.slice(r.pathIndex),t.children),v0(o,0,i)}else return r.match&&i.length===0?new gr(t.segments,{}):r.match&&!t.hasChildren()?tD(t,n,e):r.match?v0(t,0,i):tD(t,n,e)}function v0(t,n,e){if(e.length===0)return new gr(t.segments,{});{let r=sae(e),i={};if(Object.keys(r).some(o=>o!==An)&&t.children[An]&&t.numberOfChildren===1&&t.children[An].segments.length===0){let o=v0(t.children[An],n,e);return new gr(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=KO(t.children[o],n,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new gr(t.segments,i)}}function lae(t,n,e){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return o;let a=t.segments[i],s=e[r];if(w0(s))break;let l=`${s}`,u=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!kO(l,u,a))return o;r+=2}else{if(!kO(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tD(t,n,e){let r=t.segments.slice(0,n),i=0;for(;i<e.length;){let o=e[i];if(w0(o)){let l=uae(o.outlets);return new gr(r,l)}if(i===0&&T_(e[0])){let l=t.segments[n];r.push(new fp(l.path,AO(e[0]))),i++;continue}let a=w0(o)?o.outlets[An]:`${o}`,s=i<e.length-1?e[i+1]:null;a&&s&&T_(s)?(r.push(new fp(a,AO(s))),i+=2):(r.push(new fp(a,{})),i++)}return new gr(r,{})}function uae(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=tD(new gr([],{}),0,r))}),n}function AO(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function kO(t,n,e){return t==e.path&&Vl(n,e.parameters)}var y0="imperative",no=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(no||{}),ws=class{constructor(n,e){this.id=n,this.url=e}},Af=class extends ws{constructor(n,e,r="imperative",i=null){super(n,e),this.type=no.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vu=class extends ws{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=no.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ya=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ya||{}),k_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(k_||{}),Qc=class extends ws{constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i,this.type=no.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zc=class extends ws{constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i,this.type=no.NavigationSkipped}},x0=class extends ws{constructor(n,e,r,i){super(n,e),this.error=r,this.target=i,this.type=no.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},M_=class extends ws{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=no.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nD=class extends ws{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=no.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rD=class extends ws{constructor(n,e,r,i,o){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=no.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iD=class extends ws{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=no.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oD=class extends ws{constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i,this.type=no.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aD=class{constructor(n){this.route=n,this.type=no.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sD=class{constructor(n){this.route=n,this.type=no.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lD=class{constructor(n){this.snapshot=n,this.type=no.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uD=class{constructor(n){this.snapshot=n,this.type=no.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cD=class{constructor(n){this.snapshot=n,this.type=no.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dD=class{constructor(n){this.snapshot=n,this.type=no.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R_=class{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=no.Scroll}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},C0=class{},I0=class{constructor(n){this.url=n}};var pD=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new k0,this.attachRef=null}},k0=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new pD,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),N_=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=hD(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=hD(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=fD(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return fD(n,this._root).map(e=>e.value)}};function hD(t,n){if(t===n.value)return n;for(let e of n.children){let r=hD(t,e);if(r)return r}return null}function fD(t,n){if(t===n.value)return[n];for(let e of n.children){let r=fD(t,e);if(r.length)return r.unshift(n),r}return[]}var Ka=class{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function If(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var F_=class extends N_{constructor(n,e){super(n),this.snapshot=e,ID(this,n)}toString(){return this.snapshot.toString()}};function YO(t){let n=cae(t),e=new mo([new fp("",{})]),r=new mo({}),i=new mo({}),o=new mo({}),a=new mo(""),s=new jl(e,r,o,a,i,An,t,n.root);return s.snapshot=n.root,new F_(new Ka(s,[]),n)}function cae(t){let n={},e={},r={},i="",o=new S0([],n,r,i,e,An,t,null,{});return new O_("",new Ka(o,[]))}var jl=class{constructor(n,e,r,i,o,a,s,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(_n(u=>u[T0]))??tn(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_n(n=>Df(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_n(n=>Df(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function CD(t,n,e="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:nt(nt({},n.params),t.params),data:nt(nt({},n.data),t.data),resolve:nt(nt(nt(nt({},t.data),n.data),i?.data),t._resolvedData)}:r={params:nt({},t.params),data:nt({},t.data),resolve:nt(nt({},t.data),t._resolvedData??{})},i&&QO(i)&&(r.resolve[T0]=i.title),r}var S0=class{get title(){return this.data?.[T0]}constructor(n,e,r,i,o,a,s,l,u){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Df(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Df(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},O_=class extends N_{constructor(n,e){super(e),this.url=n,ID(this,e)}toString(){return XO(this._root)}};function ID(t,n){n.value._routerState=t,n.children.forEach(e=>ID(t,e))}function XO(t){let n=t.children.length>0?` { ${t.children.map(XO).join(", ")} } `:"";return`${t.value}${n}`}function YE(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Vl(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Vl(n.params,e.params)||t.paramsSubject.next(e.params),Voe(n.url,e.url)||t.urlSubject.next(e.url),Vl(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mD(t,n){let e=Vl(t.params,n.params)&&zoe(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||mD(t.parent,n.parent))}function QO(t){return typeof t.title=="string"||t.title===null}var SD=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=An,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=Qe(k0),this.location=Qe(Ys),this.changeDetector=Qe(br),this.environmentInjector=Qe(Eo),this.inputBinder=Qe(j_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new At(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new At(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new At(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new At(4013,!1);this._activatedRoute=e;let i=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new gD(e,s,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Un({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[eo]})}}return t})(),gD=class t{__ngOutletInjector(n){return new t(this.route,this.childContexts,n)}constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===jl?this.route:n===k0?this.childContexts:this.parent.get(n,e)}},j_=new Lt(""),MO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=_g([r.queryParams,r.params,r.data]).pipe(ma(([o,a,s],l)=>(s=nt(nt(nt({},o),a),s),l===0?tn(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let a=EN(r.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})();function dae(t,n,e){let r=E0(t,n._root,e?e._root:void 0);return new F_(r,n)}function E0(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let i=pae(t,n,e);return new Ka(r,i)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>E0(t,s)),a}}let r=hae(n.value),i=n.children.map(o=>E0(t,o));return new Ka(r,i)}}function pae(t,n,e){return n.children.map(r=>{for(let i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return E0(t,r,i);return E0(t,r)})}function hae(t){return new jl(new mo(t.url),new mo(t.params),new mo(t.queryParams),new mo(t.fragment),new mo(t.data),t.outlet,t.component,t)}var ZO="ngNavigationCancelingError";function JO(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Tf(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=eP(!1,Ya.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function eP(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[ZO]=!0,e.cancellationCode=n,e}function fae(t){return tP(t)&&Tf(t.url)}function tP(t){return!!t&&t[ZO]}var mae=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ct({type:t,selectors:[["ng-component"]],standalone:!0,features:[Wt],decls:1,vars:0,template:function(r,i){r&1&&Ve(0,"router-outlet")},dependencies:[SD],encapsulation:2})}}return t})();function gae(t,n){return t.providers&&!t._injector&&(t._injector=Ob(t.providers,n,`Route: ${t.path}`)),t._injector??n}function ED(t){let n=t.children&&t.children.map(ED),e=n?Rn(nt({},t),{children:n}):nt({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==An&&(e.component=mae),e}function Ul(t){return t.outlet||An}function vae(t,n){let e=t.filter(r=>Ul(r)===n);return e.push(...t.filter(r=>Ul(r)!==n)),e}function M0(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var yae=(t,n,e,r)=>_n(i=>(new vD(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)),vD=class{constructor(n,e,r,i,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),YE(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let i=If(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,e,r){let i=n.value,o=e?e.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,o=If(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,o=If(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let i=If(e);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dD(o.value.snapshot))}),n.children.length&&this.forwardEvent(new uD(n.value.snapshot))}activateRoutes(n,e,r){let i=n.value,o=e?e.value:null;if(YE(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),YE(s.route.value),this.activateChildRoutes(n,null,a.children)}else{let s=M0(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}}else this.activateChildRoutes(n,null,r)}},P_=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Ef=class{constructor(n,e){this.component=n,this.route=e}};function bae(t,n,e){let r=t._root,i=n?n._root:null;return m0(r,i,e,[r.value])}function _ae(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Mf(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!wk(t)?t:n.get(t):r}function m0(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=If(n);return t.children.forEach(a=>{wae(a,o[a.value.outlet],e,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>b0(s,e.getContext(a),i)),i}function wae(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=xae(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new P_(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?m0(t,n,s?s.children:null,r,i):m0(t,n,e,r,i),l&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Ef(s.outlet.component,a))}else a&&b0(n,s,i),i.canActivateChecks.push(new P_(r)),o.component?m0(t,null,s?s.children:null,r,i):m0(t,null,e,r,i);return i}function xae(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!mp(t.url,n.url);case"pathParamsOrQueryParamsChange":return!mp(t.url,n.url)||!Vl(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mD(t,n)||!Vl(t.queryParams,n.queryParams);case"paramsChange":default:return!mD(t,n)}}function b0(t,n,e){let r=If(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?n?b0(a,n.children.getContext(o),e):b0(a,null,e):b0(a,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Ef(n.outlet.component,i)):e.canDeactivateChecks.push(new Ef(null,i)):e.canDeactivateChecks.push(new Ef(null,i))}function R0(t){return typeof t=="function"}function Cae(t){return typeof t=="boolean"}function Iae(t){return t&&R0(t.canLoad)}function Sae(t){return t&&R0(t.canActivate)}function Eae(t){return t&&R0(t.canActivateChild)}function Dae(t){return t&&R0(t.canDeactivate)}function Tae(t){return t&&R0(t.canMatch)}function nP(t){return t instanceof Cu||t?.name==="EmptyError"}var I_=Symbol("INITIAL_VALUE");function kf(){return ma(t=>_g(t.map(n=>n.pipe(Su(1),iC(I_)))).pipe(_n(n=>{for(let e of n)if(e!==!0){if(e===I_)return I_;if(e===!1||e instanceof Xc)return e}return!0}),fa(n=>n!==I_),Su(1)))}function Aae(t,n){return Ti(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?tn(Rn(nt({},e),{guardsResult:!0})):kae(a,r,i,t).pipe(Ti(s=>s&&Cae(s)?Mae(r,o,t,n):tn(s)),_n(s=>Rn(nt({},e),{guardsResult:s})))})}function kae(t,n,e,r){return Vr(t).pipe(Ti(i=>Pae(i.component,i.route,e,n,r)),Us(i=>i!==!0,!0))}function Mae(t,n,e,r){return Vr(n).pipe(Iu(i=>Wh(Nae(i.route.parent,r),Rae(i.route,r),Oae(t,i.path,e),Fae(t,i.route,e))),Us(i=>i!==!0,!0))}function Rae(t,n){return t!==null&&n&&n(new cD(t)),tn(!0)}function Nae(t,n){return t!==null&&n&&n(new lD(t)),tn(!0)}function Fae(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return tn(!0);let i=r.map(o=>_y(()=>{let a=M0(n)??e,s=Mf(o,a),l=Sae(s)?s.canActivate(n,t):Ks(a,()=>s(n,t));return Jc(l).pipe(Us())}));return tn(i).pipe(kf())}function Oae(t,n,e){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>_ae(a)).filter(a=>a!==null).map(a=>_y(()=>{let s=a.guards.map(l=>{let u=M0(a.node)??e,c=Mf(l,u),d=Eae(c)?c.canActivateChild(r,t):Ks(u,()=>c(r,t));return Jc(d).pipe(Us())});return tn(s).pipe(kf())}));return tn(o).pipe(kf())}function Pae(t,n,e,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return tn(!0);let a=o.map(s=>{let l=M0(n)??i,u=Mf(s,l),c=Dae(u)?u.canDeactivate(t,n,e,r):Ks(l,()=>u(t,n,e,r));return Jc(c).pipe(Us())});return tn(a).pipe(kf())}function Lae(t,n,e,r){let i=n.canLoad;if(i===void 0||i.length===0)return tn(!0);let o=i.map(a=>{let s=Mf(a,t),l=Iae(s)?s.canLoad(n,e):Ks(t,()=>s(n,e));return Jc(l)});return tn(o).pipe(kf(),rP(r))}function rP(t){return Yx(Vi(n=>{if(Tf(n))throw JO(t,n)}),_n(n=>n===!0))}function Bae(t,n,e,r){let i=n.canMatch;if(!i||i.length===0)return tn(!0);let o=i.map(a=>{let s=Mf(a,t),l=Tae(s)?s.canMatch(n,e):Ks(t,()=>s(n,e));return Jc(l)});return tn(o).pipe(kf(),rP(r))}var D0=class{constructor(n){this.segmentGroup=n||null}},L_=class extends Error{constructor(n){super(),this.urlTree=n}};function Cf(t){return Hh(new D0(t))}function Vae(t){return Hh(new At(4e3,!1))}function jae(t){return Hh(eP(!1,Ya.GuardRejected))}var yD=class{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return tn(r);if(i.numberOfChildren>1||!i.children[An])return Vae(n.redirectTo);i=i.children[An]}}applyRedirectCommands(n,e,r){let i=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r);if(e.startsWith("/"))throw new L_(i);return i}applyRedirectCreateUrlTree(n,e,r,i){let o=this.createSegmentGroup(n,e.root,r,i);return new Xc(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=e[s]}else r[i]=o}),r}createSegmentGroup(n,e,r,i){let o=this.createSegments(n,e.segments,r,i),a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(n,l,r,i)}),new gr(o,a)}createSegments(n,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,e,r){let i=r[e.path.substring(1)];if(!i)throw new At(4001,!1);return i}findOrReturn(n,e){let r=0;for(let i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}},bD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uae(t,n,e,r,i){let o=DD(t,n,e);return o.matched?(r=gae(n,r),Bae(r,n,e,i).pipe(_n(a=>a===!0?o:nt({},bD)))):tn(o)}function DD(t,n,e){if(n.path==="**")return Hae(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?nt({},bD):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||Boe)(e,t,n);if(!i)return nt({},bD);let o={};Object.entries(i.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=i.consumed.length>0?nt(nt({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Hae(t){return{matched:!0,parameters:t.length>0?PO(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function RO(t,n,e,r){return e.length>0&&qae(t,e,r)?{segmentGroup:new gr(n,Wae(r,new gr(e,t.children))),slicedSegments:[]}:e.length===0&&Gae(t,e,r)?{segmentGroup:new gr(t.segments,zae(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new gr(t.segments,t.children),slicedSegments:e}}function zae(t,n,e,r){let i={};for(let o of e)if(U_(t,n,o)&&!r[Ul(o)]){let a=new gr([],{});i[Ul(o)]=a}return nt(nt({},r),i)}function Wae(t,n){let e={};e[An]=n;for(let r of t)if(r.path===""&&Ul(r)!==An){let i=new gr([],{});e[Ul(r)]=i}return e}function qae(t,n,e){return e.some(r=>U_(t,n,r)&&Ul(r)!==An)}function Gae(t,n,e){return e.some(r=>U_(t,n,r))}function U_(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function $ae(t,n,e,r){return Ul(t)!==r&&(r===An||!U_(n,e,t))?!1:DD(n,t,e).matched}function Kae(t,n,e){return n.length===0&&!t.children[e]}var _D=class{};function Yae(t,n,e,r,i,o,a="emptyOnly"){return new wD(t,n,e,r,i,a,o).recognize()}var Xae=31,wD=class{constructor(n,e,r,i,o,a,s){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new yD(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new At(4002,`'${n.segmentGroup}'`)}recognize(){let n=RO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(_n(e=>{let r=new S0([],Object.freeze({}),Object.freeze(nt({},this.urlTree.queryParams)),this.urlTree.fragment,{},An,this.rootComponentType,null,{}),i=new Ka(r,e),o=new O_("",i),a=rae(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,An).pipe(Dc(r=>{if(r instanceof L_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof D0?this.noMatchError(r):r}))}inheritParamsAndData(n,e){let r=n.value,i=CD(r,e,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),n.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(n,e,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,i,!0).pipe(_n(o=>o instanceof Ka?[o]:[]))}processChildren(n,e,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Vr(i).pipe(Iu(o=>{let a=r.children[o],s=vae(e,o);return this.processSegmentGroup(n,s,a,o)}),rC((o,a)=>(o.push(...a),o)),Tc(null),nC(),Ti(o=>{if(o===null)return Cf(r);let a=iP(o);return Qae(a),tn(a)}))}processSegment(n,e,r,i,o,a){return Vr(e).pipe(Iu(s=>this.processSegmentAgainstRoute(s._injector??n,e,s,r,i,o,a).pipe(Dc(l=>{if(l instanceof D0)return tn(null);throw l}))),Us(s=>!!s),Dc(s=>{if(nP(s))return Kae(r,i,o)?tn(new _D):Cf(r);throw s}))}processSegmentAgainstRoute(n,e,r,i,o,a,s){return $ae(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,o,a):Cf(i):Cf(i)}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,o,a){let{matched:s,consumedSegments:l,positionalParamSegments:u,remainingSegments:c}=DD(e,i,o);if(!s)return Cf(e);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xae&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ti(p=>this.processSegment(n,r,e,p.concat(c),a,!1)))}matchSegmentAgainstRoute(n,e,r,i,o){let a=Uae(e,r,i,n,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(ma(s=>s.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(ma(({routes:l})=>{let u=r._loadedInjector??n,{consumedSegments:c,remainingSegments:d,parameters:p}=s,h=new S0(c,p,Object.freeze(nt({},this.urlTree.queryParams)),this.urlTree.fragment,Jae(r),Ul(r),r.component??r._loadedComponent??null,r,ese(r)),{segmentGroup:f,slicedSegments:m}=RO(e,c,d,l);if(m.length===0&&f.hasChildren())return this.processChildren(u,l,f).pipe(_n(y=>y===null?null:new Ka(h,y)));if(l.length===0&&m.length===0)return tn(new Ka(h,[]));let g=Ul(r)===o;return this.processSegment(u,l,f,m,g?An:o,!0).pipe(_n(y=>new Ka(h,y instanceof Ka?[y]:[])))}))):Cf(e)))}getChildConfig(n,e,r){return e.children?tn({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?tn({routes:e._loadedRoutes,injector:e._loadedInjector}):Lae(n,e,r,this.urlSerializer).pipe(Ti(i=>i?this.configLoader.loadChildren(n,e).pipe(Vi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):jae(e))):tn({routes:[],injector:n})}};function Qae(t){t.sort((n,e)=>n.value.outlet===An?-1:e.value.outlet===An?1:n.value.outlet.localeCompare(e.value.outlet))}function Zae(t){let n=t.value.routeConfig;return n&&n.path===""}function iP(t){let n=[],e=new Set;for(let r of t){if(!Zae(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):n.push(r)}for(let r of e){let i=iP(r.children);n.push(new Ka(r.value,i))}return n.filter(r=>!e.has(r))}function Jae(t){return t.data||{}}function ese(t){return t.resolve||{}}function tse(t,n,e,r,i,o){return Ti(a=>Yae(t,n,e,r,a.extractedUrl,i,o).pipe(_n(({state:s,tree:l})=>Rn(nt({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function nse(t,n){return Ti(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return tn(e);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let u of oP(l))a.add(u);let s=0;return Vr(a).pipe(Iu(l=>o.has(l)?rse(l,r,t,n):(l.data=CD(l,l.parent,t).resolve,tn(void 0))),Vi(()=>s++),qh(1),Ti(l=>s===a.size?tn(e):Ua))})}function oP(t){let n=t.children.map(e=>oP(e)).flat();return[t,...n]}function rse(t,n,e,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!QO(i)&&(o[T0]=i.title),ise(o,t,n,r).pipe(_n(a=>(t._resolvedData=a,t.data=CD(t,t.parent,e).resolve,null)))}function ise(t,n,e,r){let i=ZE(t);if(i.length===0)return tn({});let o={};return Vr(i).pipe(Ti(a=>ose(t[a],n,e,r).pipe(Us(),Vi(s=>{o[a]=s}))),qh(1),tC(o),Dc(a=>nP(a)?Ua:Hh(a)))}function ose(t,n,e,r){let i=M0(n)??r,o=Mf(t,i),a=o.resolve?o.resolve(n,e):Ks(i,()=>o(n,e));return Jc(a)}function XE(t){return ma(n=>{let e=t(n);return e?Vr(e).pipe(_n(()=>n)):tn(n)})}var aP=(()=>{class t{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===An);return r}getResolvedTitleForRoute(e){return e.data[T0]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(ase),providedIn:"root"})}}return t})(),ase=(()=>{class t extends aP{constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(Bt(wF))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),N0=new Lt("",{providedIn:"root",factory:()=>({})}),B_=new Lt(""),TD=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Qe(Wb)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return tn(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Jc(e.loadComponent()).pipe(_n(sP),Vi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Ac(()=>{this.componentLoaders.delete(e)})),i=new Uh(r,()=>new Fr).pipe(jh());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sse(r,this.compiler,e,this.onLoadEndListener).pipe(Ac(()=>{this.childrenLoaders.delete(r)})),a=new Uh(o,()=>new Fr).pipe(jh());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sse(t,n,e,r){return Jc(t.loadChildren()).pipe(_n(sP),Ti(i=>i instanceof Fg||Array.isArray(i)?tn(i):Vr(n.compileModuleAsync(i))),_n(i=>{r&&r(t);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(e).injector,a=o.get(B_,[],{optional:!0,self:!0}).flat()),{routes:a.map(ED),injector:o}}))}function lse(t){return t&&typeof t=="object"&&"default"in t}function sP(t){return lse(t)?t.default:t}var AD=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(use),providedIn:"root"})}}return t})(),use=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lP=new Lt(""),uP=new Lt("");function cse(t,n,e){let r=t.get(uP),i=t.get(nr);return t.get(En).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,a=new Promise(u=>{o=u}),s=i.startViewTransition(()=>(o(),dse(t))),{onViewTransitionCreated:l}=r;return l&&Ks(t,()=>l({transition:s,from:n,to:e})),a})}function dse(t){return new Promise(n=>{Fb(n,{injector:t})})}var kD=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fr,this.transitionAbortSubject=new Fr,this.configLoader=Qe(TD),this.environmentInjector=Qe(Eo),this.urlSerializer=Qe(A0),this.rootContexts=Qe(k0),this.location=Qe(vf),this.inputBindingEnabled=Qe(j_,{optional:!0})!==null,this.titleStrategy=Qe(aP),this.options=Qe(N0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Qe(AD),this.createViewTransition=Qe(lP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tn(void 0),this.rootComponentType=null;let e=i=>this.events.next(new aD(i)),r=i=>this.events.next(new sD(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(Rn(nt(nt({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new mo({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:y0,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fa(o=>o.id!==0),_n(o=>Rn(nt({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ma(o=>{let a=!1,s=!1;return tn(o).pipe(ma(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ya.SupersededByNewNavigation),Ua;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Rn(nt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&c!=="reload"){let d="";return this.events.next(new Zc(l.id,this.urlSerializer.serialize(l.rawUrl),d,k_.IgnoredSameUrlNavigation)),l.resolve(null),Ua}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return tn(l).pipe(ma(d=>{let p=this.transitions?.getValue();return this.events.next(new Af(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?Ua:Promise.resolve(d)}),tse(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Vi(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Rn(nt({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new M_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:f,extras:m}=l,g=new Af(d,this.urlSerializer.serialize(p),h,f);this.events.next(g);let y=YO(this.rootComponentType).snapshot;return this.currentTransition=o=Rn(nt({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:Rn(nt({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,tn(o)}else{let d="";return this.events.next(new Zc(l.id,this.urlSerializer.serialize(l.extractedUrl),d,k_.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ua}}),Vi(l=>{let u=new nD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),_n(l=>(this.currentTransition=o=Rn(nt({},l),{guards:bae(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Aae(this.environmentInjector,l=>this.events.next(l)),Vi(l=>{if(o.guardsResult=l.guardsResult,Tf(l.guardsResult))throw JO(this.urlSerializer,l.guardsResult);let u=new rD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),fa(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ya.GuardRejected),!1)),XE(l=>{if(l.guards.canActivateChecks.length)return tn(l).pipe(Vi(u=>{let c=new iD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),ma(u=>{let c=!1;return tn(u).pipe(nse(this.paramsInheritanceStrategy,this.environmentInjector),Vi({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(u,"",Ya.NoDataFromResolver)}}))}),Vi(u=>{let c=new oD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}))}),XE(l=>{let u=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Vi(p=>{c.component=p}),_n(()=>{})));for(let p of c.children)d.push(...u(p));return d};return _g(u(l.targetSnapshot.root)).pipe(Tc(null),Su(1))}),XE(()=>this.afterPreactivation()),ma(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,c=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return c?Vr(c).pipe(_n(()=>o)):tn(o)}),_n(l=>{let u=dae(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Rn(nt({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Vi(()=>{this.events.next(new C0)}),yae(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Su(1),Vi({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),oC(this.transitionAbortSubject.pipe(Vi(l=>{throw l}))),Ac(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",Ya.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Dc(l=>{if(s=!0,tP(l))this.events.next(new Qc(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),fae(l)?this.events.next(new I0(l.url)):o.resolve(!1);else{this.events.next(new x0(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ua}))}))}cancelNavigationTransition(e,r,i){let o=new Qc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pse(t){return t!==y0}var hse=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(fse),providedIn:"root"})}}return t})(),xD=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},fse=(()=>{class t extends xD{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cP=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:()=>Qe(mse),providedIn:"root"})}}return t})(),mse=(()=>{class t extends cP{constructor(){super(...arguments),this.location=Qe(vf),this.urlSerializer=Qe(A0),this.options=Qe(N0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Qe(AD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof Af)this.stateMemento=this.createStateMemento();else if(e instanceof Zc)this.rawUrlTree=r.initialUrl;else if(e instanceof M_){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else e instanceof C0?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):e instanceof Qc&&(e.code===Ya.GuardRejected||e.code===Ya.NoDataFromResolver)?this.restoreHistory(r):e instanceof x0?this.restoreHistory(r,!0):e instanceof Vu&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=nt(nt({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=nt(nt({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(t)))(i||t)}})()}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),g0=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(g0||{});function dP(t,n){t.events.pipe(fa(e=>e instanceof Vu||e instanceof Qc||e instanceof x0||e instanceof Zc),_n(e=>e instanceof Vu||e instanceof Zc?g0.COMPLETE:(e instanceof Qc?e.code===Ya.Redirect||e.code===Ya.SupersededByNewNavigation:!1)?g0.REDIRECTING:g0.FAILED),fa(e=>e!==g0.REDIRECTING),Su(1)).subscribe(()=>{n()})}function gse(t){throw t}var vse={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ta=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Qe(jb),this.stateManager=Qe(cP),this.options=Qe(N0,{optional:!0})||{},this.pendingTasks=Qe(Vc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Qe(kD),this.urlSerializer=Qe(A0),this.location=Qe(vf),this.urlHandlingStrategy=Qe(AD),this._events=new Fr,this.errorHandler=this.options.errorHandler||gse,this.navigated=!1,this.routeReuseStrategy=Qe(hse),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Qe(B_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Qe(j_,{optional:!0}),this.eventsSubscription=new Bi,this.isNgZoneEnabled=Qe(En)instanceof En&&En.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Qc&&r.code!==Ya.Redirect&&r.code!==Ya.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Vu)this.navigated=!0;else if(r instanceof I0){let a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||pse(i.source)};this.scheduleNavigation(a,y0,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_se(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),y0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=nt({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ED),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,c=null;switch(s){case"merge":c=nt(nt({},this.currentUrlTree.queryParams),o);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}c!==null&&(c=this.removeEmptyProps(c));let d;try{let p=i?i.snapshot:this.routerState.snapshot.root;d=qO(p)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),d=this.currentUrlTree.root}return GO(d,e,c,u??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Tf(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,y0,null,r)}navigate(e,r={skipLocationChange:!1}){return bse(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=nt({},vse):r===!1?i=nt({},yse):i=r,Tf(e))return DO(this.currentUrlTree,e,i);let o=this.parseUrl(e);return DO(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,u;a?(s=a.resolve,l=a.reject,u=a.promise):u=new Promise((d,p)=>{s=d,l=p});let c=this.pendingTasks.add();return dP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bse(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new At(4008,!1)}function _se(t){return!(t instanceof C0)&&!(t instanceof I0)}var V_=class{};var wse=(()=>{class t{constructor(e,r,i,o,a){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(fa(e=>e instanceof Vu),Iu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ob(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return Vr(i).pipe(zh())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=tn(null);let o=i.pipe(Ti(a=>a===null?tn(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Vr([o,a]).pipe(zh())}else return o})}static{this.\u0275fac=function(r){return new(r||t)(Bt(ta),Bt(Wb),Bt(Eo),Bt(V_),Bt(TD))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pP=new Lt(""),xse=(()=>{class t{constructor(e,r,i,o,a={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=Qe(Eo),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Af?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Vu?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Zc&&e.code===k_.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof R_&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>xu(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Fb(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new R_(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){hR()}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac})}}return t})();function Cse(t){return t.routerState.root}function F0(t,n){return{\u0275kind:t,\u0275providers:n}}function Ise(){let t=Qe(Zo);return n=>{let e=t.get(Fu);if(n!==e.components[0])return;let r=t.get(ta),i=t.get(hP);t.get(MD)===1&&r.initialNavigation(),t.get(fP,null,jn.Optional)?.setUpPreloading(),t.get(pP,null,jn.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hP=new Lt("",{factory:()=>new Fr}),MD=new Lt("",{providedIn:"root",factory:()=>1});function Sse(){return F0(2,[{provide:MD,useValue:0},{provide:zb,multi:!0,deps:[Zo],useFactory:n=>{let e=n.get(PN,Promise.resolve());return()=>e.then(()=>new Promise(r=>{let i=n.get(ta),o=n.get(hP);dP(i,()=>{r(!0)}),n.get(kD).afterPreactivation=()=>(r(!0),o.closed?tn(void 0):o),i.initialNavigation()}))}}])}function Ese(){return F0(3,[{provide:zb,multi:!0,useFactory:()=>{let n=Qe(ta);return()=>{n.setUpLocationChangeListener()}}},{provide:MD,useValue:2}])}var fP=new Lt("");function Dse(t){return F0(0,[{provide:fP,useExisting:wse},{provide:V_,useExisting:t}])}function Tse(){return F0(8,[MO,{provide:j_,useExisting:MO}])}function Ase(t){let n=[{provide:lP,useValue:cse},{provide:uP,useValue:nt({skipNextTransition:!!t?.skipInitialTransition},t)}];return F0(9,n)}var NO=new Lt("ROUTER_FORROOT_GUARD"),kse=[vf,{provide:A0,useClass:_0},ta,k0,{provide:jl,useFactory:Cse,deps:[ta]},TD,[]],RD=(()=>{class t{constructor(e){}static forRoot(e,r){return{ngModule:t,providers:[kse,[],{provide:B_,multi:!0,useValue:e},{provide:NO,useFactory:Fse,deps:[[ta,new Lg,new db]]},{provide:N0,useValue:r||{}},r?.useHash?Rse():Nse(),Mse(),r?.preloadingStrategy?Dse(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Ose(r):[],r?.bindToComponentInputs?Tse().\u0275providers:[],r?.enableViewTransitions?Ase().\u0275providers:[],Pse()]}}static forChild(e){return{ngModule:t,providers:[{provide:B_,multi:!0,useValue:e}]}}static{this.\u0275fac=function(r){return new(r||t)(Bt(NO,8))}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({})}}return t})();function Mse(){return{provide:pP,useFactory:()=>{let t=Qe(HN),n=Qe(En),e=Qe(N0),r=Qe(kD),i=Qe(A0);return e.scrollOffset&&t.setOffset(e.scrollOffset),new xse(i,r,t,n,e)}}}function Rse(){return{provide:lp,useClass:BN}}function Nse(){return{provide:lp,useClass:HS}}function Fse(t){return"guarded"}function Ose(t){return[t.initialNavigation==="disabled"?Ese().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Sse().\u0275providers:[]]}var FO=new Lt("");function Pse(){return[{provide:FO,useFactory:Ise},{provide:mf,multi:!0,useExisting:FO}]}var ND=function(t,n){return ND=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},ND(t,n)};function kt(t,n){ND(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var xs=function(){return xs=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},xs.apply(this,arguments)};function Et(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(t,n||[])).next())})}function Dt(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=n.call(t,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var $P=function(t,n){return($P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function Hu(t,n){function e(){this.constructor=t}$P(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var $_=function(){return($_=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Ln(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(c){o(c)}}function s(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){u.done?i(u.value):new e(function(c){c(u.value)}).then(a,s)}l((r=r.apply(t,n||[])).next())})}function Bn(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var yp={},FD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Lse(t,n){yp[t]=n}function ql(t){t in yp||(yp[t]=Bse(t));var n=yp[t];return n.isContextLost()?(delete yp[t],ql(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),yp[t])}function Bse(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return n.addEventListener("webglcontextlost",function(e){e.preventDefault(),delete yp[t]},!1),t===1?n.getContext("webgl",FD)||n.getContext("experimental-webgl",FD):n.getContext("webgl2",FD)}function Vse(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}function KP(t){for(var n=t.length,e=0,r=0;n>0;)r=Math.random()*n|0,e=t[--n],t[n]=t[r],t[r]=e}function Z_(t,n,e){return Math.max(t,Math.min(n,e))}function Sp(t){return t%2==0?t:t+1}function YP(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function XP(t,n){var e=Math.random();return n*e+(1-e)*t}function jse(t,n){for(var e=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(n[r]);e+=i*i}return e}function de(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function _r(t,n,e){e===void 0&&(e=""),de(bo(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function Tp(t){de(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Ep(t,n){if(n===void 0&&(n=[]),n==null&&(n=[]),Array.isArray(t)||Wl(t))for(var e=0;e<t.length;++e)Ep(t[e],n);else n.push(t);return n}function Yt(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Use(t){return t.length===0}function bo(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Ca(t){return t%1==0}function QP(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function GD(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Hse(t){for(var n=new Uint32Array(t),e=0;e<t;++e)n[e]=e;return KP(n),n}function xp(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function $D(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{var s=n(++o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function ZP(t,n){for(var e=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function io(t,n){var e=n.length;return de((t=t==null?n.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),de(t.every(function(r){return Ca(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function rd(t,n){for(var e=[],r=[],i=n==null?null:io(n,t).sort(),o=0,a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(i[o]==null||i[o]>a)&&t[a]===1&&(e.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(e.push(t[a]),r.push(a))}return{newShape:e,keptDims:r}}function J_(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function U0(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function JP(t,n,e){if(n==="float32")for(var r=0;r<t.length;r++){var i=t[r];if(isNaN(i)||!isFinite(i))throw Error("The result of the '"+e+"' is "+i+".")}}function eL(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function tL(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function Wl(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function pT(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function nL(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=2*e.length}),n}function H0(t){return typeof t=="string"||t instanceof String}function rL(t){return typeof t=="boolean"}function iL(t){return typeof t=="number"}function Vf(t){return Array.isArray(t)?Vf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":iL(t)?"float32":H0(t)?"string":rL(t)?"bool":"float32"}function e2(t){return!!(t&&t.constructor&&t.call&&t.apply)}function t2(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function id(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function hT(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ep(t)),e&&eL(t,n),zse(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function oL(t,n,e){var r=new Array;if(n.length===1)for(var i=n[0],o=0;o<i;o++)r[o]=e[t+o];else{i=n[0];var a=n.slice(1),s=a.reduce(function(l,u){return l*u});for(o=0;o<i;o++)r[o]=oL(t+o*s,a,e)}return r}function KD(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,i){return r*i});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return oL(0,t,n)}function zse(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function fT(t,n){for(var e=jf(t,n),r=0;r<e.length;r++)e[r]=1;return e}function jf(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function z0(){if(typeof performance<"u")return performance.now();if(typeof process<"u"){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function mT(t){t.forEach(function(n){de(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}var wFe=Object.freeze({shuffle:KP,clamp:Z_,nearestLargerEven:Sp,sum:YP,randUniform:XP,distSquared:jse,assert:de,assertShapesMatch:_r,assertNonNull:Tp,flatten:Ep,sizeFromShape:Yt,isScalarShape:Use,arraysEqual:bo,isInt:Ca,tanh:QP,sizeToSquarishShape:GD,createShuffledIndices:Hse,rightPad:xp,repeatedTry:$D,inferFromImplicitShape:ZP,parseAxisParam:io,squeezeShape:rd,getTypedArrayFromDType:J_,getArrayFromDType:U0,checkComputationForErrors:JP,checkConversionForErrors:eL,hasEncodingLoss:tL,isTypedArray:Wl,bytesPerElement:pT,bytesFromStringArray:nL,isString:H0,isBoolean:rL,isNumber:iL,inferDtype:Vf,isFunction:e2,nearestDivisor:t2,computeStrides:id,toTypedArray:hT,toNestedArray:KD,makeOnesTypedArray:fT,makeZerosTypedArray:jf,now:z0,assertNonNegativeIntegerDimensions:mT}),Wse=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new qse)}return t.prototype.profileKernel=function(n,e){var r,i=this,o=this.backendTimer.time(function(){r=e()});return(Array.isArray(r)?r:[r]).forEach(function(a){var s=a.dataSync();JP(s,a.dtype,n),o.then(function(l){var u="";l.getExtraProfileInfo!=null&&(u=l.getExtraProfileInfo()),i.logger.logKernelProfile(n,a,s,l.kernelMs,u)})}),r},t}(),qse=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,i,o){var a=xp(i+"ms",9),s=xp(n,25),l=e.rank,u=e.size,c=xp(e.shape.toString(),14);console.log("%c"+s+"	%c"+a+"	%c"+l+"D "+c+"	%c"+u+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green")},t}(),mP=20,O0=3,OD=7;function Gse(t,n,e,r){var i=id(n),o=$se(t,n,e,i),a=n.length,s=K_(t,n,e,i,o),l=["Tensor"];return r&&(l.push("  dtype: "+e),l.push("  rank: "+a),l.push("  shape: ["+n+"]"),l.push("  values:")),l.push(s.map(function(u){return"    "+u}).join(`
`)),l.join(`
`)}function $se(t,n,e,r){var i=Yt(n),o=r[r.length-1],a=new Array(o).fill(0),s=n.length,l=e==="complex64"?L0(t):t;if(s>1)for(var u=0;u<i/o;u++)for(var c=u*o,d=0;d<o;d++)a[d]=Math.max(a[d],P0(l[c+d],0,e).length);return a}function P0(t,n,e){return xp(Array.isArray(t)?parseFloat(t[0].toFixed(OD))+" + "+parseFloat(t[1].toFixed(OD))+"j":H0(t)?"'"+t+"'":e==="bool"?aL(t):parseFloat(t.toFixed(OD)).toString(),n)}function aL(t){return t===0?"false":"true"}function K_(t,n,e,r,i,o){o===void 0&&(o=!0);var a=e==="complex64"?2:1,s=n[0],l=n.length;if(l===0)return e==="complex64"?[P0(L0(t)[0],0,e)]:e==="bool"?[aL(t[0])]:[t[0].toString()];if(l===1){if(s>mP){var u=O0*a,c=Array.from(t.slice(0,u)),d=Array.from(t.slice(s-O0*a,s));return e==="complex64"&&(c=L0(c),d=L0(d)),["["+c.map(function(I,D){return P0(I,i[D],e)}).join(", ")+", ..., "+d.map(function(I,D){return P0(I,i[s-O0+D],e)}).join(", ")+"]"]}return["["+(e==="complex64"?L0(t):Array.from(t)).map(function(I,D){return P0(I,i[D],e)}).join(", ")+"]"]}var p=n.slice(1),h=r.slice(1),f=r[0]*a,m=[];if(s>mP){for(var g=0;g<O0;g++){var y=(b=g*f)+f;m.push.apply(m,K_(t.slice(b,y),p,e,h,i,!1))}for(m.push("..."),g=s-O0;g<s;g++)y=(b=g*f)+f,m.push.apply(m,K_(t.slice(b,y),p,e,h,i,g===s-1))}else for(g=0;g<s;g++){var b;y=(b=g*f)+f,m.push.apply(m,K_(t.slice(b,y),p,e,h,i,g===s-1))}var w=l===2?",":"";for(m[0]="["+m[0]+w,g=1;g<m.length-1;g++)m[g]=" "+m[g]+w;var x=`,
`;for(g=2;g<l;g++)x+=`
`;return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":x),m}function L0(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var W0=function(){function t(n,e,r){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=Yt(n),r!=null){var o=r.length;de(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||U0(e,this.size),this.strides=id(n)}return t.prototype.set=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),de(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var l=n[n.length-1],u=0;u<n.length-1;++u)l+=this.strides[u]*n[u];return this.values[l]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return dt.make(this.shape,{values:this.values},this.dtype)},t}(),Cs=null,Be=null,sL=null;function Kse(t){Cs=t}function Yse(t){Be=t}function Xse(t){sL=t}var dt=function(){function t(n,e,r,i,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Yt(n),this.strides=id(n),this.dataId=i??{},this.id=Cs().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",Cs().registerTensor(this,o),r!=null&&Cs().write(this.dataId,r)}return t.make=function(n,e,r,i){return new t(n,r,e.values,e.dataId,i)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),de(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,i){return this.throwIfDisposed(),this.reshape([n,e,r,i])},t.prototype.as5D=function(n,e,r,i,o){return this.throwIfDisposed(),this.reshape([n,e,r,i,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),Be.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ln(this,void 0,void 0,function(){var n;return Bn(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,Be.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return Be.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ln(this,void 0,void 0,function(){var n;return Bn(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,KD(this.shape,n)]}})})},t.prototype.arraySync=function(){return KD(this.shape,this.dataSync())},t.prototype.data=function(){return Ln(this,void 0,void 0,function(){return Bn(this,function(n){return this.throwIfDisposed(),[2,Cs().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),Cs().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(Cs().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),Be.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),Be.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),Be.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),Be.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),Be.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),Be.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),Be.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),Gse(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),Be.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),Be.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Be.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),Be.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),Be.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),Be.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),Be.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),Be.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),Be.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),Be.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),Be.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),Be.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,i,o){return r===void 0&&(r=.001),sL("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,r)},t.prototype.batchNorm=function(n,e,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),Be.batchNorm(this,n,e,r,i,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Be.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),Be.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),Be.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),Be.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),Be.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),Be.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),Be.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),Be.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),Be.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),Be.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),Be.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),Be.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),Be.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),Be.div(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),Be.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),Be.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),Be.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),Be.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),Be.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),Be.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),Be.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),Be.modStrict(this,n)},t.prototype.squaredDifference=function(n){return this.throwIfDisposed(),Be.squaredDifference(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),Be.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),Be.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),Be.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),Be.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),Be.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),Be.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),Be.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),Be.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),Be.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),Be.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),Be.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),Be.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),Be.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),Be.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),Be.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),Be.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Be.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),Be.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),Be.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),Be.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Be.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Be.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Be.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Be.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Be.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Be.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Be.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Be.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Be.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Be.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Be.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Be.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),Be.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),Be.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Be.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Be.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),Be.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),Be.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Be.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Be.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Be.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Be.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Be.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Be.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Be.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Be.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Be.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Be.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Be.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Be.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Be.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Be.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Be.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Be.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Be.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Be.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Be.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),Be.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),Be.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),Be.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Be.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Be.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),Be.conv1d(this,n,e,r,i,o,a)},t.prototype.conv2d=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Be.conv2d(this,n,e,r,i,o,a)},t.prototype.conv2dTranspose=function(n,e,r,i,o){return this.throwIfDisposed(),Be.conv2dTranspose(this,n,e,r,i,o)},t.prototype.depthwiseConv2D=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Be.depthwiseConv2d(this,n,e,r,i,o,a)},t.prototype.separableConv2d=function(n,e,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),Be.separableConv2d(this,n,e,r,i,o,a)},t.prototype.avgPool=function(n,e,r,i){return this.throwIfDisposed(),Be.avgPool(this,n,e,r,i)},t.prototype.maxPool=function(n,e,r,i){return this.throwIfDisposed(),Be.maxPool(this,n,e,r,i)},t.prototype.localResponseNormalization=function(n,e,r,i){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),Be.localResponseNormalization(this,n,e,r,i)},t.prototype.pool=function(n,e,r,i,o){return this.throwIfDisposed(),Be.pool(this,n,e,r,i,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),G0.variable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),Be.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),Be.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),Be.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),Be.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,l){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),this.throwIfDisposed(),Be.stridedSlice(this,n,e,r,i,o,a,s,l)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),Be.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),Be.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Be.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Be.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Be.spectral.irfft(this)},t}();Object.defineProperty(dt,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var G0=function(t){function n(e,r,i){r===void 0&&(r=!0);var o=t.call(this,e.shape,e.dtype,null,e.dataId)||this;o.trainable=r,o.name=i,o.name==null&&(o.name=Cs().nextVariableId().toString());try{Cs().registerVariable(o)}catch(a){throw Cs().disposeTensor(o),a}return o}return Hu(n,t),n.variable=function(e,r,i,o){return r===void 0&&(r=!0),o!=null&&o!==e.dtype&&(e=e.asType(o)),new n(e,r,i)},n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!bo(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Cs().disposeTensor(this),this.dataId=e.dataId,Cs().registerTensor(this)},n}(dt);Object.defineProperty(G0,Symbol.hasInstance,{value:function(t){return t instanceof dt&&t.assign!=null&&t.assign instanceof Function}});var gP,YD,XD,QD,ZD,xFe=G0.variable;function Qse(t,n,e){for(var r={},i={},o=0;o<n.length;o++)r[n[o].id]=!0;for(o=0;o<t.length;o++){var a=(f=t[o]).inputs;for(var s in a){for(var l=a[s],u=!1,c=0;c<n.length;c++)if(r[l.id]){f.outputs.forEach(function(b){return r[b.id]=!0}),u=!0,i[f.id]=!0;break}if(u)break}}var d={};d[e.id]=!0;var p={};for(o=t.length-1;o>=0;o--)for(a=(f=t[o]).inputs,c=0;c<f.outputs.length;c++)if(d[f.outputs[c].id]){for(var s in a)d[a[s].id]=!0,p[f.id]=!0;break}var h=[];for(o=0;o<t.length;o++){var f;if(i[(f=t[o]).id]&&p[f.id]){var m={};for(var s in f.inputs){var g=f.inputs[s];r[g.id]&&(m[s]=g)}var y=Object.assign({},f);y.inputs=m,y.outputs=f.outputs,h.push(y)}}return h}function Zse(t,n,e){for(var r=function(o){var a=n[o],s=[];if(a.outputs.forEach(function(d){var p=t[d.id];if(p!=null)s.push(p);else{var h=dt.make(d.shape,{values:jf(d.size,d.dtype)},d.dtype);s.push(h)}}),a.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+a.name+".");var l=a.gradient(a.outputs.length===1?s[0]:s),u=function(d){if(!(d in l))throw new Error("Cannot backprop through input "+d+". Available gradients found: "+Object.keys(l)+".");var p=e(function(){return l[d]()});if(p.dtype!=="float32")throw new Error("Error in gradient for op "+a.name+". The gradient of input "+d+" must have 'float32' dtype, but has '"+p.dtype+"'");var h=a.inputs[d];if(!bo(p.shape,h.shape))throw new Error("Error in gradient for op "+a.name+". The gradient of input '"+d+"' has shape '"+p.shape+"', which does not match the shape of the input '"+h.shape+"'");if(t[h.id]==null)t[h.id]=p;else{var f=t[h.id];t[h.id]=f.add(p),f.dispose()}};for(var c in a.inputs)u(c)},i=n.length-1;i>=0;i--)r(i)}(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(gP||(gP={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(YD||(YD={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(XD||(XD={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(QD||(QD={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(ZD||(ZD={}));var Jse={float32:QD,int32:YD,bool:XD,complex64:ZD};function ro(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return Jse[t][n]}function PD(t){return ro(t,"int32")}function Ri(t,n){if(t.dtype===n.dtype)return[t,n];var e=ro(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function lL(t,n){de(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function ele(t,n){for(var e=0;e<n.length;e++)if(n[e].id===t.id)return!0;return!1}function gT(t){var n=[];return uL(t,n,new Set),n}function uL(t,n,e){if(t!=null){if(t instanceof dt)n.push(t);else if(tle(t)){var r=t;for(var i in r){var o=r[i];e.has(o)||(e.add(o),uL(o,n,e))}}}}function tle(t){return Array.isArray(t)||typeof t=="object"}var rr,CFe=Object.freeze({makeTypesMatch:Ri,assertTypesMatch:lL,isTensorInList:ele,getTensorsInContainer:gT}),nle=function(){function t(n,e,r){this.backend=n,this.safeMode=e,this.debugMode=r,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiler=new Wse(n),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.moveData=function(n){this.write(n,this.readSync(n))},t.prototype.tidy=function(n,e){var r,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var i=r();return e(),i}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=dt.make(n.shape,{dataId:n.dataId},n.dtype);return this.addTapeNode([n],e,function(r){return[r.toFloat()]}),e},t.prototype.runKernel=function(n,e,r){var i,o=this,a=[],s=this.isTapeOn(),l=this.activeScope!=null?this.activeScope.name:"",u=function(h){s&&(a=h.map(function(f){return o.keep(o.clone(f))}))},c=this.numBytes,d=this.numTensors;if(this.scopedRun(function(){return o.kernelDepth++},function(){return o.kernelDepth--},function(){i=o.debugMode()?o.profiler.profileKernel(l,function(){return n(o.backend,u)}):n(o.backend,u)}),s){var p={id:this.nextTapeNodeId++,name:l,inputs:e,outputs:Array.isArray(i)?i:[i],saved:a};r!=null&&(p.gradient=function(h){return r(h,a)}),this.activeTape.push(p)}return this.profiling&&this.activeProfile.kernels.push({name:l,bytesAdded:this.numBytes-c,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-d,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(e).map(function(h){return e[h].shape}),outputShape:Array.isArray(i)?i.map(function(h){return h.shape}):i.shape}),i},t.prototype.registerTensor=function(n,e){var r=this.tensorInfo.has(n.dataId)?this.tensorInfo.get(n.dataId).refCount:0;if(this.numTensors++,n.dtype==="string"&&this.numStringTensors++,r===0){this.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*pT(n.dtype)),this.tensorInfo.set(n.dataId,{backend:e??this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.numBytes+=i,e!=null?e.register(n.dataId,n.shape,n.dtype):this.backend.register(n.dataId,n.shape,n.dtype)}this.tensorInfo.get(n.dataId).refCount++,n instanceof G0||this.track(n)},t.prototype.registerVariable=function(n){if(this.registeredVariables[n.name]!=null)throw new Error("Variable with name "+n.name+" was already registered");this.registeredVariables[n.name]=n},t.prototype.disposeTensor=function(n){if(this.tensorInfo.has(n.dataId)){this.numTensors--,n.dtype==="string"&&this.numStringTensors--;var e=this.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.numBytes-=e.bytes),this.numDataBuffers--,e.backend.disposeData(n.dataId),this.tensorInfo.delete(n.dataId)):this.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.registeredVariables){var e=this.registeredVariables[n];this.disposeTensor(e),delete this.registeredVariables[n]}},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.numTensors,n.numDataBuffers=this.numDataBuffers,n.numBytes=this.numBytes,this.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return Ln(this,void 0,void 0,function(){var e,r;return Bn(this,function(i){return this.profiling=!0,e=this.numBytes,r=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=n(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-e,this.activeProfile.newTensors=this.numTensors-r,[2,this.activeProfile]})})},t.prototype.isTapeOn=function(){return this.gradientDepth>0&&this.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r){var i={};n.forEach(function(a,s){i[s]=a});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:i,outputs:[e],gradient:function(a){var s={};return r(a).forEach(function(l,u){s[u]=function(){return l}}),s}};this.activeTape.push(o)},t.prototype.keep=function(n){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return n.kept=!0,n},t.prototype.startTape=function(){this.gradientDepth===0&&(this.activeTape=[]),this.gradientDepth++},t.prototype.endTape=function(){this.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.nextScopeId++};n&&(e.name=n),this.scopeStack.push(e),this.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=gT(n),i=new Set(r.map(function(l){return l.id})),o=0;o<this.activeScope.track.length;o++){var a=this.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.scopeStack.pop();this.activeScope=this.scopeStack.length===0?null:this.scopeStack[this.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==s.id||e.track(l)})},t.prototype.gradients=function(n,e,r,i){var o=this;if(i===void 0&&(i=!1),de(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});de(a instanceof dt,function(){return"The result y returned by f() must be a tensor."});var s=Qse(this.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l={};l[a.id]=r??rle(a.shape),Zse(l,s,function(c){return o.tidy(c)});var u=e.map(function(c){return l[c.id]});return o.gradientDepth===0&&(o.activeTape.forEach(function(c){for(var d in c.saved)c.saved[d].dispose()}),o.activeTape=null),{value:a,grads:u}})},t.prototype.customGrad=function(n){var e=this;return de(e2(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];de(i.every(function(s){return s instanceof dt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,l){a[l]=s}),e.runKernel(function(s,l){return de((r=n.apply(void 0,i.concat([l]))).value instanceof dt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),de(e2(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,l){var u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];de(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),de(c.every(function(p){return p instanceof dt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(p,h){d[h]=function(){return p}}),d})}},t.prototype.write=function(n,e){var r=this.tensorInfo.get(n);if(r.dtype==="string"){var i=nL(e);this.numBytes+=i-r.bytes,r.bytes=i}this.backend!==r.backend&&(r.backend.disposeData(n),r.backend=this.backend,this.backend.register(n,r.shape,r.dtype)),this.backend.write(n,e)},t.prototype.readSync=function(n){return this.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.tensorInfo.get(n).backend.read(n)},t.prototype.fromPixels=function(n,e){return this.backend.fromPixels(n,e)},t.prototype.time=function(n){return Ln(this,void 0,void 0,function(){var e,r;return Bn(this,function(i){switch(i.label){case 0:return e=z0(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=z0()-e,[2,r]}})})},t.prototype.track=function(n){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope!=null&&(n.scopeId=this.activeScope.id,this.activeScope.track.push(n)),n},t.nextTensorId=0,t.nextVariableId=0,t}();function rle(t){var n=fT(Yt(t),"float32");return dt.make(t,{values:n})}(function(t){t[t.NUMBER=0]="NUMBER",t[t.BOOLEAN=1]="BOOLEAN",t[t.STRING=2]="STRING"})(rr||(rr={}));var LD,BD,ile=[{name:"DEBUG",type:rr.BOOLEAN},{name:"IS_BROWSER",type:rr.BOOLEAN},{name:"WEBGL_LAZILY_UNPACK",type:rr.BOOLEAN},{name:"WEBGL_CPU_FORWARD",type:rr.BOOLEAN},{name:"WEBGL_PACK",type:rr.BOOLEAN},{name:"WEBGL_PACK_BATCHNORMALIZATION",type:rr.BOOLEAN},{name:"WEBGL_PACK_CLIP",type:rr.BOOLEAN},{name:"WEBGL_PACK_DEPTHWISECONV",type:rr.BOOLEAN},{name:"WEBGL_PACK_BINARY_OPERATIONS",type:rr.BOOLEAN},{name:"WEBGL_PACK_ARRAY_OPERATIONS",type:rr.BOOLEAN},{name:"WEBGL_PACK_IMAGE_OPERATIONS",type:rr.BOOLEAN},{name:"WEBGL_PACK_REDUCE",type:rr.BOOLEAN},{name:"WEBGL_CONV_IM2COL",type:rr.BOOLEAN},{name:"WEBGL_MAX_TEXTURE_SIZE",type:rr.NUMBER},{name:"WEBGL_NUM_MB_BEFORE_PAGING",type:rr.NUMBER},{name:"WEBGL_MAX_TEXTURES_IN_SHADER",type:rr.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:rr.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:rr.BOOLEAN},{name:"WEBGL_VERSION",type:rr.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:rr.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:rr.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:rr.BOOLEAN},{name:"WEBGL_SIZE_UPLOAD_UNIFORM",type:rr.NUMBER},{name:"BACKEND",type:rr.STRING},{name:"EPSILON",type:rr.NUMBER},{name:"PROD",type:rr.BOOLEAN},{name:"TENSORLIKE_CHECK_SHAPE_CONSISTENCY",type:rr.BOOLEAN},{name:"DEPRECATION_WARNINGS_ENABLED",type:rr.BOOLEAN}];function vP(t){try{if(ql(t)!=null)return!0}catch{return!1}return!1}function ole(t){if(LD==null){var n=ql(t);LD=n.getParameter(n.MAX_TEXTURE_SIZE)}return LD}function ale(t){if(BD==null){var n=ql(t);BD=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,BD)}function sle(t){if(t===0)return 0;var n=ql(t);return Cp(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Cp(n,"EXT_disjoint_timer_query")?1:0}function lle(t){if(t===0)return!1;var n=ql(t);if(t===1){if(!Cp(n,"OES_texture_float"))return!1}else if(!Cp(n,"EXT_color_buffer_float"))return!1;return dL(n,t)}function ule(t){if(t===0)return!1;var n=ql(t);if(t===1){if(!Cp(n,"OES_texture_float")||!Cp(n,"WEBGL_color_buffer_float"))return!1}else if(!Cp(n,"EXT_color_buffer_float"))return!1;return dL(n,t)}function cle(t){return t===2&&ql(t).fenceSync!=null}function dle(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}var yP="tfjsflags";function cL(){var t={};if(typeof window>"u"||window.location===void 0||window.location.search===void 0)return t;var n=ple(window.location.search);if(yP in n){var e={};n[yP].split(",").forEach(function(r){var i=r.split(":"),o=i[0],a=i[1];e[o]=a}),ile.forEach(function(r){r.name in e&&(console.log("Setting feature override from URL "+r.name+": "+e[r.name]),r.type===rr.NUMBER?t[r.name]=+e[r.name]:r.type===rr.BOOLEAN?t[r.name]=e[r.name]==="true":r.type===rr.STRING?t[r.name]=e[r.name]:console.warn("Unknown URL param: "+r.name+"."))})}return t}function Cp(t,n){return t.getExtension(n)!=null}function dL(t,n){var e=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=n===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(e),o}function ple(t){var n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return hle(n,r[0],r[1]),r.join("=")}),n}function hle(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}var fle=600;function mle(){return window.screen.height*window.screen.width*window.devicePixelRatio*fle/1024}var VD,pL=1e-4,gle=.1,hL=1e-7,vle=.001,Zs=function(){function t(n){this.features={},this.registry={},this.registryFactory={},n!=null&&(this.features=n),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(n,e){if(e===void 0&&(e=!1),!(n in ne.registry))throw new Error("Backend name '"+n+"' not found in registry");ne.engine.backend=ne.findBackend(n),ne.backendName=n},t.getBackend=function(){return ne.initEngine(),ne.backendName},t.disposeVariables=function(){ne.engine.disposeVariables()},t.memory=function(){return ne.engine.memory()},t.profile=function(n){return ne.engine.profile(n)},t.tidy=function(n,e){return ne.engine.tidy(n,e)},t.dispose=function(n){gT(n).forEach(function(e){return e.dispose()})},t.keep=function(n){return ne.engine.keep(n)},t.time=function(n){return ne.engine.time(n)},t.prototype.get=function(n){return n in this.features?this.features[n]:(this.features[n]=this.evaluateFeature(n),this.features[n])},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(n,e){this.features[n]=e},t.prototype.getBestBackendName=function(){var n=this;if(Object.keys(this.registry).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(e){return{name:e,entry:n.registry[e]}}).sort(function(e,r){return r.entry.priority-e.entry.priority})[0].name},t.prototype.evaluateFeature=function(n){if(n==="DEBUG")return!1;if(n==="IS_BROWSER")return typeof window<"u";if(n==="IS_NODE")return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0;if(n==="IS_CHROME")return dle();if(n==="WEBGL_CPU_FORWARD")return!0;if(n==="WEBGL_PACK")return this.get("WEBGL_VERSION")!==0;if(n==="WEBGL_PACK_BATCHNORMALIZATION")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_CLIP")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_DEPTHWISECONV")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_BINARY_OPERATIONS")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_ARRAY_OPERATIONS")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_IMAGE_OPERATIONS")return this.get("WEBGL_PACK");if(n==="WEBGL_PACK_REDUCE")return this.get("WEBGL_PACK");if(n==="WEBGL_LAZILY_UNPACK")return this.get("WEBGL_PACK");if(n==="WEBGL_CONV_IM2COL")return this.get("WEBGL_PACK");if(n==="WEBGL_NUM_MB_BEFORE_PAGING")return this.get("PROD")||!this.get("IS_BROWSER")?Number.POSITIVE_INFINITY:mle();if(n==="WEBGL_MAX_TEXTURE_SIZE")return ole(this.get("WEBGL_VERSION"));if(n==="WEBGL_MAX_TEXTURES_IN_SHADER")return ale(this.get("WEBGL_VERSION"));if(n==="IS_TEST")return!1;if(n==="BACKEND")return this.getBestBackendName();if(n==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"){var e=this.get("WEBGL_VERSION");return e===0?0:sle(e)}if(n==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Vse();if(n==="HAS_WEBGL")return this.get("WEBGL_VERSION")>0;if(n==="WEBGL_VERSION")return vP(2)?2:vP(1)?1:0;if(n==="WEBGL_RENDER_FLOAT32_ENABLED")return lle(this.get("WEBGL_VERSION"));if(n==="WEBGL_DOWNLOAD_FLOAT_ENABLED")return ule(this.get("WEBGL_VERSION"));if(n==="WEBGL_FENCE_API_ENABLED")return cle(this.get("WEBGL_VERSION"));if(n==="WEBGL_SIZE_UPLOAD_UNIFORM")return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?4:0;if(n==="TEST_EPSILON")return this.backend.floatPrecision()===32?vle:gle;if(n==="EPSILON")return this.backend.floatPrecision()===32?hL:pL;if(n==="PROD")return!1;if(n==="TENSORLIKE_CHECK_SHAPE_CONSISTENCY")return!this.get("PROD");if(n==="DEPRECATION_WARNINGS_ENABLED")return!0;throw new Error("Unknown feature "+n+".")},t.prototype.setFeatures=function(n){this.features=Object.assign({},n)},t.prototype.reset=function(){this.features=cL(),this.globalEngine!=null&&(this.globalEngine=null)},Object.defineProperty(t.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),t.prototype.findBackend=function(n){return n in this.registry?this.registry[n].backend:null},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n]:null},t.prototype.registerBackend=function(n,e,r){var i=this;if(r===void 0&&(r=1),n in this.registry)return console.warn(n+" backend was already registered. Reusing existing backend"),!1;try{var o=e();return o.setDataMover({moveData:function(a){return i.engine.moveData(a)}}),this.registry[n]={backend:o,priority:r},this.registryFactory[n]=e,!0}catch(a){return console.warn("Registration of backend "+n+" failed"),console.warn(a.stack||a.message),!1}},t.prototype.removeBackend=function(n){if(!(n in this.registry))throw new Error(n+" backend not found in registry");this.registry[n].backend.dispose(),delete this.registry[n]},Object.defineProperty(t.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initEngine=function(){var n=this;if(this.globalEngine==null){this.backendName=this.get("BACKEND");var e=this.findBackend(this.backendName);this.globalEngine=new nle(e,!1,function(){return n.get("DEBUG")})}},Object.defineProperty(t.prototype,"global",{get:function(){return fL()},enumerable:!0,configurable:!0}),t}();function fL(){if(VD==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else{if(typeof process>"u")throw new Error("Could not find a global object");t=process}VD=t}return VD}function yle(){var t=fL();return t.ENV==null&&(t.ENV=new Zs(cL())),Kse(function(){return t.ENV.engine}),t.ENV}function ble(){ne.set("PROD",!0)}function _le(){ne.set("DEBUG",!0)}function wle(){ne.set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function vT(t){ne.get("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}Xse(vT);var ne=yle(),IFe=Object.freeze({EPSILON_FLOAT16:pL,EPSILON_FLOAT32:hL,Environment:Zs,enableProdMode:ble,enableDebugMode:_le,disableDeprecationWarnings:wle,deprecationWarn:vT,ENV:ne});function od(t){var n=t;if(Wl(t))return[t.length];if(!Array.isArray(t))return[];for(var e=[];Array.isArray(n)||Wl(n);)e.push(n.length),n=n[0];return Array.isArray(t)&&ne.get("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mL(t,e,[]),e}function mL(t,n,e){if(e=e||[],Array.isArray(t)||Wl(t)){de(n.length>0,function(){return"Element arr["+e.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),de(t.length===n[0],function(){return"Element arr["+e.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var r=n.slice(1),i=0;i<t.length;++i)mL(t[i],r,e.concat(i))}else de(n.length===0,function(){return"Element arr["+e.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}function bP(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function te(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof dt)return bP(r,t.dtype,n,e),t;var i=Vf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),bP(r,i,n,e),t==null||!Wl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=od(t);Wl(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?hT(t,i,ne.get("DEBUG")):Ep(t);return dt.make(a,{values:s},i)}function n2(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return te(i,n+"["+o+"]",e)},r)}function xle(t,n){if(de(e2(t),function(){return"The f passed in variableGrads(f) must be a function"}),de(n==null||Array.isArray(n)&&n.every(function(l){return l instanceof G0}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}),n==null)for(var e in n=[],ne.engine.registeredVariables)n.push(ne.engine.registeredVariables[e]);var r=n.length;de((n=n.filter(function(l){return l.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable."});var i=ne.engine.gradients(t,n,null,!0),o=i.value,a=i.grads;de(a.some(function(l){return l!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),de(o.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+o.rank+" tensor"});var s={};return n.forEach(function(l,u){a[u]!=null&&(s[l.name]=a[u])}),{value:o,grads:s}}function $0(t){return ne.engine.customGrad(t)}var pt=Zs.tidy,Pr=Zs.keep,Cle=Zs.dispose,SFe=Zs.time,EFe=Zs.profile;function JD(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ne.get("IS_TEST")||console.warn.apply(console,t)}function r2(t,n,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(t[0]/e),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([t[a+1]/n[a],n[a]]);i=i.concat(t.slice(o+1))}return i}function i2(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var i=n+1;i<t;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function o2(t,n,e,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/e):i.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?i.push(n[o-1]*t[o]):i.push(t[o]/n[o-1]):i.push(t[o]);return i}function gL(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function vL(t,n,e){for(var r=t.slice(0,1),i=0;i<e;++i)r.push(t[i+1]-n[i][0]-n[i][1]);return r}function yL(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function Ile(t,n,e){for(var r=t.length+n.length,i=[],o=0,a=0,s=0;s<r;s++)e.indexOf(s)===-1?i.push(t[o++]):i.push(n[a++]);return i}function Ao(t,n){for(var e=[],r=t.length,i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);return[e,n.map(function(o){return t[o]})]}function Is(t,n){return Ile(t,n.map(function(e){return 1}),n)}function Xa(t,n,e){de(yL(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function Gl(t,n){if(yL(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(i){return e.push(i)}),e}function yT(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function $l(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function Sle(t,n){var e=t[0].length;t.forEach(function(i,o){de(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),de(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<e;a++)de(a===n||i[a]===r[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Pf(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function bL(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=t.shape,s=e.slice();s.pop();var l=1;for(o=r;o<t.rank;++o)l*=a[o],s.push(a[o]);var u=id(t.shape).map(function(c){return c/l}).concat([1]).slice(0,r);return[s,i,l,u]}var _L=30;function jD(t){return t<=_L?t:t2(t,Math.floor(Math.sqrt(t)))}function Ele(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var a=0;a<i;++a)if(e.shape[a]!==n.shape[a])throw new Error(o+" updates.shape["+a+"] ("+e.shape[a]+") != indices.shape["+a+"] ("+n.shape[a]+").");for(a=0;a<e.rank-i;++a)if(e.shape[a+i]!==t[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+e.shape[a+i]+") != shape["+(a+i)+"] ("+t[a+i]+")")}function Dle(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Ele(e,n,t)}function a2(t,n,e){for(var r=n.rank>1?n.shape[n.rank-1]:1,i=e.length,o=1,a=r;a<i;++a)o*=e[a];var s=r<1?1:r;return{sliceRank:r,numUpdates:n.size/s,sliceSize:o,strides:id(e.slice(0,r)).concat([1]),outputSize:Yt(e)}}function Tle(t,n){var e,r=!1;for(t<=_L?(e=t,r=!0):e=t2(t,Math.floor(Math.sqrt(t)));!r;)e>n||e===t?r=!0:e=t2(t,e+1);return e}function Ale(t,n,e){for(var r=[],i=t.length,o=0;o<i;o++)o!==n?r.push(t[o]):r.push(e);return r}function kle(t,n,e){for(var r=t.shape[e],i=[],o=1,a=1,s=0;s<e;s++)i.push(t.shape[s]),o*=t.shape[s];for(s=0;s<n.rank;s++)i.push(n.shape[s]);for(s=e+1;s<t.rank;s++)i.push(t.shape[s]),a*=t.shape[s];return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}function Mle(t,n,e){de(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),de(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){de(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function bT(t,n,e,r,i,o,a,s,l){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),a!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");for(var u=[],c=[],d=[],p=0;p<t.length;p++)u[p]=Rle(i,n,r,t,p),c[p]=Nle(o,e,r,t,p),l&1<<p&&(c[p]=u[p]+1,d.push(p));var h=new Array(t.length).fill(0);return h=h.map(function(f,m){for(var g=0,y=r[m]||1,b=u[m];!(y>0?b>=c[m]:b<=c[m]);b+=y)g+=1;return g}),[u,h,d]}function Rle(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=Z_(0,o,s-1)}function Nle(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?Z_(0,o,s):Z_(-1,o,s-1)}function wL(t,n,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(n[i]>0||e[i]!==t[i])return!1;return!0}function xL(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function we(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];ne.engine.startScope(e);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ne.engine.endScope(s),s}catch(l){throw ne.engine.endScope(null),l}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}function Fle(t,n){n===void 0&&(n=-1);var e=te(t,"logits","softmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return $0(function(r,i){var o=r.logSumExp([n],!0),a=r.toFloat().sub(o).exp();return i([a]),{value:a,gradFunc:function(s,l){var u=l[0],c=s.mul(u);return c.sub(c.sum([n],!0).mul(u))}}})(e)}function Ole(t,n){n===void 0&&(n=-1);var e=te(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return $0(function(r,i){var o=r.max(n,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(l,u){var c=u[0].exp();return l.sub(l.sum(n,!0).mul(c))}}})(e)}var Ja=we({softmax_:Fle}),Ple=we({logSoftmax_:Ole});function Lle(t,n){var e=te(t,"real","complex"),r=te(n,"imag","complex");return _r(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),ne.engine.runKernel(function(i){return i.complex(e,r)},{$real:e,$imag:r})}function Ble(t){var n=te(t,"input","real");return ne.engine.runKernel(function(e){return e.real(n)},{$input:n})}function Vle(t){var n=te(t,"input","imag");return ne.engine.runKernel(function(e){return e.imag(n)},{$input:n})}var na=we({complex_:Lle}),Hl=we({real_:Ble}),ed=we({imag_:Vle});function Qr(t,n,e){if(e==null&&(e=Vf(t)),e==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Wl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");var r=od(t);if(n!=null){mT(n);var i=Yt(n),o=Yt(r);de(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<r.length;++a){var s=r[a],l=a!==r.length-1||s!==Yt(n.slice(a));de(r[a]===n[a]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+n+"). "})}}return Wl(t)||Array.isArray(t)||(t=[t]),n=n||r,t=e!=="string"?hT(t,e,ne.get("DEBUG")):Ep(t),dt.make(n,{values:t},e)}function ot(t,n){if((Wl(t)||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return Qr(t,[],n)}function Ro(t,n){Tp(t);var e=od(t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Qr(t,e,n)}function K0(t,n,e){if(Tp(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=od(t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Qr(t,n=n||r,e)}function c2(t,n,e){if(Tp(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=od(t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Qr(t,n=n||r,e)}function xa(t,n,e){if(Tp(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=od(t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Qr(t,n=n||r,e)}function jle(t,n,e){if(Tp(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=od(t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Qr(t,n=n||r,e)}function Ule(t,n,e){if(Tp(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=od(t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Qr(t,n=n||r,e)}function Dp(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Dp(t,"float32"),r=Dp(t,"float32");return na(e,r)}var i=fT(Yt(t),n);return dt.make(t,{values:i},n)}function ci(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=ci(t,"float32"),r=ci(t,"float32");return na(e,r)}var i=jf(Yt(t),n);return dt.make(t,{values:i},n)}function Uf(t,n,e){return ne.engine.runKernel(function(r){return r.fill(t,n,e)},{})}function Hle(t){var n=te(t,"x","onesLike");if(n.dtype==="complex64"){var e=IL(Hl(n)),r=lr(ed(n));return na(e,r)}return ne.engine.runKernel(function(i){return i.onesLike(n)},{$x:n},null)}function zle(t){var n=te(t,"x","zerosLike");return ne.engine.runKernel(function(e){return e.zerosLike(n)},{$x:n},null)}function Wle(t,n,e){if(e===0)throw new Error("Cannot request zero samples");var r=(n-t)/(e-1),i=jf(e,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Ro(i,"float32")}function CL(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return ci([0],r);var i=jf(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Ro(i,r)}var IL=we({onesLike_:Hle}),lr=we({zerosLike_:zle}),SL=function(){function t(n){this.dataMover=n,this.data=new WeakMap}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(n),this.data.get(n)},t.prototype.set=function(n,e){this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.data.delete(n)},t}(),DFe=function(){function t(){}return t.prototype.time=function(n){throw new Error("Not yet implemented.")},t.prototype.read=function(n){throw new Error("Not yet implemented.")},t.prototype.readSync=function(n){throw new Error("Not yet implemented.")},t.prototype.disposeData=function(n){throw new Error("Not yet implemented.")},t.prototype.write=function(n,e){throw new Error("Not yet implemented.")},t.prototype.fromPixels=function(n,e){throw new Error("Not yet implemented.")},t.prototype.register=function(n,e,r){throw new Error("Not yet implemented.")},t.prototype.memory=function(){throw new Error("Not yet implemented.")},t.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},t.prototype.batchMatMul=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.fusedBatchMatMul=function(n,e,r,i,o,a){throw new Error("Not yet implemented")},t.prototype.slice=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,l,u){throw new Error("Not yet implemented")},t.prototype.unstack=function(n,e){throw new Error("Not yet implemented")},t.prototype.reverse=function(n,e){throw new Error("Not yet implemented")},t.prototype.concat=function(n,e){throw new Error("Not yet implemented")},t.prototype.neg=function(n){throw new Error("Not yet implemented")},t.prototype.add=function(n,e){throw new Error("Not yet implemented")},t.prototype.addN=function(n){throw new Error("Not yet implemented")},t.prototype.subtract=function(n,e){throw new Error("Not yet implemented")},t.prototype.multiply=function(n,e){throw new Error("Not yet implemented")},t.prototype.realDivide=function(n,e){throw new Error("Not yet implemented")},t.prototype.floorDiv=function(n,e){throw new Error("Not yet implemented")},t.prototype.sum=function(n,e){throw new Error("Not yet implemented")},t.prototype.prod=function(n,e){throw new Error("Not yet implemented")},t.prototype.unsortedSegmentSum=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.argMin=function(n,e){throw new Error("Not yet implemented")},t.prototype.argMax=function(n,e){throw new Error("Not yet implemented")},t.prototype.equal=function(n,e){throw new Error("Not yet implemented")},t.prototype.notEqual=function(n,e){throw new Error("Not yet implemented")},t.prototype.less=function(n,e){throw new Error("Not yet implemented")},t.prototype.lessEqual=function(n,e){throw new Error("Not yet implemented")},t.prototype.greater=function(n,e){throw new Error("Not yet implemented")},t.prototype.greaterEqual=function(n,e){throw new Error("Not yet implemented")},t.prototype.logicalNot=function(n){throw new Error("Not yet implemented")},t.prototype.logicalAnd=function(n,e){throw new Error("Not yet implemented")},t.prototype.logicalOr=function(n,e){throw new Error("Not yet implemented")},t.prototype.where=function(n){throw new Error("Not yet implemented")},t.prototype.select=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.topk=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.min=function(n,e){throw new Error("Not yet implemented")},t.prototype.minimum=function(n,e){throw new Error("Not yet implemented")},t.prototype.mod=function(n,e){throw new Error("Not yet implemented")},t.prototype.max=function(n,e){throw new Error("Not yet implemented")},t.prototype.maximum=function(n,e){throw new Error("Not yet implemented")},t.prototype.all=function(n,e){throw new Error("Not yet implemented")},t.prototype.any=function(n,e){throw new Error("Not yet implemented")},t.prototype.squaredDifference=function(n,e){throw new Error("Not yet implemented")},t.prototype.ceil=function(n){throw new Error("Not yet implemented")},t.prototype.floor=function(n){throw new Error("Not yet implemented")},t.prototype.round=function(n){throw new Error("Not yet implemented")},t.prototype.sign=function(n){throw new Error("Not yet implemented")},t.prototype.isNaN=function(n){throw new Error("Not yet implemented")},t.prototype.isInf=function(n){throw new Error("Not yet implemented")},t.prototype.isFinite=function(n){throw new Error("Not yet implemented")},t.prototype.pow=function(n,e){throw new Error("Not yet implemented")},t.prototype.exp=function(n){throw new Error("Not yet implemented")},t.prototype.expm1=function(n){throw new Error("Not yet implemented")},t.prototype.log=function(n){throw new Error("Not yet implemented")},t.prototype.log1p=function(n){throw new Error("Not yet implemented")},t.prototype.sqrt=function(n){throw new Error("Not yet implemented")},t.prototype.rsqrt=function(n){throw new Error("Not yet implemented")},t.prototype.square=function(n){throw new Error("Not yet implemented")},t.prototype.reciprocal=function(n){throw new Error("Not yet implemented")},t.prototype.relu=function(n){throw new Error("Not yet implemented")},t.prototype.prelu=function(n,e){throw new Error("Not yet implemented")},t.prototype.elu=function(n){throw new Error("Not yet implemented")},t.prototype.eluDer=function(n,e){throw new Error("Not yet implemented")},t.prototype.selu=function(n){throw new Error("Not yet implemented")},t.prototype.int=function(n){throw new Error("Not yet implemented")},t.prototype.clip=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.abs=function(n){throw new Error("Not yet implemented")},t.prototype.complexAbs=function(n){throw new Error("Not yet implemented")},t.prototype.sigmoid=function(n){throw new Error("Not yet implemented")},t.prototype.softplus=function(n){throw new Error("Not yet implemented")},t.prototype.sin=function(n){throw new Error("Not yet implemented")},t.prototype.cos=function(n){throw new Error("Not yet implemented")},t.prototype.tan=function(n){throw new Error("Not yet implemented")},t.prototype.asin=function(n){throw new Error("Not yet implemented")},t.prototype.acos=function(n){throw new Error("Not yet implemented")},t.prototype.atan=function(n){throw new Error("Not yet implemented")},t.prototype.atan2=function(n,e){throw new Error("Not yet implemented")},t.prototype.sinh=function(n){throw new Error("Not yet implemented")},t.prototype.cosh=function(n){throw new Error("Not yet implemented")},t.prototype.tanh=function(n){throw new Error("Not yet implemented")},t.prototype.asinh=function(n){throw new Error("Not yet implemented")},t.prototype.acosh=function(n){throw new Error("Not yet implemented")},t.prototype.atanh=function(n){throw new Error("Not yet implemented")},t.prototype.erf=function(n){throw new Error("Not yet implemented")},t.prototype.step=function(n,e){throw new Error("Not yet implemented")},t.prototype.conv2d=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.conv2dDerInput=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.conv2dDerFilter=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2D=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.conv3d=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.conv3dDerInput=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.conv3dDerFilter=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.maxPool=function(n,e){throw new Error("Not yet implemented")},t.prototype.maxPoolBackprop=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.avgPool=function(n,e){throw new Error("Not yet implemented")},t.prototype.avgPoolBackprop=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.reshape=function(n,e){throw new Error("Not yet implemented")},t.prototype.cast=function(n,e){throw new Error("Not yet implemented")},t.prototype.tile=function(n,e){throw new Error("Not yet implemented")},t.prototype.pad=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.transpose=function(n,e){throw new Error("Not yet implemented")},t.prototype.gather=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.gatherND=function(n,e){throw new Error("Not yet implemented")},t.prototype.scatterND=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.batchToSpaceND=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.spaceToBatchND=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.resizeBilinear=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.resizeBilinearBackprop=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighbor=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.batchNormalization=function(n,e,r,i,o,a){throw new Error("Not yet implemented")},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){throw new Error("Not yet implemented")},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){throw new Error("Not yet implemented")},t.prototype.multinomial=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.oneHot=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.cumsum=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.nonMaxSuppression=function(n,e,r,i,o){throw new Error("Not yet implemented")},t.prototype.fft=function(n){throw new Error("Not yet implemented")},t.prototype.ifft=function(n){throw new Error("Not yet implemented")},t.prototype.complex=function(n,e){throw new Error("Not yet implemented")},t.prototype.real=function(n){throw new Error("Not yet implemented")},t.prototype.imag=function(n){throw new Error("Not yet implemented")},t.prototype.cropAndResize=function(n,e,r,i,o,a){throw new Error("Not yet implemented")},t.prototype.depthToSpace=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.split=function(n,e,r){throw new Error("Not yet implemented")},t.prototype.sparseToDense=function(n,e,r,i){throw new Error("Not yet implemented")},t.prototype.fill=function(n,e,r){throw new Error("Not yet implemented.")},t.prototype.onesLike=function(n){throw new Error("Not yet implemented")},t.prototype.zerosLike=function(n){throw new Error("Not yet implemented")},t.prototype.setDataMover=function(n){throw new Error("Not yet implemented")},t.prototype.dispose=function(){throw new Error("Not yet implemented")},t}();function EL(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=ci(t.shape),i=t.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!tL(t.dtype,n))return dt.make(t.shape,{dataId:t.dataId},n);if(t.dtype==="complex64"){var a=e.real(t);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var s=ot(0,t.dtype);return o=e.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: unknown dtype argument ("+n+")")}function eT(t,n){return dt.make(n,{dataId:t.dataId},t.dtype)}function DL(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function qle(t){for(var n=new Float32Array(t.length/2),e=new Float32Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=t[r],e[r/2]=t[r+1];return{real:n,imag:e}}function Gle(t){for(var n=Math.ceil(t.length/4),e=new Float32Array(n),r=new Float32Array(n),i=0;i<t.length;i+=4)e[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:e,imag:r}}function $le(t){for(var n=Math.floor(t.length/4),e=new Float32Array(n),r=new Float32Array(n),i=2;i<t.length;i+=4)e[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:e,imag:r}}function _P(t,n){return{real:t[2*n],imag:t[2*n+1]}}function Kle(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function Yle(t,n){for(var e=new Float32Array(t/2),r=new Float32Array(t/2),i=0;i<Math.ceil(t/2);i++){var o=(n?2:-2)*Math.PI*(i/t);e[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:e,imag:r}}function Xle(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function _T(t,n,e,r,i){for(var o=Array.from(n).map(function(h,f){return{score:h,boxIndex:f}}).filter(function(h){return h.score>i}).sort(function(h,f){return f.score-h.score}),a=[],s=0;s<o.length;s++){var l=o[s],u=l.score,c=l.boxIndex;if(u<i)break;for(var d=!1,p=a.length-1;p>=0;--p)if(Qle(t,c,a[p])>=r){d=!0;break}if(!d&&(a.push(c),a.length>=e))break}return Ro(a,"int32")}function Qle(t,n,e){var r=t.subarray(4*n,4*n+4),i=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(s-o)*(l-a),f=(d-u)*(p-c);if(h<=0||f<=0)return 0;var m=Math.max(o,u),g=Math.max(a,c),y=Math.min(s,d),b=Math.min(l,p),w=Math.max(y-m,0)*Math.max(b-g,0);return w/(h+f-w)}function TL(t,n,e){var r=new Array(t.rank).fill(0),i=t.shape.slice();return n.map(function(o){i[e]=o;var a=t.slice(r,i);return r[e]+=o,a})}function AL(t,n,e,r,i){for(var o=n[n.length-1],a=[t.length/o,o],s=a[0],l=a[1],u=J_(e,s*r),c=J_("int32",s*r),d=0;d<s;d++){for(var p=d*l,h=t.subarray(p,p+l),f=[],m=0;m<h.length;m++)f.push({value:h[m],index:m});f.sort(function(x,I){return I.value-x.value});var g=d*r,y=u.subarray(g,g+r),b=c.subarray(g,g+r);for(m=0;m<r;m++)y[m]=f[m].value,b[m]=f[m].index}var w=n.slice();return w[w.length-1]=r,[Qr(u,w,e),Qr(c,w,"int32")]}var Zle=function(){return function(t,n,e){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",l=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}();function kL(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function Qa(t,n){return n===1?[t]:kL(t,n)}function Jle(t,n){if(t===1)return"rc";for(var e="",r=0;r<t;r++)e+=n[r],r<t-1&&(e+=",");return e}function Nf(t,n){for(var e=t.length,r=[],i=0;i<e;i++){var o=e-1-i,a=t[o]||1;(n[n.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function zi(t,n){for(var e=[],r=0;r<n.length;r++){var i=t[t.length-r-1],o=n.length-r-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function Jn(t,n){for(var e=[],r=Math.max(t.length,n.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function Kl(){var t,n,e,r,i,o,a,s,l,u;return ne.get("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      const float NAN = uintBitsToFloat(uint(0x7fc00000));
    `,l=`
      const float INFINITY = uintBitsToFloat(uint(0x7f800000));
    `,u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      uniform float NAN;

      bool isnan(float val) {
        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
      }
      bvec4 isnan(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Y0(t,n,e){e===void 0&&(e="index");var r=id(n);return r.map(function(i,o){return"int "+t[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function z_(t){return t.length===1?""+t[0]:"vec"+t.length+"("+t.join(",")+")"}function eue(t,n){if(t.length!==n.length)throw new Error("Vectors to be dotted must be of the same length -got "+t.length+" and "+n.length);for(var e=[],r=Math.floor(t.length/4),i=t.length%4,o=0;o<r;o++){var a=t.slice(4*o,4*o+4),s=n.slice(4*o,4*o+4);e.push(z_(a)+", "+z_(s))}return i!==0&&(a=t.slice(4*r),s=n.slice(4*r),a.length===1&&(a=a.map(function(l){return"float("+l+")"}),s=s.map(function(l){return"float("+l+")"})),e.push(z_(a)+", "+z_(s))),e.map(function(l,u){return"dot("+l+")"}).join("+")}function tue(t,n,e,r){var i=[];t.forEach(function(h){var f=Yt(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?i.push("uniform float "+h.name+(f>1?"["+f+"]":"")+";"):(i.push("uniform sampler2D "+h.name+";"),i.push("uniform int offset"+h.name+";"))});var o,a,s=i.join(`
`),l=t.map(function(h){return nue(h,n,r)}).join(`
`),u=n.texShape,c=Kl(),d=oue(c),p=lue(c);return n.isPacked?(o=rue(n.logicalShape,u),a=sue(c)):(o=iue(n.logicalShape,u),a=aue(c)),r&&(p+=pue),[p,d,a,s,o,l,e].join(`
`)}function Hf(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Iue(t);case 1:return Eue(t);case 2:return Tue(t);case 3:return kue(t);case 4:return Rue(t);case 5:return Nue(t);case 6:return Fue(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function ML(t){switch(t.shapeInfo.logicalShape.length){case 0:return Cue(t);case 1:return Sue(t);case 2:return Due(t);case 3:return Aue(t);default:return Mue(t)}}function nue(t,n,e){e===void 0&&(e=!1);var r="";r+=e?ML(t):Hf(t);var i=t.shapeInfo.logicalShape,o=n.logicalShape;return i.length<=o.length&&(r+=e?Oue(t,n):Pue(t,n)),r}function rue(t,n){switch(t.length){case 0:return RL();case 1:return hue(t,n);case 2:return wue(t,n);case 3:return mue(t,n);default:return vue(t,n)}}function iue(t,n){switch(t.length){case 0:return RL();case 1:return fue(t,n);case 2:return xue(t,n);case 3:return gue(t,n);case 4:return yue(t,n);case 5:return bue(t,n);case 6:return _ue(t,n);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function oue(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+t.texture2D+`(textureSampler, uv).r;
    }
  `}function aue(t){return`
    void setOutput(float val) {
      `+t.output+` = vec4(val, 0, 0, 0);
    }
  `}function sue(t){return`
    void setOutput(vec4 val) {
      `+t.output+` = val;
    }
  `}function lue(t){return t.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+t.varyingFs+` vec2 resultUV;
    `+t.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    `+t.defineSpecialNaN+`
    `+t.defineSpecialInf+`
    `+t.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+uue+`
    `+cue+`
    `+due+`
  `}var uue=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cue=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,due=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pue=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function RL(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function hue(t,n){var e=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return e[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+e[1]+`.0);
      }
    `:e[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+e[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      return resTexRC.x * `+e[1]+` + resTexRC.y;
    }
  `}function fue(t,n){return n[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+n[1]+`.0);
      }
    `:n[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+n[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      return resTexRC.x * `+n[1]+` + resTexRC.y;
    }
  `}function mue(t,n){var e=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      int b = index / `+i+`;
      index -= b * `+i+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec3(b, r, c);
    }
  `}function gue(t,n){var e=Y0(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;
      `+e+`
      return ivec3(r, c, d);
    }
  `}function vue(t,n){for(var e=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2),o=i,a="",s="b, r, c",l=2;l<t.length-1;l++)a=`
      int b`+l+" = index / "+(o*=t[t.length-l-1])+`;
      index -= b`+l+" * "+o+`;
    `+a,s="b"+l+", "+s;return`
    ivec`+t.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      `+a+`

      int b = index / `+i+`;
      index -= b * `+i+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec`+t.length+"("+s+`);
    }
  `}function yue(t,n){var e=Y0(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;
      `+e+`
      return ivec4(r, c, d, d2);
    }
  `}function bue(t,n){var e=Y0(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+n[0]+`,
                             `+n[1]+`));

      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      `+e+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function _ue(t,n){var e=Y0(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      `+e+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function wue(t,n){var e=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(bo(t,n))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+e[0]+", "+e[1]+`));
      }
    `;var r=Math.ceil(t[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));

      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec2(r, c);
    }
  `}function xue(t,n){return bo(t,n)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+n[0]+", "+n[1]+`));
      }
    `:t[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+n[0]+", "+n[1]+`));
        int index = resTexRC.x * `+n[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+n[0]+", "+n[1]+`));
        int index = resTexRC.x * `+n[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;
      int r = index / `+t[1]+`;
      int c = index - r * `+t[1]+`;
      return ivec2(r, c);
    }
  `}function Ap(t){return"offset"+t}function Cue(t){var n=t.name;return`
    vec4 `+("get"+n.charAt(0).toUpperCase()+n.slice(1))+`() {
      return `+Kl().texture2D+"("+n+`, halfCR);
    }
  `}function Iue(t){var n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"float "+e+"() {return "+n+";}";var r=t.shapeInfo.texShape,i=r[0],o=r[1];if(i===1&&o===1)return`
      float `+e+`() {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var a=t.shapeInfo.texShape;return`
    float `+e+`() {
      vec2 uv = uvFromFlat(`+a[0]+", "+a[1]+", "+Ap(n)+`);
      return sampleTexture(`+n+`, uv);
    }
  `}function Sue(t){var n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=Kl();return`
    vec4 `+e+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+i[0]+", "+i[1]+`, index);
      return `+o.texture2D+"("+n+`, uv);
    }
  `}function Eue(t){var n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float `+e+`(int index) {
        `+zf(t)+`
      }
    `;var r=t.shapeInfo.texShape,i=r[0],o=r[1];if(o===1&&i===1)return`
      float `+e+`(int index) {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var a=Ap(n);return o===1?`
      float `+e+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+a+") + 0.5) / "+i+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:i===1?`
      float `+e+`(int index) {
        vec2 uv = vec2((float(index + `+a+") + 0.5) / "+o+`.0, 0.5);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+e+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+o+", index + "+a+`);
      return sampleTexture(`+n+`, uv);
    }
  `}function Due(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],s=Kl();if(i!=null&&bo(n,i))return`
      vec4 `+r+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+a+".0, "+o+`.0);

        return `+s.texture2D+"("+e+`, uv);
      }
    `;var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 `+r+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+Math.ceil(n[1]/2)+", "+l[0]+", "+l[1]+`, row, col);
      return `+s.texture2D+"("+e+`, uv);
    }
  `}function Tue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=t.shapeInfo.texShape;if(i!=null&&bo(n,i)){var o=i[0];return`
    float `+r+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+i[1]+".0, "+o+`.0);
      return sampleTexture(`+e+`, uv);
    }
  `}var a=rd(n),s=a.newShape,l=a.keptDims,u=s;if(u.length<n.length)return`
      `+Hf(Wf(t,u))+`
      float `+r+`(int row, int col) {
        return `+r+"("+qf(["row","col"],l)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+n[1]+`, 1)));
        `+zf(t)+`
      }
    `;var c=i[0],d=i[1],p=Ap(e);return d===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+c+`.0);
      return sampleTexture(`+e+`, uv);
    }
  `:c===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+d+`.0, 0.5);
      return sampleTexture(`+e+`, uv);
    }
  `:`
  float `+r+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+n[1]+" + col + "+p+`;
    vec2 uv = uvFromFlat(`+c+", "+d+`, index);
    return sampleTexture(`+e+`, uv);
  }
`}function Aue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1)return`
        `+ML(Wf(t,n.slice(1)))+`
        vec4 `+r+`(int b, int row, int col) {
          return `+r+"("+qf(["b","row","col"],[1,2])+`);
        }
      `;var a=o[0],s=o[1],l=Math.ceil(n[2]/2);return`
    vec4 `+r+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+a+", "+s+", "+l*Math.ceil(n[1]/2)+", "+l+`, b, row, col);
      return `+Kl().texture2D+"("+e+`, uv);
    }
  `}function kue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=n[1]*n[2],o=n[2],a=rd(n),s=a.newShape,l=a.keptDims,u=s;if(u.length<n.length)return`
        `+Hf(Wf(t,u))+`
        float `+r+`(int row, int col, int depth) {
          return `+r+"("+qf(["row","col","depth"],l)+`);
        }
      `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+o+`, 1)));
        `+zf(t)+`
      }
    `;var c=t.shapeInfo.texShape,d=c[0],p=c[1],h=t.shapeInfo.flatOffset;return p===i&&h==null?`
        float `+r+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+o+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+p+".0, "+d+`.0);
          return sampleTexture(`+e+`, uv);
        }
      `:p===o&&h==null?`
    float `+r+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+n[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+".0, "+d+`.0);
      return sampleTexture(`+e+`, uv);
    }
  `:`
      float `+r+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+o+" + depth + "+Ap(e)+`;
        vec2 uv = uvFromFlat(`+d+", "+p+`, index);
        return sampleTexture(`+e+`, uv);
      }
  `}function Mue(t){for(var n=t.shapeInfo.logicalShape,e=n.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],l=a[1],u=Math.ceil(n[e-1]/2),c=u*Math.ceil(n[e-2]/2),d="int b, int row, int col",p="b * "+c+" + (row / 2) * "+u+" + (col / 2)",h=2;h<e-1;h++)d="int b"+h+", "+d,p="b"+h+" * "+(c*=n[e-h-1])+" + "+p;return`
    vec4 `+i+"("+d+`) {
      int index = `+p+`;
      int texR = index / `+l+`;
      int texC = index - texR * `+l+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+l+", "+s+`);
      return `+Kl().texture2D+"("+r+`, uv);
    }
  `}function Rue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,s=rd(n),l=s.newShape,u=s.keptDims;if(l.length<n.length)return`
      `+Hf(Wf(t,l))+`
      float `+r+`(int row, int col, int depth, int depth2) {
        return `+r+"("+qf(["row","col","depth","depth2"],u)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+a+", "+o+", "+i+`, 1)));
        `+zf(t)+`
      }
    `;var c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];return h===a&&c==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+o+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+h+".0, "+p+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:h===i&&c==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+n[1]*n[2]+", "+n[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+h+".0, "+p+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+a+" + col * "+o+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+p+", "+h+", index + "+Ap(e)+`);
      return sampleTexture(`+e+`, uv);
    }
  `}function Nue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=n[4],o=n[3]*i,a=n[2]*o,s=n[1]*a,l=rd(n),u=l.newShape,c=l.keptDims;if(u.length<n.length)return`
      `+Hf(Wf(t,u))+`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        return `+r+"("+qf(["row","col","depth","depth2","depth3"],c)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+s+", "+a+", "+o+", "+i+`)) +
          depth3;
        `+zf(t)+`
      }
    `;var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],f=p[1];return f===s&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+a+", "+o+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+f+".0, "+h+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:f===i&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]+`,
               `+n[2]*n[3]+", "+n[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+f+".0, "+h+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+s+" + col * "+a+" + depth * "+o+` +
          depth2 * `+i+" + depth3 + "+Ap(e)+`;
      vec2 uv = uvFromFlat(`+h+", "+f+`, index);
      return sampleTexture(`+e+`, uv);
    }
  `}function Fue(t){var n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),i=rd(n),o=i.newShape,a=i.keptDims;if(o.length<n.length)return`
      `+Hf(Wf(t,o))+`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+r+"("+qf(["row","col","depth","depth2","depth3","depth4"],a)+`);
      }
    `;var s=n[5],l=n[4]*s,u=n[3]*l,c=n[2]*u,d=n[1]*c;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+u+", "+l+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+s+`, 1)));
        `+zf(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],m=h[1];return m===d&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+c+", "+u+", "+l+", "+s+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+f+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:m===s&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]*n[4]+`,
               `+n[2]*n[3]*n[4]+`,
               `+n[3]*n[4]+`,
               `+n[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+f+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+u+` +
          depth2 * `+l+" + depth3 * "+s+" + depth4 + "+Ap(e)+`;
      vec2 uv = uvFromFlat(`+f+", "+m+`, index);
      return sampleTexture(`+e+`, uv);
    }
  `}function zf(t){var n=t.name,e=Yt(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Oue(t,n){var e,r=t.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",a=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,l=Nf(t.shapeInfo.logicalShape,n.logicalShape),u=jr(s),c=s-a,d=["x","y","z","w","u","v"];e=a===0?"":s<2&&l.length>=1?"coords = 0;":l.map(function(g){return"coords."+d[g+c]+" = 0;"}).join(`
`);var p="";p=s<2&&a>0?"coords":t.shapeInfo.logicalShape.map(function(g,y){return"coords."+d[y+c]}).join(", ");var h="return outputValue;";if(a===1&&s>1)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(a===0&&s>0)h=s===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(l.length){var f=a-2,m=a-1;l.indexOf(f)>-1&&l.indexOf(m)>-1?h="return vec4(outputValue.x);":l.indexOf(f)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(m)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 `+o+`() {
      `+u+` coords = getOutputCoords();
      `+e+`
      vec4 outputValue = get`+i+"("+p+`);
      `+h+`
    }
  `}function Pue(t,n){var e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),i="get"+r+"AtOutCoords",o=n.texShape,a=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&bo(a,o))return`
      float `+i+`() {
        return sampleTexture(`+e+`, resultUV);
      }
    `;var u=jr(l),c=Nf(t.shapeInfo.logicalShape,n.logicalShape),d=l-s,p=["x","y","z","w","u","v"];return`
    float `+i+`() {
      `+u+` coords = getOutputCoords();
      `+(s===0?"":l<2&&c.length>=1?"coords = 0;":c.map(function(h){return"coords."+p[h+d]+" = 0;"}).join(`
`))+`
      return get`+r+"("+(l<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(h,f){return"coords."+p[f+d]}).join(", "))+`);
    }
  `}function jr(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Wf(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function qf(t,n){return n.map(function(e){return t[e]}).join(", ")}var Lue=function(){return function(t,n,e,r){this.variableNames=["A"],this.usesPackedTextures=!0,de(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,l=this.outputShape,u=l.length,c=jr(u),d=Qa("coords",u);if(o===1){var p=jr(s=u+1);a=`
        `+p+" sourceLocR = "+p+"("+d.join()+`, 0);
        ++`+d[u-1]+`;
        `+p+" sourceLocG = "+p+"("+d.join()+`, 0);
        ++`+d[u-2]+`;
        `+p+" sourceLocA = "+p+"("+d.join()+`, 0);
        --`+d[u-1]+`;
        `+p+" sourceLocB = "+p+"("+d.join()+`, 0);
        --`+d[u-2]+";"}else s=u,a=`
        `+c+` sourceLocR = coords;
        ++`+d[u-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[u-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[u-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[u-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),f="."+h[s-1],m=h.map(function(E){return"int "+E}),g=Qa("sourceLocR",s-1).concat("inIdx.r"),y=Qa("sourceLocG",s-1).concat("inIdx.g"),b=Qa("sourceLocB",s-1).concat("inIdx.b"),w=Qa("sourceLocA",s-1).concat("inIdx.a"),x=e==="max"?"greaterThan":"lessThan",I=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",D=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+b.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",A=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+A+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[u-1]+" < "+(l[u-1]-1)+`;
        bool hasNextRow = `+d[u-2]+" < "+(l[u-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+f+", sourceLocG"+f+`,
          sourceLocB`+f+", sourceLocA"+f+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+I+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+x+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}(),Bue=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=s-1-t.padInfo.top,c=l-1-t.padInfo.left,d=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}(),Vue=function(){return function(t,n,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Jn(t,n),Jn(t,e);var a="0.0";r!=null&&(Jn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Jn(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}(),jue=function(){return function(t,n,e,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],Jn(t,n),Jn(t,e);var a="vec4(0.0)";r!=null&&(Jn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Jn(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `}}(),wP={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},xP=function(){return function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Jn(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}(),wT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,UD="return a + b;",HD="return a - b;",CP="return a * b;",Uue=`if (a == b) return 1.0;
  return a / b;`,Hue=`
  float resultSign = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  int result = ia / ib;
  int amodb = ia - ib * result;

  if (resultSign < 0.0 && amodb != 0) {
    result -= 1;
  }
  return float(result);
`,zue=`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,IP="return (a - b) * (a - b);",Wue="return float(a == b);",que="return float(a != b);",Gue="return float(a < b);",$ue="return float(a <= b);",Kue="return float(a > b);",Yue="return float(a >= b);",Xue="return float(a >= 1.0 && b >= 1.0);",Que="return float(a >= 1.0 || b >= 1.0);",Zue=wT+`
  return max(a, b);
`,Jue=wT+`
  return min(a, b);
`,ece=`if (b == 0.0) return NAN;
  return mod(a, b);`,tce=wT+`
  return atan(a, b);
`,nce="return (b >= 1.0) ? a : a * (b + 1.0);",rce="return (a < 0.) ? b * a : a;",ui=function(){return function(t,n,e){this.variableNames=["A","B"],this.outputShape=Jn(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),X0=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`,ice=`
  vec4 resultSign = sign(a) * sign(b);
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  ivec4 result = ia / ib;
  ivec4 amodb = ia - ib * result;

  // Vectorize INT_DIV
  // if (resultSign < 0.0 && amodb != 0) result -= 1;
  // return float(result);
  return vec4(result -
     ivec4(lessThan(resultSign, vec4(0.0))) * ivec4(notEqual(amodb, ivec4(0))));
`,oce=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+X0+`
  return result;
`,ace=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,sce=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,lce=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+X0+`
  return result;
`,uce=`
  return vec4(equal(a, b));
`,cce=`
  return vec4(notEqual(a, b));
`,dce=`
  return vec4(lessThan(a, b));
`,pce=`
  return vec4(lessThanEqual(a, b));
`,hce=`
  return vec4(greaterThan(a, b));
`,fce=`
  return vec4(greaterThanEqual(a, b));
`,mce=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,gce=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,vce=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+X0+`
  return result;
`,yce=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+X0+`
  return result;
`,bce=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+X0+`
  return result;
`,ju=function(){return function(t,n,e){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=Jn(n,e),this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),_ce=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, min, max));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"min"),r.maxLoc=i.getUniformLocationNoThrow(o,"max")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),wce=function(){function t(n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=n,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(min), vec4(max)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"min"),r.maxLoc=i.getUniformLocationNoThrow(o,"max")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),xce=function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}(),Cce=function(){return function(t){this.outputShape=[],this.outputShape=Pf(t,1),this.variableNames=t.map(function(s,l){return"T"+l});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `}}(),Ice=function(){return function(t,n){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Pf(t,n);var e=this.outputShape,r=e.length,i=jr(r),o=Qa("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(m,g){return"T"+g});var s=new Array(t.length-1);s[0]=t[0][n];for(var l=1;l<s.length;l++)s[l]=s[l-1]+t[l][n];var u=a[n],c="vec2("+a.slice(-2).join()+")",d=a.join(),p="if ("+u+" < "+s[0]+`)
          return getChannel(getT0(`+d+"), "+c+");";for(l=1;l<s.length;l++){var h=s[l-1];p+=`
        else if (`+u+" < "+s[l]+`) {
          `+u+" -= "+h+`;
          return getChannel(getT`+l+"("+d+"), "+c+`);
        }`}var f=s.length;p+=`
        else {
          `+u+" -= "+s[s.length-1]+`;
          return getChannel(getT`+f+"("+d+"), "+c+`);
        }`,this.userCode=`
      float getValue(`+a.map(function(m){return"int "+m})+`) {
        `+p+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);
        if (++`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }
        if (++`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }
        if (`+o[r-2]+" < "+e[r-2]+` &&
            --`+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `}}(),Sce=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ece=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,a=e-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Dce=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Tce=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=n-1-t.padInfo.front,l=e-1-t.padInfo.top,u=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+l+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ace=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TODO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),kce=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,a=e-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TODO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Mce=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.top,e=t.padInfo.left,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.filterHeight,l=t.filterWidth,u=4*Math.floor(t.inChannels/4),c=t.inChannels%4;this.userCode=`
      const ivec2 strides = ivec2(`+r+", "+i+`);
      const ivec2 pads = ivec2(`+n+", "+e+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`; wR++) {
          int xR = xRCorner + wR * `+o+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+l+`; wC++) {
            int xC = xCCorner + wC * `+a+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+u+`; d1 += 4) {
              vec4 xValues = vec4(
                getX(batch, xR, xC, d1),
                getX(batch, xR, xC, d1 + 1),
                getX(batch, xR, xC, d1 + 2),
                getX(batch, xR, xC, d1 + 3)
              );
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              dotProd += dot(xValues, wValues);
            }

            if (`+(c===1)+`) {
              dotProd +=
                getX(batch, xR, xC, `+u+`) *
                getW(wR, wC, `+u+`, d2);
            } else if (`+(c===2)+`) {
              vec2 xValues = vec2(
                getX(batch, xR, xC, `+u+`),
                getX(batch, xR, xC, `+u+` + 1)
              );
              vec2 wValues = vec2(
                getW(wR, wC, `+u+`, d2),
                getW(wR, wC, `+u+` + 1, d2)
              );
              dotProd += dot(xValues, wValues);
            } else if (`+(c===3)+`) {
              vec3 xValues = vec3(
                getX(batch, xR, xC, `+u+`),
                getX(batch, xR, xC, `+u+` + 1),
                getX(batch, xR, xC, `+u+` + 2)
              );
              vec3 wValues = vec3(
                getW(wR, wC, `+u+`, d2),
                getW(wR, wC, `+u+` + 1, d2),
                getW(wR, wC, `+u+` + 2, d2)
              );
              dotProd += dot(xValues, wValues);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Rce=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(f===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(f===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(f===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Nce=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,e=t.inWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,l=t.dilationWidth,u=t.filterHeight,c=t.filterWidth,d=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+r+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+d+`;
        int q = d2 - d1 * `+d+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+s+`;

          if (xR < 0 || xR >= `+n+`) {
            continue;
          }

          for (int wC = 0; wC < `+c+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+e+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }
        setOutput(dotProd);
      }
    `}}(),Fce=function(){return function(t){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var n=t.inHeight,e=t.inWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,l=t.dilationWidth,u=t.filterHeight,c=t.filterWidth,d=c,p="int xR; int xC; int xCOffset;",h=0;h<u;h++)for(var f=0;f<c;f++)p+=`
          vec4 xTexelR`+h+"C"+2*f+` = vec4(0.);
          vec4 wR`+h+"C"+f+` = vec4(0.);
          vec4 xR`+h+"C"+f+" = vec4(0.);";for(h=0;h<u;h++)for(var m=0;m<d;m++){if(p+=`
          xR = xRCorner + `+h*s+`;
          xC = xCCorner + `+(f=2*m)*l+`;
        `,a===1){if(f<c&&(p+=i%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+n+" && xCOffset >= 0 && xCOffset < "+e+`) {
                  xTexelR`+h+"C"+f+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+h+"C"+f+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+n+" && xCOffset >= 0 && xCOffset < "+e+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+h+"C"+f+" = vec4(previous.zw, xTexelR"+h+"C"+f+`.xy);
                } else {
                  xR`+h+"C"+f+" = vec4(0, 0, xTexelR"+h+"C"+f+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+n+" && xC >= 0 && xC < "+e+`) {
                  xTexelR`+h+"C"+f+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+h+"C"+f+` = vec4(0.);
                }

                xR`+h+"C"+f+" = xTexelR"+h+"C"+f+`;
              `,f+1<c)){var g=i%2==0?Sp(l):l;l%2==0&&i%2==1||l%2!=0&&i%2!=1?(p+=`
                  xCOffset = xC + `+i%2+" + "+g+`;

                  if(xR >= 0 && xR < `+n+` &&
                    xCOffset >= 0 && xCOffset < `+e+`) {
                    xTexelR`+h+"C"+(f+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,l>1&&(p+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+n+` &&
                      xCOffset >= 0 && xCOffset < `+e+`) {
                      xTexelR`+h+"C"+f+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+h+"C"+f+` = vec4(0.);
                    }
                  `),p+=`
                  xR`+h+"C"+(f+1)+` = vec4(
                    xTexelR`+h+"C"+f+".zw, xTexelR"+h+"C"+(f+2)+`.xy);
                `):p+=`
                  xCOffset = xC + `+g+`;

                  if(xR >= 0 && xR < `+n+` &&
                    xCOffset >= 0 && xCOffset < `+e+`) {
                    xTexelR`+h+"C"+(f+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+h+"C"+(f+1)+" = xTexelR"+h+"C"+(f+2)+`;
                `}}else f<c&&(p+=`
              if(xR >= 0 && xR < `+n+`) {
            `,i%2==1?(p+=`
                xCOffset = xC + 1 - `+a+`;
                if(xCOffset >= 0 && xCOffset < `+e+`) {
                  xTexelR`+h+"C"+f+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+h+"C"+f+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+e+`) {
                  xTexelR`+h+"C"+(f+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+h+"C"+(f+2)+` = vec4(0.);
                }

                xR`+h+"C"+f+` = vec4(
                  xTexelR`+h+"C"+f+".zw, xTexelR"+h+"C"+(f+2)+`.zw);
              `,f+1<c&&(p+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+a+`;
                  if(xCOffset >= 0 && xCOffset < `+e+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+h+"C"+(f+1)+" = vec4(xTexelR"+h+"C"+(f+2)+`.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < `+e+`) {
                  xTexelR`+h+"C"+f+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+h+"C"+f+` = vec4(0.);
                }

                xCOffset = xC + `+a+`;
                if(xCOffset >= 0 && xCOffset < `+e+`) {
                  xTexelR`+h+"C"+(f+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+h+"C"+(f+2)+` = vec4(0.);
                }

                xR`+h+"C"+f+` = vec4(
                  xTexelR`+h+"C"+f+".xy, xTexelR"+h+"C"+(f+2)+`.xy);
              `,f+1<c&&(p+=`
                  xR`+h+"C"+(f+1)+` = vec4(
                    xTexelR`+h+"C"+f+".zw, xTexelR"+h+"C"+(f+2)+`.zw);
                `)),p+="}");f<c&&(p+=`
            vec4 wTexelR`+h+"C"+f+" = getW("+h+", "+f+`, d1, q);
            wR`+h+"C"+f+" = vec4(wTexelR"+h+"C"+f+".xz, wTexelR"+h+"C"+f+`.xz);
          `,f+1<c&&(p+=`
              vec4 wTexelR`+h+"C"+(f+1)+" = getW("+h+", "+(f+1)+`, d1, q);
              wR`+h+"C"+(f+1)+` =
                vec4(wTexelR`+h+"C"+(f+1)+".xz, wTexelR"+h+"C"+(f+1)+".xz);"))}for(h=0;h<u;h++)for(f=0;f<c;f++)p+="result += xR"+h+"C"+f+" * wR"+h+"C"+f+";";this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+r+", "+i+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 result = vec4(0.);

        `+p+`

        setOutput(result);
      }
    `}}(),Oce=function(){return function(t,n,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],l=t[3],u=n[0],c=e[0],d=e[1];this.outputShape=[u,c,d,l];var p=r==="bilinear"?1:0,h=[a-1+".0",s-1+".0"],f=h[0],m=h[1],g=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],y=g[0],b=g[1],w=g[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],I=x[0],D=x[1],A=x[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+I+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+b+`;
        float width_scale = `+D+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+f+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+A+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}(),Pce=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+jr(r)+` coords = getOutputCoords();
        int end = `+SP(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+SP(r,"coords")+` = idx;
          val += getX(`+Lce(r,"coords")+`);
        }
        setOutput(val);
      }
    `}}();function Lce(t,n){if(t===1)return""+n;if(t===2)return n+".x, "+n+".y";if(t===3)return n+".x, "+n+".y, "+n+".z";if(t===4)return n+".x, "+n+".y, "+n+".z, "+n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function SP(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Bce=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Vce=function(){return function(t){this.variableNames=["A"];var n=Kl();this.outputShape=t,this.userCode=`
      const float FLOAT_MAX = 1.70141184e38;
      const float FLOAT_MIN = 1.17549435e-38;

      lowp vec4 encode_float(highp float v) {
        if (isnan(v)) {
          return vec4(255, 255, 255, 255);
        }

        highp float av = abs(v);

        if(av < FLOAT_MIN) {
          return vec4(0.0, 0.0, 0.0, 0.0);
        } else if(v > FLOAT_MAX) {
          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
        } else if(v < -FLOAT_MAX) {
          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
        }

        highp vec4 c = vec4(0,0,0,0);

        highp float e = floor(log2(av));
        highp float m = exp2(fract(log2(av))) - 1.0;

        c[2] = floor(128.0 * m);
        m -= c[2] / 128.0;
        c[1] = floor(32768.0 * m);
        m -= c[1] / 32768.0;
        c[0] = floor(8388608.0 * m);

        highp float ebias = e + 127.0;
        c[3] = floor(ebias / 2.0);
        ebias -= c[3] * 2.0;
        c[2] += floor(ebias) * 128.0;

        c[3] += 128.0 * step(0.0, -v);

        return c / 255.0;
      }

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `}}(),EP={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"},DP=function(){return function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}(),jce=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),Uce=function(){return function(t){this.variableNames=["A"];var n=Kl(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}(),Hce=function(){return function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var i=jr(this.rank),o=zce(t,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}();function zce(t,n){var e=t.length;if(e>4)throw Error("Gather for rank "+e+" is not yet supported");if(e===1)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<t.length;o++)o===n?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o]);return i.join()}var zl,wa,Wce=function(){return function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=jr(n.length),i=jr(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}();function Gf(t,n){return[n,t]}function Q0(t,n){return t*n}function qce(t,n){if(t%n!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+n);return t/n}function Gce(t,n,e){var r=Q0(t.length,e);if(n.length<r)throw new Error("unpackedArray length ("+n.length+") must be >= "+r);for(var i=0,o=0;o<t.length;++o)n[i]=t[o],i+=e}function NL(t,n,e){var r=qce(t.length,e);if(n.length<r)throw new Error("matrix length ("+n.length+") must be >= "+r);for(var i=0,o=0;o<t.length;o+=e)n[i++]=t[o]}function kp(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function xT(t,n){var e=kp(t,n);return e[0]*e[1]*4}function $ce(t,n,e,r,i){for(var o=r%2==1,a=e%2==1,s=Math.floor(r/2),l=Math.floor(e/2),u=Math.ceil(r/2),c=u*Math.ceil(e/2),d=Sp(e)*Sp(r),p=0;p<n;p++){for(var h=p*e*r,f=p*d,m=o?4:0,g=r,y=f,b=0;b<l;++b){for(var w=2*b*r,x=0;x<s;++x){var I=h+w+2*x;i[y]=t[I],i[y+1]=t[I+1],i[y+2]=t[I+g],i[y+3]=t[I+g+1],y+=4}y+=m}if(o){I=h+r-1,y=f+4*(u-1);var D=2*r;for(m=4*u,b=0;b<l;++b)i[y]=t[I],i[y+2]=t[I+r],I+=D,y+=m}if(a){for(I=h+(e-1)*r,y=f+4*(c-u),x=0;x<s;++x)i[y++]=t[I++],i[y++]=t[I++],y+=2;o&&a&&(i[f+d-4]=t[I])}}return i}function FL(t,n,e,r,i){var o=e*r;if(i.length<o)throw new Error("matrix length ("+i.length+") must be >= "+o);for(var a=r%2==1,s=e%2==1,l=Math.floor(r/2),u=Math.floor(e/2),c=Math.ceil(r/2),d=c*Math.ceil(e/2),p=Sp(e)*Sp(r),h=0;h<n;h++){for(var f=h*e*r,m=h*p,g=a?4:0,y=r+(a?1:0),b=m,w=f,x=f+r,I=0;I<u;++I){for(var D=0;D<l;++D)i[w++]=t[b++],i[w++]=t[b++],i[x++]=t[b++],i[x++]=t[b++];b+=g,w+=y,x+=y}if(a){b=m+4*(c-1);var A=f+r-1;for(g=4*c,y=2*r,I=0;I<u;++I)i[A]=t[b],i[A+r]=t[b+2],b+=g,A+=y}if(s){for(b=m+4*(d-c),A=f+(e-1)*r,D=0;D<l;++D)i[A++]=t[b++],i[A++]=t[b++],b+=2;a&&(i[f+e*r-1]=t[b])}}return i}function Mt(t,n,e){var r=e();return n&&Kce(t),r}function Kce(t){var n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+PL(t,n))}(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(zl||(zl={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(wa||(wa={}));var Yce=596e-10,Xce=65504;function OL(t){return!!(ne.get("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Yce<Math.abs(t)&&Math.abs(t)<Xce)}function PL(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function B0(t,n,e){return zu(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function LL(t,n,e){var r=zu(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Mt(t,n,function(){return t.shaderSource(r,e)}),Mt(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function BL(t,n,e){var r=zu(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Mt(t,n,function(){return t.shaderSource(r,e)}),Mt(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw Zce(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Qce=/ERROR: [0-9]+:([0-9]+):/g;function Zce(t,n){var e=Qce.exec(n);if(e==null)return console.log("Couldn't parse line number in error: "+n),void console.log(t);for(var r=+e[1],i=t.split(`
`),o=i.length.toString().length+2,a=i.map(function(p,h){return xp((h+1).toString(),o)+p}),s=0,l=0;l<a.length;l++)s=Math.max(a[l].length,s);var u=a.slice(0,r-1),c=a.slice(r-1,r),d=a.slice(r);console.log(u.join(`
`)),console.log(n.split(`
`)[0]),console.log("%c "+xp(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function VL(t,n){return zu(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function jL(t,n,e){if(Mt(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Y_(t,n,e){if(Mt(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function UL(t,n,e){var r=zu(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Mt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Mt(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function HL(t,n,e){var r=zu(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Mt(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Mt(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function zL(){return ne.get("WEBGL_VERSION")===2?1:4}function WL(t,n){return zu(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function CT(t,n){var e=ne.get("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function qL(t,n){return zu(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function tT(t,n,e,r,i,o,a,s){var l=t.getAttribLocation(e,r);return l!==-1&&(Mt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Mt(t,n,function(){return t.vertexAttribPointer(l,o,t.FLOAT,!1,a,s)}),Mt(t,n,function(){return t.enableVertexAttribArray(l)}),!0)}function GL(t,n,e,r){QL(t,r),Mt(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function Jce(t,n,e){QL(t,e),Mt(t,n,function(){return t.activeTexture(t.TEXTURE0+e)}),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function $L(t,n,e,r){return zu(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function KL(t,n,e){return t.getUniformLocation(n,e)}function YL(t,n,e,r,i,o){Mt(t,n,function(){return GL(t,n,r,o)}),Mt(t,n,function(){return t.uniform1i(i,o)})}function ede(t,n){Mt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Mt(t,n,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Mt(t,n,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})}function X_(t,n,e,r){Mt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Mt(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function nT(t,n,e){Mt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Mt(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function V0(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+XL(t,n))}function XL(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function zu(t,n,e,r){var i=Mt(t,n,function(){return e()});if(i==null)throw new Error(r);return i}function QL(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function bp(t,n){return n===void 0&&(n=2),Yt(t.slice(0,t.length-n))}function _p(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ZL(t,n){var e;n===void 0&&(n=!1);var r=ne.get("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(u,c){return c>=t.length-2?Sp(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=rd(t);t=i.newShape}var o=Yt(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var a=bp(t),s=2,l=2;return t.length&&(s=(e=_p(t))[0],l=e[1]),GD(o=a*(s/2)*(l/2)).map(function(u){return 2*u})}return GD(o)}function W_(t){return t%2==0}function j0(t,n){if(bo(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||W_(e)&&W_(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&W_(t[0])&&W_(n[0])}var tde=Object.freeze({callAndCheck:Mt,canBeRepresented:OL,getWebGLErrorMessage:PL,getExtensionOrThrow:B0,createVertexShader:LL,createFragmentShader:BL,createProgram:VL,linkProgram:jL,validateProgram:Y_,createStaticVertexBuffer:UL,createStaticIndexBuffer:HL,getNumChannels:zL,createTexture:WL,validateTextureSize:CT,createFramebuffer:qL,bindVertexBufferToProgramAttribute:tT,bindTextureUnit:GL,unbindTextureUnit:Jce,getProgramUniformLocationOrThrow:$L,getProgramUniformLocation:KL,bindTextureToProgramUniformSampler:YL,bindCanvasToFramebuffer:ede,bindColorTextureToFramebuffer:X_,unbindColorTextureFromFramebuffer:nT,validateFramebuffer:V0,getFramebufferErrorMessage:XL,getBatchDim:bp,getRowsCols:_p,getTextureShapeFromLogicalShape:ZL,isReshapeFree:j0});function JL(t,n){var e=Kl();return LL(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function e6(t,n){return UL(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function t6(t,n){return HL(t,n,new Uint16Array([0,1,2,2,1,3]))}function n6(t,n){var e,r,i,o,a,s,l,u,c=t;return ne.get("WEBGL_VERSION")===2?(e=c.R32F,r=c.R16F,i=c.RGBA16F,o=c.RGBA32F,a=c.RED,s=4,l=1,u=c.HALF_FLOAT):(e=t.RGBA,r=t.RGBA,i=t.RGBA,o=c.RGBA,a=t.RGBA,s=4,l=4,u=n!=null?n.HALF_FLOAT_OES:null),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u}}function Z0(t,n,e,r,i,o,a){CT(e,r);var s=WL(t,n),l=t.TEXTURE_2D;return Mt(t,n,function(){return t.bindTexture(l,s)}),Mt(t,n,function(){return t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Mt(t,n,function(){return t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Mt(t,n,function(){return t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Mt(t,n,function(){return t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Mt(t,n,function(){return t.texImage2D(l,0,i,e,r,0,o,a,null)}),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function r6(t,n,e,r,i){var o=Gf(e,r);return Z0(t,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function i6(t,n,e,r,i){var o=Gf(e,r);return Z0(t,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function o6(t,n,e,r,i){var o=Gf(e,r);return Z0(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function a6(t,n,e,r,i){var o=kp(e,r);return Z0(t,n,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function s6(t,n,e,r,i){var o=kp(e,r);return Z0(t,n,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function l6(t,n,e,r){return Mt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),tT(t,n,e,"clipSpacePos",r,3,20,0)&&tT(t,n,e,"uv",r,2,20,12)}function u6(t,n,e,r){Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Mt(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function c6(t,n,e,r,i,o,a){CT(r,i),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Mt(t,n,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,i,a,t.FLOAT,o)}),Mt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function d6(t,n,e,r,i,o,a,s){var l,u=Gf(r,i),c=u[0],d=u[1],p=r*i;s.defaultNumChannels===1&&p===o.length?l=o:Gce(o,l=new Float32Array(p*a),a),c6(t,n,e,c,d,l,s.textureFormatFloat)}function p6(t,n,e,r,i,o,a,s,l,u){var c=kp(a,s),d=c[0],p=c[1],h=new Float32Array(xT(a,s));$ce(l,r,i,o,h),c6(t,n,e,d,p,h,t.RGBA)}function h6(t,n,e,r,i,o){var a=e;if(ne.get("WEBGL_VERSION")===2){var s=t,l=s.createBuffer();Mt(t,n,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,l)});var u=4*Q0(r*i,o.downloadUnpackNumChannels);Mt(t,n,function(){return t.bufferData(s.PIXEL_PACK_BUFFER,u,s.STREAM_READ)}),Mt(t,n,function(){return s.readPixels(0,0,i,r,t.RGBA,t.FLOAT,0)}),Mt(t,n,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,null)}),a=l}return a}function f6(t,n,e,r,i){var o=t,a=new Float32Array(Q0(e*r,i.downloadUnpackNumChannels));o.bindBuffer(o.PIXEL_PACK_BUFFER,n),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,a),o.bindBuffer(o.PIXEL_PACK_BUFFER,null);var s=new Float32Array(e*r);return NL(a,s,i.downloadUnpackNumChannels),s}function m6(t,n,e,r,i){var o=Gf(e,r),a=o[0],s=o[1],l=new Float32Array(Q0(e*r,i.downloadUnpackNumChannels));Mt(t,n,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.FLOAT,l)});var u=new Float32Array(e*r);return NL(l,u,i.downloadUnpackNumChannels),u}function g6(t,n,e,r,i){var o=Gf(e,r),a=o[0],s=o[1],l=new Uint8Array(Q0(e*r,4));return Mt(t,n,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function v6(t,n,e,r,i,o,a,s){var l=t,u=new Float32Array(xT(o,a));l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null);var c=new Float32Array(Yt([e,r,i]));return FL(u,e,r,i,c),c}function y6(t,n,e,r,i,o,a,s){var l=kp(o,a),u=l[0],c=l[1],d=new Float32Array(xT(o,a));Mt(t,n,function(){return t.readPixels(0,0,u,c,t.RGBA,t.FLOAT,d)});var p=new Float32Array(Yt([e,r,i]));return FL(d,e,r,i,p)}var nde=Object.freeze({createVertexShader:JL,createVertexBuffer:e6,createIndexBuffer:t6,getTextureConfig:n6,createFloat32MatrixTexture:r6,createFloat16MatrixTexture:i6,createUnsignedBytesMatrixTexture:o6,createPackedMatrixTexture:a6,createFloat16PackedMatrixTexture:s6,bindVertexProgramAttributeStreams:l6,uploadPixelDataToTexture:u6,uploadMatrixToTexture:d6,uploadMatrixToPackedTexture:p6,maybeCreateBufferFromOutputTexture:h6,downloadFloat32MatrixFromBuffer:f6,downloadFloat32MatrixFromOutputTexture:m6,downloadByteEncodedFloatMatrixFromOutputTexture:g6,downloadPackedMatrixFromBuffer:v6,downloadMatrixFromPackedOutputTexture:y6}),b6=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=ne.get("WEBGL_VERSION");n!=null?(this.gl=n,Lse(e,n)):this.gl=ql(e),ne.get("WEBGL_VERSION")===1?(this.textureFloatExtension=B0(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),ne.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=B0(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=B0(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=e6(this.gl,this.debug),this.indexBuffer=t6(this.gl,this.debug),this.framebuffer=qL(this.gl,this.debug),this.textureConfig=n6(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return ne.get("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Mt(e,this.debug,function(){return e.finish()}),Mt(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Mt(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),Mt(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Mt(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Mt(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),r6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),i6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),o6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),u6(this.gl,this.debug,n,e)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),s6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),a6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(nT(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Mt(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.uploadMatrixToTexture=function(n,e,r,i){this.throwIfDisposed();var o=zL();return d6(this.gl,this.debug,n,e,r,i,o,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(n,e,r,i,o,a,s){return this.throwIfDisposed(),p6(this.gl,this.debug,n,e,r,i,o,a,s,this.textureConfig)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return m6(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return g6(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,i,o,a){return v6(this.gl,n,e,r,i,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e,r){return f6(this.gl,n,e,r,this.textureConfig)},t.prototype.maybeCreateBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var i=h6(this.gl,this.debug,n,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,i=this;if(ne.get("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r,i,o,a){var s=this;return this.downloadMatrixDriver(n,function(){return y6(s.gl,s.debug,e,r,i,o,a,s.textureConfig)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=BL(e,this.debug,n),i=JL(e,this.debug),o=VL(e,this.debug);return Mt(e,this.debug,function(){return e.attachShader(o,i)}),Mt(e,this.debug,function(){return e.attachShader(o,r)}),jL(e,this.debug,o),this.debug&&Y_(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=l6(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Mt(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Y_(this.gl,this.debug,this.program),Mt(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?$L(this.gl,this.debug,n,e):KL(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Mt(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),YL(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var i=kp(e,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Y_(this.gl,this.debug,this.program),V0(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Mt(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Mt(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=B0(this.gl,this.debug,ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return Ln(this,void 0,void 0,function(){var e=this;return Bn(this,function(r){switch(r.label){case 0:return[4,$D(function(){return e.disposed||e.isQueryAvailable(n,ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=rde(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||$D(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),X_(this.gl,this.debug,n,this.framebuffer),this.debug&&V0(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(X_(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&V0(this.gl)):nT(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var i=this.gl;X_(i,this.debug,n,this.framebuffer),this.debug&&V0(i),this.outputTexture=n,Mt(i,this.debug,function(){return i.viewport(0,0,e,r)}),Mt(i,this.debug,function(){return i.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,i){var o=this;this.throwIfDisposed(),Mt(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function rde(t){for(var n=0;n<t.length&&t[n]();++n);return n-1}function ide(t,n,e,r){var i=n.userCode,o=e.map(function(m,g){var y={logicalShape:m.shape,texShape:m.isUniform?null:m.texData.texShape,isUniform:m.isUniform,isPacked:!m.isUniform&&m.texData.isPacked,flatOffset:null};return m.texData!=null&&m.texData.slice!=null&&m.texData.slice.flatOffset>0&&(y.flatOffset=m.texData.slice.flatOffset),{name:n.variableNames[g],shapeInfo:y}}),a=o.map(function(m){return m.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=tue(o,s,i,n.usesPackedTextures),u=t.createProgram(l),c=null,d=null;ne.get("WEBGL_VERSION")===1&&(c=t.getUniformLocation(u,"INFINITY",!1),d=t.getUniformLocation(u,"NAN",!1));for(var p={},h=0;h<n.variableNames.length;h++){var f=n.variableNames[h];p[f]=t.getUniformLocation(u,f,!1),p["offset"+f]=t.getUniformLocation(u,"offset"+f,!1)}return{program:n,source:l,webGLProgram:u,uniformLocations:p,inShapeInfos:a,outShapeInfo:s,infLoc:c,nanLoc:d}}function TP(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var i=e.logicalShape,o=n[r],a=o.shape;if(!bo(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,l=o.isUniform?null:o.texData.texShape;if(!bo(s,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+l+" must match")}})}function ode(t,n,e,r,i){TP(n.inShapeInfos,e),TP([n.outShapeInfo],[r]);var o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o,a[0],a[1]):t.setOutputMatrixTexture(o,a[0],a[1]),t.setProgram(n.webGLProgram),ne.get("WEBGL_VERSION")===1&&(n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN)),e.forEach(function(s,l){var u=n.program.variableNames[l],c=n.uniformLocations[u],d=n.uniformLocations["offset"+u];if(c!=null)if(s.isUniform)if(Yt(s.shape)<2)t.gl.uniform1f(c,s.uniformValues[0]);else{var p=s.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}else s.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,s.texData.slice.flatOffset),t.setInputMatrixTexture(s.texData.texture,c,l)}),i?.(t,n.webGLProgram),t.executeProgram()}function ade(t,n,e){var r="";n.concat(e).forEach(function(a){var s=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0,l=a.isUniform?"uniform":a.texData.texShape;r+=a.shape+"_"+l+"_"+s});var i=t.userCode,o=t.constructor.name;return o+="_"+r+"_"+i}var sde=function(){return function(t,n,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,l=e.outWidth,u=e.dilationWidth,c=e.dilationHeight,d=s.left,p=s.top,h=i*r,f=Kl();this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            int blockIndex = rc.y + col;
            int pos = rc.x + row;

            if(blockIndex >= `+t[1]+" || pos >= "+t[0]+`) continue;

            int offsetY = int(blockIndex / (`+l+")) * "+a+" - "+p+`;
            int d0 = offsetY + `+c+" * (pos / "+h+`);

            if(d0 >= `+n[0]+` || d0 < 0) continue;

            int offsetX = int(mod(float(blockIndex), `+l+".) * "+o+". - "+d+`.);
            int d1 = offsetX + `+u+" * (int(mod(float(pos), "+h+".) / "+i+`.));

            if(d1 >= `+n[1]+` || d1 < 0) continue;

            vec2 innerDims = vec2(d1, int(mod(float(pos), `+i+`.)));
            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),
                                              int(innerDims.y)), innerDims);
          }
        }

        `+f.output+` = result;
      }
    `}}(),lde=function(){return function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=t[3]-1;this.outputShape=t;var l="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+l+")":i===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `}}(),ude=function(){return function(t,n,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}(),cde=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,l=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}(),zD=function(){return function(t,n,e,r,i,o){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=n;var a=e?t[1]:t[2],s=Math.ceil(a/2),l=e?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",c=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",h="";o&&(p=`vec4 activation(vec4 x) {
        `+o+`
      }`,h="result = activation(result);");var f=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),this.userCode=`
      `+p+`

      const float sharedDimension = `+s+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+s+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          result += (`+c[0]+" * "+d[0]+") + ("+c[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+f+`

        `+h+`

        setOutput(result);
      }
    `}}(),dde=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),pde=function(){return function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `}}(),hde=function(){return function(t){this.variableNames=["A"],this.isPackShader=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=Qa("rc",n),r=jr(n),i=mde(n,t,e),o=gde(n,t[t.length-1],t[t.length-2],e),a=vde(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}}}();function fde(t,n){for(var e=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(r===0?"r":"rp1")+", "+(i===0?"c":"cp1"),a=2;a<t;a++)o=n[n.length-1-a]+","+o;e.push(o)}return e}function mde(t,n,e){if(t===1)return"rc > "+n[0];for(var r="",i=t-2;i<t;i++)r+=e[i]+" >= "+n[i],i<t-1&&(r+="||");return r}function gde(t,n,e,r){if(t===1)return"";var i=r.slice(-2);return`
    int r = `+i[0]+`;
    int c = `+i[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+n+`;
    bool rEdge = rp1 >= `+e+`;
  `}function vde(t,n){var e=t.length,r=fde(e,n);return e===1?`getA(rc),
            rc + 1 >= `+t[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+r[0]+`),
          cEdge ? 0. : getA(`+r[1]+`),
          rEdge ? 0. : getA(`+r[2]+`),
          rEdge || cEdge ? 0. : getA(`+r[3]+")"}var yde=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(l,u){return l[0]+t[u]+l[1]});var r=t.length,i=jr(r),o=n.map(function(l){return l[0]}).join(","),a=n.map(function(l,u){return l[0]+t[u]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}(),bde=function(){return function(t,n,e){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=n.map(function(g,y){return g[0]+t[y]+g[1]});for(var r=t.length,i=jr(r),o=n.map(function(g){return g[0]}).join(","),a=n.map(function(g,y){return g[0]+t[y]}).join(","),s=Qa("rc",r),l=Qa("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+l.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+u+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,m=r===1?2:4;f<m;f++)h+=`
        `+d[f]+`
        if (`+p+`) {
          result[`+f+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+f+"] = getChannel(getX("+l.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `}}(),WD=function(){return function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var p=n==="avg",h="0.0";if(p||(h="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+u+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+u+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var f=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(f="avgValue / count");var m=4*Math.floor(r/4),g=r%4,y=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+f+`);
      }
    `}}}(),_de=function(){return function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var l=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");var u=4*Math.floor(e/4),c=e%4,d=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var h="";i%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+l+`);
      }
    `}}(),wde=function(){return function(t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      `+Cde(n)+`
      `+xde(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `}}();function xde(t){return`
    int getFlatIndex(ivec3 coords) {
      return round(`+eue(["coords.x","coords.y","coords.z"],id(t).map(function(n){return n.toString()}).concat(["1."]))+`);
    }
  `}function Cde(t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Y0(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  `}var Ide=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],l=a[2],u=[e&&s>1?i-1:i,e&&l>1?o-1:o],c=[e&&s>1?s-1:s,e&&l>1?l-1:l],d=u[0]/c[0],p=u[1]/c[1],h=1/d,f=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Sde=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}(),Ede=function(){return function(t,n,e,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`,
          `+l[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));
        
        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`; 
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}(),Dde=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],l=a[2],u=[e&&s>1?i-1:i,e&&l>1?o-1:o],c=[e&&s>1?s-1:s,e&&l>1?l-1:l],d=u[0]/c[0],p=u[1]/c[1],h=1/d,f=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Tde=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}(),Ade=function(){return function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=jr(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `}}(),kde=function(){return function(t,n){this.variableNames=["x"],this.usesPackedTextures=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=Qa("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],a=jr(e);function s(l){var u=t.map(function(c,d){return function(p,h){return n.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+h[p]+" - 1":""+h[p]}(d,l)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1), rc);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1), rc + 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return s(l)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(l){return l[e-1]="("+l[e-1]+" + 1)",s(l)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(l){return l[e-2]="("+l[e-2]+" + 1)",s(l)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(l){return l[e-1]="("+l[e-1]+" + 1)",l[e-2]="("+l[e-2]+" + 1)",s(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `}}(),AP=function(){return function(t,n,e,r,i,o,a){a===void 0&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=jr(i.length),l=jr(o.length),u="";e===1?u="i":e===2&&(u="i, j");var c="getIndices("+u+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var p="getUpdates("+d+")",h=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}(),Mde=function(){return function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/e);this.outputShape=[r,a];var s=4*Math.floor(e/4),l=e%4,u=`
        sumValue += dot(values, segFilter);
    `,c="";i%e>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `}}(),Rde=function(){return function(t,n,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],l=0;l<n.length;l++)s.push(""+o[l]),l<t&&a.push(""+o[l]);r=a.join(),i=s.join()}var u=jr(e);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `}}(),Nde=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=jr(this.rank),i="uniform int start["+this.rank+"];",o=Fde(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+rT[s]+" = start["+s+"] + coords."+rT[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),rT=["x","y","z","w","u","v"];function Fde(t){if(t===1)return"sourceLoc";if(t<=6)return rT.slice(0,t).map(function(n){return"sourceLoc."+n}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}var Ode=function(){function t(n){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=n,this.rank=n.length;var e=jr(this.rank),r=Qa("coords",this.rank),i=Qa("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(c,d){return"start["+d+"]"}).join()+");":n.map(function(c,d){return i[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+u+` 
        vec4 result = vec4(0.);
        `+s+`
        `+l+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),Pde=function(){return function(t,n,e,r){this.variableNames=["x"];var i=e.filter(function(c,d){return r.indexOf(d)===-1});this.outputShape=i;var o=e.length,a=jr(e.length),s=jr(i.length),l="";if(o===1)l="coords * strides + begin";else{var u=0;l=e.map(function(c,d){return r.indexOf(d)===-1?(u++,i.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(u-1)+"] * strides["+d+"] + begin["+d+"]"):"begin["+d+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+t+`);
      `+a+" strides = "+a+"("+n+`);

      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+l+`));
      }
    `}}(),Lde=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var i,o=kP(e,r),a=MP(n,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===wa.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===wa.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===wa.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===wa.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===wa.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(n,e,r,i){if(this.freeTextures!=null){var o=MP(e,kP(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function kP(t,n){if(t===zl.UPLOAD)return n?wa.PACKED_2X2_FLOAT32:wa.UNPACKED_FLOAT32;if(t===zl.RENDER||t==null)return n?ne.get("WEBGL_RENDER_FLOAT32_ENABLED")?wa.PACKED_2X2_FLOAT32:wa.PACKED_2X2_FLOAT16:ne.get("WEBGL_RENDER_FLOAT32_ENABLED")?wa.UNPACKED_FLOAT32:wa.UNPACKED_FLOAT16;if(t===zl.DOWNLOAD||t===zl.PIXELS)return wa.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function MP(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var Bde=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var i=jr(this.rank),o=Vde(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}();function Vde(t){var n=t.length;if(n>5)throw Error("Tile for rank "+n+" is not yet supported");if(n===1)return"imod(resRC, "+t[0]+")";for(var e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<t.length;i++)r.push("imod("+e[i]+", "+t[i]+")");return r.join()}var jde=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var i=jr(this.rank),o=Ude(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `}}();function Ude(t){var n=t.length;if(n>6)throw Error("Transpose for rank "+n+" is not yet supported");for(var e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n),i=0;i<t.length;i++)r[t[i]]=e[i];return r.join()}var Hde=function(){return function(t,n){this.variableNames=["A"],this.usesPackedTextures=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=jr(this.rank),o=kL("rc",this.rank),a=new Array(this.rank);for(r=0;r<n.length;r++)a[n[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",l="++"+o[this.rank-1]+" < "+e[this.rank-1],u="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+l+`) {
        result[1] = `+u+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+l+`) {
          result[3] = `+u+`;
        }
      }  
      setOutput(result);
    }
    `}}(),_6=.3275911,w6=.254829592,x6=-.284496736,C6=1.421413741,I6=-1.453152027,S6=1.061405429,IT=1.7580993408473768,ST=1.0507009873554805,Nn=function(){return function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Mp="if (isnan(x)) return x;",zde="return x;",Wde="return abs(x);",E6=Mp+`
  return (x < 0.0) ? 0.0 : x;
`,qde="return (x >= 0.0) ? x : (exp(x) - 1.0);",Gde=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+IT+`;
  float scale = `+ST+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`;function $de(t){return t===void 0&&(t=0),Mp+`
    return x > 0.0 ? 1.0 : float(`+t+`);
  `}var Kde="return -x;",Yde="return ceil(x);",Xde="return floor(x);",Qde=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Zde="return float(isnan(x));",Jde="return float(isinf(x));",epe="return float(!isnan(x) && !isinf(x));",tpe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,RP="return exp(x);",npe="return exp(x) - 1.0;",rpe=`if (x < 0.0) return NAN;
  return log(x);`,ipe="return log(1.0 + x);",ope="return sqrt(x);",ape="return inversesqrt(x);",spe="return 1.0 / (1.0 + exp(-1.0 * x));",lpe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,upe=Mp+`
  return sin(x);
`,cpe=Mp+`
  return cos(x);
`,dpe="return tan(x);",ppe="return asin(x);",hpe="return acos(x);",fpe=Mp+`
  return atan(x);
`,mpe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,gpe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,vpe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,ype="return log(x + sqrt(x * x + 1.0));",bpe=Mp+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,_pe=Mp+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,wpe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = `+_6+`;
  float a1 = `+w6+`;
  float a2 = `+x6+`;
  float a3 = `+C6+`;
  float a4 = `+I6+`;
  float a5 = `+S6+`;

  float t = 1.0 / (1.0 + p * x);
  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);
`,xpe="return x * x;",Cpe="return 1.0 / x;",Ipe="return float(!(x >= 1.0));",Spe="return float(int(x));",NP="return x;",Epe="return x;",Dpe=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,D6=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qD=function(){return function(t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Tpe=function(){return function(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var n=t.length,e=Qa("rc",n),r=jr(n),i=Jle(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `}}();function Ape(t){return oo(t,0)}function kpe(t,n){return oo(t,n)}function Mpe(t,n){return oo(t,n)}function Rpe(t,n){return oo(t,n)}function Npe(t,n){n===void 0&&(n=0),de(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=n2(t,"tensors","concat");n=io(n,e[0].shape)[0];var r=Pf(e.map(function(a){return a.shape}),n);if(Yt(r)===0)return Qr([],r);if((e=e.filter(function(a){return a.size>0})).length===1)return e[0];var i=e.map(function(a){return a.shape});Sle(i,n);var o=e;return ne.engine.runKernel(function(a){return a.concat(e,n)},o,function(a){var s=i.map(function(l){return l[n]});return ET(a,s,n).map(function(l){return function(){return l}})})}function Fpe(t,n,e){e===void 0&&(e=0);var r,i=te(t,"x","split");return e=io(e,i.shape)[0],typeof n=="number"?(de(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[e]/n)):(de(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),ne.engine.runKernel(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return oo(o,e)}}})}var oo=we({concat_:Npe}),Ope=we({concat1d_:Ape}),Ppe=we({concat2d_:kpe}),Lpe=we({concat3d_:Mpe}),Bpe=we({concat4d_:Rpe}),ET=we({split_:Fpe});function Rp(t,n){return t(n={exports:{}},n.exports),n.exports}var Vpe=Rp(function(t){(function(n,e,r){function i(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}function o(a,s){var l=new function(d){var p,h=this,f=(p=4022871197,function(m){m=m.toString();for(var g=0;g<m.length;g++){var y=.02519603282416938*(p+=m.charCodeAt(g));y-=p=y>>>0,p=(y*=p)>>>0,p+=4294967296*(y-=p)}return 23283064365386963e-26*(p>>>0)});h.next=function(){var m=2091639*h.s0+23283064365386963e-26*h.c;return h.s0=h.s1,h.s1=h.s2,h.s2=m-(h.c=0|m)},h.c=1,h.s0=f(" "),h.s1=f(" "),h.s2=f(" "),h.s0-=f(d),h.s0<0&&(h.s0+=1),h.s1-=f(d),h.s1<0&&(h.s1+=1),h.s2-=f(d),h.s2<0&&(h.s2+=1),f=null}(a),u=s&&s.state,c=l.next;return c.int32=function(){return 4294967296*l.next()|0},c.double=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(0,t,!1)}),jpe=Rp(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var l=new function(d){var p=this,h="";p.x=0,p.y=0,p.z=0,p.w=0,p.next=function(){var m=p.x^p.x<<11;return p.x=p.y,p.y=p.z,p.z=p.w,p.w^=p.w>>>19^m^m>>>8},d===(0|d)?p.x=d:h+=d;for(var f=0;f<h.length+64;f++)p.x^=0|h.charCodeAt(f),p.next()}(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(0,t,!1)}),Upe=Rp(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var l=new function(d){var p=this,h="";p.next=function(){var m=p.x^p.x>>>2;return p.x=p.y,p.y=p.z,p.z=p.w,p.w=p.v,(p.d=p.d+362437|0)+(p.v=p.v^p.v<<4^m^m<<1)|0},p.x=0,p.y=0,p.z=0,p.w=0,p.v=0,d===(0|d)?p.x=d:h+=d;for(var f=0;f<h.length+64;f++)p.x^=0|h.charCodeAt(f),f==h.length&&(p.d=p.x<<10^p.x>>>4),p.next()}(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(0,t,!1)}),Hpe=Rp(function(t){(function(n,e,r){function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var l=new function(d){var p=this;p.next=function(){var h,f,m=p.x,g=p.i;return h=m[g],f=(h^=h>>>7)^h<<24,f^=(h=m[g+1&7])^h>>>10,f^=(h=m[g+3&7])^h>>>3,f^=(h=m[g+4&7])^h<<7,h=m[g+7&7],f^=(h^=h<<13)^h<<9,m[g]=f,p.i=g+1&7,f},function(h,f){var m,g=[];if(f===(0|f))g[0]=f;else for(f=""+f,m=0;m<f.length;++m)g[7&m]=g[7&m]<<15^f.charCodeAt(m)+g[m+1&7]<<13;for(;g.length<8;)g.push(0);for(m=0;m<8&&g[m]===0;++m);for(m==8?g[7]=-1:g[m],h.x=g,h.i=0,m=256;m>0;--m)h.next()}(p,d)}(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=l.next,c.quick=c,u&&(u.x&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(0,t,!1)}),zpe=Rp(function(t){(function(n,e,r){function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var l=new function(d){var p=this;p.next=function(){var h,f,m=p.w,g=p.X,y=p.i;return p.w=m=m+1640531527|0,f=g[y+34&127],h=g[y=y+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,f=g[y]=f^h,p.i=y,f+(m^m>>>16)|0},function(h,f){var m,g,y,b,w,x=[],I=128;for(f===(0|f)?(g=f,f=null):(f+="\0",g=0,I=Math.max(I,f.length)),y=0,b=-32;b<I;++b)f&&(g^=f.charCodeAt((b+32)%f.length)),b===0&&(w=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(w=w+1640531527|0,y=(m=x[127&b]^=g+w)==0?y+1:0);for(y>=128&&(x[127&(f&&f.length||0)]=-1),y=127,b=512;b>0;--b)g=x[y+34&127],m=x[y=y+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,x[y]=g^m;h.w=w,h.X=x,h.i=y}(p,d)}(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=l.next,c.quick=c,u&&(u.X&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(0,t,!1)}),Wpe=Rp(function(t){(function(n,e,r){function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var l=new function(d){var p=this,h="";p.next=function(){var m=p.b,g=p.c,y=p.d,b=p.a;return m=m<<25^m>>>7^g,g=g-y|0,y=y<<24^y>>>8^b,b=b-m|0,p.b=m=m<<20^m>>>12^g,p.c=g=g-y|0,p.d=y<<16^g>>>16^b,p.a=b-m|0},p.a=0,p.b=0,p.c=-1640531527,p.d=1367130551,d===Math.floor(d)?(p.a=d/4294967296|0,p.b=0|d):h+=d;for(var f=0;f<h.length+20;f++)p.b^=0|h.charCodeAt(f),p.next()}(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(0,t,!1)}),vp=Rp(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",l=e.pow(o,a),u=e.pow(2,52),c=2*u,d=o-1;function p(g,y,b){var w=[],x=f(function A(E,R){var N,T=[],M=typeof E;if(R&&M=="object")for(N in E)try{T.push(A(E[N],R-1))}catch{}return T.length?T:M=="string"?E:E+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,m(n)]:g??function(){try{var A;return r&&(A=r.randomBytes)?A=A(o):(A=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(A)),m(A)}catch{var E=i.navigator,R=E&&E.plugins;return[+new Date,i,R,i.screen,m(n)]}}(),3),w),I=new function(A){var E,R=A.length,N=this,T=0,M=N.i=N.j=0,H=N.S=[];for(R||(A=[R++]);T<o;)H[T]=T++;for(T=0;T<o;T++)H[T]=H[M=d&M+A[T%R]+(E=H[T])],H[M]=E;(N.g=function(V){for(var X,Y=0,Q=N.i,G=N.j,re=N.S;V--;)X=re[Q=d&Q+1],Y=Y*o+re[d&(re[Q]=re[G=d&G+X])+(re[G]=X)];return N.i=Q,N.j=G,Y})(o)}(w),D=function(){for(var A=I.g(a),E=l,R=0;A<u;)A=(A+R)*o,E*=o,R=I.g(1);for(;A>=c;)A/=2,E/=2,R>>>=1;return(A+R)/E};return D.int32=function(){return 0|I.g(4)},D.quick=function(){return I.g(4)/4294967296},D.double=D,f(m(I.S),n),(y.pass||b||function(A,E,R,N){return N&&(N.S&&h(N,I),A.state=function(){return h(I,{})}),R?(e[s]=A,E):A})(D,x,"global"in y?y.global:this==e,y.state)}function h(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function f(g,y){for(var b,w=g+"",x=0;x<w.length;)y[d&x]=d&(b^=19*y[d&x])+w.charCodeAt(x++);return m(y)}function m(g){return String.fromCharCode.apply(0,g)}if(e["seed"+s]=p,f(e.random(),n),t.exports){t.exports=p;try{r=G1("crypto")}catch{}}})([],Math)});vp.alea=Vpe,vp.xor128=jpe,vp.xorwow=Upe,vp.xorshift7=Hpe,vp.xor4096=zpe,vp.tychei=Wpe;var qpe=vp,T6=qpe.alea,A6=function(){function t(n,e,r,i,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=T6(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var l=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*l,r=this.mean+this.stdDev*a*l,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}();function Gpe(t){var n=te(t,"x","clone",null);return ne.engine.runKernel(function(e){return dt.make(n.shape,{dataId:n.dataId},n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}function $pe(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var i=Kn([t,n],r),o=t<=n?t:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,n);if(e==null)return s;if(e.length===1)return Ip(ko(s,0),[e[0],1,1]);if(e.length===2)return Ip(ko(ko(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Ip(ko(ko(ko(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}function Kpe(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new A6(n,e,r,!1,i),a=Kn(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}function Ype(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new A6(n,e,r,!0,i),a=Kn(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}function Xpe(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var i=Kn(t,r),o=0;o<i.values.length;o++)i.values[o]=XP(n,e);return i.toTensor()}function Qpe(t,n,e){var r=Yt(t),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=n();return dt.make(t,{values:i},e)}function Zpe(t,n,e,r){r===void 0&&(r=!1);var i=te(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,l=ne.engine.runKernel(function(u){return u.multinomial(s,r,n,e)},{logits2D:s});return a===1?l.as1D():l}function Jpe(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=te(t,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),ne.engine.runKernel(function(a){return a.oneHot(i,n,e,r)},{$indices:i},function(a){return{$indices:function(){return ci(i.shape,"float32")}}}).reshape(o)}function ehe(t,n){var e=te(t,"x","reshape",null);return n=ZP(n,e.size),de(e.size===Yt(n),function(){return"new shape and old shape must have the same number of elements."}),ne.engine.runKernel(function(r){return r.reshape(e,n)},{$x:e},function(r){return{$x:function(){return r.reshape(e.shape)}}})}function the(t,n){var e=te(t,"x","squeeze");return ra(e,rd(e.shape,n).newShape)}function nhe(t,n){var e=te(t,"x","cast");return ne.engine.runKernel(function(r){return r.cast(e,n)},{$x:e},function(r){return{$x:function(){return r.clone()}}})}function rhe(t,n){var e=te(t,"x","tile");return de(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."}),ne.engine.runKernel(function(r,i){var o=r.tile(e,n);return i([e]),o},{$x:e},function(r,i){var o=i[0];return{$x:function(){var a=lr(o);if(o.rank===1)for(var s=0;s<n[0];++s)a=a.add(r.slice([s*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(s=0;s<n[0];++s)for(var l=0;l<n[1];++l)a=a.add(r.slice([s*o.shape[0],l*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(s=0;s<n[0];++s)for(l=0;l<n[1];++l)for(var u=0;u<n[2];++u)a=a.add(r.slice([s*o.shape[0],l*o.shape[1],u*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else{if(o.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+o.rank+" tensors yet.");for(s=0;s<n[0];++s)for(l=0;l<n[1];++l)for(u=0;u<n[2];++u)for(var c=0;c<n[3];++c)a=a.add(r.slice([s*o.shape[0],l*o.shape[1],u*o.shape[2],c*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]))}return a}}})}function ihe(t,n,e){return e===void 0&&(e=0),de(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),J0(t,[n],e)}function ohe(t,n,e){return e===void 0&&(e=0),de(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),J0(t,n,e)}function ahe(t,n,e){return e===void 0&&(e=0),de(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),J0(t,n,e)}function she(t,n,e){return e===void 0&&(e=0),de(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),J0(t,n,e)}function lhe(t,n,e){e===void 0&&(e=0);var r=te(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=n.map(function(o){return o[0]});return ne.engine.runKernel(function(o){return o.pad(r,n,e)},{$x:r},function(o){return{$x:function(){return o.slice(i,r.shape)}}})}function uhe(t,n){n===void 0&&(n=0);var e=n2(t,"tensors","stack");if(de(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;de(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){_r(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){de(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return oo(a,n)}function che(t,n,e){var r=te(t,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return de(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),de(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),de(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),ne.engine.runKernel(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}function dhe(t,n,e){var r=te(t,"x","spaceToBatchND");return de(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),de(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),de(r.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),ne.engine.runKernel(function(i){return i.spaceToBatchND(r,n,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}function phe(t,n){n===void 0&&(n=0),n=n||0;var e=te(t,"x","unstack");return de(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length),ne.engine.runKernel(function(r){return r.unstack(e,n)},{$x:e},function(r){return{$x:function(){return Ia(r,n)}}})}function hhe(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=te(t,"x","cumsum"),o=Gl([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=$l(1,i.rank)[0],l=ne.engine.runKernel(function(u){return u.cumsum(a,s,e,r)},{permutedX:a},function(u){return{permutedX:function(){return u.cumsum(n,e,!r)}}});return o!=null&&(l=l.transpose(o)),l}function fhe(t,n){n===void 0&&(n=0);var e=te(t,"x","expandDims");de(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(de(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),ra(e,r)}function mhe(t,n,e){e===void 0&&(e="NHWC");var r=te(t,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],a=e==="NHWC"?r.shape[3]:r.shape[1];return de(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),de(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),de(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+r.shape}),ne.engine.runKernel(function(s){return s.depthToSpace(r,n,e)},{$x:r})}function ghe(t,n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d;return Bn(this,function(p){switch(p.label){case 0:return e=te(t,"x","setdiff1d"),r=te(n,"y","setdiff1d"),de(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),de(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),de(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(o=p.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(l=new W0([s],e.dtype),u=new W0([s],"int32"),c=0,d=0;c<i.length;c++)a.has(i[c])||(l.values[d]=i[c],u.values[d]=c,d++);return[2,[l.toTensor(),u.toTensor()]]}})})}function Kn(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",mT(t),new W0(t,n,e)}function vhe(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var k6=we({batchToSpaceND_:che}),yhe=we({cast_:nhe}),bhe=we({clone_:Gpe}),_he=we({cumsum_:hhe}),whe=we({depthToSpace_:mhe}),ko=we({expandDims_:fhe}),M6=we({eye_:$pe}),xhe=we({multinomial_:Zpe}),iT=we({oneHot_:Jpe}),J0=we({pad_:lhe}),Che=we({pad1d_:ihe}),Ihe=we({pad2d_:ohe}),She=we({pad3d_:ahe}),Ehe=we({pad4d_:she}),Dhe=we({rand_:Qpe}),The=we({randomNormal_:Kpe}),Ahe=we({randomUniform_:Xpe}),ra=we({reshape_:ehe}),R6=we({spaceToBatchND_:dhe}),N6=we({squeeze_:the}),Ia=we({stack_:uhe}),Ip=we({tile_:rhe}),khe=we({truncatedNormal_:Ype}),Lr=we({unstack_:phe}),Mhe=ghe;function DT(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var i=Kn(t,"int32"),o=Kn([e.length,t.length],"int32");for(r=0;r<e.length;r++){var a=i.indexToLoc(e[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var q_={};function Rhe(t){return t in q_||(q_[t]={}),q_[t]}function Nhe(t,n){if(n===void 0&&(n=!1),t==="linear")return n?Epe:zde;if(t==="relu")return n?D6:E6;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Fhe=128,FP=1e3,F6=function(){function t(n){if(this.gpgpu=n,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.disposed=!1,ne.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(n==null){var e=ql(ne.get("WEBGL_VERSION"));this.binaryCache=Rhe(ne.get("WEBGL_VERSION")),this.gpgpu=new b6(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=n.gl.canvas;this.textureManager=new Lde(this.gpgpu)}return t.prototype.register=function(n,e,r){if(this.texData.has(n))throw new Error("Data buffer is already registered");this.texData.set(n,{shape:e,dtype:r})},t.prototype.setDataMover=function(n){this.texData=new SL(n)},t.prototype.fromPixels=function(n,e){if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=[n.height,n.width],i=[n.height,n.width,e];if(ne.get("IS_BROWSER")){if(!(n instanceof HTMLVideoElement||n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof ImageData))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+n.constructor.name);if(n instanceof HTMLVideoElement){if(this.fromPixels2DContext==null){if(document.readyState!=="complete")throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=n.width,this.fromPixels2DContext.canvas.height=n.height,this.fromPixels2DContext.drawImage(n,0,0,n.width,n.height),n=this.fromPixels2DContext.canvas}}var o=this.makeTensorHandle(r,"int32");this.texData.get(o.dataId).usage=zl.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),n);var a=new Uce(i),s=this.compileAndRun(a,[o]);return this.disposeData(o.dataId),s},t.prototype.makeTensorHandle=function(n,e){var r={};return this.register(r,n,e),{dataId:r,shape:n,dtype:e}},t.prototype.write=function(n,e){if(e==null)throw new Error("MathBackendWebGL.write(): values can not be null");if(ne.get("DEBUG"))for(var r=0;r<e.length;r++){var i=e[r];if(!OL(i))throw Error("The value "+i+" cannot be represented on this device.")}var o=this.texData.get(n),a=o.texture,s=o.texShape,l=o.usage,u=o.dtype,c=o.isPacked;if(u==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");a!=null&&(this.releaseTexture(n,a,s,l,u,c),o.texture=null,o.texShape=null),o.usage=zl.UPLOAD,o.values=e},t.prototype.readSync=function(n){var e=this.texData.get(n),r=e.values,i=e.dtype,o=e.complexTensors,a=e.slice,s=e.shape;if(a!=null){var l=new Nn(s,NP),u=this.compileAndRun(l,[{dataId:n,shape:s,dtype:i}]),c=this.readSync(u.dataId);return u.dispose(),c}if(r!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return r;var d,p,h=this.activeTimers!=null;return h&&(d=performance.now()),i==="complex64"?p=DL(o.real.dataSync(),o.imag.dataSync()):p=this.getValuesFromTexture(n),h&&(this.downloadWaitMs+=performance.now()-d),this.convertAndCacheOnCPU(n,p)},t.prototype.read=function(n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E,R;return Bn(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(n))return i=this.pendingRead.get(n),[2,new Promise(function(T){return i.push(T)})];if(o=this.texData.get(n),a=o.texture,s=o.values,l=o.texShape,u=o.isPacked,c=o.shape,d=o.slice,p=o.dtype,d!=null)return h=new Nn(c,NP),f=this.compileAndRun(h,[{dataId:n,shape:c,dtype:p}]),m=this.read(f.dataId),f.dispose(),[2,m];if(s!=null)return[2,this.convertAndCacheOnCPU(n)];if(this.pendingRead.set(n,[]),!ne.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ne.get("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return g=l[1],y=l[0],u&&(e=kp(l[0],l[1]),g=e[0],y=e[1]),b=this.gpgpu.maybeCreateBufferFromTexture(a,y,g),[4,this.gpgpu.createAndWaitForFence()];case 1:return N.sent(),b instanceof WebGLTexture?w=this.getValuesFromTexture(n):(x=Yt(c),u?(I=bp(c),D=1,A=1,c.length&&(r=_p(c),D=r[0],A=r[1]),w=this.gpgpu.downloadPackedMatrixFromBuffer(b,I,D,A,l[0],l[1]).subarray(0,x)):w=this.gpgpu.downloadFloat32MatrixFromBuffer(b,l[0],l[1]).subarray(0,x)),E=this.convertAndCacheOnCPU(n,w),R=this.pendingRead.get(n),this.pendingRead.delete(n),R.forEach(function(T){return T(E)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)),[2,E]}})})},t.prototype.getValuesFromTexture=function(n){var e,r=this,i=this.texData.get(n),o=i.shape,a=i.dtype,s=i.texture,l=i.texShape,u=Yt(o);if(ne.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")){if(this.texData.get(n).isPacked){var c=bp(o),d=1,p=1;return o.length&&(d=(e=_p(o))[0],p=e[1]),this.gpgpu.downloadMatrixFromPackedTexture(s,c,d,p,l[0],l[1]).subarray(0,u)}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(s,l[0],l[1]).subarray(0,u)}var h=this.makeTensorHandle(o,"float32");h.size=Yt(o),this.texData.get(h.dataId).usage=zl.DOWNLOAD;var f=pt(function(){var y=new Vce(o);return r.compileAndRun(y,[{shape:o,dtype:a,dataId:n}],h,null,!1)}),m=this.texData.get(f.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,u);return this.disposeData(h.dataId),g},t.prototype.time=function(n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l;return Bn(this,function(u){switch(u.label){case 0:return e=this.activeTimers,r=[],i=!1,this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,n(),o=Ep(this.activeTimers.map(function(c){return c.query})).filter(function(c){return c!=null}),a=Ep(this.activeTimers.map(function(c){return c.name})).filter(function(c){return c!=null}),this.activeTimers=e,i&&(this.programTimersStack=null),[4,Promise.all(o)];case 1:return s=u.sent(),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:YP(s),getExtraProfileInfo:function(){return s.map(function(c,d){return{name:a[d],ms:c}}).map(function(c){return c.name+": "+c.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(n){return ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),n):(n.endMs=performance.now(),n)},t.prototype.getQueryTime=function(n){return Ln(this,void 0,void 0,function(){var e;return Bn(this,function(r){return ne.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(e=n).endMs-e.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))this.pendingDisposal.add(n);else if(this.texData.has(n)){var e=this.texData.get(n),r=e.texture,i=e.dtype,o=e.texShape,a=e.usage,s=e.complexTensors,l=e.isPacked,u=e.slice;if(r!=null){var c=u&&u.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),this.releaseTexture(n,r,o,a,i,l),this.texData.delete(n))}s!=null&&(s.real.dispose(),s.imag.dispose())}}},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getCPUBackend=function(){return ne.get("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ne.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,e){var r=this;return e===void 0&&(e=Fhe),this.getCPUBackend()!=null&&n.every(function(i){return r.texData.get(i.dataId).texture==null&&i.size<e})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(n,e){var r=this.makeOutputArray(n.shape,"complex64");return this.texData.get(r.dataId).complexTensors={real:ne.engine.keep(n.clone()),imag:ne.engine.keep(e.clone())},r},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,e,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,e,r);var i=this.texData.get(n.dataId).isPacked,o=wL(n.shape,e,r);if(i||!o){var a=ne.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Ode(r):new Nde(r),s=a.getCustomSetupFunc(e);return this.compileAndRun(a,[n],null,s)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,e,r)},t.prototype.shallowSlice=function(n,e,r){var i=this.texData.get(n.dataId),o=dt.make(r,{},n.dtype,this),a=this.texData.get(o.dataId);Object.assign(a,i),a.shape=r,a.dtype=n.dtype;var s=xL(e,n.strides);i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||n.dataId};var l=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,l+1),o},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,l,u){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,e,r,i,o,a,s,l,u);var c=bT(n.shape,e,r,i,o,a,s,l,u),d=c[0],p=c[1],h=c[2],f=p.filter(function(g,y){return h.indexOf(y)===-1});if(f.some(function(g){return g===0}))return Qr([],f);var m=new Pde(d,i,p,h);return this.compileAndRun(m,[n])},t.prototype.reverse=function(n,e){var r=ne.get("WEBGL_PACK_ARRAY_OPERATIONS")?new kde(n.shape,e):new Ade(n.shape,e);return this.compileAndRun(r,[n])},t.prototype.concat=function(n,e){if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,e);if(n.length===1)return n[0];if(n.length>ne.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.concat(n.slice(0,r),e),o=this.concat(n.slice(r),e);return this.concat([i,o],e)}if(ne.get("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var a=new Ice(n.map(function(c){return c.shape}),e);return this.compileAndRun(a,n)}var s=Pf(n.map(function(c){return c.shape}),e),l=n.map(function(c){return c.as2D(-1,Yt(c.shape.slice(e)))}),u=new Cce(l.map(function(c){return c.shape}));return this.compileAndRun(u,l).reshape(s)},t.prototype.neg=function(n){var e=new Nn(n.shape,Kde);return this.compileAndRun(e,[n])},t.prototype.batchMatMul=function(n,e,r,i){var o=r?n.shape[2]:n.shape[1],a=i?e.shape[1]:e.shape[2],s=r?n.shape[1]:n.shape[2],l=n.shape[0];if((o===1||a===1)&&s>FP){r&&(n=n.transpose([0,2,1])),i&&(e=e.transpose([0,2,1]));var u=a===1?n:n.as3D(l,s,1),c=a===1?2:1,d=a===1?e.as3D(l,1,s):e;return this.multiply(u,d).sum(c,!0)}var p=ro(n.dtype,e.dtype),h=new zD(n.shape,[l,o,a],r,i),f=this.makePackedTensor(h.outputShape,p);return this.compileAndRun(h,[n,e],f)},t.prototype.fusedBatchMatMul=function(n,e,r,i,o,a){var s=r?n.shape[2]:n.shape[1],l=i?e.shape[1]:e.shape[2],u=n.shape[0],c=ro(n.dtype,e.dtype),d=new zD(n.shape,[u,s,l],r,i,!!o,a?Nhe(a,!0):null),p=this.makePackedTensor(d.outputShape,c),h=[n,e];return o&&h.push(o),this.compileAndRun(d,h,p)},t.prototype.multiply=function(n,e){if(n.dtype==="complex64"){var r=this.texData.get(n.dataId),i=this.texData.get(e.dataId),o=new xP(wP.REAL,n.shape,e.shape),a=new xP(wP.IMAG,n.shape,e.shape),s=[this.makeComplexComponentTensorHandle(n,r.complexTensors.real),this.makeComplexComponentTensorHandle(n,r.complexTensors.imag),this.makeComplexComponentTensorHandle(e,i.complexTensors.real),this.makeComplexComponentTensorHandle(e,i.complexTensors.imag)],l=this.compileAndRun(o,s),u=this.compileAndRun(a,s),c=this.complex(l,u);return l.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.multiply(n,e);if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,CP,n.dtype);var d=new ui(CP,n.shape,e.shape),p=this.makeOutputArray(d.outputShape,n.dtype);return this.compileAndRun(d,[n,e],p)},t.prototype.batchNormalization=function(n,e,r,i,o,a){var s=[n,e,r],l=null;a!=null&&(l=a.shape,s.push(a));var u=null;if(o!=null&&(u=o.shape,s.push(o)),ne.get("WEBGL_PACK_BATCHNORMALIZATION")){var c=new jue(n.shape,e.shape,r.shape,l,u,i);return this.compileAndRun(c,s)}var d=new Vue(n.shape,e.shape,r.shape,l,u,i);return this.compileAndRun(d,s)},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){var a=new lde(n.shape,e,r,i,o);return this.compileAndRun(a,[n])},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){var l=new ude(e.shape,i,o,a,s);return this.compileAndRun(l,[e,r,n])},t.prototype.tile=function(n,e){var r=new Bde(n.shape,e);return this.compileAndRun(r,[n])},t.prototype.pad=function(n,e,r){var i=ne.get("WEBGL_PACK_ARRAY_OPERATIONS")?new bde(n.shape,e,r):new yde(n.shape,e,r);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,e);var r=ne.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Hde(n.shape,e):new jde(n.shape,e);return this.compileAndRun(r,[n])},t.prototype.gather=function(n,e,r){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.gather(n,e,r);var i=new Hce(n.shape,e.size,r);return this.compileAndRun(i,[n,e])},t.prototype.batchToSpaceND=function(n,e,r){de(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=e.reduce(function(c,d){return c*d}),o=r2(n.shape,e,i),a=i2(o.length,e.length),s=o2(n.shape,e,i),l=gL(r,e.length),u=vL(s,r,e.length);return n.reshape(o).transpose(a).reshape(s).slice(l,u)},t.prototype.spaceToBatchND=function(n,e,r){de(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=e.reduce(function(d,p){return d*p}),o=[[0,0]];o.push.apply(o,r);for(var a=1+e.length;a<n.shape.length;++a)o.push([0,0]);var s=n.pad(o),l=r2(s.shape,e,i,!1),u=i2(l.length,e.length,!1),c=o2(s.shape,e,i,!1);return s.reshape(l).transpose(u).reshape(c)},t.prototype.reduce=function(n,e,r){var i=n.shape[0],o=n.shape[1],a=jD(o),s=new _de({windowSize:a,inSize:o,batchSize:i},e),l=s.outputShape,u=l[0],c=l[1],d=this.makeOutputArray([u,c],r);return this.compileAndRun(s,[n],d),d.shape[1]===1?d:this.reduce(d,e,r)},t.prototype.argReduce=function(n,e,r){r===void 0&&(r=null);var i=n.shape[0],o=n.shape[1];r!=null&&(i=r.shape[0],o=r.shape[1]);var a=jD(o),s=new Zle({windowSize:a,inSize:o,batchSize:i},e,r==null),l=s.outputShape,u=l[0],c=l[1],d=this.makeOutputArray([u,c],"int32"),p=[n];return r!=null&&p.push(r),this.compileAndRun(s,p,d),d.shape[1]===1?d:this.argReduce(n,e,d)},t.prototype.argReducePacked=function(n,e,r){r===void 0&&(r=null);var i=r!=null?r.shape:n.shape,o=jD(i[i.length-1]),a=new Lue(i,o,e,r==null),s=this.makePackedTensor(a.outputShape,"int32"),l=r==null?[n]:[n,r];return this.compileAndRun(a,l,s),s.rank===n.rank?this.argReducePacked(n,e,s):s},t.prototype.sum=function(n,e){Xa("sum",e,n.rank);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o),s=PD(n.dtype);return this.reduce(a,"sum",s).reshape(i)},t.prototype.prod=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,e);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o),s=PD(n.dtype);return this.reduce(a,"prod",s).reshape(i)},t.prototype.unsortedSegmentSum=function(n,e,r){var i=0,o=Gl([i],n.rank),a=n;o!=null&&(a=n.transpose(o),i=$l(1,n.rank)[0]);var s=Ale(a.shape,i,r),l=Yt([a.shape[i]]),u=a.as2D(-1,l),c=PD(n.dtype),d=this.segOpCompute(u,"unsortedSegmentSum",e,c,r).reshape(s);return o!=null&&(d=d.transpose(yT(o))),d},t.prototype.segOpCompute=function(n,e,r,i,o){var a=n.shape[0],s=n.shape[1],l=Tle(s,o),u=new Mde({windowSize:l,inSize:s,batchSize:a,numSegments:o},e),c=u.outputShape,d=c[0],p=c[1],h=this.makeOutputArray([d,p],i);return this.compileAndRun(u,[n,r],h),h.shape[1]===o?h:(r=CL(0,o).tile([s/l]),this.segOpCompute(h,e,r,i,o))},t.prototype.argMinMaxReduce=function(n,e,r){var i=[e];if(Xa("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,n.rank),!ne.get("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Ao(n.shape,i),a=o[0],s=Yt(o[1]),l=n.as2D(-1,s);return this.argReduce(l,r).reshape(a)}return this.argReducePacked(n,r)},t.prototype.argMin=function(n,e){return this.argMinMaxReduce(n,e,"min")},t.prototype.argMax=function(n,e){return this.argMinMaxReduce(n,e,"max")},t.prototype.cumsum=function(n,e,r,i){if(e!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+e);var o=new Pce(n.shape,r,i);return this.compileAndRun(o,[n])},t.prototype.equal=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,uce,"bool");var r=new ui(Wue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.notEqual=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,cce,"bool");var r=new ui(que,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.less=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.less(n,e);if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,dce,"bool");var r=new ui(Gue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.lessEqual=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,pce,"bool");var r=new ui($ue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.greater=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.greater(n,e);if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,hce,"bool");var r=new ui(Kue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.greaterEqual=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,fce,"bool");var r=new ui(Yue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.logicalNot=function(n){var e=new Nn(n.shape,Ipe);return this.compileAndRun(e,[n])},t.prototype.logicalAnd=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,mce,"bool");var r=new ui(Xue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.logicalOr=function(n,e){if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,gce,"bool");var r=new ui(Que,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[n,e],i)},t.prototype.select=function(n,e,r){var i=new Rde(n.rank,e.shape,e.rank),o=this.makeOutputArray(i.outputShape,ro(e.dtype,r.dtype));return this.compileAndRun(i,[n,e,r],o)},t.prototype.where=function(n){JD("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=n.dataSync();return DT(n.shape,e)},t.prototype.topk=function(n,e,r){return AL(n.dataSync(),n.shape,n.dtype,e,r)},t.prototype.min=function(n,e){Xa("min",e,n.rank);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(i)},t.prototype.minimum=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.minimum(n,e);var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(yce,n.shape,e.shape):new ui(Jue,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.mod=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(bce,n.shape,e.shape):new ui(ece,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.max=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,e);Xa("max",e,n.rank);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(i)},t.prototype.maximum=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.maximum(n,e);var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(vce,n.shape,e.shape):new ui(Zue,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.all=function(n,e){Xa("all",e,n.rank);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(i)},t.prototype.any=function(n,e){Xa("any",e,n.rank);var r=Ao(n.shape,e),i=r[0],o=Yt(r[1]),a=n.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(i)},t.prototype.squaredDifference=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(IP,n.shape,e.shape):new ui(IP,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.realDivide=function(n,e){var r=new ui(Uue,n.shape,e.shape),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[n,e],i)},t.prototype.floorDiv=function(n,e){var r=Hue;if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,ice,"int32");var i=new ui(r,n.shape,e.shape),o=this.makeOutputArray(i.outputShape,"int32");return this.compileAndRun(i,[n,e],o)},t.prototype.add=function(n,e){if(n.dtype==="complex64"&&e.dtype==="complex64")return this.complexSeparableBinaryOp(n,e,UD);if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.add(n,e);var r=ro(n.dtype,e.dtype);if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,UD,r);var i=new ui(UD,n.shape,e.shape),o=this.makeOutputArray(i.outputShape,r);return this.compileAndRun(i,[n,e],o)},t.prototype.packedBinaryOp=function(n,e,r,i){var o=new ju(r,n.shape,e.shape),a=this.makePackedTensor(o.outputShape,i);return this.compileAndRun(o,[n,e],a)},t.prototype.complexSeparableBinaryOp=function(n,e,r){var i=this,o=this.texData.get(n.dataId),a=this.texData.get(e.dataId),s=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map(function(d){var p=d[0],h=d[1],f=i.makeComplexComponentTensorHandle(n,p),m=i.makeComplexComponentTensorHandle(e,h),g=new ui(r,n.shape,e.shape),y=i.makeOutputArray(g.outputShape,ro(p.dtype,h.dtype));return i.compileAndRun(g,[f,m],y)}),l=s[0],u=s[1],c=this.complex(l,u);return l.dispose(),u.dispose(),c},t.prototype.makeComplexComponentTensorHandle=function(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}},t.prototype.addN=function(n){for(var e=n[0],r=1;r<n.length;r++)e=this.add(e,n[r]);return e},t.prototype.subtract=function(n,e){if(n.dtype==="complex64"&&e.dtype==="complex64")return this.complexSeparableBinaryOp(n,e,HD);if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.subtract(n,e);var r=ro(n.dtype,e.dtype);if(ne.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,HD,n.dtype);var i=new ui(HD,n.shape,e.shape),o=this.makeOutputArray(i.outputShape,r);return this.compileAndRun(i,[n,e],o)},t.prototype.pow=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS"),i=r?new ju(oce,n.shape,e.shape):new ui(zue,n.shape,e.shape),o=ro(n.dtype,e.dtype),a=r?this.makePackedTensor(i.outputShape,o):this.makeOutputArray(i.outputShape,o);return this.compileAndRun(i,[n,e],a)},t.prototype.ceil=function(n){var e=new Nn(n.shape,Yde);return this.compileAndRun(e,[n])},t.prototype.floor=function(n){var e=new Nn(n.shape,Xde);return this.compileAndRun(e,[n])},t.prototype.sign=function(n){var e=new Nn(n.shape,Qde);return this.compileAndRun(e,[n])},t.prototype.isNaN=function(n){var e=new Nn(n.shape,Zde),r=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[n],r)},t.prototype.isInf=function(n){var e=new Nn(n.shape,Jde),r=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[n],r)},t.prototype.isFinite=function(n){var e=new Nn(n.shape,epe),r=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[n],r)},t.prototype.round=function(n){var e=new Nn(n.shape,tpe);return this.compileAndRun(e,[n])},t.prototype.exp=function(n){var e;return e=ne.get("WEBGL_PACK")?new qD(n.shape,RP):new Nn(n.shape,RP),this.compileAndRun(e,[n])},t.prototype.expm1=function(n){var e=new Nn(n.shape,npe);return this.compileAndRun(e,[n])},t.prototype.log=function(n){var e;return e=ne.get("WEBGL_PACK")?new qD(n.shape,Dpe):new Nn(n.shape,rpe),this.compileAndRun(e,[n])},t.prototype.log1p=function(n){var e=new Nn(n.shape,ipe);return this.compileAndRun(e,[n])},t.prototype.sqrt=function(n){var e=new Nn(n.shape,ope);return this.compileAndRun(e,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var e=new Nn(n.shape,ape);return this.compileAndRun(e,[n])},t.prototype.square=function(n){var e=new Nn(n.shape,xpe);return this.compileAndRun(e,[n])},t.prototype.reciprocal=function(n){var e=new Nn(n.shape,Cpe);return this.compileAndRun(e,[n])},t.prototype.relu=function(n){var e;return e=ne.get("WEBGL_PACK")?new qD(n.shape,D6):new Nn(n.shape,E6),this.compileAndRun(e,[n])},t.prototype.prelu=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(ace,n.shape,e.shape):new ui(rce,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.elu=function(n){var e=new Nn(n.shape,qde);return this.compileAndRun(e,[n])},t.prototype.eluDer=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(sce,n.shape,e.shape):new ui(nce,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.selu=function(n){var e=new Nn(n.shape,Gde);return this.compileAndRun(e,[n])},t.prototype.int=function(n){var e=new Nn(n.shape,Spe),r=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[n],r)},t.prototype.clip=function(n,e,r){var i,o=(i=ne.get("WEBGL_PACK_CLIP")?new wce(n.shape):new _ce(n.shape)).getCustomSetupFunc(e,r);return this.compileAndRun(i,[n],null,o)},t.prototype.abs=function(n){var e=new Nn(n.shape,Wde);return this.compileAndRun(e,[n])},t.prototype.complexAbs=function(n){var e=this.texData.get(n.dataId),r=new xce(n.shape),i=[this.makeComplexComponentTensorHandle(n,e.complexTensors.real),this.makeComplexComponentTensorHandle(n,e.complexTensors.imag)];return this.compileAndRun(r,i)},t.prototype.sigmoid=function(n){var e=new Nn(n.shape,spe);return this.compileAndRun(e,[n])},t.prototype.softplus=function(n){var e=new Nn(n.shape,lpe);return this.compileAndRun(e,[n])},t.prototype.sin=function(n){var e=new Nn(n.shape,upe);return this.compileAndRun(e,[n])},t.prototype.cos=function(n){var e=new Nn(n.shape,cpe);return this.compileAndRun(e,[n])},t.prototype.tan=function(n){var e=new Nn(n.shape,dpe);return this.compileAndRun(e,[n])},t.prototype.asin=function(n){var e=new Nn(n.shape,ppe);return this.compileAndRun(e,[n])},t.prototype.acos=function(n){var e=new Nn(n.shape,hpe);return this.compileAndRun(e,[n])},t.prototype.atan=function(n){var e=new Nn(n.shape,fpe);return this.compileAndRun(e,[n])},t.prototype.atan2=function(n,e){var r=ne.get("WEBGL_PACK_BINARY_OPERATIONS")?new ju(lce,n.shape,e.shape):new ui(tce,n.shape,e.shape);return this.compileAndRun(r,[n,e])},t.prototype.sinh=function(n){var e=new Nn(n.shape,mpe);return this.compileAndRun(e,[n])},t.prototype.cosh=function(n){var e=new Nn(n.shape,gpe);return this.compileAndRun(e,[n])},t.prototype.tanh=function(n){var e=new Nn(n.shape,vpe);return this.compileAndRun(e,[n])},t.prototype.asinh=function(n){var e=new Nn(n.shape,ype);return this.compileAndRun(e,[n])},t.prototype.acosh=function(n){var e=new Nn(n.shape,bpe);return this.compileAndRun(e,[n])},t.prototype.atanh=function(n){var e=new Nn(n.shape,_pe);return this.compileAndRun(e,[n])},t.prototype.erf=function(n){var e=new Nn(n.shape,wpe);return this.compileAndRun(e,[n])},t.prototype.step=function(n,e){var r=new Nn(n.shape,$de(e));return this.compileAndRun(r,[n])},t.prototype.conv2dByMatMul=function(n,e,r){var i=n.shape,o=this.texData.get(n.dataId),a=r.inChannels,s=i[0]*i[1]*i[2],l=r.outChannels,u=(s===1||l===1)&&a>FP,c=i[2]%2!=0&&!!o.isPacked;if(u||!ne.get("WEBGL_LAZILY_UNPACK")||!ne.get("WEBGL_PACK_BINARY_OPERATIONS")||!c){var d=this.reshape(n,[1,i[0]*i[1]*i[2],r.inChannels]),p=this.reshape(e,[1,r.inChannels,r.outChannels]);return this.reshape(this.batchMatMul(d,p,!1,!1),r.outShape)}var h=dt.make([1,i[0]*i[1]*(i[2]+1),r.inChannels],{dataId:n.dataId},n.dtype,this),f=o.shape;o.shape=o.shape.slice(),o.shape[o.shape.length-2]++,de(j0(o.shape,h.shape),function(){return"packed reshape "+o.shape+" to "+h.shape+" isn't free"});var m=this.reshape(e,[1,r.inChannels,r.outChannels]),g=this.batchMatMul(h,m,!1,!1),y=this.texData.get(g.dataId);return de(y.isPacked,function(){return"batchMatMul result is expected to be packed"}),o.shape=f,y.shape=r.outShape,dt.make(r.outShape,{dataId:g.dataId},g.dtype,this)},t.prototype.conv2dWithIm2Row=function(n,e,r){var i=r.filterWidth,o=r.filterHeight,a=r.inChannels,s=r.outWidth,l=r.outHeight,u=i*o*a,c=l*s,d=[u,c],p=n.squeeze([0]),h=e.reshape([1,u,-1]),f=new sde(d,p.shape,r),m=this.compileAndRun(f,[p]).reshape([1,d[0],d[1]]),g=new zD(m.shape,[1,c,r.outChannels],!0,!1);return this.compileAndRun(g,[m,h]).reshape([1,l,s,r.outChannels])},t.prototype.conv2d=function(n,e,r){if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))return this.conv2dByMatMul(n,e,r);if(ne.get("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,e,r);var i=new Mce(r);return this.compileAndRun(i,[n,e])},t.prototype.conv2dDerInput=function(n,e,r){var i=new Ece(r);return this.compileAndRun(i,[n,e])},t.prototype.conv2dDerFilter=function(n,e,r){var i=new Sce(r);return this.compileAndRun(i,[n,e])},t.prototype.depthwiseConv2D=function(n,e,r){var i;return ne.get("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(i=new Fce(r),this.compileAndRun(i,[n,e],this.makePackedTensor(r.outShape,n.dtype))):(i=new Nce(r),this.compileAndRun(i,[n,e]))},t.prototype.depthwiseConv2DDerInput=function(n,e,r){var i=new kce(r);return this.compileAndRun(i,[n,e])},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){var i=new Ace(r);return this.compileAndRun(i,[n,e])},t.prototype.conv3d=function(n,e,r){var i=new Rce(r);return this.compileAndRun(i,[n,e])},t.prototype.conv3dDerInput=function(n,e,r){var i=new Tce(r);return this.compileAndRun(i,[n,e])},t.prototype.conv3dDerFilter=function(n,e,r){var i=new Dce(r);return this.compileAndRun(i,[n,e])},t.prototype.maxPool=function(n,e){var r=new WD(e,"max",!1),i=this.makeOutputArray(r.outputShape,n.dtype);return this.compileAndRun(r,[n],i)},t.prototype.avgPool=function(n,e){var r=new WD(e,"avg",!1),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[n],i)},t.prototype.maxPoolBackprop=function(n,e,r,i){var o=new WD(i,"max",!0),a=this.compileAndRun(o,[e]),s=new cde(i),l=this.makeOutputArray(s.outputShape,e.dtype),u=this.compileAndRun(s,[n,a],l);return a.dispose(),u},t.prototype.avgPoolBackprop=function(n,e,r){var i=new Bue(r),o=this.makeOutputArray(i.outputShape,e.dtype);return this.compileAndRun(i,[n],o)},t.prototype.cast=function(n,e){return EL(n,e,this)},t.prototype.unstack=function(n,e){for(var r=n.shape[e],i=new Array(n.rank-1),o=0,a=0;a<n.rank;a++)a!==e&&(i[o++]=n.shape[a]);var s=new Array(n.rank).fill(0),l=n.shape.slice();l[e]=1;var u=new Array(r);for(a=0;a<u.length;a++)s[e]=a,u[a]=this.slice(n,s,l).reshape(i);return u},t.prototype.reshape=function(n,e){var r=this.texData.get(n.dataId);return!r.isPacked||j0(n.shape,e)||r.texture!==null&&j0(r.shape,e)?eT(n,e):this.packedReshape(n,e)},t.prototype.resizeBilinear=function(n,e,r,i){var o=ne.get("WEBGL_PACK_IMAGE_OPERATIONS")?new Ede(n.shape,e,r,i):new Sde(n.shape,e,r,i);return this.compileAndRun(o,[n])},t.prototype.resizeBilinearBackprop=function(n,e,r){var i=new Ide(n,e,r);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,e,r,i){var o=new Tde(n.shape,e,r,i);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){var i=new Dde(n,e,r);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,e,r,i){var o=e?n:Ja(n),a=o.shape[0],s=o.shape[1],l=new dde(a,s,r),u=this.makeOutputArray(l.outputShape,"int32"),c=l.getCustomSetupFunc(i);return this.compileAndRun(l,[o],u,c)},t.prototype.oneHot=function(n,e,r,i){var o=new pde(n.size,e,r,i);return this.compileAndRun(o,[n])},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return JD("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),_T(n.dataSync(),e.dataSync(),r,i,o)},t.prototype.cropAndResize=function(n,e,r,i,o,a){var s=new Oce(n.shape,e.shape,i,o,a);return this.compileAndRun(s,[n,e,r])},t.prototype.depthToSpace=function(n,e,r){de(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var i=n.shape[0],o=r==="NHWC"?n.shape[1]:n.shape[2],a=r==="NHWC"?n.shape[2]:n.shape[3],s=r==="NHWC"?n.shape[3]:n.shape[1],l=o*e,u=a*e,c=s/(e*e),d=new Bce(r==="NHWC"?[i,l,u,c]:[i,c,l,u],e,r);return this.compileAndRun(d,[n])},t.prototype.split=function(n,e,r){return TL(n,e,r)},t.prototype.scatterND=function(n,e,r){var i=a2(e,n,r),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,l=i.strides,u=i.outputSize,c=[u/s,s],d=n.reshape([a,o]),p=e.reshape([a,s]);if(u===0)return eT(Qr([]),r);var h=ot(0),f=new AP(a,o,d.rank,p.rank,l,c);return this.compileAndRun(f,[p,d,h]).reshape(r)},t.prototype.sparseToDense=function(n,e,r,i){var o=a2(e,n,r),a=o.sliceRank,s=o.numUpdates,l=o.strides,u=o.outputSize,c=new AP(s,a,n.rank,e.rank,l,[u,1],!1);return this.compileAndRun(c,[e,n,i]).reshape(r)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,e){var r=this.texData.get(n.dataId),i=new DP(EP.REAL,n.shape,e),o=new DP(EP.IMAG,n.shape,e),a=[this.makeComplexComponentTensorHandle(n,r.complexTensors.real),this.makeComplexComponentTensorHandle(n,r.complexTensors.imag)],s=this.compileAndRun(i,a),l=this.compileAndRun(o,a),u=this.complex(s,l).as2D(n.shape[0],n.shape[1]);return s.dispose(),l.dispose(),u},t.prototype.gatherND=function(n,e){var r=e.shape,i=r[r.length-1],o=bL(n,e),a=o[0],s=o[1],l=o[2],u=o[3],c=e.reshape([s,i]),d=n.reshape([n.size/l,l]),p=new Wce(i,u,[s,l]);return this.compileAndRun(p,[d,c]).reshape(a)},t.prototype.fill=function(n,e,r){if((r=r||Vf(e))==="string"){var i=U0(r,Yt(n));return i.fill(e),dt.make(n,{values:i},r)}var o=new jce(n,e),a=o.getCustomSetupFunc(e),s=this.makeOutputArray(n,r);return this.compileAndRun(o,[],s,a)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.makeOutputArray=function(n,e){return dt.make(n,{},e,this)},t.prototype.makePackedTensor=function(n,e){var r=dt.make(n,{},e,this);return this.texData.get(r.dataId).isPacked=!0,r},t.prototype.unpackTensor=function(n){var e=new Tpe(n.shape);return this.compileAndRun(e,[n],dt.make(e.outputShape,{},n.dtype,this))},t.prototype.packTensor=function(n){var e=new hde(n.shape);return this.compileAndRun(e,[n],this.makePackedTensor(n.shape,n.dtype))},t.prototype.packedReshape=function(n,e){var r=n.reshape([bp(n.shape)].concat(_p(n.shape))),i=[bp(e)].concat(_p(e)),o=new wde(i,r.shape);return this.compileAndRun(o,[r]).reshape(e)},t.prototype.compileAndRun=function(n,e,r,i,o){var a=this;if(o===void 0&&(o=!0),r==null&&(r=n.usesPackedTextures?this.makePackedTensor(n.outputShape,e[0].dtype):this.makeOutputArray(n.outputShape,e[0].dtype)),r.size===0)return this.texData.get(r.dataId).values=J_(r.dtype,0),r;var s=e.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var x=a.texData.get(w.dataId);if(x.texture==null){if(!n.usesPackedTextures&&Yt(w.shape)<=ne.get("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:a.readSync(w.dataId)};n.usesPackedTextures&&(x.isPacked=!0,x.shape=w.shape)}else if(!!x.isPacked!=!!n.usesPackedTextures)w=x.isPacked?a.unpackTensor(w):a.packTensor(w),x=a.texData.get(w.dataId);else if(x.isPacked&&!j0(x.shape,w.shape)){var I=w,D=w.shape;w.shape=x.shape,w=a.packedReshape(w,D),x=a.texData.get(w.dataId),I.shape=D}return a.uploadToGPU(w.dataId),{shape:w.shape,texData:x,isUniform:!1}});this.uploadToGPU(r.dataId);var l,u={shape:r.shape,texData:this.texData.get(r.dataId),isUniform:!1},c=ade(n,s,u),d=this.getAndSaveBinary(c,function(){return ide(a.gpgpu,n,s,u)}),p=this.activeTimers!=null;p&&(l=this.startTimer()),ode(this.gpgpu,d,s,u,i);var h=1024*ne.get("WEBGL_NUM_MB_BEFORE_PAGING");if(o&&this.numBytesInGPU>h)for(var f=this.numBytesInGPU-h;f>0&&this.lruDataGPU.length>0;){var m=this.lruDataGPU.shift(),g=this.texData.get(m),y=g.texShape,b=g.dtype;f-=this.computeBytes(y,b),this.read(m)}return p&&(l=this.endTimer(l),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(l)})),ne.get("WEBGL_LAZILY_UNPACK")||!this.texData.get(r.dataId).isPacked||n.isPackShader?r:this.unpackTensor(r)},t.prototype.getAndSaveBinary=function(n,e){return n in this.binaryCache||(this.binaryCache[n]=e()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas.remove(),this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return pt(function(){var e=ne.get("DEBUG");ne.set("DEBUG",!1);var r=n.abs(ot(1e-8)).dataSync()[0];return ne.set("DEBUG",e),r>0?32:16})},t.prototype.uploadToGPU=function(n){var e,r=this.texData.get(n),i=r.shape,o=r.dtype,a=r.values,s=r.texture,l=r.usage,u=r.isPacked;if(s==null){var c,d=this.activeTimers!=null;d&&(c=performance.now());var p=ZL(i,u);r.texShape=p;var h=this.acquireTexture(n,p,l,o,u);if(r.texture=h,a!=null){if(u){var f=bp(i),m=1,g=1;i.length&&(m=(e=_p(i))[0],g=e[1]),this.gpgpu.uploadMatrixToPackedTexture(h,f,m,g,p[0],p[1],OP(a))}else this.gpgpu.uploadMatrixToTexture(h,p[0],p[1],OP(a));r.values=null,d&&(this.uploadWaitMs+=performance.now()-c)}}else ne.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.indexOf(n)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(n),1),this.lruDataGPU.push(n))},t.prototype.convertAndCacheOnCPU=function(n,e){var r=this.texData.get(n),i=r.texture,o=r.texShape,a=r.dtype,s=r.usage,l=r.isPacked;return i!=null&&(this.releaseTexture(n,i,o,s,a,l),r.texture=null,r.texShape=null,r.isPacked=!1),r.usage=zl.UPLOAD,e!=null&&(r.values=Ohe(e,a)),r.values},t.prototype.releaseTexture=function(n,e,r,i,o,a){if(ne.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY){var s=this.lruDataGPU.indexOf(n);s>=0&&this.lruDataGPU.splice(s,1)}this.numBytesInGPU-=this.computeBytes(r,o),this.textureManager.releaseTexture(e,r,i,a)},t.prototype.acquireTexture=function(n,e,r,i,o){return ne.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.push(n),this.numBytesInGPU+=this.computeBytes(e,i),this.textureManager.acquireTexture(e,r,o)},t.prototype.computeBytes=function(n,e){return n[0]*n[1]*pT(e)},t}();function Ohe(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){for(var e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<e.length;++r)e[r]=Math.round(t[r]);return e}throw new Error("Unknown dtype "+n)}function OP(t){return t instanceof Float32Array?t:new Float32Array(t)}function Phe(t){var n=te(t,"x","neg");return ne.engine.runKernel(function(e){return e.neg(n)},{$x:n},function(e){return{$x:function(){return e.neg()}}})}function Lhe(t){var n=te(t,"x","ceil");return ne.engine.runKernel(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function Bhe(t){var n=te(t,"x","floor");return ne.engine.runKernel(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function Vhe(t){var n=te(t,"x","sign");return ne.engine.runKernel(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function jhe(t){var n=te(t,"x","isNaN");return ne.engine.runKernel(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function Uhe(t){var n=te(t,"x","isInf");return ne.engine.runKernel(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function Hhe(t){var n=te(t,"x","isFinite");return ne.engine.runKernel(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function zhe(t){var n=te(t,"x","round");return ne.engine.runKernel(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return lr(e)}}})}function Whe(t){var n=te(t,"x","exp");return ne.engine.runKernel(function(e,r){var i=e.exp(n);return r([i]),i},{$x:n},function(e,r){return{$x:function(){return e.mulStrict(r[0])}}})}function qhe(t){var n=te(t,"x","expm1");return ne.engine.runKernel(function(e,r){var i=e.expm1(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}function Ghe(t){var n=te(t,"x","log");return ne.engine.runKernel(function(e,r){var i=e.log(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat())}}})}function $he(t){var n=te(t,"x","log1p");return ne.engine.runKernel(function(e,r){var i=e.log1p(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}function Khe(t){var n=te(t,"x","sqrt");return ne.engine.runKernel(function(e,r){var i=e.sqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}function Yhe(t){var n=te(t,"x","rsqrt");return ne.engine.runKernel(function(e,r){var i=e.rsqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.pow(1.5).mul(2)).neg()}}})}function Xhe(t){var n=te(t,"x","square");return ne.engine.runKernel(function(e,r){return r([n]),e.square(n)},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.toFloat().mul(2))}}})}function Qhe(t){var n=te(t,"x","reciprocal");return ne.engine.runKernel(function(e,r){var i=e.reciprocal(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}function Zhe(t){var n=te(t,"x","abs");return n.dtype==="complex64"?ne.engine.runKernel(function(e){return e.complexAbs(n)},{$x:n}):ne.engine.runKernel(function(e,r){var i=e.abs(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.toFloat().step(-1))}}})}function Jhe(t,n,e){var r=te(t,"x","clipByValue");return de(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."}),ne.engine.runKernel(function(i,o){var a=i.clip(r,n,e);return o([r]),a},{$x:r},function(i,o){var a=o[0];return{$x:function(){return i.where(a.greaterEqual(n).logicalAnd(a.lessEqual(e)),lr(i))}}})}function efe(t){var n=te(t,"x","sigmoid");return ne.engine.runKernel(function(e,r){var i=e.sigmoid(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.mul(ot(1).sub(i)))}}})}function tfe(t){var n=te(t,"x","logSigmoid");return ne.engine.runKernel(function(e,r){var i=e.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}function nfe(t){var n=te(t,"x","softplus");return ne.engine.runKernel(function(e,r){var i=e.softplus(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}function rfe(t){var n=te(t,"x","sin");return ne.engine.runKernel(function(e,r){var i=e.sin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cos().mul(e)}}})}function ife(t){var n=te(t,"x","cos");return ne.engine.runKernel(function(e,r){var i=e.cos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sin().neg().mul(e)}}})}function ofe(t){var n=te(t,"x","tan");return ne.engine.runKernel(function(e,r){var i=e.tan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}function afe(t){var n=te(t,"x","asin");return ne.engine.runKernel(function(e,r){var i=e.asin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ot(1).sub(i.toFloat().square()).sqrt())}}})}function sfe(t){var n=te(t,"x","acos");return ne.engine.runKernel(function(e,r){var i=e.acos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ot(1).sub(i.toFloat().square()).sqrt()).neg()}}})}function lfe(t){var n=te(t,"x","atan");return ne.engine.runKernel(function(e,r){var i=e.atan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}function ufe(t){var n=te(t,"x","sinh");return ne.engine.runKernel(function(e,r){var i=e.sinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}function cfe(t){var n=te(t,"x","cosh");return ne.engine.runKernel(function(e,r){var i=e.cosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}function dfe(t){var n=te(t,"x","tanh");return ne.engine.runKernel(function(e,r){var i=e.tanh(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return ot(1).sub(i.square()).mulStrict(e)}}})}function pfe(t){var n=te(t,"x","asinh");return ne.engine.runKernel(function(e,r){var i=e.asinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ot(1).add(i.toFloat().square()).sqrt())}}})}function hfe(t){var n=te(t,"x","acosh");return ne.engine.runKernel(function(e,r){var i=e.acosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}function ffe(t){var n=te(t,"x","atanh");return ne.engine.runKernel(function(e,r){var i=e.atanh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(ot(1).sub(i.toFloat().square()))}}})}function mfe(t){var n=te(t,"x","erf");return de(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),ne.engine.runKernel(function(e,r){var i=e.erf(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}function gfe(t,n){n===void 0&&(n=0);var e=te(t,"x","step");return ne.engine.runKernel(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return lr(r)}}})}ne.get("IS_BROWSER")&&ne.registerBackend("webgl",function(){return new F6},2);var vfe=we({abs_:Zhe}),yfe=we({acos_:sfe}),bfe=we({acosh_:hfe}),_fe=we({asin_:afe}),wfe=we({asinh_:pfe}),xfe=we({atan_:lfe}),Cfe=we({atanh_:ffe}),Ife=we({ceil_:Lhe}),ev=we({clipByValue_:Jhe}),Sfe=we({cos_:ife}),Efe=we({cosh_:cfe}),Dfe=we({erf_:mfe}),d2=we({exp_:Whe}),Tfe=we({expm1_:qhe}),Afe=we({floor_:Bhe}),kfe=we({log_:Ghe}),Mfe=we({log1p_:$he}),Rfe=we({logSigmoid_:tfe}),tv=we({neg_:Phe}),Nfe=we({reciprocal_:Qhe}),Ffe=we({round_:zhe}),O6=we({rsqrt_:Yhe}),TT=we({sigmoid_:efe}),Ofe=we({sign_:Vhe}),Pfe=we({isNaN_:jhe}),Lfe=we({isInf_:Uhe}),Bfe=we({isFinite_:Hhe}),Vfe=we({sin_:rfe}),jfe=we({sinh_:ufe}),Ufe=we({softplus_:nfe}),Hfe=we({sqrt_:Khe}),zfe=we({square_:Xhe}),Wfe=we({step_:gfe}),qfe=we({tan_:ofe}),Gfe=we({tanh_:dfe});function P6(t,n,e,r,i,o){var a,s,l=te(t,"x","batchNorm"),u=te(n,"mean","batchNorm"),c=te(e,"variance","batchNorm");return i!=null&&(a=te(i,"scale","batchNorm")),r!=null&&(s=te(r,"offset","batchNorm")),de(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),de(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),de(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&de(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&de(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),nv(l,u,c,s,a,o)}function L6(t,n,e,r,i,o){var a,s,l=te(t,"x","batchNorm"),u=te(n,"mean","batchNorm"),c=te(e,"variance","batchNorm");return i!=null&&(a=te(i,"scale","batchNorm")),r!=null&&(s=te(r,"offset","batchNorm")),de(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),de(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),de(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&de(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&de(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),nv(l,u,c,s,a,o)}function B6(t,n,e,r,i,o){var a,s,l=te(t,"x","batchNorm"),u=te(n,"mean","batchNorm"),c=te(e,"variance","batchNorm");return i!=null&&(a=te(i,"scale","batchNorm")),r!=null&&(s=te(r,"offset","batchNorm")),de(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),de(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),de(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&de(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&de(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),nv(l,u,c,s,a,o)}function $fe(t,n,e,r,i,o){return r===void 0&&(r=.001),p2(),nv(t,n,e,o,i,r)}function nv(t,n,e,r,i,o){o==null&&(o=.001);var a,s,l,u=te(t,"x","batchNorm"),c=te(n,"mean","batchNorm"),d=te(e,"variance","batchNorm");return i!=null&&(a=te(i,"scale","batchNorm")),r!=null&&(s=te(r,"offset","batchNorm")),de(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),de(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),de(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=u.rank===0||u.rank===1?u.as4D(1,1,1,u.size):u.rank===2?u.as4D(1,1,u.shape[0],u.shape[1]):u.rank===3?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u,ne.engine.runKernel(function(p,h){var f=p.batchNormalization(l,G_(c),G_(d),o,G_(a),G_(s));return h([u,c,d,a]),f},{$x:u,$mean:c,$variance:d,$scale:a,$offset:s},function(p,h){var f=h[0],m=h[1],g=h[2],y=h[3],b=y??ot(1),w=zi(m.shape,l.shape),x=[];if(m.rank===1){for(var I=0;I<l.shape.length-1;++I)x.push(l.shape[I]);x.push(1)}var D=f.sub(m),A=p.mul(b),E=O6(g.add(ot(o))),R=E.mul(E).mul(E).mul(ot(-.5));return{$x:function(){return m.rank===1?p.mul(Ip(E.as4D(1,1,1,m.shape[0]),x)).mul(b).reshape(f.shape):p.mul(E).mul(b).reshape(f.shape)},$mean:function(){var N=E.mul(ot(-1)).mul(A);return m.rank===1&&(N=N.sum(w)),N.reshape(m.shape)},$variance:function(){var N=R.mul(D).mul(A);return m.rank===1&&(N=N.sum(w)),N.reshape(m.shape)},$scale:function(){var N=D.mul(E),T=p.mul(N);return m.rank===1&&(T=T.sum(w)),T.reshape(m.shape)},$offset:function(){var N=p;return m.rank===1&&(N=N.sum(w)),N.reshape(m.shape)}}}).reshape(u.shape)}function G_(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Kfe(t,n,e,r,i,o){return r===void 0&&(r=.001),p2(),P6(t,n,e,o,i,r)}function Yfe(t,n,e,r,i,o){return r===void 0&&(r=.001),p2(),L6(t,n,e,o,i,r)}function Xfe(t,n,e,r,i,o){return r===void 0&&(r=.001),p2(),B6(t,n,e,o,i,r)}function p2(){vT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Qfe=we({batchNormalization2d_:Kfe}),Zfe=we({batchNormalization3d_:Yfe}),Jfe=we({batchNormalization4d_:Xfe}),eme=we({batchNormalization_:$fe}),AT=we({batchNorm_:nv}),tme=we({batchNorm2d_:P6}),nme=we({batchNorm3d_:L6}),rme=we({batchNorm4d_:B6});function rv(t,n,e,r,i,o,a){a===void 0&&(a="channelsLast");var s,l=s2(n),u=l[0],c=l[1];if(a==="channelsLast")s=[u,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[u,c,t[1],t[1]]}return iv(t,s,e,r,i,o,!1,a)}function iv(t,n,e,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],p=l[3];if(s==="channelsLast")u=t[0],c=t[1],d=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);u=t[0],p=t[1],c=t[2],d=t[3]}var h,f=n[0],m=n[1],g=n[3],y=s2(e),b=y[0],w=y[1],x=s2(r),I=x[0],D=x[1],A=Ff(f,I),E=Ff(m,D),R=ame(i,c,d,b,w,A,E,o),N=R.padInfo,T=R.outHeight,M=R.outWidth,H=a?g*p:g;return s==="channelsFirst"?h=[u,H,T,M]:s==="channelsLast"&&(h=[u,T,M,H]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:p,outHeight:T,outWidth:M,outChannels:H,padInfo:N,strideHeight:b,strideWidth:w,filterHeight:f,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:E,dilationHeight:I,dilationWidth:D,inShape:t,outShape:h,filterShape:n}}function kT(t,n,e,r,i,o,a){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var s=[-1,-1,-1,-1,-1],l=s[0],u=s[1],c=s[2],d=s[3],p=s[4];if(a==="channelsLast")l=t[0],u=t[1],c=t[2],d=t[3],p=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],p=t[1],u=t[2],c=t[3],d=t[4]}var h,f=n[0],m=n[1],g=n[2],y=n[4],b=PP(e),w=b[0],x=b[1],I=b[2],D=PP(r),A=D[0],E=D[1],R=D[2],N=sme(i,u,c,d,w,x,I,Ff(f,A),Ff(m,E),Ff(g,R)),T=N.padInfo,M=N.outDepth,H=N.outHeight,V=N.outWidth,X=o?y*p:y;return a==="channelsFirst"?h=[l,X,M,H,V]:a==="channelsLast"&&(h=[l,M,H,V,X]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:M,outHeight:H,outWidth:V,outChannels:X,padInfo:T,strideDepth:w,strideHeight:x,strideWidth:I,filterDepth:f,filterHeight:m,filterWidth:g,dilationDepth:A,dilationHeight:E,dilationWidth:R,inShape:t,outShape:h,filterShape:n}}function ime(t,n,e,r,i,o){i==null&&(i=ome(t,n,r));var a=t[0],s=t[1],l=LP((a-n+2*i)/r+1,o);de(Ca(l),function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"});var u=LP((s-n+2*i)/r+1,o);return de(Ca(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[l,u,e]}function ome(t,n,e,r){r===void 0&&(r=1);var i=Ff(n,r);return Math.floor((t[0]*(e-1)-e+i)/2)}function s2(t){return typeof t=="number"?[t,t]:t}function PP(t){return typeof t=="number"?[t,t,t]:t}function Ff(t,n){return n<=1?t:t+(t-1)*(n-1)}function ame(t,n,e,r,i,o,a,s){var l,u,c;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};var d=ime([n,e,1],o,1,r,t,s);u=d[0],c=d[1]}else if(t==="same"){u=Math.ceil(n/r),c=Math.ceil(e/i);var p=Math.max(0,(u-1)*r+o-n),h=Math.max(0,(c-1)*i+a-e),f=Math.floor(p/2),m=p-f,g=Math.floor(h/2);l={top:f,bottom:m,left:g,right:h-g,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-o+1)/r),c=Math.ceil((e-a+1)/i)}return{padInfo:l,outHeight:u,outWidth:c}}function sme(t,n,e,r,i,o,a,s,l,u){var c,d,p,h;if(t==="same"){var f=((d=Math.ceil(n/i))-1)*i+s-n,m=((p=Math.ceil(e/o))-1)*o+l-e,g=((h=Math.ceil(r/a))-1)*a+u-r,y=Math.floor(f/2),b=f-y,w=Math.floor(m/2),x=m-w,I=Math.floor(g/2);c={top:w,bottom:x,left:I,right:g-I,front:y,back:b,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((n-s+1)/i),p=Math.ceil((e-l+1)/o),h=Math.ceil((r-u+1)/a)}return{padInfo:c,outDepth:d,outHeight:p,outWidth:h}}function LP(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function l2(t){var n=s2(t),e=n[0],r=n[1];return e===1&&r===1}function ad(t,n){return l2(t)||l2(n)}function lme(t,n,e,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=te(t,"x","conv1d"),l=te(n,"filter","conv1d"),u=s,c=!1;s.rank===2&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),de(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),de(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),a!=null&&de(Ca(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),de(u.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),de(ad(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),de(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),p=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),h=es(p,d,[1,e],r,"NHWC",[1,o],a);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}function ume(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=te(t,"x","conv2d"),l=te(n,"filter","conv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),de(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),de(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),a!=null&&de(Ca(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),de(u.shape[3]===l.shape[2],function(){return"Error in conv2d: depth of input ("+u.shape[3]+") must match input depth for filter "+l.shape[2]+"."}),de(ad(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),de(i==="NHWC",function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var d=iv(u.shape,l.shape,e,o,r,a),p=ne.engine.runKernel(function(h,f){var m=h.conv2d(u,l,d);return f([l,u]),m},{x:u,$filter:l},function(h,f){var m=f,g=m[0],y=m[1];return de(l2(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return V6(y.shape,h,g,e,r)},$filter:function(){return j6(y,h,g.shape,e,r)}}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function V6(t,n,e,r,i,o){de(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var a=t,s=n,l=!1;n.rank===3&&(l=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),a=[1,t[0],t[1],t[2]]);var u=a[3],c=s.shape[3];de(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),de(s.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),de(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank}),de(u===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[2]+"."}),de(c===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+e.shape[3]+"."}),o!=null&&de(Ca(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var d=iv(a,e.shape,r,1,i,o),p=ne.engine.runKernel(function(h,f){var m=h.conv2dDerInput(s,e,d);return f([e,s]),m},{dy4D:s,filter:e},function(h,f){var m=f[0],g=f[1];return{dy4D:function(){return es(h,m,r,i,"NHWC",1,o)},filter:function(){return U6(h,g,m.shape,r,i,o)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function j6(t,n,e,r,i,o){var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=n;s.rank===3&&(s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),de(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),de(s.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),de(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."}),de(a.shape[3]===e[2],function(){return"Error in conv2dDerFilter: depth of input "+a.shape[3]+") must match input depth in filter ("+e[2]+"."}),de(s.shape[3]===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+e[3]+")."}),o!=null&&de(Ca(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=iv(a.shape,e,r,1,i,o);return ne.engine.runKernel(function(u){return u.conv2dDerFilter(a,s,l)},{x4D:a,dy4D:s})}function cme(t,n,e,r,i,o){return V6(e,te(t,"x","conv2dTranspose"),te(n,"filter","conv2dTranspose"),r,i,o)}function dme(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=te(t,"x","depthwiseConv2d"),l=te(n,"filter","depthwiseConv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),de(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),de(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),de(u.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),o==null&&(o=[1,1]),de(ad(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&de(Ca(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=iv(u.shape,l.shape,e,o,r,a,!0),p=ne.engine.runKernel(function(h,f){var m=h.depthwiseConv2D(u,l,d);return f([u,l]),m},{x:u,$filter:l},function(h,f){de(l2(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var m=f[0],g=f[1];return{x:function(){return mme(m.shape,h,g,d)},$filter:function(){return gme(m,h,g.shape,d)}}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function pme(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=te(t,"x","separableConv2d"),l=te(n,"depthwiseFilter","separableConv2d"),u=te(e,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");de(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),de(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),de(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),de(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),de(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var p=l.shape[2],h=l.shape[3];de(u.shape[2]===p*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*h+", but got "+u.shape[2]+"."});var f=h2(c,l,r,i,a,o),m=es(f,u,1,"valid",a);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function hme(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oT(t){var n=hme(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function fme(t,n){return oT(t)||oT(n)}function mme(t,n,e,r){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=ne.engine.runKernel(function(s){return s.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}function gme(t,n,e,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),ne.engine.runKernel(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}function vme(t,n,e,r,i,o){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1,1]);var a=te(t,"x","conv3d"),s=te(n,"filter","conv3d"),l=a,u=!1;a.rank===4&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),de(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),de(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),de(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),de(fme(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),de(i==="NHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NHWC is currently supported."});var c=kT(l.shape,s.shape,e,o,r),d=ne.engine.runKernel(function(p,h){var f=p.conv3d(l,s,c);return h([l,s]),f},{x:l,$filter:s},function(p,h){de(oT(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var f=h[0],m=h[1];return{x:function(){return yme(f.shape,p,m,e,r)},$filter:function(){return bme(f,p,m.shape,e,r)}}});return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}function yme(t,n,e,r,i){de(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var l=o[4],u=a.shape[4];de(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),de(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),de(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),de(l===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+e.shape[3]+"."}),de(u===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+e.shape[4]+"."});var c=kT(o,e.shape,r,1,i),d=ne.engine.runKernel(function(p){return p.conv3dDerInput(a,e,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}function bme(t,n,e,r,i){var o=t;t.rank===4&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var a=n;a.rank===4&&(a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3])),de(o.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."}),de(a.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."}),de(e.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+e+"."}),de(o.shape[4]===e[3],function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+e[3]+"."}),de(a.shape[4]===e[4],function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+e[4]+")."});var s=kT(o.shape,e,r,1,i);return ne.engine.runKernel(function(l){return l.conv3dDerFilter(o,a,s)},{x5D:o,dy5D:a})}var _me=we({conv1d_:lme}),es=we({conv2d_:ume}),wme=we({conv3d_:vme}),U6=we({conv2dDerFilter_:j6}),h2=we({depthwiseConv2d_:dme}),MT=we({separableConv2d_:pme}),xme=we({conv2dTranspose_:cme});function Cme(t,n,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=te(t,"a","matMul"),a=te(n,"b","matMul");i=Ri(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],l=r?a.shape[a.rank-1]:a.shape[a.rank-2],u=e?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=o.shape.slice(0,-2),p=a.shape.slice(0,-2),h=Yt(d),f=Yt(p);de(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),de(bo(d,p),function(){return"Error in matMul: outer dimensions ("+d+") and ("+p+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),de(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var m=o.shape.slice(0,-2).concat([u,c]),g=e?o.as3D(h,s,u):o.as3D(h,u,s),y=r?a.as3D(f,c,l):a.as3D(f,l,c);return ne.engine.runKernel(function(b,w){var x=b.batchMatMul(g,y,e,r);return w([g,y]),x},{$a:g,$b:y},function(b,w){var x=w,I=x[0],D=x[1];return e||r?!e&&r?{$a:function(){return b.matMul(D,!1,!1)},$b:function(){return b.matMul(I,!0,!1)}}:e&&!r?{$a:function(){return D.matMul(b,!1,!0)},$b:function(){return I.matMul(b,!1,!1)}}:{$a:function(){return D.matMul(b,!0,!0)},$b:function(){return b.matMul(I,!0,!0)}}:{$a:function(){return b.matMul(D,!1,!0)},$b:function(){return I.matMul(b,!0,!1)}}}).reshape(m)}function Ime(t,n){var e=te(t,"v1","outerProduct"),r=te(n,"v2","outerProduct");return de(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}function Sme(t,n){var e=te(t,"t1","dot"),r=te(n,"t2","dot");de(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return de(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}var ov=we({matMul_:Cme}),Eme=we({dot_:Sme}),Dme=we({outerProduct_:Ime});function Tme(t){var n=te(t,"x","reverse");return de(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),av(n,0)}function Ame(t,n){var e=te(t,"x","reverse");return de(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),av(e,n)}function kme(t,n){var e=te(t,"x","reverse");return de(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),av(e,n)}function Mme(t,n){var e=te(t,"x","reverse");return de(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),av(e,n)}function Rme(t,n){var e=te(t,"x","reverse");if(e.rank===0)return e.clone();var r=io(n,e.shape);return ne.engine.runKernel(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}var av=we({reverse_:Rme}),Nme=we({reverse1d_:Tme}),Fme=we({reverse2d_:Ame}),Ome=we({reverse3d_:kme}),Pme=we({reverse4d_:Mme});function H6(t,n,e,r,i,o){var a=te(t,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),de(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),de(ad(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&de(Ca(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=rv(s.shape,n,e,r,i,o),c=ne.engine.runKernel(function(d,p){var h=d.maxPool(s,u);return p([s,h]),h},{x:s},function(d,p){var h=p[0],f=p[1];return{x:function(){return jme(d,h,f,n,e,r,i)}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Lme(t,n,e,r,i){return H6(t,n,e,1,r,i)}function z6(t,n,e,r,i,o){var a=te(t,"x","avgPool","float32");r==null&&(r=[1,1]),de(ad(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),de(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&de(Ca(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=rv(s.shape,n,e,r,i,o),c=ne.engine.runKernel(function(d){return d.avgPool(s,u)},{x:s},function(d){return{x:function(){return Ume(d,s,n,e,r,i)}}});return c=c.cast(a.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Bme(t,n,e,r,i){return z6(t,n,e,1,r,i)}function Vme(t,n,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=te(t,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),de(ad(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var u,c=rv(s.shape,n,o,i,r),d=[c.dilationHeight,c.dilationWidth];u=r==="same"?zme([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var p=d[0]===1&&d[1]===1,h=Hme([c.inHeight,c.inWidth],d,u),f=h[0],m=h[1],g=p?r:"valid",y=p?s:R6(s,d,f),b=(e==="avg"?function(){return z6(y,n,o,1,g)}:function(){return H6(y,n,o,1,g)})(),w=p?b:k6(b,d,m);return l?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}function jme(t,n,e,r,i,o,a,s){var l=te(t,"dy","maxPoolBackprop"),u=te(n,"input","maxPoolBackprop"),c=te(e,"output","maxPoolBackprop");de(u.rank===l.rank,function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+l.rank+")"}),o==null&&(o=[1,1]),de(ad(i,o),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}),de(l.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),de(u.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}),s!=null&&de(Ca(a),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var d=rv(u.shape,r,i,o,a,s);return ne.engine.runKernel(function(p){return p.maxPoolBackprop(l,u,c,d)},{$dy:l,$input:u})}function Ume(t,n,e,r,i,o){var a=te(t,"dy","avgPoolBackprop"),s=te(n,"input","avgPoolBackprop");de(s.rank===a.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"}),i==null&&(i=[1,1]),de(ad(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var l=s,u=a,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),de(u.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),de(l.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var d=rv(l.shape,e,r,i,o),p=ne.engine.runKernel(function(h){return h.avgPoolBackprop(u,l,d)},{dy4D:u,input4D:l});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Hme(t,n,e){var r=e.map(function(l){return l[0]}),i=e.map(function(l){return l[1]}),o=t.concat(r,i),a=n.map(function(l,u){return(l-o[u]%l)%l}),s=i.map(function(l,u){return l+a[u]});return[n.map(function(l,u){return[r[u],s[u]]}),n.map(function(l,u){return[0,a[u]]})]}function zme(t,n){var e=t.map(function(o,a){return o+(o-1)*(n[a]-1)}).map(function(o){return o-1}),r=e.map(function(o){return Math.floor(o/2)}),i=e.map(function(o,a){return o-r[a]});return e.map(function(o,a){return[r[a],i[a]]})}var Yl=we({maxPool_:Lme}),Wu=we({avgPool_:Bme}),Wme=we({pool_:Vme});function qme(t,n,e){var r=te(t,"x","slice1d");return de(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),qu(r,[n],[e])}function Gme(t,n,e){var r=te(t,"x","slice2d");return de(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),qu(r,n,e)}function $me(t,n,e){var r=te(t,"x","slice3d");return de(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),qu(r,n,e)}function Kme(t,n,e){var r=te(t,"x","slice4d");return de(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),qu(r,n,e)}function Yme(t,n,e){var r,i,o=te(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice(),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(s,l){return s>=0?s:(de(s===-1,function(){return"Bad value in size"}),o.shape[l]-r[l])}),Mle(o,r,i);var a=o.shape;return ne.engine.runKernel(function(s){return s.slice(o,r,i)},{$x:o},function(s){for(var l=[],u=0;u<s.rank;u++)l.push([r[u],a[u]-r[u]-i[u]]);return{$x:function(){return s.pad(l)}}})}var qu=we({slice_:Yme}),Xme=we({slice1d_:qme}),Qme=we({slice2d_:Gme}),RT=we({slice3d_:$me}),Zme=we({slice4d_:Kme});function Jme(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","logSumExp"),i=io(n,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var l=Is(s.shape,i);return s.reshape(l)}return s}function ege(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=io(n,r.shape);return $0(function(o){var a=Gl(i,o.rank),s=i,l=o;a!=null&&(l=o.transpose(a),s=$l(s.length,o.rank));var u=ne.engine.runKernel(function(d){return d.sum(l,s)},{permutedX:l});if(e){var c=Is(u.shape,i);u=u.reshape(c)}return{value:u,gradFunc:function(d){var p=o.shape.slice();return i.forEach(function(h){p[h]=1}),d.reshape(p).mul(Dp(o.shape,"float32"))}}})(r)}function tge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=io(n,r.shape),o=Gl(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=$l(a.length,r.rank));var l=ne.engine.runKernel(function(c){return c.prod(s,a)},{permutedX:s});if(e){var u=Is(l.shape,i);l=l.reshape(u)}return l}function nge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","mean"),i=io(n,r.shape),o=Yt(Ao(r.shape,i)[1]);return $0(function(a){var s=ot(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(l){var u=a.shape.slice();return i.forEach(function(c){u[c]=1}),l.reshape(u).mul(Dp(a.shape,"float32")).div(o)}}})(r)}function W6(t,n,e,r,i){return n.rank<e.rank&&(n=n.reshape(Is(n.shape,r))),t.rank<e.rank&&(t=t.reshape(Is(t.shape,r))),{$x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return i==null?o:o.transpose(i)}}}function rge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","min"),i=r,o=io(n,r.shape),a=o,s=Gl(a,r.rank);s!=null&&(r=r.transpose(s),a=$l(a.length,r.rank));var l=ne.engine.runKernel(function(c,d){var p=c.min(r,a);return d([i,p]),p},{$x:r},function(c,d){return W6(c,d[1],d[0],o,s)});if(e){var u=Is(l.shape,o);l=l.reshape(u)}return l}function ige(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","max"),i=r,o=io(n,r.shape),a=o,s=Gl(a,r.rank);s!=null&&(r=r.transpose(s),a=$l(a.length,r.rank));var l=ne.engine.runKernel(function(c,d){var p=c.max(r,a);return d([i,p]),p},{$x:r},function(c,d){return W6(c,d[1],d[0],o,s)});if(e){var u=Is(l.shape,o);l=l.reshape(u)}return l}function oge(t,n){n===void 0&&(n=0);var e=te(t,"x","argMin");n==null&&(n=0);var r=io(n,e.shape),i=Gl(r,e.rank);return i!=null&&(e=e.transpose(i),r=$l(r.length,e.rank)),ne.engine.runKernel(function(o,a){var s=o.argMin(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return lr(s)}}})}function age(t,n){n===void 0&&(n=0);var e=te(t,"x","argMax");n==null&&(n=0);var r=io(n,e.shape),i=Gl(r,e.rank);return i!=null&&(e=e.transpose(i),r=$l(r.length,e.rank)),ne.engine.runKernel(function(o,a){var s=o.argMax(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return lr(s)}}})}function sge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","all","bool"),i=io(n,r.shape),o=i,a=Gl(o,r.rank);a!=null&&(r=r.transpose(a),o=$l(o.length,r.rank));var s=ne.engine.runKernel(function(u){return u.all(r,o)},{$x:r});if(e){var l=Is(s.shape,i);return s.reshape(l)}return s}function lge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=te(t,"x","any","bool"),i=io(n,r.shape),o=i,a=Gl(o,r.rank);a!=null&&(r=r.transpose(a),o=$l(o.length,r.rank));var s=ne.engine.runKernel(function(u){return u.any(r,o)},{$x:r});if(e){var l=Is(s.shape,i);return s.reshape(l)}return s}function uge(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=io(n,(t=te(t,"x","moments")).shape),i=t.mean(r,e),o=i.shape;return e||(o=Is(i.shape,r)),{mean:i,variance:t.toFloat().sub(i.reshape(o)).square().mean(r,e)}}var cge=we({all_:sge}),dge=we({any_:lge}),pge=we({argMax_:age}),hge=we({argMin_:oge}),fge=we({logSumExp_:Jme}),Np=we({max_:ige}),mge=we({mean_:nge}),gge=we({min_:rge}),vge=we({moments_:uge}),q6=we({sum_:ege}),yge=we({prod_:tge});function bge(t,n){var e,r=te(t,"a","notEqual"),i=te(n,"b","notEqual");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o){return o.notEqual(r,i)},{$a:r,$b:i})}function _ge(t,n){var e=te(t,"a","notEqualStrict"),r=te(n,"b","notEqualStrict");return _r(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}function wge(t,n){var e,r=te(t,"a","less"),i=te(n,"b","less");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o){return o.less(r,i)},{$a:r,$b:i})}function xge(t,n){var e=te(t,"a","lessStrict"),r=te(n,"b","lessStrict");return _r(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}function Cge(t,n){var e,r=te(t,"a","equal"),i=te(n,"b","equal");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o){return o.equal(r,i)},{$a:r,$b:i})}function Ige(t,n){var e=te(t,"a","equalStrict"),r=te(n,"b","equalStrict");return _r(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}function Sge(t,n){var e,r=te(t,"a","lessEqual"),i=te(n,"b","lessEqual");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o){return o.lessEqual(r,i)},{$a:r,$b:i})}function Ege(t,n){var e=te(t,"a","lessEqualStrict"),r=te(n,"b","lessEqualStrict");return _r(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}function Dge(t,n){var e,r=te(t,"a","greater"),i=te(n,"b","greater");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o){return o.greater(r,i)},{$a:r,$b:i})}function Tge(t,n){var e=te(t,"a","greaterStrict"),r=te(n,"b","greaterStrict");return _r(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}function Age(t,n){var e,r=te(t,"a","greaterEqual"),i=te(n,"b","greaterEqual");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],l=a[1];return{$a:function(){return lr(s)},$b:function(){return lr(l)}}})}function kge(t,n){var e=te(t,"a","greaterEqualStrict"),r=te(n,"b","greaterEqualStrict");return _r(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}var G6=we({equal_:Cge}),Mge=we({equalStrict_:Ige}),Rge=we({greater_:Dge}),$6=we({greaterEqual_:Age}),Nge=we({greaterEqualStrict_:kge}),Fge=we({greaterStrict_:Tge}),Oge=we({less_:wge}),Pge=we({lessEqual_:Sge}),Lge=we({lessEqualStrict_:Ege}),Bge=we({lessStrict_:xge}),Vge=we({notEqual_:bge}),jge=we({notEqualStrict_:_ge});function Uge(t,n){var e,r=te(t,"a","add"),i=te(n,"b","add");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a){return a.add(r,i)},{$a:r,$b:i},function(a){return{$a:function(){var s=a,l=zi(r.shape,o);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},$b:function(){var s=a,l=zi(i.shape,o);return l.length>0&&(s=s.sum(l)),s.reshape(i.shape)}}})}function Hge(t){de(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),de(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(i,o){return te(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!bo(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return ne.engine.runKernel(function(i){return i.addN(n)},r,function(i){var o={};return n.forEach(function(a,s){o[s]=function(){return i.clone()}}),o})}function zge(t,n){var e=te(t,"a","addStrict"),r=te(n,"b","addStrict");return _r(e.shape,r.shape,"Error in addStrict: "),e.add(r)}function Wge(t,n){var e,r=te(t,"a","sub"),i=te(n,"b","sub");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a){return a.subtract(r,i)},{$a:r,$b:i},function(a){return{$a:function(){var s=a,l=zi(r.shape,o);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},$b:function(){var s=a,l=zi(i.shape,o);return l.length>0&&(s=s.sum(l)),s.neg().reshape(i.shape)}}})}function qge(t,n){var e=te(t,"a","subStrict"),r=te(n,"b","subStrict");return _r(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}function Gge(t,n){var e=te(t,"base","pow"),r=te(n,"exp","pow"),i=Jn(e.shape,r.shape);return t=e.cast(ro(e.dtype,r.dtype)),n=r.cast(ro(e.dtype,r.dtype)),ne.engine.runKernel(function(o,a){var s=o.pow(e,r);return a([e,r,s]),s},{$base:e,$exp:r},function(o,a){var s=a[0],l=a[1],u=a[2];return{$base:function(){var c=l.toFloat(),d=o.mul(c.mul(s.pow(c.sub(ot(1))))),p=zi(s.shape,i);return p.length>0&&(d=d.sum(p)),d.reshape(s.shape)},$exp:function(){var c=s.greater(0),d=s.log().where(c,lr(s)),p=o.mul(u.mul(d)),h=zi(l.shape,i);return h.length>0&&(p=p.sum(h)),p.reshape(l.shape)}}})}function $ge(t,n){return _r(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}function Kge(t,n){var e,r=te(t,"a","mul"),i=te(n,"b","mul");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a,s){var l=a.multiply(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=a.mul(u.toFloat()),d=zi(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c},$b:function(){var c=a.mul(l.toFloat()),d=zi(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c}}})}function Yge(t,n){var e=te(t,"a","mul"),r=te(n,"b","mul");return _r(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}function Xge(t,n){var e,r=te(t,"a","div"),i=te(n,"b","div");if(e=Ri(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return K6(r,i);var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a,s){var l=a.realDivide(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=a.div(u.toFloat()),d=zi(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c},$b:function(){var c=a.mul(l.toFloat()),d=zi(u.shape,o);d.length>0&&(c=c.sum(d).reshape(u.shape));var p=u.square();return c.div(p.toFloat()).neg()}}})}function Qge(t,n){var e,r=te(t,"a","floorDiv"),i=te(n,"b","floorDiv");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a,s){var l=a.floorDiv(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=a.div(u.toFloat()),d=zi(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c},$b:function(){var c=a.mul(l.toFloat()),d=zi(u.shape,o);d.length>0&&(c=c.sum(d).reshape(u.shape));var p=u.square();return c.div(p.toFloat()).neg()}}})}function Zge(t,n){var e=te(t,"a","div"),r=te(n,"b","div");return _r(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}function Jge(t,n){var e,r=te(t,"a","mod"),i=te(n,"b","mod");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a,s){var l=a.mod(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=zi(l.shape,o);return c.length>0?a.sum(c).reshape(l.shape):a},$b:function(){var c=a.mul(l.div(u).floor().neg()),d=zi(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c}}})}function e0e(t,n){var e=te(t,"a","modStrict"),r=te(n,"b","modStrict");return _r(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}function t0e(t,n){var e,r=te(t,"a","minimum"),i=te(n,"b","minimum");return e=Ri(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Jn(r.shape,i.shape),ne.engine.runKernel(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],l=a[1];return{$a:function(){return o.mul(s.lessEqual(l).toFloat())},$b:function(){return o.mul(s.greater(l).toFloat())}}})}function n0e(t,n){var e=te(t,"a","minimumStrict"),r=te(n,"b","minimumStrict");return _r(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}function r0e(t,n){var e,r=te(t,"a","maximum"),i=te(n,"b","maximum");return e=Ri(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Jn(r.shape,i.shape),ne.engine.runKernel(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],l=a[1];return{$a:function(){return o.mul(s.greaterEqual(l).toFloat())},$b:function(){return o.mul(s.less(l).toFloat())}}})}function i0e(t,n){var e=te(t,"a","maximumStrict"),r=te(n,"b","maximumStrict");return _r(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}function o0e(t,n){var e,r=te(t,"a","squaredDifference"),i=te(n,"b","squaredDifference");return e=Ri(r,i),r=e[0],i=e[1],Jn(r.shape,i.shape),ne.engine.runKernel(function(o,a){var s=o.squaredDifference(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],l=a[1],u=ot(2);return{$a:function(){return o.mul(s.sub(l).mul(u))},$b:function(){return o.mul(l.sub(s).mul(u))}}})}function a0e(t,n){var e=te(t,"a","squaredDifferenceStrict"),r=te(n,"b","squaredDifferenceStrict");return _r(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}function s0e(t,n){var e,r=te(t,"a","atan2"),i=te(n,"b","atan2");e=Ri(r,i),r=e[0],i=e[1];var o=Jn(r.shape,i.shape);return ne.engine.runKernel(function(a,s){var l=a.atan2(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=kn(l.square(),u.square()),d=a.mul(u.div(c)),p=zi(l.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(l.shape)},$b:function(){var c=kn(l.square(),u.square()),d=tv(a.mul(l.div(c))),p=zi(u.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(u.shape)}}})}var kn=we({add_:Uge}),l0e=we({addN_:Hge}),u0e=we({addStrict_:zge}),c0e=we({atan2_:s0e}),Xl=we({div_:Xge}),d0e=we({divStrict_:Zge}),K6=we({floorDiv_:Qge}),NT=we({maximum_:r0e}),p0e=we({maximumStrict_:i0e}),Y6=we({minimum_:t0e}),h0e=we({minimumStrict_:n0e}),f0e=we({mod_:Jge}),m0e=we({modStrict_:e0e}),Sa=we({mul_:Kge}),g0e=we({mulStrict_:Yge}),X6=we({pow_:Gge}),v0e=we({powStrict_:$ge}),y0e=we({squaredDifference_:o0e}),b0e=we({squaredDifferenceStrict_:a0e}),No=we({sub_:Wge}),_0e=we({subStrict_:qge});function w0e(t){var n=te(t,"x","logicalNot","bool");return ne.engine.runKernel(function(e){return e.logicalNot(n)},{$x:n})}function x0e(t,n){var e=te(t,"a","logicalAnd","bool"),r=te(n,"b","logicalAnd","bool");return Jn(e.shape,r.shape),ne.engine.runKernel(function(i){return i.logicalAnd(e,r)},{$a:e,$b:r})}function C0e(t,n){var e=te(t,"a","logicalOr","bool"),r=te(n,"b","logicalOr","bool");return Jn(e.shape,r.shape),ne.engine.runKernel(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}function I0e(t,n){var e=te(t,"a","logicalXor","bool"),r=te(n,"b","logicalXor","bool");return Jn(e.shape,r.shape),Q6(t,n).logicalAnd(FT(t,n).logicalNot())}function S0e(t,n,e){var r=te(n,"a","where"),i=te(e,"b","where"),o=te(t,"condition","where","bool");return _r(r.shape,i.shape,"Error in where: "),o.rank===1?de(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):_r(o.shape,i.shape,"Error in where: "),ne.engine.runKernel(function(a,s){var l=a.select(o,r,i);return s([o]),l},{$condition:o,$a:r,$b:i},function(a,s){var l=s[0];return{$condition:function(){return lr(l).toFloat()},$a:function(){return a.mul(l.cast(a.dtype))},$b:function(){return a.mul(l.logicalNot().cast(a.dtype))}}})}function E0e(t){return Ln(this,void 0,void 0,function(){var n,e,r;return Bn(this,function(i){switch(i.label){case 0:return[4,(n=te(t,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=DT(n.shape,e),t!==n&&n.dispose(),[2,r]}})})}var FT=we({logicalAnd_:x0e}),D0e=we({logicalNot_:w0e}),Q6=we({logicalOr_:C0e}),T0e=we({logicalXor_:I0e}),q0=we({where_:S0e}),A0e=E0e;function k0e(t){var n=te(t,"x","relu");return n.dtype==="bool"?n.toInt():ne.engine.runKernel(function(e,r){var i=e.relu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mulStrict(i.step().toFloat())}}})}function M0e(t){var n=te(t,"x","elu");return ne.engine.runKernel(function(e,r){var i=e.elu(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return ne.engine.runKernel(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}function R0e(t){var n=te(t,"x","selu");return ne.engine.runKernel(function(e,r){var i=e.selu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(ot(0)),a=ot(IT),s=ot(ST),l=e.mul(s),u=e.mul(a).mul(i.toFloat().exp());return q0(o,l,u)}}})}function N0e(t,n){n===void 0&&(n=.2);var e=te(t,"x","leakyRelu");return NT(ot(n).mul(e),e)}function F0e(t,n){var e=te(t,"x","prelu"),r=te(n,"alpha","prelu");return ne.engine.runKernel(function(i,o){var a=i.prelu(e,r);return o([e,r]),a},{$x:e,$alpha:r},function(i,o){var a=o[0],s=o[1],l=a.greater(0);return{$x:function(){return q0(l,i,i.mul(s))},$alpha:function(){var u=q0(l,lr(i),i.mul(a)),c=zi(s.shape,i.shape);return c.length>0&&(u=u.sum(c)),u.reshape(s.shape)}}})}var O0e=we({elu_:M0e}),P0e=we({leakyRelu_:N0e}),L0e=we({prelu_:F0e}),Ur=we({relu_:k0e}),B0e=we({selu_:R0e});function V0e(t,n){var e=te(t,"x","transpose");return n==null&&(n=e.shape.map(function(r,i){return i}).reverse()),de(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(r){de(r>=0&&r<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1?e.clone():ne.engine.runKernel(function(r){return r.transpose(e,n)},{$x:e},function(r){var i=yT(n);return{$x:function(){return r.transpose(i)}}})}var Ss=we({transpose_:V0e});function j0e(t,n,e,r,i){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=te(t,"x","localResponseNormalization");de(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),de(Ca(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var l=ne.engine.runKernel(function(u,c){var d=u.localResponseNormalization4D(a,n,e,r,i);return c([a,d]),d},{x4D:a},function(u,c){var d=c[0],p=c[1];return{x4D:function(){return ne.engine.runKernel(function(h){return h.LRNGrad(u,d,p,n,e,r,i)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var U0e=we({localResponseNormalization_:j0e});function H0e(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=Z6(t=te(t,"x","norm"),n,e),o=i.shape;if(r){var a=io(e,t.shape);o=Is(i.shape,a)}return i.reshape(o)}function Z6(t,n,e){if(e===void 0&&(e=null),t.rank===0)return t.abs();if(t.rank!==1&&e===null)return Z6(t.reshape([-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return t.abs().sum(e);if(n===1/0)return t.abs().max(e);if(n===-1/0)return t.abs().min(e);if(n==="euclidean"||n===2)return t.abs().pow(ot(2,"int32")).sum(e).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(e)&&e.length===2){if(n===1)return t.abs().sum(e[0]).max(e[1]-1);if(n===1/0)return t.abs().sum(e[1]).max(e[0]);if(n===-1/0)return t.abs().sum(e[1]).min(e[0]);if(n==="fro"||n==="euclidean")return t.square().sum(e).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+e)}var J6=we({norm_:H0e});function z0e(t,n,e){var r=te(t,"x","unsortedSegmentSum"),i=te(n,"segmentIds","unsortedSegmentSum","int32");return de(Ca(e),function(){return"numSegments must be of dtype int"}),ne.engine.runKernel(function(o,a){var s=o.unsortedSegmentSum(r,i,e);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return q0e(o,s)}}})}function W0e(t,n,e){e===void 0&&(e=0);var r=te(t,"x","gather"),i=te(n,"indices","gather","int32");e=io(e,r.shape)[0];var o=kle(r,i,e);return ne.engine.runKernel(function(a,s){var l=a.gather(r,i.flatten(),e);return s([i]),l},{$x:r},function(a,s){var l=s[0];return{$x:function(){var u=r.shape,c=l.size,d=u.slice(0,e),p=d.length,h=u.slice(e,u.length).slice(1),f=h.length,m=BP(0,p),g=BP(p+1,p+1+f),y=VP([d,[c],h]),b=a.reshape(y),w=l.reshape([c]),x=VP([[p],m,g]),I=b.transpose(x),D=t8(I,w,r.shape[e]),A=yT(x);return D=D.transpose(A)}}}).reshape(o.outputShape)}function BP(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function VP(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}function q0e(t,n){for(var e=NT(n,lr(n)),r=e8(t,e),i=$6(n,ot(0,"int32")),o=r.rank-i.rank,a=0;a<o;++a)i=ko(i,a+1);i=FT(i,Dp(r.shape,"bool"));var s=lr(r);return q0(i,r,s)}var e8=we({gather_:W0e}),t8=we({unsortedSegmentSum_:z0e});function G0e(t,n,e,r){for(var i=te(n,"data","multiRNNCell"),o=n2(e,"c","multiRNNCell"),a=n2(r,"h","multiRNNCell"),s=i,l=[],u=0;u<t.length;u++){var c=t[u](s,o[u],a[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var d=[],p=[];for(u=0;u<l.length;u+=2)d.push(l[u]),p.push(l[u+1]);return[d,p]}function $0e(t,n,e,r,i,o){var a=te(t,"forgetBias","basicLSTMCell"),s=te(n,"lstmKernel","basicLSTMCell"),l=te(e,"lstmBias","basicLSTMCell"),u=te(r,"data","basicLSTMCell"),c=te(i,"c","basicLSTMCell"),d=te(o,"h","basicLSTMCell"),p=u.concat(d,1).matMul(s).add(l),h=p.shape[0],f=p.shape[1]/4,m=[h,f],g=p.slice([0,0],m),y=p.slice([0,f],m),b=p.slice([0,2*f],m),w=p.slice([0,3*f],m),x=g.sigmoid().mulStrict(y.tanh()).addStrict(c.mulStrict(a.add(b).sigmoid()));return[x,x.tanh().mulStrict(w.sigmoid())]}var K0e=we({basicLSTMCell_:$0e}),Y0e=we({multiRNNCell_:G0e});function X0e(t,n,e,r,i){i===void 0&&(i=!0);var o=te(t,"v","movingAverage"),a=te(n,"x","movingAverage"),s=te(e,"decay","movingAverage");lL(o,a),de(bo(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var l=ot(1),u=l.sub(s),c=a.sub(o).mul(u);if(i){de(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=te(r,"step","movingAverage");c=c.div(l.sub(X6(s,d)))}return o.add(c)}var Q0e=we({movingAverage_:X0e});function Z0e(t,n,e,r,i,o,a,s,l){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),a!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");var u=te(t,"x","stridedSlice");if(r.every(function(m){return m===1})){var c=bT(u.shape,n,e,r,i,o,a,s,l),d=c[0],p=c[1],h=c[2],f=p.filter(function(m,g){return h.indexOf(g)===-1});return qu(u,d,p).reshape(f)}return ne.engine.runKernel(function(m){return m.stridedSlice(u,n,e,r,i,o,a,s,l)},{$x:u})}var J0e=we({stridedSlice_:Z0e});function eve(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=te(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=ne.engine.runKernel(function(a){return a.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}var tve=we({topk_:eve});function nve(t,n,e){var r=te(t,"indices","scatterND","int32"),i=te(n,"updates","scatterND");return Dle(i,r,e),ne.engine.runKernel(function(o){return o.scatterND(r,i,e)},{$indices:r,$updates:i})}var rve=we({scatterND_:nve});function ive(t){de(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ne.engine.runKernel(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}function ove(t){de(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ne.engine.runKernel(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}function ave(t){de(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.zerosLike(),i=na(t,r).as2D(e,n),o=OT(i),a=Math.floor(n/2)+1,s=Hl(o),l=ed(o),u=s.split([a,n-a],s.shape.length-1),c=l.split([a,n-a],l.shape.length-1),d=t.shape.slice();return d[t.shape.length-1]=a,na(u[0],c[0]).reshape(d)}function sve(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),i=u2(r);return Hl(i)}var o=[e,2*(n-1)],a=Hl(t).as2D(e,n),s=ed(t).as2D(e,n),l=a.slice([0,1],[e,n-2]).reverse(1),u=s.slice([0,1],[e,n-2]).reverse(1).mul(ot(-1)),c=a.concat(l,1),d=s.concat(u,1);return r=na(c,d).as2D(o[0],o[1]),i=u2(r),Hl(i)}var OT=we({fft_:ive}),u2=we({ifft_:ove}),n8=we({rfft_:ave}),r8=we({irfft_:sve}),lve=Object.freeze({fft:OT,ifft:u2,rfft:n8,irfft:r8});function uve(t,n,e,r){if(t.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var i=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(e.length!==o)throw new Error("outputShape has incorrect number of elements:, "+e.length+", should be: "+o+".");var a=n.size;if(n.rank!==0&&(n.rank!==1||a!==i))throw new Error("sparseValues has incorrect shape "+n.shape+", should be [] or ["+i+"]");if(n.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function cve(t,n,e,r){r===void 0&&(r=0);var i=te(t,"sparseIndices","sparseToDense","int32"),o=te(n,"sparseValues","sparseToDense"),a=te(r,"defaultValue","sparseToDense",o.dtype);return uve(i,o,e,a),ne.engine.runKernel(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}var dve=we({sparseToDense_:cve});function pve(t,n){var e=te(n,"indices","gatherND","int32"),r=te(t,"x","gatherND");return ne.engine.runKernel(function(i){return i.gatherND(r,e)},{$x:r,$indices:e})}var Mo,hve=we({gatherND_:pve});function fve(t,n,e){e===void 0&&(e=Mo.SUM_BY_NONZERO_WEIGHTS);var r=te(t,"losses","computeWeightedLoss"),i=null;n!=null&&(i=te(n,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===Mo.NONE)return o;if(e===Mo.SUM)return o.sum();if(e===Mo.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(ot(a)):s}if(e===Mo.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(ot(r.size));var l=i.mul(Dp(r.shape)).notEqual(ot(0)).sum().toFloat();return o.sum().div(l)}throw Error("Unknown reduction: "+e)}function mve(t,n,e,r){r===void 0&&(r=Mo.SUM_BY_NONZERO_WEIGHTS);var i=te(t,"labels","absoluteDifference"),o=te(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=te(e,"weights","absoluteDifference")),_r(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return Gu(s,a,r)}function gve(t,n,e,r){r===void 0&&(r=Mo.SUM_BY_NONZERO_WEIGHTS);var i=te(t,"labels","meanSquaredError"),o=te(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=te(e,"weights","meanSquaredError")),_r(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return Gu(s,a,r)}function vve(t,n,e,r,i){i===void 0&&(i=Mo.SUM_BY_NONZERO_WEIGHTS);var o=te(t,"labels","cosineDistance"),a=te(n,"predictions","cosineDistance"),s=null;r!=null&&(s=te(r,"weights","cosineDistance")),_r(o.shape,a.shape,"Error in cosineDistance: ");var l=ot(1).sub(o.mul(a).sum(e,!0));return Gu(l,s,i)}function yve(t,n,e,r){r===void 0&&(r=Mo.SUM_BY_NONZERO_WEIGHTS);var i=te(t,"labels","hingeLoss"),o=te(n,"predictions","hingeLoss"),a=null;e!=null&&(a=te(e,"weights","hingeLoss")),_r(i.shape,o.shape,"Error in hingeLoss: ");var s=ot(1);i=ot(2).mul(i).sub(s);var l=s.sub(i.mul(o)).relu();return Gu(l,a,r)}function bve(t,n,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Mo.SUM_BY_NONZERO_WEIGHTS);var o=te(t,"labels","logLoss"),a=te(n,"predictions","logLoss"),s=null;e!=null&&(s=te(e,"weights","logLoss")),_r(o.shape,a.shape,"Error in logLoss: ");var l=ot(1),u=ot(r),c=o.mul(a.add(u).log()).neg().sub(l.sub(o).mul(l.sub(a).add(u).log()));return Gu(c,s,i)}function _ve(t,n){var e=te(t,"labels","sigmoidCrossEntropyWithLogits"),r=te(n,"logits","sigmoidCrossEntropyWithLogits");_r(e.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),o=r.mul(e),a=r.abs().neg().exp().log1p();return i.sub(o).add(a)}function wve(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Mo.SUM_BY_NONZERO_WEIGHTS);var o=te(t,"multiClassLabels","sigmoidCrossEntropy"),a=te(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=te(e,"weights","sigmoidCrossEntropy")),_r(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=ot(r),u=ot(1),c=ot(.5);o=o.mul(u.sub(l)).add(c.mul(l))}var d=_ve(o,a);return Gu(d,s,i)}function xve(t,n,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Mo.SUM_BY_NONZERO_WEIGHTS);var o=te(t,"labels","huberLoss"),a=te(n,"predictions","huberLoss"),s=null;e!=null&&(s=te(e,"weights","huberLoss")),_r(o.shape,a.shape,"Error in huberLoss: ");var l=ot(r),u=a.sub(o).abs(),c=Y6(u,l),d=u.sub(c),p=ot(.5).mul(c.square()).add(l.mul(d));return Gu(p,s,i)}function Cve(t,n,e){if(e===void 0&&(e=-1),e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+n.rank+" and dim was "+e);return $0(function(r,i,o){var a=i.logSumExp([e],!0),s=i.toFloat().sub(a);return o([r,s]),{value:s.mul(r).neg().sum([e]),gradFunc:function(l,u){var c=u[0],d=u[1],p=Is(l.shape,[e]);return[l.reshape(p).mul(c.toFloat().sub(d.exp())),l.reshape(p).mul(d.exp().sub(c.toFloat()))]}}})(t,n)}function Ive(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Mo.SUM_BY_NONZERO_WEIGHTS);var o=te(t,"onehotLabels","softmaxCrossEntropy"),a=te(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=te(e,"weights","softmaxCrossEntropy")),_r(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var l=ot(r),u=ot(1),c=ot(o.shape[1]);o=o.mul(u.sub(l)).add(l.div(c))}var d=Cve(o,a);return Gu(d,s,i)}(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Mo||(Mo={}));var Sve=we({absoluteDifference_:mve}),Gu=we({computeWeightedLoss_:fve}),Eve=we({cosineDistance_:vve}),Dve=we({hingeLoss_:yve}),Tve=we({huberLoss_:xve}),Ave=we({logLoss_:bve}),kve=we({meanSquaredError_:gve}),Mve=we({sigmoidCrossEntropy_:wve}),Rve=we({softmaxCrossEntropy_:Ive}),Nve=Object.freeze({get Reduction(){return Mo},absoluteDifference:Sve,computeWeightedLoss:Gu,cosineDistance:Eve,hingeLoss:Dve,huberLoss:Tve,logLoss:Ave,meanSquaredError:kve,sigmoidCrossEntropy:Mve,softmaxCrossEntropy:Rve});function Fve(t){var n;if(Array.isArray(t)){n=!1,de(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(l){de(t[l].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[l].shape[0]+" vs. "+e+")"})},i=1;i<t.length;++i)r(i)}else n=!0,t=ET(t,t.shape[0],0).map(function(l){return N6(l,[0])});de(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(l){o.push(ne.engine.tidy(function(){var u=a[l];if(l>0)for(var c=0;c<l;++c){var d=q6(o[c].mulStrict(u)).mul(o[c]);u=u.sub(d)}return u.div(J6(u,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return n?Ia(o,0):o}function Ove(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return jP(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(o,a){return o*a}),r=[],i=[];return Lr(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(o){var a=jP(o,n),s=a[0],l=a[1];r.push(s),i.push(l)}),[Ia(r,0).reshape(t.shape),Ia(i,0).reshape(t.shape)]}function jP(t,n){return n===void 0&&(n=!1),ne.engine.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],i=M6(e),o=t.clone(),a=K0([[1]],[1,1]),s=a.clone(),l=e>=r?r:e,u=function(d){var p,h=o,f=s,m=i;p=ne.engine.tidy(function(){var g=o.slice([d,d],[e-d,1]),y=g.norm(),b=o.slice([d,d],[1,1]),w=b.sign().neg(),x=b.sub(w.mul(y)),I=g.div(x);s=I.shape[0]===1?a.clone():a.concat(I.slice([1,0],[I.shape[0]-1,I.shape[1]]),0);var D=w.matMul(x).div(y).neg(),A=o.slice([d,0],[e-d,r]),E=D.mul(s);o=d===0?A.sub(E.matMul(s.transpose().matMul(A))):o.slice([0,0],[d,r]).concat(A.sub(E.matMul(s.transpose().matMul(A))),0);var R=i.slice([0,d],[e,i.shape[1]-d]);return i=d===0?R.sub(R.matMul(s).matMul(E.transpose())):i.slice([0,0],[e,d]).concat(R.sub(R.matMul(s).matMul(E.transpose())),1),[s,o,i]}),s=p[0],o=p[1],i=p[2],Cle([h,f,m])},c=0;c<l;++c)u(c);return!n&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var Pve=we({gramSchmidt_:Fve}),Lve=we({qr_:Ove}),Bve=Object.freeze({gramSchmidt:Pve,qr:Lve});function Vve(t,n,e){e===void 0&&(e=!1);var r=te(t,"images","resizeBilinear");de(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),de(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],l=ne.engine.runKernel(function(u,c){return c([i]),u.resizeBilinear(i,a,s,e)},{batchImages:i},function(u,c){return{batchImages:function(){return ne.engine.runKernel(function(d){return d.resizeBilinearBackprop(u,c[0],e)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function jve(t,n,e){e===void 0&&(e=!1);var r=te(t,"images","resizeNearestNeighbor");de(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),de(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),de(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],l=ne.engine.runKernel(function(u,c){return c([i]),u.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(u,c){return{batchImages:function(){return ne.engine.runKernel(function(d){return d.resizeNearestNeighborBackprop(u,c[0],e)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function Uve(t,n,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=te(t,"boxes","nonMaxSuppression"),a=te(n,"scores","nonMaxSuppression"),s=i8(o,a,e,r,i);return e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,ne.engine.runKernel(function(l){return l.nonMaxSuppression(o,a,e,r,i)},{$boxes:o})}function Hve(t,n,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ln(this,void 0,void 0,function(){var o,a,s,l,u,c;return Bn(this,function(d){switch(d.label){case 0:return o=te(t,"boxes","nonMaxSuppressionAsync"),a=te(n,"scores","nonMaxSuppressionAsync"),s=i8(o,a,e,r,i),e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,o.data()];case 1:return l=d.sent(),[4,a.data()];case 2:return u=d.sent(),c=_T(l,u,e,r,i),o!==t&&o.dispose(),a!==n&&a.dispose(),[2,c]}})})}function i8(t,n,e,r,i){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY);var o=t.shape[0];return e=Math.min(e,o),de(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),de(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),de(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),de(n.rank===1,function(){return"scores must be a 1D tensor"}),de(n.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+n.shape[0]}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i}}function zve(t,n,e,r,i,o){var a=te(t,"image","cropAndResize","float32"),s=te(n,"boxes","cropAndResize","float32"),l=te(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var u=s.shape[0];return de(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),de(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."}),de(l.rank===1&&l.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."}),de(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),de(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),de(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),ne.engine.runKernel(function(c,d){return c.cropAndResize(a,s,l,r,i,o)},{$image:a,$boxes:s})}var Wve=we({resizeBilinear_:Vve}),qve=we({resizeNearestNeighbor_:jve}),Gve=we({nonMaxSuppression_:Uve}),$ve=Hve,Kve=we({cropAndResize_:zve}),PT=Object.freeze({resizeBilinear:Wve,resizeNearestNeighbor:qve,nonMaxSuppression:Gve,nonMaxSuppressionAsync:$ve,cropAndResize:Kve});function Yve(t,n,e,r,i,o){var a;e===void 0&&(e=!1),r===void 0&&(r=!1),o===void 0&&(o="linear");var s=te(t,"a","fused matMul"),l=te(n,"b","fused matMul");a=Ri(s,l),s=a[0],l=a[1];var u=e?s.shape[s.rank-2]:s.shape[s.rank-1],c=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=e?s.shape[s.rank-1]:s.shape[s.rank-2],p=r?l.shape[l.rank-2]:l.shape[l.rank-1],h=s.shape.slice(0,-2),f=l.shape.slice(0,-2),m=Yt(h),g=Yt(f);de(s.rank>=2&&l.rank>=2&&s.rank===l.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+l.rank+"."}),de(bo(h,f),function(){return"Error in fused matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+s.shape+" and "+l.shape+" must match."}),de(u===c,function(){return"Error in fused matMul: inner shapes ("+u+") and ("+c+") of Tensors with shapes "+s.shape+" and "+l.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var y,b=s.shape.slice(0,-2).concat([d,p]),w=e?s.as3D(m,u,d):s.as3D(m,d,u),x=r?l.as3D(g,p,c):l.as3D(g,c,p);i!=null&&Jn(b,(y=Ri(y=te(i,"bias","fused matMul"),s)[0]).shape);var I={$a:w,$b:x};return i!=null&&(I.$bias=y),ne.engine.runKernel(function(D,A){var E=D.fusedBatchMatMul(w,x,e,r,y,o);return A([w,x,E]),E},I,function(D,A){var E,R=A[0],N=A[1],T=A[2];if(o==null||o==="linear")E=D;else{if(o!=="relu")throw new Error("Gradient for activation "+o+" has not been implemented yet.");E=D.mul(T.step())}var M={};return i!=null&&(M={$bias:function(){var H=E,V=zi(y.shape,E.shape);return V.length>0&&(H=H.sum(V)),H.reshape(y.shape)}}),Object.assign(e||r?!e&&r?{$a:function(){return E.matMul(N,!1,!1)},$b:function(){return E.matMul(R,!0,!1)}}:e&&!r?{$a:function(){return N.matMul(E,!1,!0)},$b:function(){return R.matMul(E,!1,!1)}}:{$a:function(){return N.matMul(E,!0,!0)},$b:function(){return E.matMul(R,!0,!0)}}:{$a:function(){return E.matMul(N,!1,!0)},$b:function(){return R.matMul(E,!0,!1)}},M)}).reshape(b)}var Xve=we({matMul_:Yve}),Qve=Object.freeze({matMul:Xve}),Zve=Object.freeze({image:PT,linalg:Bve,losses:Nve,spectral:lve,fused:Qve,op:we,batchNormalization2d:Qfe,batchNormalization3d:Zfe,batchNormalization4d:Jfe,batchNormalization:eme,batchNorm:AT,batchNorm2d:tme,batchNorm3d:nme,batchNorm4d:rme,complex:na,real:Hl,imag:ed,concat:oo,concat1d:Ope,concat2d:Ppe,concat3d:Lpe,concat4d:Bpe,split:ET,conv1d:_me,conv2d:es,conv3d:wme,conv2dDerFilter:U6,depthwiseConv2d:h2,separableConv2d:MT,conv2dTranspose:xme,matMul:ov,dot:Eme,outerProduct:Dme,reverse:av,reverse1d:Nme,reverse2d:Fme,reverse3d:Ome,reverse4d:Pme,maxPool:Yl,avgPool:Wu,pool:Wme,slice:qu,slice1d:Xme,slice2d:Qme,slice3d:RT,slice4d:Zme,abs:vfe,acos:yfe,acosh:bfe,asin:_fe,asinh:wfe,atan:xfe,atanh:Cfe,ceil:Ife,clipByValue:ev,cos:Sfe,cosh:Efe,erf:Dfe,exp:d2,expm1:Tfe,floor:Afe,log:kfe,log1p:Mfe,logSigmoid:Rfe,neg:tv,reciprocal:Nfe,round:Ffe,rsqrt:O6,sigmoid:TT,sign:Ofe,isNaN:Pfe,isInf:Lfe,isFinite:Bfe,sin:Vfe,sinh:jfe,softplus:Ufe,sqrt:Hfe,square:zfe,step:Wfe,tan:qfe,tanh:Gfe,all:cge,any:dge,argMax:pge,argMin:hge,logSumExp:fge,max:Np,mean:mge,min:gge,moments:vge,sum:q6,prod:yge,equal:G6,equalStrict:Mge,greater:Rge,greaterEqual:$6,greaterEqualStrict:Nge,greaterStrict:Fge,less:Oge,lessEqual:Pge,lessEqualStrict:Lge,lessStrict:Bge,notEqual:Vge,notEqualStrict:jge,add:kn,addN:l0e,addStrict:u0e,atan2:c0e,div:Xl,divStrict:d0e,floorDiv:K6,maximum:NT,maximumStrict:p0e,minimum:Y6,minimumStrict:h0e,mod:f0e,modStrict:m0e,mul:Sa,mulStrict:g0e,pow:X6,powStrict:v0e,squaredDifference:y0e,squaredDifferenceStrict:b0e,sub:No,subStrict:_0e,elu:O0e,leakyRelu:P0e,prelu:L0e,relu:Ur,selu:B0e,logicalAnd:FT,logicalNot:D0e,logicalOr:Q6,logicalXor:T0e,where:q0,whereAsync:A0e,buffer:Kn,print:vhe,batchToSpaceND:k6,cast:yhe,clone:bhe,cumsum:_he,depthToSpace:whe,expandDims:ko,eye:M6,multinomial:xhe,oneHot:iT,pad:J0,pad1d:Che,pad2d:Ihe,pad3d:She,pad4d:Ehe,rand:Dhe,randomNormal:The,randomUniform:Ahe,reshape:ra,spaceToBatchND:R6,squeeze:N6,stack:Ia,tile:Ip,truncatedNormal:khe,unstack:Lr,setdiff1dAsync:Mhe,fill:Uf,linspace:Wle,ones:Dp,range:CL,scalar:ot,tensor:Qr,tensor1d:Ro,tensor2d:K0,tensor3d:c2,tensor4d:xa,tensor5d:jle,tensor6d:Ule,zeros:ci,onesLike:IL,zerosLike:lr,transpose:Ss,softmax:Ja,logSoftmax:Ple,localResponseNormalization:U0e,norm:J6,gather:e8,unsortedSegmentSum:t8,basicLSTMCell:K0e,multiRNNCell:Y0e,movingAverage:Q0e,stridedSlice:J0e,topk:tve,scatterND:rve,fft:OT,ifft:u2,rfft:n8,irfft:r8,sparseToDense:dve,gatherND:hve});function Jve(t,n,e){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var e1e=function(){function t(){this.blockSize=48,this.firstUse=!0,ne.get("IS_BROWSER")&&(this.fromPixels2DContext=document.createElement("canvas").getContext("2d"))}return t.prototype.setDataMover=function(n){this.data=new SL(n)},t.prototype.register=function(n,e,r){if(this.firstUse&&(this.firstUse=!1,ne.get("IS_NODE")&&JD(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`)),this.data.has(n))throw new Error("Data buffer is already registered");this.data.set(n,{dtype:r})},t.prototype.write=function(n,e){if(e==null)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(n).values=e},t.prototype.fromPixels=function(n,e){if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r,i;if(ne.get("IS_NODE")&&n.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(n.getContext!=null)r=n.getContext("2d").getImageData(0,0,n.width,n.height).data;else if(n instanceof ImageData)r=n.data;else{if(!(n instanceof HTMLImageElement||n instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+n.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=n.width,this.fromPixels2DContext.canvas.height=n.height,this.fromPixels2DContext.drawImage(n,0,0,n.width,n.height),r=this.fromPixels2DContext.getImageData(0,0,n.width,n.height).data}if(e===4)i=new Int32Array(r);else{var o=n.width*n.height;i=new Int32Array(o*e);for(var a=0;a<o;a++)for(var s=0;s<e;++s)i[a*e+s]=r[4*a+s]}return c2(i,[n.height,n.width,e],"int32")},t.prototype.read=function(n){return Ln(this,void 0,void 0,function(){return Bn(this,function(e){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var e=this.data.get(n),r=e.dtype,i=e.complexTensors;return r==="complex64"?DL(i.real.dataSync(),i.imag.dataSync()):this.data.get(n).values},t.prototype.disposeData=function(n){if(this.data.has(n)){var e=this.data.get(n).complexTensors;e!=null&&(e.real.dispose(),e.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return Ln(this,void 0,void 0,function(){var e;return Bn(this,function(r){return e=z0(),n(),[2,{kernelMs:z0()-e}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,e){var r=dt.make(n.shape,{},"complex64");return this.data.get(r.dataId).complexTensors={real:ne.engine.keep(n.clone()),imag:ne.engine.keep(e.clone())},r},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(r){r!=null&&de(r.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})},t.prototype.slice=function(n,e,r){if(this.assertNotComplex(n,"slice"),wL(n.shape,e,r)){var i=xL(e,n.strides),o=Yt(r);return Qr(n.dataSync().subarray(i,i+o),r,n.dtype)}for(var a=Kn(r,n.dtype),s=n.bufferSync(),l=0;l<a.size;++l){var u=a.indexToLoc(l).map(function(c,d){return c+e[d]});a.values[l]=s.get.apply(s,u)}return a.toTensor()},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,l,u){this.assertNotComplex(n,"stridedSlice");var c=bT(n.shape,e,r,i,o,a,s,l,u),d=c[0],p=c[1],h=c[2],f=p.filter(function(I,D){return h.indexOf(D)===-1});if(f.some(function(I){return I===0}))return Qr([],f);for(var m=Kn(p,n.dtype),g=n.bufferSync(),y=0;y<m.size;y++){for(var b=m.indexToLoc(y),w=new Array(b.length),x=0;x<w.length;x++)w[x]=b[x]*i[x]+d[x];m.set.apply(m,[g.get.apply(g,w)].concat(b))}return m.toTensor().reshape(f)},t.prototype.unstack=function(n,e){for(var r=n.shape[e],i=new Array(n.rank-1),o=0,a=0;a<n.rank;a++)a!==e&&(i[o++]=n.shape[a]);var s=new Array(n.rank).fill(0),l=n.shape.slice();l[e]=1;var u=new Array(r);for(a=0;a<u.length;a++)s[e]=a,u[a]=this.slice(n,s,l).reshape(i);return u},t.prototype.reverse=function(n,e){this.assertNotComplex(n,"reverse");for(var r=Kn(n.shape,n.dtype),i=n.bufferSync(),o=function(s){var l=r.indexToLoc(s),u=l.slice();e.forEach(function(c){return u[c]=n.shape[c]-1-u[c]}),r.set.apply(r,[i.get.apply(i,u)].concat(l))},a=0;a<r.size;a++)o(a);return r.toTensor()},t.prototype.concat=function(n,e){this.assertNotComplex(n,"concat");var r=n.map(function(u){var c=Yt(u.shape.slice(e));return u.as2D(-1,c)}),i=Pf(r.map(function(u){return u.shape}),1),o=Kn(i,n[0].dtype).values;if(r[0].shape[0]===1){var a=0;r.forEach(function(u){o.set(u.dataSync(),a),a+=u.size})}else{var s=0;r.forEach(function(u){for(var c=u.dataSync(),d=0,p=0;p<u.shape[0];++p)for(var h=p*i[1]+s,f=0;f<u.shape[1];++f)o[h+f]=c[d++];s+=u.shape[1]})}var l=Pf(n.map(function(u){return u.shape}),e);return Qr(o,l,n[0].dtype)},t.prototype.neg=function(n){return this.assertNotComplex(n,"neg"),this.multiply(ot(-1),n)},t.prototype.add=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(r,i,o,a){return{real:r+o,imag:i+a}}):this.broadcastedBinaryOp(n,e,ro(n.dtype,e.dtype),function(r,i){return r+i})},t.prototype.addN=function(n){this.assertNotComplex(n,"addN");for(var e=n.map(function(l){return l.dataSync()}),r=Kn(n[0].shape,n[0].dtype),i=r.values,o=0;o<n.length;o++)for(var a=e[o],s=0;s<i.length;s++)i[s]+=a[s];return r.toTensor()},t.prototype.subtract=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(r,i,o,a){return{real:r-o,imag:i-a}}):this.broadcastedBinaryOp(n,e,ro(n.dtype,e.dtype),function(r,i){return r-i})},t.prototype.pow=function(n,e){return this.assertNotComplex([n,e],"pow"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){return Math.pow(r,i)})},t.prototype.batchMatMul=function(n,e,r,i){this.assertNotComplex([n,e],"matMul");for(var o=r?n.shape[1]:n.shape[2],a=r?n.shape[2]:n.shape[1],s=i?e.shape[1]:e.shape[2],l=n.shape[0],u=n.dataSync(),c=e.dataSync(),d=r?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],p=d[0],h=d[1],f=d[2],m=i?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],g=m[0],y=m[1],b=m[2],w=a*s,x=Kn([l,a,s],n.dtype),I=x.values,D=this.blockSize,A=0;A<l;A++)for(var E=0;E<a;E+=D)for(var R=0;R<s;R+=D)for(var N=0;N<o;N+=D)for(var T=Math.min(E+D,a),M=Math.min(R+D,s),H=Math.min(N+D,o),V=E;V<T;V++)for(var X=R;X<M;X++){for(var Y=0,Q=N;Q<H;Q++)Y+=u[A*p+V*h+Q*f]*c[Q*g+X*y+A*b];I[A*w+(V*s+X)]+=Y}return x.toTensor()},t.prototype.fusedBatchMatMul=function(n,e,r,i,o,a){var s=this.batchMatMul(n,e,r,i);return o&&(s=this.add(s,o)),a&&(s=Jve(this,a,s)),s},t.prototype.multiply=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(r,i,o,a){return{real:r*o-i*a,imag:r*a+i*o}}):this.broadcastedBinaryOp(n,e,ro(n.dtype,e.dtype),function(r,i){return r*i})},t.prototype.realDivide=function(n,e){return this.assertNotComplex([n,e],"realDivide"),this.broadcastedBinaryOp(n,e,"float32",function(r,i){return r/i})},t.prototype.floorDiv=function(n,e){return this.assertNotComplex([n,e],"floorDiv"),this.broadcastedBinaryOp(n,e,"int32",function(r,i){return Math.floor(r/i)})},t.prototype.sum=function(n,e){this.assertNotComplex(n,"sum"),Xa("sum",e,n.rank);for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,ro(n.dtype,"int32")),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=0,h=0;h<s;++h)p+=u[d+h];l[c]=p}return a},t.prototype.prod=function(n,e){this.assertNotComplex(n,"sum");for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,ro(n.dtype,"int32")),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=1,h=0;h<s;++h)p*=u[d+h];l[c]=p}return a},t.prototype.unsortedSegmentSum=function(n,e,r){this.assertNotComplex(n,"unsortedSegmentSum");for(var i=[],o=n.rank-e.rank,a=0;a<o;++a)e=e.expandDims(a+1);for(a=0;a<r;++a){var s=ot(a,"int32"),l=G6(s,e).asType("float32").mul(n).sum(0);i.push(l)}return Ia(i)},t.prototype.argMin=function(n,e){this.assertNotComplex(n,"argMin");var r=[e];Xa("argMin",r,n.rank);for(var i=Ao(n.shape,r),o=i[0],a=i[1],s=ci(o,"int32"),l=Yt(a),u=s.dataSync(),c=n.dataSync(),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0,m=0;m<l;++m){var g=c[p+m];g<h&&(h=g,f=m)}u[d]=f}return s},t.prototype.argMax=function(n,e){this.assertNotComplex(n,"argMax");var r=[e];Xa("argMax",r,n.rank);for(var i=Ao(n.shape,r),o=i[0],a=i[1],s=ci(o,"int32"),l=Yt(a),u=s.dataSync(),c=n.dataSync(),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0,m=0;m<l;++m){var g=c[p+m];g>h&&(h=g,f=m)}u[d]=f}return s},t.prototype.cumsum=function(n,e,r,i){if(this.assertNotComplex(n,"cumsum"),e!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+e);for(var o=ro(n.dtype,"int32"),a=ci(n.shape,o),s=a.dataSync(),l=n.dataSync(),u=n.shape[n.rank-1],c=i?function(m,g){return m+u-g-1}:function(m,g){return m+g},d=0;d<l.length;d+=u)for(var p=0;p<u;p++){var h=c(d,p);if(p===0)s[h]=r?0:l[h];else{var f=c(d,p-1);s[h]=r?l[f]+s[f]:l[h]+s[f]}}return a},t.prototype.equal=function(n,e){return this.assertNotComplex([n,e],"equal"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r===i?1:0})},t.prototype.notEqual=function(n,e){return this.assertNotComplex([n,e],"notEqual"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r!==i?1:0})},t.prototype.less=function(n,e){return this.assertNotComplex([n,e],"less"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r<i?1:0})},t.prototype.lessEqual=function(n,e){return this.assertNotComplex([n,e],"lessEqual"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r<=i?1:0})},t.prototype.greater=function(n,e){return this.assertNotComplex([n,e],"greater"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r>i?1:0})},t.prototype.greaterEqual=function(n,e){return this.assertNotComplex([n,e],"greaterEqual"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r>=i?1:0})},t.prototype.logicalNot=function(n){this.assertNotComplex(n,"logicalNot");for(var e=n.dataSync(),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e[i]?0:1;return dt.make(n.shape,{values:r},"bool")},t.prototype.logicalAnd=function(n,e){return this.assertNotComplex([n,e],"logicalAnd"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r&&i})},t.prototype.logicalOr=function(n,e){return this.assertNotComplex([n,e],"logicalOr"),this.broadcastedBinaryOp(n,e,"bool",function(r,i){return r||i})},t.prototype.select=function(n,e,r){this.assertNotComplex([n,e,r],"select");for(var i=n.dataSync(),o=e.dataSync(),a=r.dataSync(),s=ci(e.shape,ro(e.dtype,r.dtype)),l=s.dataSync(),u=0,c=n.rank===0||n.rank>1||e.rank===1?1:e.shape[1],d=0;d<i.length;d++)for(var p=0;p<c;p++)i[d]===1?l[u++]=o[d]:l[u++]=a[d];return s},t.prototype.where=function(n){this.assertNotComplex([n],"where");var e=n.dataSync();return DT(n.shape,e)},t.prototype.topk=function(n,e,r){return this.assertNotComplex(n,"topk"),AL(n.dataSync(),n.shape,n.dtype,e,r)},t.prototype.min=function(n,e){this.assertNotComplex(n,"min"),Xa("min",e,n.rank);for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,n.dtype),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=u[d],h=0;h<s;++h){var f=u[d+h];f<p&&(p=f)}l[c]=p}return a},t.prototype.minimum=function(n,e){return this.assertNotComplex([n,e],"minimum"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){return Math.min(r,i)})},t.prototype.mod=function(n,e){return this.assertNotComplex([n,e],"mod"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){var o=r%i;return r<0&&i<0||r>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(n,e){this.assertNotComplex(n,"max"),Xa("max",e,n.rank);for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,n.dtype),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=u[d],h=0;h<s;++h){var f=u[d+h];f>p&&(p=f)}l[c]=p}return a},t.prototype.maximum=function(n,e){return this.assertNotComplex([n,e],"maximum"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){return Math.max(r,i)})},t.prototype.all=function(n,e){this.assertNotComplex(n,"all"),Xa("all",e,n.rank);for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,n.dtype),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=u[d],h=0;h<s;++h){var f=u[d+h];p=p&&f}l[c]=p}return a},t.prototype.any=function(n,e){this.assertNotComplex(n,"any"),Xa("any",e,n.rank);for(var r=Ao(n.shape,e),i=r[0],o=r[1],a=ci(i,n.dtype),s=Yt(o),l=a.dataSync(),u=n.dataSync(),c=0;c<l.length;++c){for(var d=c*s,p=u[d],h=0;h<s;++h){var f=u[d+h];p=p||f}l[c]=p}return a},t.prototype.squaredDifference=function(n,e){return this.assertNotComplex([n,e],"squaredDifference"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){var o=r-i;return o*o})},t.prototype.ceil=function(n){this.assertNotComplex(n,"ceil");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)r[i]=Math.ceil(e[i]);return dt.make(n.shape,{values:r})},t.prototype.floor=function(n){this.assertNotComplex(n,"floor");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)r[i]=Math.floor(e[i]);return dt.make(n.shape,{values:r})},t.prototype.sign=function(n){this.assertNotComplex(n,"x");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)e[i]<0?r[i]=-1:e[i]>0?r[i]=1:r[i]=0;return dt.make(n.shape,{values:r})},t.prototype.isNaN=function(n){this.assertNotComplex(n,"x");for(var e=n.dataSync(),r=new Uint8Array(e.length),i=0;i<e.length;++i)Number.isNaN(e[i])&&(r[i]=1);return dt.make(n.shape,{values:r},"bool")},t.prototype.isInf=function(n){this.assertNotComplex(n,"x");for(var e=n.dataSync(),r=new Uint8Array(e.length),i=0;i<e.length;++i)Math.abs(e[i])===1/0&&(r[i]=1);return dt.make(n.shape,{values:r},"bool")},t.prototype.isFinite=function(n){this.assertNotComplex(n,"x");for(var e=n.dataSync(),r=new Uint8Array(e.length),i=0;i<e.length;++i)Number.isFinite(e[i])&&(r[i]=1);return dt.make(n.shape,{values:r},"bool")},t.prototype.round=function(n){this.assertNotComplex(n,"round");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=Math.floor(e[i]);e[i]-o<.5?r[i]=Math.floor(e[i]):e[i]-o>.5?r[i]=Math.ceil(e[i]):r[i]=o%2==0?o:o+1}return dt.make(n.shape,{values:r})},t.prototype.exp=function(n){this.assertNotComplex(n,"exp");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)r[i]=Math.exp(e[i]);return dt.make(n.shape,{values:r})},t.prototype.expm1=function(n){this.assertNotComplex(n,"expm1");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)r[i]=Math.expm1(e[i]);return dt.make(n.shape,{values:r})},t.prototype.log=function(n){this.assertNotComplex(n,"log");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=e[i];r[i]=Math.log(o)}return dt.make(n.shape,{values:r})},t.prototype.log1p=function(n){this.assertNotComplex(n,"log1p");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=e[i];r[i]=Math.log1p(o)}return dt.make(n.shape,{values:r})},t.prototype.sqrt=function(n){this.assertNotComplex(n,"sqrt");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=e[i];r[i]=Math.sqrt(o)}return dt.make(n.shape,{values:r})},t.prototype.rsqrt=function(n){this.assertNotComplex(n,"rsqrt");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=e[i];r[i]=1/Math.sqrt(o)}return dt.make(n.shape,{values:r})},t.prototype.square=function(n){this.assertNotComplex(n,"square");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i){var o=e[i];r[i]=o*o}return dt.make(n.shape,{values:r})},t.prototype.reciprocal=function(n){this.assertNotComplex(n,"reciprocal");for(var e=n.dataSync(),r=new Float32Array(e.length),i=0;i<e.length;++i)r[i]=1/e[i];return dt.make(n.shape,{values:r})},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){this.assertNotComplex(n,"relu");for(var e=ci(n.shape,n.dtype),r=e.dataSync(),i=n.dataSync(),o=0;o<i.length;++o)r[o]=Math.max(0,i[o]);return e},t.prototype.prelu=function(n,e){return this.assertNotComplex([n,e],"prelu"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){return r<0?i*r:r})},t.prototype.elu=function(n){this.assertNotComplex(n,"elu");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i){var o=r[i];e[i]=o>=0?o:Math.exp(o)-1}return dt.make(n.shape,{values:e})},t.prototype.eluDer=function(n,e){this.assertNotComplex([n,e],"eluDer");for(var r=new Float32Array(e.size),i=e.dataSync(),o=n.dataSync(),a=0;a<i.length;++a){var s=i[a];r[a]=s>=1?o[a]:o[a]*(s+1)}return dt.make(e.shape,{values:r})},t.prototype.selu=function(n){this.assertNotComplex(n,"selu");for(var e=IT,r=ST,i=new Float32Array(n.size),o=n.dataSync(),a=0;a<o.length;++a){var s=o[a];i[a]=s>=0?r*s:e*(Math.exp(s)-1)}return dt.make(n.shape,{values:i})},t.prototype.clip=function(n,e,r){this.assertNotComplex(n,"clip");for(var i=new Float32Array(n.size),o=n.dataSync(),a=0;a<o.length;++a){var s=o[a];i[a]=s>r?r:s<e?e:s}return dt.make(n.shape,{values:i})},t.prototype.abs=function(n){for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.abs(r[i]);return dt.make(n.shape,{values:e})},t.prototype.complexAbs=function(n){for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<n.size;++i){var o=r[2*i],a=r[2*i+1];e[i]=Math.hypot(o,a)}return dt.make(n.shape,{values:e})},t.prototype.int=function(n){this.assertNotComplex(n,"int");for(var e=new Int32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=r[i];return dt.make(n.shape,{values:e},"int32")},t.prototype.sigmoid=function(n){this.assertNotComplex(n,"sigmoid");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=1/(1+Math.exp(-r[i]));return dt.make(n.shape,{values:e})},t.prototype.softplus=function(n){this.assertNotComplex(n,"softplus");for(var e=Math.log(11920928955078125e-23)+2,r=new Float32Array(n.size),i=n.dataSync(),o=0;o<i.length;++o){var a=i[o]>-e,s=i[o]<e,l=Math.exp(i[o]),u=void 0;u=s?l:a?i[o]:Math.log(1+l),r[o]=u}return dt.make(n.shape,{values:r})},t.prototype.sin=function(n){this.assertNotComplex(n,"sin");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.sin(r[i]);return dt.make(n.shape,{values:e})},t.prototype.cos=function(n){this.assertNotComplex(n,"cos");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.cos(r[i]);return dt.make(n.shape,{values:e})},t.prototype.tan=function(n){this.assertNotComplex(n,"tan");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.tan(r[i]);return dt.make(n.shape,{values:e})},t.prototype.asin=function(n){this.assertNotComplex(n,"asin");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.asin(r[i]);return dt.make(n.shape,{values:e})},t.prototype.acos=function(n){this.assertNotComplex(n,"acos");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.acos(r[i]);return dt.make(n.shape,{values:e})},t.prototype.atan=function(n){this.assertNotComplex(n,"atan");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.atan(r[i]);return dt.make(n.shape,{values:e})},t.prototype.atan2=function(n,e){return this.assertNotComplex([n,e],"atan2"),this.broadcastedBinaryOp(n,e,n.dtype,function(r,i){return Math.atan2(r,i)})},t.prototype.sinh=function(n){this.assertNotComplex(n,"sinh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.sinh(r[i]);return dt.make(n.shape,{values:e})},t.prototype.cosh=function(n){this.assertNotComplex(n,"cosh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.cosh(r[i]);return dt.make(n.shape,{values:e})},t.prototype.tanh=function(n){this.assertNotComplex(n,"tanh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=QP(r[i]);return dt.make(n.shape,{values:e})},t.prototype.asinh=function(n){this.assertNotComplex(n,"asinh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.asinh(r[i]);return dt.make(n.shape,{values:e})},t.prototype.acosh=function(n){this.assertNotComplex(n,"acosh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.acosh(r[i]);return dt.make(n.shape,{values:e})},t.prototype.atanh=function(n){this.assertNotComplex(n,"atanh");for(var e=new Float32Array(n.size),r=n.dataSync(),i=0;i<r.length;++i)e[i]=Math.atanh(r[i]);return dt.make(n.shape,{values:e})},t.prototype.erf=function(n){this.assertNotComplex(n,"erf");for(var e=new Float32Array(n.size),r=n.dataSync(),i=_6,o=w6,a=x6,s=C6,l=I6,u=S6,c=0;c<r.length;++c){var d=r[c],p=1/(1+i*d);e[c]=1-((((u*p+l)*p+s)*p+a)*p+o)*p*Math.exp(-d*d)}return dt.make(n.shape,{values:e})},t.prototype.step=function(n,e){e===void 0&&(e=0),this.assertNotComplex(n,"step");for(var r=new Float32Array(n.size),i=n.dataSync(),o=0;o<i.length;++o){var a=i[o];isNaN(a)?r[o]=NaN:r[o]=a>0?1:e}return dt.make(n.shape,{values:r})},t.prototype.conv2d=function(n,e,r){this.assertNotComplex([n,e],"conv2d");for(var i=r.filterHeight,o=r.filterWidth,a=r.dilationHeight,s=r.dilationWidth,l=r.padInfo.left,u=r.padInfo.top,c=Kn(r.outShape,n.dtype),d=n.dataSync(),p=e.dataSync(),h=c.values,f=0;f<r.batchSize;++f)for(var m=f*n.strides[0],g=f*c.strides[0],y=0;y<r.outHeight;++y)for(var b=g+y*c.strides[1],w=y*r.strideHeight-l,x=0;x<i;x++){var I=w+x*a;if(!(I<0||I>=r.inHeight))for(var D=x*e.strides[0],A=m+I*n.strides[1],E=0;E<r.outWidth;++E)for(var R=b+E*r.outChannels,N=E*r.strideWidth-u,T=0;T<o;T++){var M=N+T*s;if(!(M<0||M>=r.inWidth))for(var H=D+T*e.strides[1],V=A+M*r.inChannels,X=H,Y=0;Y<r.inChannels;++Y){for(var Q=d[V+Y],G=0;G<r.outChannels;++G)h[R+G]+=Q*p[X+G];X+=r.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(n,e,r){for(var i=r.filterDepth,o=r.filterHeight,a=r.filterWidth,s=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,c=r.padInfo.front,d=r.padInfo.left,p=r.padInfo.top,h=Kn(r.outShape,n.dtype),f=n.dataSync(),m=e.dataSync(),g=h.values,y=0;y<r.batchSize;++y)for(var b=y*n.strides[0],w=y*h.strides[0],x=0;x<r.outDepth;++x)for(var I=w+x*h.strides[1],D=x*r.strideDepth-c,A=0;A<i;A++){var E=D+A*s;if(!(E<0||E>=r.inDepth))for(var R=A*e.strides[0],N=b+E*n.strides[1],T=0;T<r.outHeight;++T)for(var M=I+T*h.strides[2],H=T*r.strideHeight-p,V=0;V<o;V++){var X=H+V*l;if(!(X<0||X>=r.inHeight))for(var Y=R+V*e.strides[1],Q=N+X*n.strides[2],G=0;G<r.outWidth;++G)for(var re=M+G*r.outChannels,ue=G*r.strideWidth-d,Te=0;Te<a;Te++){var F=ue+Te*u;if(!(F<0||F>=r.inWidth))for(var q=Y+Te*e.strides[2],Z=Q+F*r.inChannels,ae=q,pe=0;pe<r.inChannels;++pe){for(var fe=f[Z+pe],me=0;me<r.outChannels;++me)g[re+me]+=fe*m[ae+me];ae+=r.outChannels}}}}return h.toTensor()},t.prototype.conv2dDerInput=function(n,e,r){this.assertNotComplex([n,e],"conv2dDerInput");for(var i=Kn(r.inShape,"float32"),o=i.values,a=i.strides,s=a[0],l=a[1],u=a[2],c=n.dataSync(),d=n.strides,p=d[0],h=d[1],f=d[2],m=e.dataSync(),g=e.strides,y=g[0],b=g[1],w=g[2],x=r.batchSize,I=r.filterHeight,D=r.filterWidth,A=r.inChannels,E=r.inHeight,R=r.inWidth,N=r.outChannels,T=r.outHeight,M=r.outWidth,H=r.strideHeight,V=r.strideWidth,X=I-1-r.padInfo.top,Y=D-1-r.padInfo.left,Q=0;Q<x;++Q)for(var G=0;G<A;++G)for(var re=0;re<E;++re)for(var ue=re-X,Te=Math.max(0,Math.ceil(ue/H)),F=Math.min(T,(I+ue)/H),q=0;q<R;++q){for(var Z=q-Y,ae=Math.max(0,Math.ceil(Z/V)),pe=Math.min(M,(D+Z)/V),fe=0,me=Te;me<F;++me)for(var xe=me*H-ue,je=ae;je<pe;++je)for(var Pe=p*Q+h*me+f*je,Ge=y*(I-1-xe)+b*(D-1-(je*V-Z))+w*G,qe=0;qe<N;++qe)fe+=c[Pe+qe]*m[Ge+qe];o[s*Q+l*re+u*q+G]=fe}return i.toTensor()},t.prototype.conv3dDerInput=function(n,e,r){for(var i=Kn(r.inShape,"float32"),o=i.values,a=i.strides,s=a[0],l=a[1],u=a[2],c=a[3],d=n.dataSync(),p=n.strides,h=p[0],f=p[1],m=p[2],g=p[3],y=e.dataSync(),b=e.strides,w=b[0],x=b[1],I=b[2],D=b[3],A=r.batchSize,E=r.filterDepth,R=r.filterHeight,N=r.filterWidth,T=r.inChannels,M=r.inDepth,H=r.inHeight,V=r.inWidth,X=r.outChannels,Y=r.outDepth,Q=r.outHeight,G=r.outWidth,re=r.strideDepth,ue=r.strideHeight,Te=r.strideWidth,F=E-1-r.padInfo.front,q=R-1-r.padInfo.top,Z=N-1-r.padInfo.left,ae=0;ae<A;++ae)for(var pe=0;pe<T;++pe)for(var fe=0;fe<M;++fe)for(var me=fe-F,xe=Math.max(0,Math.ceil(me/re)),je=Math.min(Y,(E+me)/re),Pe=0;Pe<H;++Pe)for(var Ge=Pe-q,qe=Math.max(0,Math.ceil(Ge/ue)),ht=Math.min(Q,(R+Ge)/ue),ke=0;ke<V;++ke){for(var se=ke-Z,zt=Math.max(0,Math.ceil(se/Te)),gt=Math.min(G,(N+se)/Te),Xe=0,at=xe;at<je;++at)for(var ut=at*re-me,lt=qe;lt<ht;++lt)for(var Tt=lt*ue-Ge,qt=zt;qt<gt;++qt)for(var Xt=h*ae+f*at+m*lt+g*qt,vn=w*(E-1-ut)+x*(R-1-Tt)+I*(N-1-(qt*Te-se))+D*pe,hn=0;hn<X;++hn)Xe+=d[Xt+hn]*y[vn+hn];o[s*ae+l*fe+u*Pe+c*ke+pe]=Xe}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,e,r){this.assertNotComplex([n,e],"conv2dDerFilter");for(var i=r.strideHeight,o=r.strideWidth,a=r.filterHeight,s=r.filterWidth,l=Kn(r.filterShape,"float32"),u=r.padInfo.left,c=r.padInfo.top,d=n.bufferSync(),p=e.bufferSync(),h=0;h<a;++h)for(var f=Math.max(0,Math.ceil((c-h)/i)),m=Math.min(r.outHeight,(r.inHeight+c-h)/i),g=0;g<s;++g)for(var y=Math.max(0,Math.ceil((u-g)/o)),b=Math.min(r.outWidth,(r.inWidth+u-g)/o),w=0;w<r.inChannels;++w)for(var x=0;x<r.outChannels;++x){for(var I=0,D=0;D<r.batchSize;++D)for(var A=f;A<m;++A)for(var E=h+A*i-c,R=y;R<b;++R){var N=g+R*o-u;I+=d.get(D,E,N,w)*p.get(D,A,R,x)}l.set(I,h,g,w,x)}return l.toTensor()},t.prototype.conv3dDerFilter=function(n,e,r){for(var i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.filterDepth,l=r.filterHeight,u=r.filterWidth,c=Kn(r.filterShape,"float32"),d=c.values,p=c.strides,h=p[0],f=p[1],m=p[2],g=p[3],y=e.dataSync(),b=e.strides,w=b[0],x=b[1],I=b[2],D=b[3],A=n.dataSync(),E=n.strides,R=E[0],N=E[1],T=E[2],M=E[3],H=r.padInfo.front,V=r.padInfo.left,X=r.padInfo.top,Y=0;Y<s;++Y)for(var Q=Math.max(0,Math.ceil((H-Y)/i)),G=Math.min(r.outDepth,(r.inDepth+H-Y)/i),re=Y*h,ue=0;ue<l;++ue)for(var Te=Math.max(0,Math.ceil((X-ue)/o)),F=Math.min(r.outHeight,(r.inHeight+X-ue)/o),q=ue*f+re,Z=0;Z<u;++Z)for(var ae=Math.max(0,Math.ceil((V-Z)/a)),pe=Math.min(r.outWidth,(r.inWidth+V-Z)/a),fe=Z*m+q,me=0;me<r.inChannels;++me)for(var xe=me*g+fe,je=0;je<r.outChannels;++je){for(var Pe=0,Ge=0;Ge<r.batchSize;++Ge)for(var qe=Ge*R,ht=Ge*w,ke=Q;ke<G;++ke)for(var se=(Y+ke*i-H)*N+qe,zt=ke*x+ht,gt=Te;gt<F;++gt)for(var Xe=(ue+gt*o-X)*T+se,at=gt*I+zt,ut=ae;ut<pe;++ut){var lt=ut*D+at;Pe+=A[(Z+ut*a-V)*M+Xe+me]*y[lt+je]}d[xe+je]=Pe}return c.toTensor()},t.prototype.depthwiseConv2D=function(n,e,r){this.assertNotComplex([n,e],"depthwiseConv2D");for(var i=r.filterHeight,o=r.filterWidth,a=r.dilationHeight,s=r.dilationWidth,l=r.padInfo.left,u=r.padInfo.top,c=r.outChannels/r.inChannels,d=Kn(r.outShape,n.dtype),p=n.dataSync(),h=e.dataSync(),f=d.values,m=0;m<r.batchSize;++m)for(var g=m*n.strides[0],y=m*d.strides[0],b=0;b<r.outHeight;++b)for(var w=y+b*d.strides[1],x=b*r.strideHeight-l,I=0;I<i;++I){var D=x+I*a;if(!(D<0||D>=r.inHeight))for(var A=I*e.strides[0],E=g+D*n.strides[1],R=0;R<r.outWidth;++R)for(var N=w+R*d.strides[2],T=R*r.strideWidth-u,M=0;M<o;++M){var H=T+M*s;if(!(H<0||H>=r.inWidth))for(var V=A+M*e.strides[1],X=E+H*r.inChannels,Y=N,Q=V,G=0;G<r.inChannels;++G){for(var re=p[X+G],ue=0;ue<c;++ue)f[Y+ue]+=re*h[Q+ue];Y+=c,Q+=c}}}return d.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,e,r){this.assertNotComplex([n,e],"depthwiseConv2DDerInput");for(var i=Kn(r.inShape,"float32"),o=i.values,a=i.strides,s=a[0],l=a[1],u=a[2],c=n.dataSync(),d=n.strides,p=d[0],h=d[1],f=d[2],m=e.dataSync(),g=e.strides,y=g[0],b=g[1],w=g[2],x=r.batchSize,I=r.filterHeight,D=r.filterWidth,A=r.inChannels,E=r.inHeight,R=r.inWidth,N=r.outChannels,T=r.outHeight,M=r.outWidth,H=r.strideHeight,V=r.strideWidth,X=I-1-r.padInfo.top,Y=D-1-r.padInfo.left,Q=N/A,G=0;G<x;++G)for(var re=0;re<A;++re)for(var ue=0;ue<E;++ue)for(var Te=ue-X,F=Math.max(0,Math.ceil(Te/H)),q=Math.min(T,(I+Te)/H),Z=0;Z<R;++Z){for(var ae=Z-Y,pe=Math.max(0,Math.ceil(ae/V)),fe=Math.min(M,(D+ae)/V),me=0,xe=F;xe<q;++xe)for(var je=xe*H-Te,Pe=pe;Pe<fe;++Pe)for(var Ge=p*G+h*xe+f*Pe,qe=y*(I-1-je)+b*(D-1-(Pe*V-ae))+w*re,ht=0;ht<Q;++ht)me+=c[Ge+(re*Q+ht)]*m[qe+ht];o[s*G+l*ue+u*Z+re]=me}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){this.assertNotComplex([n,e],"depthwiseConv2DDerFilter");for(var i=r.strideHeight,o=r.strideWidth,a=r.filterHeight,s=r.filterWidth,l=Kn(r.filterShape,"float32"),u=r.padInfo.left,c=r.padInfo.top,d=r.outChannels/r.inChannels,p=n.bufferSync(),h=e.bufferSync(),f=0;f<a;++f)for(var m=Math.max(0,Math.ceil((c-f)/i)),g=Math.min(r.outHeight,(r.inHeight+c-f)/i),y=0;y<s;++y)for(var b=Math.max(0,Math.ceil((u-y)/o)),w=Math.min(r.outWidth,(r.inWidth+u-y)/o),x=0;x<r.outChannels;++x){for(var I=Math.trunc(x/d),D=x%d,A=0,E=0;E<r.batchSize;++E)for(var R=m;R<g;++R)for(var N=f+R*i-c,T=b;T<w;++T){var M=y+T*o-u;A+=p.get(E,N,M,I)*h.get(E,R,T,x)}l.set(A,f,y,I,D)}return l.toTensor()},t.prototype.tile=function(n,e){this.assertNotComplex(n,"tile");for(var r=new Array(n.rank),i=0;i<r.length;i++)r[i]=n.shape[i]*e[i];var o=Kn(r,n.dtype),a=n.bufferSync();for(i=0;i<o.values.length;++i){for(var s=o.indexToLoc(i),l=new Array(n.rank),u=0;u<l.length;u++)l[u]=s[u]%n.shape[u];var c=a.locToIndex(l);o.values[i]=a.values[c]}return o.toTensor()},t.prototype.pad=function(n,e,r){this.assertNotComplex(n,"pad");var i=e.map(function(d,p){return d[0]+n.shape[p]+d[1]}),o=e.map(function(d){return d[0]}),a=n.bufferSync(),s=Kn(i,n.dtype);r!==0&&s.values.fill(r);for(var l=0;l<n.size;l++){var u=a.indexToLoc(l),c=u.map(function(d,p){return d+o[p]});s.set.apply(s,[a.get.apply(a,u)].concat(c))}return s.toTensor()},t.prototype.transpose=function(n,e){this.assertNotComplex(n,"transpose");for(var r=new Array(n.rank),i=0;i<r.length;i++)r[i]=n.shape[e[i]];var o=n.dataSync(),a=Kn(r,n.dtype),s=n.bufferSync();for(i=0;i<n.size;++i){for(var l=s.indexToLoc(i),u=new Array(l.length),c=0;c<u.length;c++)u[c]=l[e[c]];var d=a.locToIndex(u);a.values[d]=o[i]}return a.toTensor()},t.prototype.gather=function(n,e,r){this.assertNotComplex([n,e],"gather");var i=n.shape.slice(),o=e.dataSync();i[r]=o.length;for(var a=Kn(i,n.dtype),s=n.bufferSync(),l=0;l<a.size;++l){var u=a.indexToLoc(l),c=u.slice();c[r]=o[u[r]];var d=s.locToIndex(c);a.values[l]=s.values[d]}return a.toTensor()},t.prototype.batchToSpaceND=function(n,e,r){this.assertNotComplex([n],"batchToSpaceND");var i=e.reduce(function(c,d){return c*d}),o=r2(n.shape,e,i),a=i2(o.length,e.length),s=o2(n.shape,e,i),l=gL(r,e.length),u=vL(s,r,e.length);return n.reshape(o).transpose(a).reshape(s).slice(l,u)},t.prototype.spaceToBatchND=function(n,e,r){this.assertNotComplex([n],"spaceToBatchND");var i=e.reduce(function(d,p){return d*p}),o=[[0,0]];o.push.apply(o,r);for(var a=1+e.length;a<n.shape.length;++a)o.push([0,0]);var s=n.pad(o),l=r2(s.shape,e,i,!1),u=i2(l.length,e.length,!1),c=o2(s.shape,e,i,!1);return s.reshape(l).transpose(u).reshape(c)},t.prototype.pool=function(n,e,r){this.assertNotComplex(n,"pool");for(var i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=n.dataSync(),f=Kn(e.outShape,n.dtype),m=f.values,g=e.outShape[1]*e.outShape[2]*e.outShape[3],y=e.outShape[2]*e.outShape[3],b=e.outShape[3],w=0;w<e.batchSize;++w)for(var x=w*g,I=w*n.strides[0],D=0;D<e.inChannels;++D)for(var A=0;A<e.outHeight;++A)for(var E=A*i-c,R=Math.max(0,E),N=Math.min(e.inHeight,l+E),T=x+A*y,M=0;M<e.outWidth;++M){for(var H=M*o-d,V=Math.max(0,H),X=Math.min(e.inWidth,u+H),Y=p,Q=0,G=0,re=R;re<N;re+=a){for(var ue=I+re*n.strides[1],Te=V;Te<X;Te+=s){var F=h[ue+Te*n.strides[2]+D];r==="max"&&F>Y?Y=F:r==="avg"&&(Q+=F,G++)}if(isNaN(Y))break}m[T+M*b+D]=r==="avg"?Q/G:Y}return f.toTensor()},t.prototype.maxPool=function(n,e){return this.pool(n,e,"max")},t.prototype.maxPoolPositions=function(n,e){for(var r=Kn(e.outShape,"int32"),i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left,p=n.bufferSync(),h=0;h<e.batchSize;++h)for(var f=0;f<e.inChannels;++f)for(var m=0;m<e.outHeight;++m){for(var g=m*i-c,y=g;y<0;)y+=a;for(var b=Math.min(e.inHeight,l+g),w=0;w<e.outWidth;++w){for(var x=w*o-d,I=x;I<0;)I+=s;for(var D=Math.min(e.inWidth,u+x),A=Number.NEGATIVE_INFINITY,E=-1,R=y;R<b;R+=a)for(var N=R-g,T=I;T<D;T+=s){var M=T-x,H=p.get(h,R,T,f);H>A&&(A=H,E=N*u+M)}r.set(E,h,m,w,f)}}return r.toTensor()},t.prototype.maxPoolBackprop=function(n,e,r,i){this.assertNotComplex([e,r],"maxPoolBackprop");for(var o=this.maxPoolPositions(e,i),a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=d-1-i.padInfo.left,h=c-1-i.padInfo.top,f=Kn(e.shape,"float32"),m=o.bufferSync(),g=n.bufferSync(),y=0;y<i.batchSize;++y)for(var b=0;b<i.inChannels;++b)for(var w=0;w<i.inHeight;++w)for(var x=0;x<i.inWidth;++x){for(var I=w-h,D=x-p,A=0,E=0;E<c;E+=l){var R=(I+E)/a;if(!(R<0||R>=i.outHeight||Math.floor(R)!==R))for(var N=0;N<d;N+=u){var T=(D+N)/s;if(!(T<0||T>=i.outWidth||Math.floor(T)!==T)){var M=c*d-1-m.get(y,R,T,b)===E*d+N?1:0;M!==0&&(A+=g.get(y,R,T,b)*M)}}}f.set(A,y,w,x,b)}return f.toTensor()},t.prototype.avgPoolBackprop=function(n,e,r){this.assertNotComplex([n,e],"avgPoolBackprop");for(var i=r.strideHeight,o=r.strideWidth,a=r.filterHeight,s=r.filterWidth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=d-1-r.padInfo.left,h=c-1-r.padInfo.top,f=Kn(e.shape,"float32"),m=1/(a*s),g=n.bufferSync(),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var w=0;w<r.inHeight;++w)for(var x=0;x<r.inWidth;++x){for(var I=w-h,D=x-p,A=0,E=0;E<c;E+=l){var R=(I+E)/i;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var N=0;N<d;N+=u){var T=(D+N)/o;T<0||T>=r.outWidth||Math.floor(T)!==T||(A+=g.get(y,R,T,b))}}f.set(A*m,y,w,x,b)}return f.toTensor()},t.prototype.cast=function(n,e){return EL(n,e,this)},t.prototype.reshape=function(n,e){return eT(n,e)},t.prototype.avgPool=function(n,e){return this.assertNotComplex(n,"avgPool"),this.pool(n,e,"avg").toFloat()},t.prototype.resizeBilinear=function(n,e,r,i){this.assertNotComplex(n,"resizeBilinear");for(var o=n.shape,a=o[0],s=o[1],l=o[2],u=o[3],c=n.dataSync(),d=new Float32Array(Yt([a,e,r,u])),p=[i&&e>1?s-1:s,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r],f=0,m=p[0]/h[0],g=p[1]/h[1],y=0;y<a;y++)for(var b=0;b<e;b++)for(var w=m*b,x=Math.floor(w),I=w-x,D=Math.min(s-1,Math.ceil(w)),A=y*n.strides[0]+x*n.strides[1],E=y*n.strides[0]+D*n.strides[1],R=0;R<r;R++)for(var N=g*R,T=Math.floor(N),M=N-T,H=Math.min(l-1,Math.ceil(N)),V=A+T*n.strides[2],X=E+T*n.strides[2],Y=A+ +H*n.strides[2],Q=E+H*n.strides[2],G=0;G<u;G++){var re=c[V+G],ue=c[X+G],Te=re+(c[Y+G]-re)*M,F=Te+(ue+(c[Q+G]-ue)*M-Te)*I;d[f++]=F}return Qr(d,[a,e,r,u])},t.prototype.resizeBilinearBackprop=function(n,e,r){this.assertNotComplex([n,e],"resizeBilinearBackprop");for(var i=e.shape,o=i[0],a=i[1],s=i[2],l=i[3],u=n.shape,c=u[1],d=u[2],p=new Float32Array(o*a*s*l),h=[r&&c>1?a-1:a,r&&d>1?s-1:s],f=[r&&c>1?c-1:c,r&&d>1?d-1:d],m=h[0]/f[0],g=h[1]/f[1],y=n.dataSync(),b=0,w=0;w<o;w++)for(var x=w*e.strides[0],I=0;I<c;I++)for(var D=I*m,A=Math.floor(D),E=Math.min(Math.ceil(D),a-1),R=x+A*e.strides[1],N=x+E*e.strides[1],T=D-A,M=1-T,H=0;H<d;H++)for(var V=H*g,X=Math.floor(V),Y=Math.min(Math.ceil(V),s-1),Q=V-X,G=1-Q,re=R+X*e.strides[2],ue=R+Y*e.strides[2],Te=N+X*e.strides[2],F=N+Y*e.strides[2],q=M*G,Z=M*Q,ae=T*G,pe=T*Q,fe=0;fe<l;fe++){var me=y[b++];p[re+fe]+=me*q,p[ue+fe]+=me*Z,p[Te+fe]+=me*ae,p[F+fe]+=me*pe}return xa(p,[o,s,a,l],e.dtype)},t.prototype.resizeNearestNeighbor=function(n,e,r,i){this.assertNotComplex(n,"resizeNearestNeighbor");for(var o=n.shape,a=o[0],s=o[1],l=o[2],u=o[3],c=n.dataSync(),d=new Float32Array(a*e*r*u),p=[i&&e>1?s-1:s,i&&r>1?l-1:l],h=[i&&e>1?e-1:e,i&&r>1?r-1:r],f=p[0]/h[0],m=p[1]/h[1],g=0,y=0;y<a;y++)for(var b=y*n.strides[0],w=0;w<e;w++)for(var x=f*w,I=b+Math.min(s-1,i?Math.round(x):Math.floor(x))*n.strides[1],D=0;D<r;D++)for(var A=m*D,E=I+Math.min(l-1,i?Math.round(A):Math.floor(A))*n.strides[2],R=0;R<u;R++){var N=c[E+R];d[g++]=N}return Qr(d,[a,e,r,u],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){this.assertNotComplex([n,e],"resizeNearestNeighborBackprop");for(var i=e.shape,o=i[0],a=i[1],s=i[2],l=i[3],u=n.shape,c=u[1],d=u[2],p=new Float32Array(o*a*s*l),h=n.dataSync(),f=[r&&c>1?a-1:a,r&&d>1?s-1:s],m=[r&&c>1?c-1:c,r&&d>1?d-1:d],g=f[0]/m[0],y=f[1]/m[1],b=1/g,w=1/y,x=2*Math.ceil(b)+2,I=2*Math.ceil(w)+2,D=0;D<o;D++)for(var A=D*e.strides[0],E=0;E<a;E++)for(var R=A+E*e.strides[1],N=Math.floor(E*b),T=Math.floor(N-x/2),M=0;M<s;M++)for(var H=R+M*e.strides[2],V=Math.floor(M*w),X=Math.floor(V-I/2),Y=0;Y<l;Y++){for(var Q=0,G=0;G<x;G++){var re=G+T;if(!(re<0||re>=c)){var ue=A+re*n.strides[1],Te=re*g;if(E===Math.min(a-1,r?Math.round(Te):Math.floor(Te)))for(var F=0;F<I;F++){var q=F+X;if(!(q<0||q>=d)){var Z=ue+q*n.strides[2],ae=q*y;M===Math.min(s-1,r?Math.round(ae):Math.floor(ae))&&(Q+=h[Z+Y])}}}}p[H+Y]=Q}return xa(p,e.shape,e.dtype)},t.prototype.batchNormalization=function(n,e,r,i,o,a){this.assertNotComplex([n,e,r,o,a],"batchNorm");for(var s=n.dataSync(),l=e.dataSync(),u=r.dataSync(),c=o?o.dataSync():new Float32Array([1]),d=a?a.dataSync():new Float32Array([0]),p=new Float32Array(s.length),h=d.length,f=c.length,m=u.length,g=l.length,y=0,b=0,w=0,x=0,I=0;I<s.length;++I)p[I]=d[y++]+(s[I]-l[b++])*c[w++]/Math.sqrt(u[x++]+i),y>=h&&(y=0),b>=g&&(b=0),w>=f&&(w=0),x>=m&&(x=0);return xa(p,n.shape)},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){this.assertNotComplex(n,"localResponseNormalization4D");var a=n.shape[3],s=a-1,l=n.dataSync(),u=n.size,c=new Float32Array(u);function d(m){for(var g=m%a,y=m-g+Math.max(0,g-e),b=m-g+Math.min(g+e,s),w=0;y<=b;y++){var x=l[y];w+=x*x}return w}for(var p=0;p<u;p++){var h=d(p),f=l[p]*Math.pow(r+i*h,-o);c[p]=f}return xa(c,n.shape)},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){this.assertNotComplex(n,"LRNGrad");for(var l=n.shape[3],u=n.dataSync(),c=e.dataSync(),d=r.dataSync(),p=new Float32Array(n.size),h=n.size,f=0;f<h;f++){for(var m=f%l,g=f-m+Math.max(0,m-i),y=f-m+Math.min(l,m+i+1),b=0,w=g;w<y;w++)b+=Math.pow(c[w],2);for(b=a*b+o,w=g;w<y;w++){var x=-2*a*s*c[w]*d[f]/b;f===w&&(x+=Math.pow(b,-s)),x*=u[f],p[w]+=x}}return xa(p,n.shape)},t.prototype.multinomial=function(n,e,r,i){this.assertNotComplex(n,"multinomial");for(var o=e?n:Ja(n),a=o.shape[0],s=o.shape[1],l=ci([a,r],"int32"),u=l.dataSync(),c=o.dataSync(),d=0;d<a;++d){var p=d*s,h=new Float32Array(s-1);h[0]=c[p];for(var f=1;f<h.length;++f)h[f]=h[f-1]+c[p+f];for(var m=T6(i.toString()),g=d*r,y=0;y<r;++y){var b=m();u[g+y]=h.length;for(var w=0;w<h.length;w++)if(b<h[w]){u[g+y]=w;break}}}return l},t.prototype.oneHot=function(n,e,r,i){this.assertNotComplex(n,"oneHot");var o=new Float32Array(n.size*e);o.fill(i);for(var a=n.dataSync(),s=0;s<n.size;++s)a[s]>=0&&a[s]<e&&(o[s*e+a[s]]=r);return K0(o,[n.size,e],"int32")},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return this.assertNotComplex(n,"nonMaxSuppression"),_T(n.dataSync(),e.dataSync(),r,i,o)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,e){for(var r=n.shape[0],i=n.shape[1],o=Kn(n.shape,"float32"),a=Kn(n.shape,"float32"),s=Hl(n).as2D(r,i),l=ed(n).as2D(r,i),u=0;u<r;u++)for(var c=s.slice([u,0],[1,i]),d=l.slice([u,0],[1,i]),p=na(c,d),h=this.fftImpl(p,e).dataSync(),f=0;f<i;f++){var m=_P(h,f);o.values[u*i+f]=m.real,a.values[u*i+f]=m.imag}return na(o.toTensor(),a.toTensor()).as2D(r,i)},t.prototype.fftImpl=function(n,e){var r=n.as1D(),i=r.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(r,i,e).as2D(n.shape[0],n.shape[1]);return e&&(o=na(Hl(o).div(ot(i)),ed(o).div(ot(i)))),o}var a=n.dataSync(),s=qle(this.fourierTransformByMatmul(a,i,e));return na(s.real,s.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,e,r){if(e===1)return n;var i=n.dataSync(),o=e/2,a=Gle(i),s=na(a.real,a.imag).as1D(),l=$le(i),u=na(l.real,l.imag).as1D();s=this.fftRadix2(s,o,r),u=this.fftRadix2(u,o,r);var c=Yle(e,r),d=na(c.real,c.imag).mul(u),p=s.add(d),h=s.sub(d),f=Hl(p).concat(Hl(h)),m=ed(p).concat(ed(h));return na(f,m).as1D()},t.prototype.fourierTransformByMatmul=function(n,e,r){for(var i=new Float32Array(2*e),o=0;o<e;o++){for(var a=0,s=0,l=0;l<e;l++){var u=Xle(o*l,e,r),c=_P(n,l);a+=c.real*u.real-c.imag*u.imag,s+=c.real*u.imag+c.imag*u.real}r&&(a/=e,s/=e),Kle(i,a,s,o)}return i},t.prototype.depthToSpace=function(n,e,r){de(r==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+r}),de(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var i=n.shape[0],o=n.shape[1],a=n.shape[2],s=n.shape[3],l=o*e,u=a*e,c=s/(e*e),d=n.dataSync(),p=new Float32Array(i*l*u*c),h=0,f=0;f<i;++f)for(var m=0;m<l;++m)for(var g=Math.floor(m/e),y=m%e,b=0;b<u;++b)for(var w=Math.floor(b/e),x=(y*e+b%e)*c,I=0;I<c;++I){var D=I+x+s*(w+a*(g+o*f));p[h++]=d[D]}return xa(p,[i,l,u,c])},t.prototype.broadcastedBinaryOp=function(n,e,r,i){var o=Jn(n.shape,e.shape),a=Kn(o,r),s=n.dataSync(),l=e.dataSync(),u=Nf(n.shape,o),c=Nf(e.shape,o),d=a.values;if(u.length+c.length===0)for(var p=0;p<d.length;++p)d[p]=i(s[p%s.length],l[p%l.length]);else{var h=n.bufferSync(),f=e.bufferSync(),m=function(g){var y=a.indexToLoc(g),b=y.slice(-n.rank);u.forEach(function(D){return b[D]=0});var w=h.locToIndex(b),x=y.slice(-e.rank);c.forEach(function(D){return x[D]=0});var I=f.locToIndex(x);d[g]=i(s[w],l[I])};for(p=0;p<d.length;++p)m(p)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,e,r){var i=Jn(n.shape,e.shape),o=Kn(i,"float32"),a=Kn(i,"float32"),s=n.dataSync(),l=e.dataSync(),u=Nf(n.shape,i),c=Nf(e.shape,i),d=o.values,p=a.values;if(u.length+c.length===0)for(var h=0;h<d.length;h++){var f=h%s.length,m=h%l.length,g=r(s[2*f],s[2*f+1],l[2*m],l[2*m+1]);d[h]=g.real,p[h]=g.imag}else{var y=this.data.get(n.dataId).complexTensors.real.bufferSync(),b=this.data.get(e.dataId).complexTensors.real.bufferSync(),w=function(x){var I=o.indexToLoc(x),D=I.slice(-n.rank);u.forEach(function(T){return D[T]=0});var A=y.locToIndex(D),E=I.slice(-e.rank);c.forEach(function(T){return E[T]=0});var R=b.locToIndex(E),N=r(s[2*A],s[2*A+1],l[2*R],l[2*R+1]);d[x]=N.real,p[x]=N.imag};for(h=0;h<d.length;h++)w(h)}return this.complex(o.toTensor(),a.toTensor())},t.prototype.split=function(n,e,r){return TL(n,e,r)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.cropAndResize=function(n,e,r,i,o,a){for(var s=n.shape,l=s[0],u=s[1],c=s[2],d=s[3],p=e.shape[0],h=i[0],f=i[1],m=Kn([p,h,f,d],n.dtype),g=e.dataSync(),y=r.dataSync(),b=n.dataSync(),w=n.strides,x=m.strides,I=0;I<p;I++){var D=4*I,A=g[D],E=g[D+1],R=g[D+2],N=g[D+3],T=y[I];if(!(T>=l))for(var M=h>1?(R-A)*(u-1)/(h-1):0,H=f>1?(N-E)*(c-1)/(f-1):0,V=0;V<h;V++){var X=h>1?A*(u-1)+V*M:.5*(A+R)*(u-1);if(X<0||X>u-1)for(var Y=0;Y<f;Y++)for(var Q=0;Q<d;Q++){var G=Q+Y*x[2]+V*x[1]+I*x[0];m.values[G]=a}else if(o==="bilinear"){var re=Math.floor(X),ue=Math.ceil(X),Te=X-re;for(Y=0;Y<f;Y++)if((je=f>1?E*(c-1)+Y*H:.5*(E+N)*(c-1))<0||je>c-1)for(Q=0;Q<d;Q++)G=Q+Y*x[2]+V*x[1]+I*x[0],m.values[G]=a;else{var F=Math.floor(je),q=Math.ceil(je),Z=je-F;for(Q=0;Q<d;Q++){var ae=b[G=Q+F*w[2]+re*w[1]+T*w[0]],pe=b[G=Q+q*w[2]+re*w[1]+T*w[0]],fe=b[G=Q+F*w[2]+ue*w[1]+T*w[0]],me=ae+(pe-ae)*Z,xe=fe+(b[G=Q+q*w[2]+ue*w[1]+T*w[0]]-fe)*Z;G=Q+Y*x[2]+V*x[1]+I*x[0],m.values[G]=me+(xe-me)*Te}}}else for(Y=0;Y<f;++Y){var je;if((je=f>1?E*(c-1)+Y*H:.5*(E+N)*(c-1))<0||je>c-1)for(Q=0;Q<d;Q++)G=Q+Y*x[2]+V*x[1]+I*x[0],m.values[G]=a;else{var Pe=Math.round(je),Ge=Math.round(X);for(Q=0;Q<d;Q++){var qe=Q+Pe*w[2]+Ge*w[1]+T*w[0],ht=Q+Y*x[2]+V*x[1]+I*x[0];m.values[ht]=b[qe]}}}}}return m.toTensor()},t.prototype.sparseToDense=function(n,e,r,i){var o=a2(e,n,r),a=o.sliceRank,s=o.numUpdates,l=o.sliceSize,u=o.strides,c=o.outputSize;return this.scatter(n,e,r,c,l,s,a,u,i,!1)},t.prototype.gatherND=function(n,e){var r=e.shape,i=r[r.length-1],o=bL(n,e),a=o[0],s=o[1],l=o[2],u=o[3];if(s===0)return Qr([],a,n.dtype);for(var c=new W0([s,l],n.dtype),d=e.dataSync(),p=n.dataSync(),h=0;h<s;h++){for(var f=[],m=0,g=0;g<i;g++){var y=d[h*i+g];m+=y*u[g],f.push(y)}if(m<0||m>=n.size/l)throw new Error("Invalid indices: "+f+" does not index into "+n.shape);for(var b=0;b<l;b++)c.values[h*l+b]=p[m*l+b]}return c.toTensor().reshape(a)},t.prototype.scatterND=function(n,e,r){var i=a2(e,n,r),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,l=i.strides,u=i.outputSize,c=ot(0);return this.scatter(n,e,r,u,s,a,o,l,c,!0)},t.prototype.fill=function(n,e,r){var i=U0(r=r||Vf(e),Yt(n));return i.fill(e),dt.make(n,{values:i},r)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var e=U0(n.dtype,Yt(n.shape));return dt.make(n.shape,{values:e},n.dtype)},t.prototype.scatter=function(n,e,r,i,o,a,s,l,u,c){var d=[i/o,o],p=n.dataSync(),h=e.dataSync();if(i===0)return Qr([],r,e.dtype);var f=new W0(d,e.dtype);f.values.fill(u.dataSync()[0]);for(var m=0;m<a;m++){for(var g=[],y=0,b=0;b<s;b++){var w=p[m*s+b];g.push(w),y+=w*l[b]}if(y<0||y>=i/o)throw new Error("Invalid indices: "+g+" does not index into "+r);for(var x=0;x<o;x++)c?f.values[y*o+x]+=h[m*o+x]:f.values[y*o+x]=e.rank===0?h[0]:h[m*o+x]}return f.toTensor().reshape(r)},t}();ne.registerBackend("cpu",function(){return new e1e},1);var aT={float32:4,int32:4,uint16:2,uint8:1,bool:1};function t1e(t){return Ln(this,void 0,void 0,function(){var n,e,r,i;return Bn(this,function(o){switch(o.label){case 0:for(r in n=[],e=[],t){if((i=t[r]).dtype!=="float32"&&i.dtype!=="int32"&&i.dtype!=="bool")throw new Error("Unsupported dtype in weight '"+r+"': "+i.dtype);n.push({name:r,shape:i.shape,dtype:i.dtype}),e.push(i.data())}return[4,Promise.all(e)];case 1:return[2,{data:n1e(o.sent()),specs:n}]}})})}function o8(t,n){for(var e={},r=0,i=function(s){var l=s.name,u=s.dtype,c=s.shape,d=Yt(c),p=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var f=aT[h.dtype],m=t.slice(r,r+d*f),g=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(u==="float32")p=Float32Array.from(g,function(w){return w*h.scale+h.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+u);p=Int32Array.from(g,function(w){return Math.round(w*h.scale+h.min)})}r+=d*f}else{var y=aT[u];if(m=t.slice(r,r+d*y),u==="float32")p=new Float32Array(m);else if(u==="int32")p=new Int32Array(m);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);p=new Uint8Array(m)}r+=d*y}var b=void 0;if(u==="float32")b=Qr(p,c,"float32");else if(u==="int32")b=Qr(p,c,"int32");else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);b=Qr(p,c,"bool")}e[l]=b},o=0,a=n;o<a.length;o++)i(a[o]);return e}function n1e(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var LT=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function UP(t){return LT?Buffer.byteLength(t):new Blob([t]).size}function r1e(t){return LT?Buffer.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}function i1e(t){if(LT){var n=Buffer.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var e=atob(t),r=new Uint8Array(e.length),i=0;i<e.length;++i)r.set([e.charCodeAt(i)],i);return r.buffer}function BT(t){var n=0;t.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function HP(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function sv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:UP(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:UP(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Za=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var i=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(n,r);a!==null&&i.push(a)}),i},t}(),o1e=function(t){return Za.registerSaveRouter(t)},a1e=function(t){return Za.registerLoadRouter(t)},s1e=function(t){return Za.getSaveHandlers(t)},l1e=function(t,n){return Za.getLoadHandlers(t)},Of="://",nd=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){de(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Of)&&(n=n.slice(0,n.indexOf(Of))),de(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();de(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Q_(t){if(t.indexOf(Of)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+nd.getSchemes().join(","));return{scheme:t.split(Of)[0],path:t.split(Of)[1]}}function a8(t,n,e){return e===void 0&&(e=!1),Ln(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,d;return Bn(this,function(p){switch(p.label){case 0:return de(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),de((r=Za.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),de(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],de((o=Za.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),de(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),a=o[0],s=Q_(t).scheme,l=Q_(t).path,u=s===Q_(t).scheme,[4,i.load()];case 1:return c=p.sent(),e&&u?[4,nd.getManager(s).removeModel(l)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,a.save(c)];case 4:return d=p.sent(),!e||u?[3,6]:[4,nd.getManager(s).removeModel(l)];case 5:p.sent(),p.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}function u1e(){return Ln(this,void 0,void 0,function(){var t,n,e,r,i,o,a;return Bn(this,function(s){switch(s.label){case 0:t=nd.getSchemes(),n={},e=0,r=t,s.label=1;case 1:return e<r.length?(i=r[e],[4,nd.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+Of+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})}function c1e(t){return Ln(this,void 0,void 0,function(){var n;return Bn(this,function(e){switch(e.label){case 0:return n=Q_(t),[4,nd.getManager(n.scheme).removeModel(n.path)];case 1:return[2,e.sent()]}})})}function d1e(t,n){return Ln(this,void 0,void 0,function(){return Bn(this,function(e){switch(e.label){case 0:return[4,a8(t,n,!1)];case 1:return[2,e.sent()]}})})}function p1e(t,n){return Ln(this,void 0,void 0,function(){return Bn(this,function(e){switch(e.label){case 0:return[4,a8(t,n,!0)];case 1:return[2,e.sent()]}})})}var sT="tensorflowjs",lT=1,wp="models_store",td="model_info_store";function s8(){if(!ne.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function uT(t){var n=t.result;n.createObjectStore(wp,{keyPath:"modelPath"}),n.createObjectStore(td,{keyPath:"modelPath"})}var Lf=function(){function t(n){if(this.indexedDB=s8(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return Ln(this,void 0,void 0,function(){return Bn(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return Ln(this,void 0,void 0,function(){return Bn(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open(sT,lT);a.onupgradeneeded=function(){return uT(a)},a.onsuccess=function(){var s=a.result;if(e==null){var l=s.transaction(wp,"readonly"),u=l.objectStore(wp).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(u.result.modelArtifacts)},u.onerror=function(m){return s.close(),o(u.error)},l.oncomplete=function(){return s.close()}}else{var c,d=sv(e),p=s.transaction(td,"readwrite"),h=p.objectStore(td),f=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});f.onsuccess=function(){var m=(c=s.transaction(wp,"readwrite")).objectStore(wp).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:d});m.onsuccess=function(){return i({modelArtifactsInfo:d})},m.onerror=function(g){var y=(h=p.objectStore(td)).delete(r.modelPath);y.onsuccess=function(){return s.close(),o(m.error)},y.onerror=function(b){return s.close(),o(m.error)}}},f.onerror=function(m){return s.close(),o(f.error)},p.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),zP=function(t){return ne.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Lf.URL_SCHEME)?h1e(t.slice(Lf.URL_SCHEME.length)):null};function h1e(t){return new Lf(t)}function f1e(t){return t.startsWith(Lf.URL_SCHEME)?t.slice(Lf.URL_SCHEME.length):t}Za.registerSaveRouter(zP),Za.registerLoadRouter(zP);var m1e=function(){function t(){this.indexedDB=s8()}return t.prototype.listModels=function(){return Ln(this,void 0,void 0,function(){var n=this;return Bn(this,function(e){return[2,new Promise(function(r,i){var o=n.indexedDB.open(sT,lT);o.onupgradeneeded=function(){return uT(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(td,"readonly"),l=s.objectStore(td).getAll();l.onsuccess=function(){for(var u={},c=0,d=l.result;c<d.length;c++){var p=d[c];u[p.modelPath]=p.modelArtifactsInfo}r(u)},l.onerror=function(u){return a.close(),i(l.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(n){return Ln(this,void 0,void 0,function(){var e=this;return Bn(this,function(r){return n=f1e(n),[2,new Promise(function(i,o){var a=e.indexedDB.open(sT,lT);a.onupgradeneeded=function(){return uT(a)},a.onsuccess=function(){var s,l=a.result,u=l.transaction(td,"readwrite"),c=u.objectStore(td),d=c.get(n);d.onsuccess=function(){if(d.result==null)return l.close(),o(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var p=c.delete(n),h=function(){var f=(s=l.transaction(wp,"readwrite")).objectStore(wp).delete(n);f.onsuccess=function(){return i(d.result.modelArtifactsInfo)},f.onerror=function(m){return o(d.error)}};p.onsuccess=h,p.onerror=function(f){return h(),l.close(),o(d.error)}},d.onerror=function(p){return l.close(),o(d.error)},u.oncomplete=function(){s==null?l.close():s.oncomplete=function(){return l.close()}}},a.onerror=function(s){return o(a.error)}})]})})},t}();if(ne.get("IS_BROWSER"))try{nd.registerManager(Lf.URL_SCHEME,new m1e)}catch{}var Uu="/",Rf="tensorflowjs_models",l8="info",g1e="model_topology",v1e="weight_specs",y1e="weight_data",b1e="model_metadata";function u8(t){return{info:[Rf,t,l8].join(Uu),topology:[Rf,t,g1e].join(Uu),weightSpecs:[Rf,t,v1e].join(Uu),weightData:[Rf,t,y1e].join(Uu),modelMetadata:[Rf,t,b1e].join(Uu)}}function _1e(t){var n=t.split(Uu);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Uu)}function w1e(t){return t.startsWith(Bf.URL_SCHEME)?t.slice(Bf.URL_SCHEME.length):t}var Bf=function(){function t(n){if(!ne.get("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=u8(this.modelPath)}return t.prototype.save=function(n){return Ln(this,void 0,void 0,function(){var e,r,i;return Bn(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=sv(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,r1e(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Ln(this,void 0,void 0,function(){var n,e,r,i,o,a,s;return Bn(this,function(l){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=i1e(s),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),WP=function(t){return ne.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bf.URL_SCHEME)?x1e(t.slice(Bf.URL_SCHEME.length)):null};function x1e(t){return new Bf(t)}Za.registerSaveRouter(WP),Za.registerLoadRouter(WP);var C1e=function(){function t(){de(ne.get("IS_BROWSER"),function(){return"Current environment is not a web browser"}),de(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ln(this,void 0,void 0,function(){var n,e,r,i,o,a;return Bn(this,function(s){for(n={},e=Rf+Uu,r=Uu+l8,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(a=_1e(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return Ln(this,void 0,void 0,function(){var e,r;return Bn(this,function(i){if(n=w1e(n),e=u8(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(ne.get("IS_BROWSER"))try{nd.registerManager(Bf.URL_SCHEME,new C1e)}catch{}var I1e="model",S1e=".json",E1e=".weights.bin",cT=function(){function t(n){if(!ne.get("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=I1e),this.modelTopologyFileName=n+S1e,this.weightDataFileName=n+E1e}return t.prototype.save=function(n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s;return Bn(this,function(l){if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,a.click(),n.weightData!=null&&((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,s.click()),[2,{modelArtifactsInfo:sv(n)}]})})},t.URL_SCHEME="downloads://",t}(),D1e=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return Ln(this,void 0,void 0,function(){var n,e,r=this;return Bn(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(l){var u=JSON.parse(l.target.result),c=u.modelTopology;if(c!=null){e.length===0&&o({modelTopology:c});var d=u.weightsManifest;if(d!=null){var p;try{p=r.checkManifestAndWeightFiles(d,e)}catch(g){return void a(g)}var h=[],f=[],m=[];d.forEach(function(g){g.paths.forEach(function(y){f.push(y),m.push(null)}),h.push.apply(h,g.weights)}),d.forEach(function(g){g.paths.forEach(function(y){var b=new FileReader;b.onload=function(w){var x=w.target.result,I=f.indexOf(y);m[I]=x,m.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:h,weightData:BT(m)})},b.onerror=function(w){return a("Failed to weights data from file of path '"+y+"'.")},b.readAsArrayBuffer(p[y])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(l){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],i=e.map(function(l){return HP(l.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(l){var u=HP(l);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),i.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");o[l]=e[i.indexOf(u)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}(),T1e=function(t){return ne.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(cT.URL_SCHEME)?A1e(t.slice(cT.URL_SCHEME.length)):null};function A1e(t){return t===void 0&&(t="model"),new cT(t)}function k1e(t){return new D1e(t)}function qP(t,n,e,r){(function(o){de(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){de(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),de(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),de(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=e+ ++i/t.length*(r-e);return n(s),a}),o}))}function c8(t,n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c;return Bn(this,function(d){switch(d.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?fetch:n.fetchFunc,r=t.map(function(p){return e(p,n.requestInit)}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,qP(r,n.onProgress,i,o)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(p){return p.arrayBuffer()}),l=.5,u=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,qP(s,n.onProgress,l,u)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function M1e(t,n,e,r){return n===void 0&&(n=""),Ln(this,void 0,void 0,function(){return Bn(this,function(i){return[2,d8(function(o){return c8(o,{requestInit:r})})(t,n,e)]})})}function d8(t){var n=this;return function(e,r,i){return r===void 0&&(r=""),Ln(n,void 0,void 0,function(){var o,a,s,l,u,c,d,p,h,f;return Bn(this,function(m){switch(m.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],l=[],e.forEach(function(g,y){var b=0;g.weights.forEach(function(w){var x="quantization"in w?w.quantization.dtype:w.dtype,I=aT[x]*Yt(w.shape),D=function(){o[y]=!0,a[y]==null&&(a[y]=[]),a[y].push({manifestEntry:w,groupOffset:b,sizeBytes:I})};i!=null?i.forEach(function(A,E){A===w.name&&(D(),s[E]=!0)}):D(),l.push(w.name),b+=I})}),!s.every(function(g){return g}))throw u=i.filter(function(g,y){return!s[y]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return c=o.reduce(function(g,y,b){return y&&g.push(b),g},[]),d=[],c.forEach(function(g){e[g].paths.forEach(function(y){var b=r+(r.endsWith("/")?"":"/")+y;d.push(b)})}),[4,t(d)];case 1:return p=m.sent(),h={},f=0,c.forEach(function(g){for(var y=e[g].paths.length,b=0,w=0;w<y;w++)b+=p[f+w].byteLength;for(var x=new ArrayBuffer(b),I=new Uint8Array(x),D=0,A=0;A<y;A++){var E=new Uint8Array(p[f+A]);I.set(E,D),D+=E.byteLength}a[g].forEach(function(R){var N=o8(x.slice(R.groupOffset,R.groupOffset+R.sizeBytes),[R.manifestEntry]);for(var T in N)h[T]=N[T]}),f+=y}),[2,h]}})})}}Za.registerSaveRouter(T1e);var R1e="application/octet-stream",N1e="application/json",p8=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc==null){var r=ne.global.fetch;if(r===void 0)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");e.fetchFunc=r.bind(ne.global)}else de(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"});if(this.fetchFunc=function(i,o){return e.fetchFunc(i,o).catch(function(a){throw new Error("Request for "+i+" failed due to error: "+a)})},de(n!=null&&n.length>0,function(){return"URL path for browserHTTPRequest must not be null, undefined or empty."}),Array.isArray(n)&&de(n.length===2,function(){return"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return Ln(this,void 0,void 0,function(){var e,r,i,o;return Bn(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:N1e}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:R1e}),"model.weights.bin"),[4,this.getFetchFunc()(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:sv(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Ln(this,void 0,void 0,function(){var n,e,r,i,o,a,s,l;return Bn(this,function(u){switch(u.label){case 0:return[4,this.getFetchFunc()(this.path,this.requestInit)];case 1:if(!(n=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");u.label=2;case 2:return u.trys.push([2,4,,5]),[4,n.json()];case 3:return e=u.sent(),[3,5];case 4:throw u.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:l=u.sent(),a=l[0],s=l[1],u.label=7;case 7:return[2,{modelTopology:i,weightSpecs:a,weightData:s}]}})})},t.prototype.loadWeights=function(n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d,p;return Bn(this,function(h){switch(h.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=F1e(e),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],l=0,u=n;l<u.length;l++)c=u[l],s.push.apply(s,c.weights);return d=[],n.forEach(function(f){f.paths.forEach(function(m){d.push(a+m+o)})}),[4,c8(d,{requestInit:this.requestInit,fetchFunc:this.getFetchFunc(),onProgress:this.onProgress})];case 1:return p=h.sent(),[2,[s,BT(p)]]}})})},t.prototype.getFetchFunc=function(){return this.fetchFunc},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function F1e(t){var n=t.lastIndexOf("/"),e=t.lastIndexOf("?");return[t.substring(0,n)+"/",e>n?t.substring(e):""]}function dT(t){return t.match(p8.URL_SCHEME_REGEX)!=null}var GP=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return dT(e)}):dT(t))?h8(t,{onProgress:n}):null};function h8(t,n){return new p8(t,n)}Za.registerSaveRouter(GP),Za.registerLoadRouter(GP);var O1e=function(){function t(n,e,r){this.modelTopology=n,this.weightSpecs=e,this.weightData=r}return t.prototype.load=function(){return Ln(this,void 0,void 0,function(){var n;return Bn(this,function(e){return n={},this.modelTopology!=null&&(n=$_({modelTopology:this.modelTopology},n)),this.weightSpecs!=null&&this.weightSpecs.length>0&&(n=$_({weightSpecs:this.weightSpecs},n)),this.weightData!=null&&this.weightData.byteLength>0&&(n=$_({weightData:this.weightData},n)),[2,n]})})},t}(),P1e=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return Ln(this,void 0,void 0,function(){return Bn(this,function(e){return[2,this.saveHandler(n)]})})},t}();function L1e(t,n,e){return new O1e(t,n,e)}function B1e(t){return new P1e(t)}var TFe=Object.freeze({browserFiles:k1e,browserHTTPRequest:h8,concatenateArrayBuffers:BT,decodeWeights:o8,encodeWeights:t1e,fromMemory:L1e,getLoadHandlers:l1e,getModelArtifactsInfoForJSON:sv,getSaveHandlers:s1e,isHTTPScheme:dT,loadWeights:M1e,registerLoadRouter:a1e,registerSaveRouter:o1e,weightsLoaderFactory:d8,withSaveHandler:B1e,copyModel:d1e,listModels:u1e,moveModel:p1e,removeModel:c1e});function V1e(t,n,e){var r=te(t,"labels","confusionMatrix"),i=te(n,"predictions","confusionMatrix");de(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),de(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),de(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),de(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),de(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=iT(r.asType("int32"),e),a=iT(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}var j1e=we({confusionMatrix_:V1e}),AFe=Object.freeze({confusionMatrix:j1e});function U1e(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return ne.engine.fromPixels(t,n)}function H1e(t,n){return Ln(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I;return Bn(this,function(D){switch(D.label){case 0:if(e=te(t,"img","toPixels"),t instanceof dt||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return s=e.min(),l=e.max(),[4,s.data()];case 1:return u=D.sent()[0],[4,l.data()];case 2:if(c=D.sent()[0],s.dispose(),l.dispose(),e.dtype==="float32"){if(u<0||c>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+u+" - "+c+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(u<0||c>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+u+" - "+c+"].")}return[4,e.data()];case 3:for(d=D.sent(),p=e.dtype==="float32"?255:1,h=new Uint8ClampedArray(o*i*4),f=0;f<i*o;++f)m=void 0,g=void 0,y=void 0,b=void 0,a===1?(m=d[f]*p,g=d[f]*p,y=d[f]*p,b=255):a===3?(m=d[3*f]*p,g=d[3*f+1]*p,y=d[3*f+2]*p,b=255):a===4&&(m=d[4*f]*p,g=d[4*f+1]*p,y=d[4*f+2]*p,b=d[4*f+3]*p),h[(w=4*f)+0]=Math.round(m),h[w+1]=Math.round(g),h[w+2]=Math.round(y),h[w+3]=Math.round(b);return n!=null&&(n.width=o,n.height=i,x=n.getContext("2d"),I=new ImageData(h,o,i),x.putImageData(I,0,0)),e!==t&&e.dispose(),[2,h]}})})}var z1e=we({fromPixels_:U1e}),f8=Object.freeze({toPixels:H1e,fromPixels:z1e}),m8=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),g8=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function sd(t){de(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),de(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),de(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),g8.register(t)}var kFe=Object.freeze({Serializable:m8,SerializationMap:g8,registerClass:sd}),W1e={HAS_WEBGL:!0},q1e={WEBGL_PACK:!0},G1e={IS_NODE:!0},$1e={IS_CHROME:!0},K1e={IS_BROWSER:!0},Y1e={HAS_WEBGL:!1},X1e={};function v8(t,n,e){return e==null&&(e=ne.get("TEST_EPSILON")),y8(t,typeof n=="number"||typeof n=="boolean"?[n]:n,function(r,i){return b8(r,Number(i),e)})}function y8(t,n,e){if(t instanceof dt||n instanceof dt){if(t instanceof dt&&n instanceof dt){if(t.dtype!==n.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+n.dtype+".");if(!bo(t.shape,n.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+n.shape+".")}}else{var r=t.constructor.name,i=n.constructor.name;if(r!==i)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+i)}var o,a;if(o=t instanceof dt?t.dataSync():t,a=n instanceof dt?n.dataSync():n,o.length!==a.length)throw new Error("Arrays have different lengths actual: "+o.length+" vs expected: "+a.length+`.
Actual:   `+o+`.
Expected: `+a+".");for(var s=0;s<a.length;++s){var l=o[s],u=a[s];if(!e(l,u))throw new Error("Arrays differ: actual["+s+"] = "+l+", expected["+s+"] = "+u+`.
Actual:   `+o+`.
Expected: `+a+".")}}function Q1e(t,n){t().then(function(){return n.fail()},function(){return n()})}function Z1e(t,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return t instanceof dt&&t.dtype==="string"||n instanceof dt&&n.dtype==="string"||Array.isArray(t)&&H0(t[0])||Array.isArray(n)&&H0(n[0])?y8(t,e,function(r,i){return r==i}):v8(t,n,0)}function J1e(t,n,e){if(e==null&&(e=ne.get("TEST_EPSILON")),!b8(t,n,e))throw new Error("Numbers differ: actual === "+t+", expected === "+n)}function b8(t,n,e){return!(!isNaN(t)||!isNaN(n))||!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}function eye(t,n,e){var r;r=t instanceof dt?t.dataSync():t;for(var i=0;i<r.length;i++)if(r[i]<n||r[i]>e)throw new Error("Value out of range:"+r[i]+" low: "+n+", high: "+e)}function tye(t,n){expect(new Float32Array(t)).toEqual(new Float32Array(n))}var MFe=Object.freeze({WEBGL_ENVS:W1e,PACKED_ENVS:q1e,NODE_ENVS:G1e,CHROME_ENVS:$1e,BROWSER_ENVS:K1e,CPU_ENVS:Y1e,ALL_ENVS:X1e,expectArraysClose:v8,expectPromiseToFail:Q1e,expectArraysEqual:Z1e,expectNumbersClose:J1e,expectValuesInRange:eye,expectArrayBuffersEqual:tye});var RFe=Object.freeze({gpgpu_util:nde,webgl_util:tde,MathBackendWebGL:F6,GPGPUContext:b6}),Fp=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return Hu(n,t),n.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;return this.applyGradients(s),Object.keys(s).forEach(function(l){return s[l].dispose()}),r?a:(a.dispose(),null)},n.prototype.computeGradients=function(e,r){return xle(e,r)},n.prototype.dispose=function(){},n}(m8);Object.defineProperty(Fp,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var _8=function(t){function n(e,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads={},o.accumulatedUpdates={},o.c=Pr(ot(-e)),o.rhoScalar=Pr(ot(r)),o.oneMinusRho=Pr(ot(1-r)),i===null&&(i=ne.get("EPSILON")),o.epsilonScalar=Pr(ot(i)),o}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this,i=function(s){var l=ne.engine.registeredVariables[s];o.accumulatedGrads[s]==null&&pt(function(){r.accumulatedGrads[s]=lr(l).variable(!1)}),o.accumulatedUpdates[s]==null&&pt(function(){r.accumulatedUpdates[s]=lr(l).variable(!1)});var u=e[s],c=o.accumulatedGrads[s],d=o.accumulatedUpdates[s];pt(function(){var p=r.rhoScalar.mul(c).add(r.oneMinusRho.mul(u.square())),h=d.add(r.epsilonScalar).sqrt().div(c.add(r.epsilonScalar).sqrt()).mul(u),f=r.rhoScalar.mul(d).add(r.oneMinusRho.mul(h.square()));r.accumulatedGrads[s].assign(p),r.accumulatedUpdates[s].assign(f);var m=r.c.mul(h).add(l);l.assign(m)})},o=this;for(var a in e)i(a)},n.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),this.accumulatedUpdates!=null&&(Object.keys(this.accumulatedUpdates).forEach(function(r){return e.accumulatedUpdates[r].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(r){return e.accumulatedGrads[r].dispose()}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="AdadeltaOptimizer",n}(Fp);sd(_8);var w8=function(t){function n(e,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads={},i.c=Pr(ot(-e)),i.epsilon=Pr(ot(ne.get("EPSILON"))),i}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this,i=function(s){var l=ne.engine.registeredVariables[s];o.accumulatedGrads[s]==null&&pt(function(){r.accumulatedGrads[s]=Uf(l.shape,r.initialAccumulatorValue).variable(!1)});var u=e[s],c=o.accumulatedGrads[s];pt(function(){var d=c.add(u.square());r.accumulatedGrads[s].assign(d);var p=r.c.mul(u.div(d.add(r.epsilon).sqrt())).add(l);l.assign(p)})},o=this;for(var a in e)i(a)},n.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),this.accumulatedGrads!=null&&Object.keys(this.accumulatedGrads).forEach(function(r){return e.accumulatedGrads[r].dispose()})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="AdagradOptimizer",n}(Fp);sd(w8);var x8=function(t){function n(e,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment={},a.accumulatedSecondMoment={},a.c=Pr(ot(-e)),a.beta1Scalar=Pr(ot(r)),a.beta2Scalar=Pr(ot(i)),pt(function(){a.accBeta1=ot(r).variable(),a.accBeta2=ot(i).variable()}),a.oneMinusBeta1=Pr(ot(1-r)),a.oneMinusBeta2=Pr(ot(1-i)),a.one=Pr(ot(1)),o===null&&(o=ne.get("EPSILON")),a.epsScalar=Pr(ot(o)),a}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this;pt(function(){var i=r.one.sub(r.accBeta1),o=r.one.sub(r.accBeta2);for(var a in e){var s=ne.engine.registeredVariables[a];if(r.accumulatedFirstMoment[a]==null){var l=!1;r.accumulatedFirstMoment[a]=lr(s).variable(l)}r.accumulatedSecondMoment[a]==null&&(l=!1,r.accumulatedSecondMoment[a]=lr(s).variable(l));var u=e[a],c=r.accumulatedFirstMoment[a],d=r.accumulatedSecondMoment[a],p=r.beta1Scalar.mul(c).add(r.oneMinusBeta1.mul(u)),h=r.beta2Scalar.mul(d).add(r.oneMinusBeta2.mul(u.square())),f=p.div(i),m=h.div(o);r.accumulatedFirstMoment[a].assign(p),r.accumulatedSecondMoment[a].assign(h);var g=r.c.mul(f.div(r.epsScalar.add(m.sqrt()))).add(s);s.assign(g)}r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar)),r.accBeta2.assign(r.accBeta2.mul(r.beta2Scalar))})},n.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return e.accumulatedFirstMoment[r].dispose()}),this.accumulatedSecondMoment!=null&&Object.keys(this.accumulatedSecondMoment).forEach(function(r){return e.accumulatedSecondMoment[r].dispose()})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="AdamOptimizer",n}(Fp);sd(x8);var C8=function(t){function n(e,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment={},s.accumulatedWeightedInfNorm={},s.c=Pr(ot(-e)),s.beta1Scalar=Pr(ot(r)),s.beta2Scalar=Pr(ot(i)),s.decayScalar=Pr(ot(a)),pt(function(){s.iteration=ot(0).variable(),s.accBeta1=ot(r).variable()}),s.oneMinusBeta1=Pr(ot(1-r)),s.one=Pr(ot(1)),o===null&&(o=ne.get("EPSILON")),s.epsScalar=Pr(ot(o)),s}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this;pt(function(){var i=r.one.sub(r.accBeta1),o=r.c.div(r.one.add(r.decayScalar.mul(r.iteration)));for(var a in e){var s=ne.engine.registeredVariables[a];if(r.accumulatedFirstMoment[a]==null){var l=!1;r.accumulatedFirstMoment[a]=lr(s).variable(l)}r.accumulatedWeightedInfNorm[a]==null&&(l=!1,r.accumulatedWeightedInfNorm[a]=lr(s).variable(l));var u=e[a],c=r.accumulatedFirstMoment[a],d=r.accumulatedWeightedInfNorm[a],p=r.beta1Scalar.mul(c).add(r.oneMinusBeta1.mul(u)),h=r.beta2Scalar.mul(d),f=u.abs(),m=h.maximum(f);r.accumulatedFirstMoment[a].assign(p),r.accumulatedWeightedInfNorm[a].assign(m);var g=o.div(i).mul(p.div(r.epsScalar.add(m))).add(s);s.assign(g)}r.iteration.assign(r.iteration.add(r.one)),r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar))})},n.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return e.accumulatedFirstMoment[r].dispose()}),this.accumulatedWeightedInfNorm!=null&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(r){return e.accumulatedWeightedInfNorm[r].dispose()})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="AdamaxOptimizer",n}(Fp);sd(C8);var VT=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this;Object.keys(e).forEach(function(i){var o=e[i],a=ne.engine.registeredVariables[i];pt(function(){var s=r.c.mul(o).add(a);a.assign(s)})})},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Pr(ot(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGDOptimizer",n}(Fp);sd(VT);var I8=function(t){function n(e,r,i){i===void 0&&(i=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.m=ot(o.momentum),o.accumulations={},o}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this,i=function(s){var l=ne.engine.registeredVariables[s];o.accumulations[s]==null&&pt(function(){r.accumulations[s]=lr(l).variable(!1)});var u=o.accumulations[s],c=e[s];pt(function(){var d,p=r.m.mul(u).add(c);d=r.useNesterov?r.c.mul(c.add(p.mul(r.m))).add(l):r.c.mul(p).add(l),r.accumulations[s].assign(p),l.assign(d)})},o=this;for(var a in e)i(a)},n.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),this.accumulations!=null)for(var e in this.accumulations)this.accumulations[e].dispose()},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="MomentumOptimizer",n}(VT);sd(I8);var S8=function(t){function n(e,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;return s.learningRate=e,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares={},s.accumulatedMeanGrads={},s.accumulatedMoments={},s.c=Pr(ot(e)),s.decayScalar=Pr(ot(r)),s.momentumScalar=Pr(ot(i)),s.oneMinusDecay=Pr(ot(1-r)),s.centered=a,o===null&&(o=ne.get("EPSILON")),s.epsilonScalar=Pr(ot(o)),s}return Hu(n,t),n.prototype.applyGradients=function(e){var r=this,i=function(s){var l=ne.engine.registeredVariables[s];o.accumulatedMeanSquares[s]==null&&pt(function(){r.accumulatedMeanSquares[s]=lr(l).variable(!1)}),o.accumulatedMeanGrads[s]==null&&o.centered&&pt(function(){r.accumulatedMeanGrads[s]=lr(l).variable(!1)}),o.accumulatedMoments[s]==null&&pt(function(){r.accumulatedMoments[s]=lr(l).variable(!1)});var u=o.accumulatedMeanSquares[s],c=o.accumulatedMeanGrads[s],d=o.accumulatedMoments[s],p=e[s];pt(function(){var h=r.decayScalar.mul(u).add(r.oneMinusDecay.mul(p.square()));if(r.centered){var f=r.decayScalar.mul(c).add(r.oneMinusDecay.mul(p)),m=r.momentumScalar.mul(d).add(r.c.mul(p).div(h.sub(f.square().add(r.epsilonScalar)).sqrt()));r.accumulatedMeanSquares[s].assign(h),r.accumulatedMeanGrads[s].assign(f),r.accumulatedMoments[s].assign(m);var g=l.sub(m);l.assign(g)}else{var y=r.decayScalar.mul(u).add(r.oneMinusDecay.mul(p.square()));m=r.momentumScalar.mul(d).add(r.c.mul(p).div(y.add(r.epsilonScalar).sqrt())),r.accumulatedMeanSquares[s].assign(y),r.accumulatedMoments[s].assign(m),g=l.sub(m),l.assign(g)}})},o=this;for(var a in e)i(a)},n.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),this.accumulatedMeanSquares!=null&&Object.keys(this.accumulatedMeanSquares).forEach(function(r){return e.accumulatedMeanSquares[r].dispose()}),this.accumulatedMeanGrads!=null&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(r){return e.accumulatedMeanGrads[r].dispose()}),this.accumulatedMoments!=null&&Object.keys(this.accumulatedMoments).forEach(function(r){return e.accumulatedMoments[r].dispose()})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSPropOptimizer",n}(Fp);sd(S8);var gp=function(){function t(){}return t.sgd=function(n){return new VT(n)},t.momentum=function(n,e,r){return r===void 0&&(r=!1),new I8(n,e,r)},t.rmsprop=function(n,e,r,i,o){return e===void 0&&(e=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new S8(n,e,r,i,o)},t.adam=function(n,e,r,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new x8(n,e,r,i)},t.adadelta=function(n,e,r){return n===void 0&&(n=.001),e===void 0&&(e=.95),r===void 0&&(r=null),new _8(n,e,r)},t.adamax=function(n,e,r,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new C8(n,e,r,i,o)},t.adagrad=function(n,e){return e===void 0&&(e=.1),new w8(n,e)},t}(),NFe={sgd:gp.sgd,momentum:gp.momentum,adadelta:gp.adadelta,adagrad:gp.adagrad,rmsprop:gp.rmsprop,adamax:gp.adamax,adam:gp.adam},FFe=Zs.setBackend,OFe=Zs.getBackend,PFe=Zs.disposeVariables,LFe=Zs.memory;Yse(Zve);var Cd={};Lx(Cd,{AnchorPosition:()=>ic,DrawBox:()=>Oxe,DrawBoxOptions:()=>c9,DrawTextField:()=>C5,DrawTextFieldOptions:()=>dw});var jT=function(t,n){return jT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},jT(t,n)};function Ql(t,n){jT(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var $f=function(){return $f=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$f.apply(this,arguments)};function Wi(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(t,n||[])).next())})}function qi(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=n.call(t,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function f2(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var f7=function(t,n){return(f7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function tl(t,n){function e(){this.constructor=t}f7(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function Ft(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(c){o(c)}}function s(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){u.done?i(u.value):new e(function(c){c(u.value)}).then(a,s)}l((r=r.apply(t,n||[])).next())})}function Ot(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var nye=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,i=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return rye(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],l=a[1];n.urlFlags[s]=function(u,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+u+".")}(s,l)})}},t}();function rye(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function ze(){return m7}var m7=null,M2=new Map,s3=new Map;function g7(t,n){var e=y7(t,n);return M2.get(e)}function k8(t){return s3.get(t)}function M8(t){for(var n=M2.entries(),e=[];;){var r=n.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===t&&e.push(s)}return e}function v7(t){var n=t.kernelName,e=t.backendName,r=y7(n,e);if(M2.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");M2.set(r,t)}function iye(t){var n=t.kernelName;s3.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),s3.set(n,t)}function y7(t,n){return n+"_"+t}function R8(t){for(var n=t.length,e=0,r=0;n>0;)r=Math.random()*n|0,e=t[--n],t[n]=t[r],t[r]=e}function R2(t,n,e){return Math.max(t,Math.min(n,e))}function D3(t){return t%2==0?t:t+1}function b7(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function ee(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function ur(t,n,e){e===void 0&&(e=""),ee(Fi(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function $p(t){ee(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Qu(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||xo(t)&&!e)for(var r=0;r<t.length;++r)Qu(t[r],n,e);else n.push(t);return n}function Nt(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Fi(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Zr(t){return t%1==0}function _7(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function N2(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Up(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function l3(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{o++;var s=n(o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function w7(t,n){for(var e=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function Oi(t,n){var e=n.length;return ee((t=t==null?n.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),ee(t.every(function(r){return Zr(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function cd(t,n){for(var e=[],r=[],i=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||i?null:Oi(n,t).sort(),a=0,s=0;s<t.length;++s){if(o!=null){if(o[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[a]==null||o[a]>s)&&t[s]===1&&(e.push(t[s]),r.push(s)),o[a]<=s&&a++}t[s]!==1&&(e.push(t[s]),r.push(s))}return{newShape:e,keptDims:r}}function Hp(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function yv(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function x7(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function C7(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function I7(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function xo(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function T3(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function S7(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function dd(t){return typeof t=="string"||t instanceof String}function E7(t){return typeof t=="boolean"}function D7(t){return typeof t=="number"}function sm(t){return Array.isArray(t)?sm(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":D7(t)?"float32":dd(t)?"string":E7(t)?"bool":"float32"}function F2(t){return!!(t&&t.constructor&&t.call&&t.apply)}function O2(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function Ta(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function A3(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Qu(t)),e&&x7(t,n),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function u3(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,i){return r*i});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,a){var s=new Array;if(o.length===1)for(var l=o[0],u=0;u<l;u++)s[u]=a[i+u];else{l=o[0];var c=o.slice(1),d=c.reduce(function(p,h){return p*h});for(u=0;u<l;u++)s[u]=r(i+u*d,c,a)}return s}(0,t,n)}function k3(t,n){for(var e=lm(t,n),r=0;r<e.length;r++)e[r]=1;return e}function lm(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function Js(){return ze().platform.now()}function M3(t){t.forEach(function(n){ee(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function T7(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",ze().platform.encode(t,n)}function bv(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",ze().platform.decode(t,n)}function P2(t,n,e){if(n===0)return 0;if(n===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=e[i]*t[i];return r}function R3(t,n,e){if(n===0)return[];if(n===1)return[t];for(var r=new Array(n),i=0;i<r.length-1;++i)r[i]=Math.floor(t/e[i]),t-=r[i]*e[i];return r[r.length-1]=t,r}var zFe=Object.freeze({shuffle:R8,clamp:R2,nearestLargerEven:D3,sum:b7,randUniform:function(t,n){var e=Math.random();return n*e+(1-e)*t},distSquared:function(t,n){for(var e=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(n[r]);e+=i*i}return e},assert:ee,assertShapesMatch:ur,assertNonNull:$p,flatten:Qu,sizeFromShape:Nt,isScalarShape:function(t){return t.length===0},arraysEqual:Fi,isInt:Zr,tanh:_7,sizeToSquarishShape:N2,createShuffledIndices:function(t){for(var n=new Uint32Array(t),e=0;e<t;++e)n[e]=e;return R8(n),n},rightPad:Up,repeatedTry:l3,inferFromImplicitShape:w7,parseAxisParam:Oi,squeezeShape:cd,getTypedArrayFromDType:Hp,getArrayFromDType:yv,checkConversionForErrors:x7,isValidDtype:C7,hasEncodingLoss:I7,isTypedArray:xo,bytesPerElement:T3,bytesFromStringArray:S7,isString:dd,isBoolean:E7,isNumber:D7,inferDtype:sm,isFunction:F2,nearestDivisor:O2,computeStrides:Ta,toTypedArray:A3,toNestedArray:u3,makeOnesTypedArray:k3,makeZerosTypedArray:lm,now:Js,assertNonNegativeIntegerDimensions:M3,fetch:function(t,n){return ze().platform.fetch(t,n)},encodeString:T7,decodeString:bv,locToIndex:P2,indexToLoc:R3}),oye=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new aye)}return t.prototype.profileKernel=function(n,e,r){var i,o=this,a=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(l){(function(u,c,d){if(c!=="float32")return!1;for(var p=0;p<u.length;p++){var h=u[p];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+d+"'"),!0}})(l,s.dtype,n),a.then(function(u){var c="";u.getExtraProfileInfo!=null&&(c=u.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,l,u.kernelMs,e,c)})})}),i},t}(),aye=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,i,o,a){var s=typeof i=="number"?Up(i+"ms",9):i.error,l=Up(n,25),u=e.rank,c=e.size,d=Up(e.shape.toString(),14),p="";for(var h in o){var f=o[h].shape||e.shape,m=f.length;p+=h+": "+m+"D "+(m>0?f:"")+" "}console.log("%c"+l+"	%c"+s+"	%c"+u+"D "+d+"	%c"+c+"	%c"+p+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),N8=20,lv=3,UT=7;function sye(t,n,e,r){var i=Ta(n),o=function(u,c,d,p){var h=Nt(c),f=p[p.length-1],m=new Array(f).fill(0),g=c.length,y=d==="complex64"?cv(u):u;if(g>1)for(var b=0;b<h/f;b++)for(var w=b*f,x=0;x<f;x++)m[x]=Math.max(m[x],uv(y[w+x],0,d).length);return m}(t,n,e,i),a=n.length,s=function u(c,d,p,h,f,m){m===void 0&&(m=!0);var g=p==="complex64"?2:1,y=d[0],b=d.length;if(b===0)return p==="complex64"?[uv(cv(c)[0],0,p)]:p==="bool"?[A7(c[0])]:[c[0].toString()];if(b===1){if(y>N8){var w=lv*g,x=Array.from(c.slice(0,w)),I=Array.from(c.slice((y-lv)*g,y*g));return p==="complex64"&&(x=cv(x),I=cv(I)),["["+x.map(function(X,Y){return uv(X,f[Y],p)}).join(", ")+", ..., "+I.map(function(X,Y){return uv(X,f[y-lv+Y],p)}).join(", ")+"]"]}return["["+(p==="complex64"?cv(c):Array.from(c)).map(function(X,Y){return uv(X,f[Y],p)}).join(", ")+"]"]}var D=d.slice(1),A=h.slice(1),E=h[0]*g,R=[];if(y>N8){for(var N=0;N<lv;N++){var T=(M=N*E)+E;R.push.apply(R,u(c.slice(M,T),D,p,A,f,!1))}for(R.push("..."),N=y-lv;N<y;N++)T=(M=N*E)+E,R.push.apply(R,u(c.slice(M,T),D,p,A,f,N===y-1))}else for(N=0;N<y;N++){var M;T=(M=N*E)+E,R.push.apply(R,u(c.slice(M,T),D,p,A,f,N===y-1))}var H=b===2?",":"";for(R[0]="["+R[0]+H,N=1;N<R.length-1;N++)R[N]=" "+R[N]+H;var V=`,
`;for(N=2;N<b;N++)V+=`
`;return R[R.length-1]=" "+R[R.length-1]+"]"+(m?"":V),R}(t,n,e,i,o),l=["Tensor"];return r&&(l.push("  dtype: "+e),l.push("  rank: "+a),l.push("  shape: ["+n+"]"),l.push("  values:")),l.push(s.map(function(u){return"    "+u}).join(`
`)),l.join(`
`)}function uv(t,n,e){return Up(Array.isArray(t)?parseFloat(t[0].toFixed(UT))+" + "+parseFloat(t[1].toFixed(UT))+"j":dd(t)?"'"+t+"'":e==="bool"?A7(t):parseFloat(t.toFixed(UT)).toString(),n)}function A7(t){return t===0?"false":"true"}function cv(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var _v=function(){function t(n,e,r){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=Nt(n),r!=null){var o=r.length;ee(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||yv(e,this.size),this.strides=Ta(n)}return t.prototype.set=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),ee(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var l=n[n.length-1],u=0;u<n.length-1;++u)l+=this.strides[u]*n[u];return this.values[l]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Jl().makeTensor(this.values,this.shape,this.dtype)},t}(),Jl=null,Ue=null,k7=null,wr=function(){function t(n,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Nt(n),this.strides=Ta(n),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),ee(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,i){return this.throwIfDisposed(),this.reshape([n,e,r,i])},t.prototype.as5D=function(n,e,r,i,o){return this.throwIfDisposed(),this.reshape([n,e,r,i,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),Ue.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ft(this,void 0,void 0,function(){var n;return Ot(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,Ue.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return Ue.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ft(this,void 0,void 0,function(){var n;return Ot(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,u3(this.shape,n)]}})})},t.prototype.arraySync=function(){return u3(this.shape,this.dataSync())},t.prototype.data=function(){return Ft(this,void 0,void 0,function(){var n,e;return Ot(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=Jl().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(i){return bv(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=Jl().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return bv(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return Ft(this,void 0,void 0,function(){var n;return Ot(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,Jl().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Jl().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),Ue.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),Ue.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),Ue.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),Ue.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),Ue.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),Ue.clone(this)},t.prototype.toString=function(n){return n===void 0&&(n=!1),sye(this.dataSync(),this.shape,this.dtype,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),Ue.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Ue.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),Ue.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ue.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),Ue.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),Ue.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),Ue.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),Ue.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),Ue.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),Ue.unstack(this,n)},t.prototype.batchNormalization=function(n,e,r,i,o){return r===void 0&&(r=.001),k7("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,r)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Ue.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),Ue.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),Ue.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),Ue.cast(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),Ue.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),Ue.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),Ue.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),Ue.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),Ue.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),Ue.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),Ue.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),Ue.mulStrict(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),Ue.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),Ue.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),Ue.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),Ue.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),Ue.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),Ue.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),Ue.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),Ue.modStrict(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),Ue.squaredDifferenceStrict(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),Ue.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),Ue.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),Ue.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),Ue.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),Ue.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),Ue.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),Ue.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),Ue.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),Ue.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),Ue.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),Ue.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),Ue.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),Ue.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),Ue.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Ue.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),Ue.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),Ue.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),Ue.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Ue.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Ue.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Ue.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Ue.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Ue.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Ue.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Ue.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Ue.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Ue.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Ue.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Ue.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Ue.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Ue.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Ue.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Ue.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),Ue.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),Ue.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Ue.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Ue.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Ue.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),Ue.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),Ue.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Ue.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ue.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Ue.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Ue.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Ue.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Ue.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Ue.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Ue.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Ue.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Ue.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Ue.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Ue.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Ue.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Ue.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Ue.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Ue.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Ue.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Ue.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Ue.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),Ue.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),Ue.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),Ue.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Ue.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Ue.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),Ue.conv1d(this,n,e,r,i,o,a)},t.prototype.conv2d=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Ue.conv2d(this,n,e,r,i,o,a)},t.prototype.conv2dTranspose=function(n,e,r,i,o){return this.throwIfDisposed(),Ue.conv2dTranspose(this,n,e,r,i,o)},t.prototype.depthwiseConv2D=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Ue.depthwiseConv2d(this,n,e,r,i,o,a)},t.prototype.separableConv2d=function(n,e,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),Ue.separableConv2d(this,n,e,r,i,o,a)},t.prototype.avgPool=function(n,e,r,i){return this.throwIfDisposed(),Ue.avgPool(this,n,e,r,i)},t.prototype.maxPool=function(n,e,r,i){return this.throwIfDisposed(),Ue.maxPool(this,n,e,r,i)},t.prototype.localResponseNormalization=function(n,e,r,i){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),Ue.localResponseNormalization(this,n,e,r,i)},t.prototype.pool=function(n,e,r,i,o){return this.throwIfDisposed(),Ue.pool(this,n,e,r,i,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),Jl().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),Ue.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),Ue.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),Ue.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),Ue.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,l){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),this.throwIfDisposed(),Ue.stridedSlice(this,n,e,r,i,o,a,s,l)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),Ue.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),Ue.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Ue.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Ue.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Ue.spectral.irfft(this)},t}();Object.defineProperty(wr,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var F8,c3,d3,p3,h3,zp=function(t){function n(e,r,i,o){var a=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=r,a.name=i,a}return tl(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Fi(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Jl().disposeTensor(this),this.dataId=e.dataId,Jl().incRef(this,null)},n.prototype.dispose=function(){Jl().disposeVariable(this),this.isDisposedInternal=!0},n}(wr);Object.defineProperty(zp,Symbol.hasInstance,{value:function(t){return t instanceof wr&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(F8||(F8={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(c3||(c3={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(d3||(d3={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(p3||(p3={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(h3||(h3={}));var lye={float32:p3,int32:c3,bool:d3,complex64:h3};function ao(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return lye[t][n]}function HT(t){return ao(t,"int32")}function $r(t,n){if(t.dtype===n.dtype)return[t,n];var e=ao(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function M7(t,n){ee(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function N3(t){var n=[];return function e(r,i,o){if(r!=null){if(r instanceof wr)return void i.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var l in s){var u=s[l];o.has(u)||(o.add(u),e(u,i,o))}}}}(t,n,new Set),n}var zT,WFe=Object.freeze({makeTypesMatch:$r,assertTypesMatch:M7,isTensorInList:function(t,n){return n.some(function(e){return e.id===t.id})},getTensorsInContainer:N3}),O8=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),uye=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new O8}return t.prototype.ready=function(){return Ft(this,void 0,void 0,function(){var n,e,r;return Ot(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return Ft(this,void 0,void 0,function(){var e,r,i;return Ot(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new oye(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;M8(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;M8(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],i=this.initializeBackend(r),o=i.success,a=i.asyncInit;if(a||o)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var i=r();return e(),i}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],function(i){return{x:function(){return i.toFloat()}}},[],{}),e},t.prototype.runKernel=function(n,e,r,i,o){return this.runKernelFunc(null,e,null,n,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(l){o+=l.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-e-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,i,o,a,s){var l,u=this,c=[],d=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var p,h=this.state.numBytes,f=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=g7(i,this.backendName);if(g!=null)p=function(){var b=u.backend.numDataIds();m=g.kernelFunc({inputs:e,attrs:o,backend:u.backend});var w=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(i,b,w);var x=w.map(function(A){var E=A.dataId,R=A.shape,N=A.dtype;return u.makeTensorFromDataId(E,R,N)});if(d){var I=u.getTensorsForGradient(i,e,x);if(I==null){s==null&&(s=[]);var D=x.filter(function(A,E){return s[E]});I=(a||[]).slice().concat(D)}c=u.saveTensorsForBackwardMode(I)}return x};else{var y=function(b){d&&(c=b.map(function(w){return u.keep(u.clone(w))}))};p=function(){var b=u.backend.numDataIds();m=u.tidy(function(){return n(u.backend,y)});var w=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(i,b,w),w}}return this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){l=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(i,e,function(){return p()}):p()}),d&&this.addTapeNode(i,e,l,r,c,o),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-h,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(b){return e[b].shape}),outputShapes:l.map(function(b){return b.shape})}),Array.isArray(m)?l:l[0]},t.prototype.saveTensorsForBackwardMode=function(n){var e=this;return n.map(function(r){return e.keep(e.clone(r))})},t.prototype.getTensorsForGradient=function(n,e,r){var i=k8(n);if(i!=null){var o=i.inputsToSave||[],a=i.outputsToSave||[],s=void 0;i.saveAllInputs?(ee(Array.isArray(e),function(){return"saveAllInputs is true, expected inputs to be an array."}),s=Object.keys(e).map(function(u){return e[u]})):s=o.map(function(u){return e[u]});var l=r.filter(function(u,c){return a[c]});return s.concat(l)}return null},t.prototype.makeTensor=function(n,e,r,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=n;r==="string"&&dd(n[0])&&(o=n.map(function(c){return T7(c)}));var a=i.write(o,e,r),s=new wr(e,r,a,this.nextTensorId());if(this.incRef(s,i),r==="string"){var l=this.state.tensorInfo.get(a),u=S7(o);this.state.numBytes+=u-l.bytes,l.bytes=u}return s},t.prototype.makeTensorFromDataId=function(n,e,r,i){var o=new wr(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(n,e,r,i){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var o=new zp(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*T3(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof zp||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return Ft(this,void 0,void 0,function(){var e,r;return Ot(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,i,o,a){var s=this,l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:r,saved:o},u=k8(n);u!=null&&(i=u.gradFunc),i!=null&&(l.gradient=function(c){return c=c.map(function(d,p){if(d==null){var h=r[p],f=lm(h.size,h.dtype);return s.makeTensor(f,h.shape,h.dtype)}return d}),i(c.length>1?c:c[0],o,a)}),this.state.activeTape.push(l)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=N3(n),i=new Set(r.map(function(l){return l.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==s.id||e.track(l)})},t.prototype.gradients=function(n,e,r,i){var o=this;if(i===void 0&&(i=!1),ee(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});ee(a instanceof wr,function(){return"The result y returned by f() must be a tensor."});var s=function(l,u,c){for(var d={},p={},h=0;h<u.length;h++)d[u[h].id]=!0;for(h=0;h<l.length;h++){var f=(D=l[h]).inputs;for(var m in f){for(var g=f[m],y=!1,b=0;b<u.length;b++)if(d[g.id]){D.outputs.forEach(function(N){return d[N.id]=!0}),y=!0,p[D.id]=!0;break}if(y)break}}var w={};w[c.id]=!0;var x={};for(h=l.length-1;h>=0;h--)for(f=(D=l[h]).inputs,b=0;b<D.outputs.length;b++)if(w[D.outputs[b].id]){for(var m in f)w[f[m].id]=!0,x[D.id]=!0;break}var I=[];for(h=0;h<l.length;h++){var D;if(p[(D=l[h]).id]&&x[D.id]){var A={};for(var m in D.inputs){var E=D.inputs[m];d[E.id]&&(A[m]=E)}var R=Object.assign({},D);R.inputs=A,R.outputs=D.outputs,I.push(R)}}return I}(this.state.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,u,c={};c[a.id]=r??(l=a.shape,u=k3(Nt(l),"float32"),_e.makeTensor(u,l,"float32")),function(p,h,f){for(var m=function(y){var b=h[y],w=[];if(b.outputs.forEach(function(A){var E=p[A.id];E!=null?w.push(E):w.push(null)}),b.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+b.kernelName+".");var x=b.gradient(w),I=function(A){if(!(A in x))throw new Error("Cannot backprop through input "+A+". Available gradients found: "+Object.keys(x)+".");var E=f(function(){return x[A]()});if(E.dtype!=="float32")throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input "+A+" must have 'float32' dtype, but has '"+E.dtype+"'");var R=b.inputs[A];if(!Fi(E.shape,R.shape))throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input '"+A+"' has shape '"+E.shape+"', which does not match the shape of the input '"+R.shape+"'");if(p[R.id]==null)p[R.id]=E;else{var N=p[R.id];p[R.id]=N.add(E),N.dispose()}};for(var D in b.inputs)I(D)},g=h.length-1;g>=0;g--)m(g)}(c,s,function(p){return o.tidy(p)});var d=e.map(function(p){return c[p.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(p){for(var h=0,f=p.saved;h<f.length;h++)f[h].dispose()}),o.state.activeTape=null),{value:a,grads:d}})},t.prototype.customGrad=function(n){var e=this;return ee(F2(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ee(i.every(function(s){return s instanceof wr}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,l){a[l]=s}),e.runKernelFunc(function(s,l){return ee((r=n.apply(void 0,i.concat([l]))).value instanceof wr,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ee(F2(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,l){var u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];ee(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ee(c.every(function(p){return p instanceof wr}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(p,h){d[h]=function(){return p}}),d})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.time=function(n){return Ft(this,void 0,void 0,function(){var e,r;return Ot(this,function(i){switch(i.label){case 0:return e=Js(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=Js()-e,[2,r]}})})},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new O8,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),_e=function(){var t=function(){if(zT==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}zT=e}return zT}();if(t._tfengine==null){var n=new nye(t);t._tfengine=new uye(n)}return function(e){m7=e}(t._tfengine.ENV),Jl=function(){return t._tfengine},t._tfengine}();function R7(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var $u=ze();$u.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),$u.registerFlag("IS_BROWSER",function(){return R7()}),$u.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),$u.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),$u.registerFlag("PROD",function(){return!1}),$u.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return $u.getBool("DEBUG")}),$u.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),$u.registerFlag("IS_TEST",function(){return!1});var wv,ns,ts,Lp={},WT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function N7(t,n){Lp[t]=n}function nu(t){t in Lp||(Lp[t]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Lp[e]},!1),e===1?r.getContext("webgl",WT)||r.getContext("experimental-webgl",WT):r.getContext("webgl2",WT)}(t));var n=Lp[t];return n.isContextLost()?(delete Lp[t],nu(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Lp[t])}function Y2(t,n){return[n,t]}function mv(t){var n=Nt(t);return N2(Math.ceil(n/4))}function Dv(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function F3(t,n){var e,r,i,o,a,s,l,u,c,d=t;return ze().getNumber("WEBGL_VERSION")===2?(e=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,a=d.RED,s=4,l=1,u=d.HALF_FLOAT,c=d.FLOAT):(e=t.RGBA,r=t.RGBA,i=t.RGBA,o=d.RGBA,a=t.RGBA,s=4,l=4,u=n!=null?n.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:c}}function Rt(t,n,e){var r=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+O7(i,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(wv||(wv={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(ns||(ns={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ts||(ts={}));var cye=596e-10,dye=65504;function F7(t){return!!(ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||cye<Math.abs(t)&&Math.abs(t)<dye)}function O7(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function pv(t,n,e){return Ju(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function P7(t,n,e){var r=Ju(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Rt(t,n,function(){return t.shaderSource(r,e)}),Rt(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function L7(t,n,e){var r=Ju(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Rt(t,n,function(){return t.shaderSource(r,e)}),Rt(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var a=pye.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],l=i.split(`
`),u=l.length.toString().length+2,c=l.map(function(g,y){return Up((y+1).toString(),u)+g}),d=0,p=0;p<c.length;p++)d=Math.max(c[p].length,d);var h=c.slice(0,s-1),f=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Up(f[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var I2,S2,pye=/ERROR: [0-9]+:([0-9]+):/g;function B7(t,n){return Ju(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function V7(t,n,e){if(Rt(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function E2(t,n,e){if(Rt(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function j7(t,n,e){var r=Ju(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Rt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Rt(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function U7(t,n,e){var r=Ju(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Rt(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Rt(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function H7(t,n){return Ju(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function z7(t,n){var e=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function W7(t,n){return Ju(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function f3(t,n,e,r,i,o,a,s){var l=t.getAttribLocation(e,r);return l!==-1&&(Rt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Rt(t,n,function(){return t.vertexAttribPointer(l,o,t.FLOAT,!1,a,s)}),Rt(t,n,function(){return t.enableVertexAttribArray(l)}),!0)}function q7(t,n,e,r){X7(t,r),Rt(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function G7(t,n,e,r){return Ju(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function $7(t,n,e){return t.getUniformLocation(n,e)}function K7(t,n,e,r,i,o){Rt(t,n,function(){return q7(t,n,r,o)}),Rt(t,n,function(){return t.uniform1i(i,o)})}function D2(t,n,e,r){Rt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Rt(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function m3(t,n,e){Rt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Rt(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function hv(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Y7(t,n))}function Y7(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Ju(t,n,e,r){var i=Rt(t,n,function(){return e()});if(i==null)throw new Error(r);return i}function X7(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function xv(t,n){return n===void 0&&(n=2),Nt(t.slice(0,t.length-n))}function Cv(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function T2(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[xv(t)].concat(Cv(t))),n}function Q7(t,n){var e;n===void 0&&(n=!1);var r=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(u,c){return c>=t.length-2?D3(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=cd(t);t=i.newShape}var o=Nt(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var a=xv(t),s=2,l=2;return t.length&&(s=(e=Cv(t))[0],l=e[1]),N2(o=a*(s/2)*(l/2)).map(function(u){return 2*u})}return N2(o)}function m2(t){return t%2==0}function fv(t,n){if(Fi(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||m2(e)&&m2(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&m2(t[0])&&m2(n[0])}function Z7(t){if(I2==null){var n=nu(t);I2=n.getParameter(n.MAX_TEXTURE_SIZE)}return I2}function J7(t){if(S2==null){var n=nu(t);S2=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,S2)}function eB(t){if(t===0)return 0;var n=nu(t);return rs(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:rs(n,"EXT_disjoint_timer_query")?1:0}function rs(t,n){return t.getExtension(n)!=null}function g3(t){try{if(nu(t)!=null)return!0}catch{return!1}return!1}function tB(t){if(t===0)return!1;var n=nu(t);if(t===1){if(!rs(n,"OES_texture_float"))return!1}else if(!rs(n,"EXT_color_buffer_float"))return!1;return v3(n)}function nB(t){if(t===0)return!1;var n=nu(t);if(t!==1){if(rs(n,"EXT_color_buffer_float"))return v3(n);if(rs(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=F3(r,i),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var l=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),l}(n,e)}return!1}return!!rs(n,"OES_texture_float")&&!!rs(n,"WEBGL_color_buffer_float")&&v3(n)}function v3(t){var n=F3(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}function rB(t){return t===2&&nu(t).fenceSync!=null}var hye=Object.freeze({callAndCheck:Rt,canBeRepresented:F7,getWebGLErrorMessage:O7,getExtensionOrThrow:pv,createVertexShader:P7,createFragmentShader:L7,createProgram:B7,linkProgram:V7,validateProgram:E2,createStaticVertexBuffer:j7,createStaticIndexBuffer:U7,getNumChannels:function(){return ze().getNumber("WEBGL_VERSION")===2?1:4},createTexture:H7,validateTextureSize:z7,createFramebuffer:W7,bindVertexBufferToProgramAttribute:f3,bindTextureUnit:q7,unbindTextureUnit:function(t,n,e){X7(t,e),Rt(t,n,function(){return t.activeTexture(t.TEXTURE0+e)}),Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:G7,getProgramUniformLocation:$7,bindTextureToProgramUniformSampler:K7,bindCanvasToFramebuffer:function(t,n){Rt(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Rt(t,n,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Rt(t,n,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:D2,unbindColorTextureFromFramebuffer:m3,validateFramebuffer:hv,getFramebufferErrorMessage:Y7,getBatchDim:xv,getRowsCols:Cv,getShapeAs3D:T2,getTextureShapeFromLogicalShape:Q7,isReshapeFree:fv,getWebGLMaxTextureSize:Z7,resetMaxTextureSize:function(){I2=null},resetMaxTexturesInShader:function(){S2=null},getMaxTexturesInShader:J7,getWebGLDisjointQueryTimerVersion:eB,hasExtension:rs,isWebGLVersionEnabled:g3,isCapableOfRenderingToFloatTexture:tB,isDownloadFloatTextureEnabled:nB,isWebGLFenceEnabled:rB}),un=ze();function iB(t){ze().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Fn(t,n){return _e.tidy(t,n)}function Aa(t){N3(t).forEach(function(n){return n.dispose()})}function fye(t){return _e.keep(t)}function L2(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ze().getBool("IS_TEST")||console.warn.apply(console,t)}function tu(t,n){var e=t;if(xo(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||xo(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&ze().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!xo(o))return void ee(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});ee(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),ee(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var l=a.slice(1),u=0;u<o.length;++u)i(o[u],l,s.concat(u))}(t,r,[]),r}function P8(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function K(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof wr)return P8(r,t.dtype,n,e),t;var i=sm(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),P8(r,i,n,e),t==null||!xo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=tu(t,i);xo(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?A3(t,i,ze().getBool("DEBUG")):Qu(t,[],!0);return _e.makeTensor(s,a,i)}function B2(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return K(i,n+"["+o+"]",e)},r)}function O3(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function oB(t,n,e){for(var r=t.length+n.length,i=[],o=0,a=0,s=0;s<r;s++)e.indexOf(s)===-1?i.push(t[o++]):i.push(n[a++]);return i}function wo(t,n){for(var e=[],r=t.length,i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);return[e,n.map(function(o){return t[o]})]}function ia(t,n){return oB(t,n.map(function(e){return 1}),n)}function Ea(t,n,e){ee(O3(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function nl(t,n){if(O3(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(i){return e.push(i)}),e}function X2(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function rl(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function aB(t,n){var e=t[0].length;t.forEach(function(i,o){ee(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),ee(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<e;a++)ee(a===n||i[a]===r[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Wp(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function he(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];_e.startScope(e);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),_e.endScope(s),s}catch(l){throw _e.endScope(null),l}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}un.registerFlag("HAS_WEBGL",function(){return un.getNumber("WEBGL_VERSION")>0}),un.registerFlag("WEBGL_VERSION",function(){return g3(2)?2:g3(1)?1:0}),un.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return un.get("WEBGL_VERSION")===2}),un.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),un.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),un.registerFlag("WEBGL_PACK",function(){return un.getBool("HAS_WEBGL")}),un.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_CLIP",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),un.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_REDUCE",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_LAZILY_UNPACK",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_CONV_IM2COL",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Z7(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return J7(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=un.getNumber("WEBGL_VERSION");return t===0?0:eB(t)}),un.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return un.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),un.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return tB(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!un.getBool("WEBGL_FORCE_F16_TEXTURES")&&un.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),un.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return nB(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return rB(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return un.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),k7=iB;var _o=he({complex_:function(t,n){var e=K(t,"real","complex"),r=K(n,"imag","complex");return ur(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),_e.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),Ds=he({real_:function(t){var n=K(t,"input","real");return _e.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),eu=he({imag_:function(t){var n=K(t,"input","imag");return _e.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function so(t,n,e){return yd(t,n,tu(t,e),e)}function yd(t,n,e,r){if(r==null&&(r=sm(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!xo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){M3(n);var i=Nt(n),o=Nt(e);ee(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<e.length;++a){var s=e[a],l=a!==e.length-1||s!==Nt(n.slice(a));ee(e[a]===n[a]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return xo(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?A3(t,r,ze().getBool("DEBUG")):Qu(t,[],!0),_e.makeTensor(t,n,r)}function Ut(t,n){if((xo(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&xo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return yd(t,[],[],n)}function oa(t,n){$p(t);var e=tu(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return yd(t,null,e,n)}function hd(t,n,e){if($p(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=tu(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return yd(t,n,r,e)}function sB(t,n,e){if($p(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=tu(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return yd(t,n,r,e)}function Es(t,n,e){if($p(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=tu(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return yd(t,n,r,e)}function mye(t,n,e){if($p(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=tu(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return yd(t,n,r,e)}function gye(t,n,e){if($p(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=tu(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return yd(t,n=n||r,r,e)}function vye(t,n,e,r){return n===void 0&&(n=!0),_e.makeVariable(t,n,e,r)}function um(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=um(t,"float32"),r=pi(t,"float32");return _o(e,r)}var i=k3(Nt(t),n);return _e.makeTensor(i,t,n)}function pi(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=pi(t,"float32"),r=pi(t,"float32");return _o(e,r)}var i=lm(Nt(t),n);return _e.makeTensor(i,t,n)}function ec(t,n,e){return _e.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function yye(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return _e.runKernelFunc(function(r){return r.linspace(t,n,e)},{})}function V2(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return pi([0],r);var i=lm(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return oa(i,r)}var lB=he({onesLike_:function(t){var n=K(t,"x","onesLike");if(n.dtype==="complex64"){var e=lB(Ds(n)),r=er(eu(n));return _o(e,r)}return _e.runKernelFunc(function(i){return i.onesLike(n)},{x:n},function(i,o){return{x:function(){return er(i)}}},"OnesLike")}}),er=he({zerosLike_:function(t){var n=K(t,"x","zerosLike");return _e.runKernelFunc(function(e){return e.zerosLike(n)},{x:n},function(e,r){return{x:function(){return er(e)}}},"ZerosLike")}}),Ma=he({concat_:function(t,n){n===void 0&&(n=0),ee(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=B2(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=Oi(n,e[0].shape)[0];var r=Wp(e.map(function(s){return s.shape}),n);if(Nt(r)===0)return so([],r);if((e=e.filter(function(s){return s.size>0})).length===1)return e[0];var i=e.map(function(s){return s.shape});aB(i,n);var o=e,a={axis:n};return _e.runKernelFunc(function(s){return s.concat(e,n)},o,function(s){var l=i.map(function(u){return u[n]});return P3(s,l,n).map(function(u){return function(){return u}})},"Concat",a)}}),bye=he({concat1d_:function(t){return Ma(t,0)}}),_ye=he({concat2d_:function(t,n){return Ma(t,n)}}),wye=he({concat3d_:function(t,n){return Ma(t,n)}}),xye=he({concat4d_:function(t,n){return Ma(t,n)}}),P3=he({split_:function(t,n,e){e===void 0&&(e=0);var r,i=K(t,"x","split");return e=Oi(e,i.shape)[0],typeof n=="number"?(ee(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[e]/n)):(ee(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),_e.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return Ma(o,e)}}})}});function gn(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",M3(t),new _v(t,n,e)}function Cye(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var uB=he({batchToSpaceND_:function(t,n,e){var r=K(t,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return ee(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),ee(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),ee(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),_e.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),Iye=he({cast_:function(t,n){var e=K(t,"x","cast");if(!C7(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return _e.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),Sye=he({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=K(t,"x","cumsum"),o=nl([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=rl(1,i.rank)[0],l=_e.runKernelFunc(function(u){return u.cumsum(a,s,e,r)},{permutedX:a},function(u){return{permutedX:function(){return u.cumsum(n,e,!r)}}});return o!=null&&(l=l.transpose(o)),l}}),Eye=he({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=K(t,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],a=e==="NHWC"?r.shape[3]:r.shape[1];return ee(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),ee(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),ee(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+r.shape}),_e.runKernelFunc(function(s){return s.depthToSpace(r,n,e)},{$x:r})}}),ld=he({expandDims_:function(t,n){n===void 0&&(n=0);var e=K(t,"x","expandDims",null);ee(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(ee(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),Ku(e,r)}}),Ku=he({reshape_:function(t,n){var e=K(t,"x","reshape",null);n=w7(n,e.size),ee(e.size===Nt(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return _e.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",r)}}),cB=he({spaceToBatchND_:function(t,n,e){var r=K(t,"x","spaceToBatchND");return ee(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),ee(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),ee(r.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),_e.runKernelFunc(function(i){return i.spaceToBatchND(r,n,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),dB=he({squeeze_:function(t,n){var e=K(t,"x","squeeze");return Ku(e,cd(e.shape,n).newShape)}}),Zu=he({stack_:function(t,n){n===void 0&&(n=0);var e=B2(t,"tensors","stack");if(ee(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;ee(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){ur(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){ee(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return Ma(a,n)}}),Tv=he({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=K(t,"x","unstack");ee(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length);var r={axis:n};return _e.runKernelFunc(function(i){return i.unstack(e,n)},{x:e},function(i){return{x:function(){return Zu(i,n)}}},"Unpack",r)}}),Dye=function(t,n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d;return Ot(this,function(p){switch(p.label){case 0:return e=K(t,"x","setdiff1d"),r=K(n,"y","setdiff1d"),ee(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),ee(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),ee(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(o=p.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(l=new _v([s],e.dtype),u=new _v([s],"int32"),c=0,d=0;c<i.length;c++)a.has(i[c])||(l.values[d]=i[c],u.values[d]=c,d++);return[2,[l.toTensor(),u.toTensor()]]}})})};function j2(t,n,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(t[0]/e),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([t[a+1]/n[a],n[a]]);i=i.concat(t.slice(o+1))}return i}function U2(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var i=n+1;i<t;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function H2(t,n,e,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/e):i.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?i.push(n[o-1]*t[o]):i.push(t[o]/n[o-1]):i.push(t[o]);return i}function pB(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function hB(t,n,e){for(var r=t.slice(0,1),i=0;i<e;++i)r.push(t[i+1]-n[i][0]-n[i][1]);return r}var fB="Add";var Q2="Div";var Z2="SquaredDifference";var mB="BroadcastTo",gB="OneHot",vB="Identity",yB="Tile",bB="PadV2";var Po=he({add_:function(t,n){var e,r=K(t,"a","add"),i=K(n,"b","add");e=$r(r,i),r=e[0],i=e[1];var o={a:r,b:i};return _e.runKernelFunc(function(a,s){var l=a.add(r,i);return s([r,i]),l},o,null,fB)}});function Xu(t,n){for(var e=t.length,r=[],i=0;i<e;i++){var o=e-1-i,a=t[o]||1;(n[n.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function Ni(t,n){for(var e=[],r=0;r<n.length;r++){var i=t[t.length-r-1],o=n.length-r-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function Hn(t,n){for(var e=[],r=Math.max(t.length,n.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}var Tye=he({abs_:function(t){var n=K(t,"x","abs");return n.dtype==="complex64"?_e.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):_e.runKernelFunc(function(e,r){var i=e.abs(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),Aye=he({acos_:function(t){var n=K(t,"x","acos");return _e.runKernelFunc(function(e,r){var i=e.acos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ut(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),kye=he({acosh_:function(t){var n=K(t,"x","acosh");return _e.runKernelFunc(function(e,r){var i=e.acosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),Mye=he({asin_:function(t){var n=K(t,"x","asin");return _e.runKernelFunc(function(e,r){var i=e.asin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ut(1).sub(i.toFloat().square()).sqrt())}}})}}),Rye=he({asinh_:function(t){var n=K(t,"x","asinh");return _e.runKernelFunc(function(e,r){var i=e.asinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ut(1).add(i.toFloat().square()).sqrt())}}})}}),Nye=he({atan_:function(t){var n=K(t,"x","atan");return _e.runKernelFunc(function(e,r){var i=e.atan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),Fye=he({atanh_:function(t){var n=K(t,"x","atanh");return _e.runKernelFunc(function(e,r){var i=e.atanh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(Ut(1).sub(i.toFloat().square()))}}})}}),Oye=he({ceil_:function(t){var n=K(t,"x","ceil");return _e.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),Pye=he({clipByValue_:function(t,n,e){var r=K(t,"x","clipByValue");ee(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."});var i=[r],o={min:n,max:e};return _e.runKernelFunc(function(a,s){var l=a.clip(r,n,e);return s([r]),l},{x:r},function(a,s){var l=s[0];return{x:function(){return a.where(l.greaterEqual(n).logicalAnd(l.lessEqual(e)),er(a))}}},"ClipByValue",o,i)}}),Lye=he({cos_:function(t){var n=K(t,"x","cos"),e=[n];return _e.runKernelFunc(function(r,i){var o=r.cos(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},e)}}),Bye=he({cosh_:function(t){var n=K(t,"x","cosh");return _e.runKernelFunc(function(e,r){var i=e.cosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),Vye=he({erf_:function(t){var n=K(t,"x","erf");return ee(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),_e.runKernelFunc(function(e,r){var i=e.erf(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),jye=he({exp_:function(t){var n=K(t,"x","exp");return _e.runKernelFunc(function(e,r){var i=e.exp(n);return r([i]),i},{x:n},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),Uye=he({expm1_:function(t){var n=K(t,"x","expm1");return _e.runKernelFunc(function(e,r){var i=e.expm1(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),Hye=he({floor_:function(t){var n=K(t,"x","floor");return _e.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),zye=he({log_:function(t){var n=K(t,"x","log"),e=[n];return _e.runKernelFunc(function(r,i){var o=r.log(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},e)}}),Wye=he({log1p_:function(t){var n=K(t,"x","log1p");return _e.runKernelFunc(function(e,r){var i=e.log1p(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),qye=he({logSigmoid_:function(t){var n=K(t,"x","logSigmoid");return _e.runKernelFunc(function(e,r){var i=e.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),L3=he({neg_:function(t){var n=K(t,"x","neg"),e=[n];return _e.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},e)}}),Gye=he({reciprocal_:function(t){var n=K(t,"x","reciprocal");return _e.runKernelFunc(function(e,r){var i=e.reciprocal(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),$ye=he({round_:function(t){var n=K(t,"x","round");return _e.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),_B=he({rsqrt_:function(t){var n=K(t,"x","rsqrt"),e=[n];return _e.runKernelFunc(function(r,i){var o=r.rsqrt(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),Kye=he({sigmoid_:function(t){var n=K(t,"x","sigmoid");return _e.runKernelFunc(function(e,r){var i=e.sigmoid(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(Ut(1).sub(i)))}}},"Sigmoid")}}),Yye=he({sign_:function(t){var n=K(t,"x","sign");return _e.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),Xye=he({isNaN_:function(t){var n=K(t,"x","isNaN");return _e.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),Qye=he({isInf_:function(t){var n=K(t,"x","isInf");return _e.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),Zye=he({isFinite_:function(t){var n=K(t,"x","isFinite");return _e.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return er(e)}}})}}),Jye=he({sin_:function(t){var n=K(t,"x","sin"),e=[n];return _e.runKernelFunc(function(r,i){var o=r.sin(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},e)}}),ebe=he({sinh_:function(t){var n=K(t,"x","sinh");return _e.runKernelFunc(function(e,r){var i=e.sinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),tbe=he({softplus_:function(t){var n=K(t,"x","softplus");return _e.runKernelFunc(function(e,r){var i=e.softplus(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),nbe=he({sqrt_:function(t){var n=K(t,"x","sqrt");return _e.runKernelFunc(function(e,r){var i=e.sqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),rbe=he({step_:function(t,n){n===void 0&&(n=0);var e=K(t,"x","step");return _e.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return er(r)}}})}}),ibe=he({tan_:function(t){var n=K(t,"x","tan");return _e.runKernelFunc(function(e,r){var i=e.tan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),obe=he({tanh_:function(t){var n=K(t,"x","tanh");return _e.runKernelFunc(function(e,r){var i=e.tanh(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return Ut(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}}),abe=he({addStrict_:function(t,n){var e=K(t,"a","addStrict"),r=K(n,"b","addStrict");return ur(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),sbe=he({atan2_:function(t,n){var e,r=K(t,"a","atan2"),i=K(n,"b","atan2");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape);return _e.runKernelFunc(function(a,s){var l=a.atan2(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=Po(l.square(),u.square()),d=a.mul(u.div(c)),p=Ni(l.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(l.shape)},$b:function(){var c=Po(l.square(),u.square()),d=L3(a.mul(l.div(c))),p=Ni(u.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(u.shape)}}})}}),lbe=he({divStrict_:function(t,n){var e=K(t,"a","div"),r=K(n,"b","div");return ur(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),wB=he({floorDiv_:function(t,n){var e,r=K(t,"a","floorDiv"),i=K(n,"b","floorDiv");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape);return _e.runKernelFunc(function(a,s){var l=a.floorDiv(r,i);return s([r,i]),l},{a:r,b:i},function(a,s){var l=s[0],u=s[1];return{a:function(){var c=a.div(u.toFloat()),d=Ni(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c},b:function(){var c=a.mul(l.toFloat()),d=Ni(u.shape,o);d.length>0&&(c=c.sum(d).reshape(u.shape));var p=u.square();return c.div(p.toFloat()).neg()}}},"FloorDiv")}}),B3=he({maximum_:function(t,n){var e,r=K(t,"a","maximum"),i=K(n,"b","maximum");return e=$r(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Hn(r.shape,i.shape),_e.runKernelFunc(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],l=a[1];return{a:function(){return o.mul(s.greaterEqual(l).toFloat())},b:function(){return o.mul(s.less(l).toFloat())}}},"Maximum")}}),ube=he({maximumStrict_:function(t,n){var e=K(t,"a","maximumStrict"),r=K(n,"b","maximumStrict");return ur(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),xB=he({minimum_:function(t,n){var e,r=K(t,"a","minimum"),i=K(n,"b","minimum");return e=$r(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Hn(r.shape,i.shape),_e.runKernelFunc(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],l=a[1];return{a:function(){return o.mul(s.lessEqual(l).toFloat())},b:function(){return o.mul(s.greater(l).toFloat())}}},"Minimum")}}),cbe=he({minimumStrict_:function(t,n){var e=K(t,"a","minimumStrict"),r=K(n,"b","minimumStrict");return ur(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),dbe=he({mod_:function(t,n){var e,r=K(t,"a","mod"),i=K(n,"b","mod");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape);return _e.runKernelFunc(function(a,s){var l=a.mod(r,i);return s([r,i]),l},{$a:r,$b:i},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=Ni(l.shape,o);return c.length>0?a.sum(c).reshape(l.shape):a},$b:function(){var c=a.mul(l.div(u).floor().neg()),d=Ni(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c}}})}}),pbe=he({modStrict_:function(t,n){var e=K(t,"a","modStrict"),r=K(n,"b","modStrict");return ur(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),Gr=he({mul_:function(t,n){var e,r=K(t,"a","mul"),i=K(n,"b","mul");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape);return _e.runKernelFunc(function(a,s){var l=a.multiply(r,i);return s([r,i]),l},{a:r,b:i},function(a,s){var l=s[0],u=s[1];return{a:function(){var c=a.mul(u.toFloat()),d=Ni(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c},b:function(){var c=a.mul(l.toFloat()),d=Ni(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c}}},"Mul")}}),hbe=he({mulStrict_:function(t,n){var e=K(t,"a","mul"),r=K(n,"b","mul");return ur(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),z2=he({pow_:function(t,n){var e,r=K(t,"base","pow"),i=K(n,"exp","pow");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape),a=[r,i];return _e.runKernelFunc(function(s,l){var u=s.pow(r,i);return l([r,i,u]),u},{a:r,b:i},function(s,l){var u=l[0],c=l[1],d=l[2];return{a:function(){var p=c.toFloat(),h=s.mul(p.mul(u.pow(p.sub(Ut(1))))),f=Ni(u.shape,o);return f.length>0&&(h=h.sum(f)),h.reshape(u.shape)},b:function(){var p=u.greater(0),h=u.log().where(p,er(u)),f=s.mul(d.mul(h)),m=Ni(c.shape,o);return m.length>0&&(f=f.sum(m)),f.reshape(c.shape)}}},"Pow",{},a,[!0])}}),fbe=he({powStrict_:function(t,n){return ur(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),mbe=he({squaredDifferenceStrict_:function(t,n){var e=K(t,"a","squaredDifferenceStrict"),r=K(n,"b","squaredDifferenceStrict");return ur(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),ka=he({sub_:function(t,n){var e,r=K(t,"a","sub"),i=K(n,"b","sub");e=$r(r,i),r=e[0],i=e[1];var o=Hn(r.shape,i.shape);return _e.runKernelFunc(function(a){return a.subtract(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,l=Ni(r.shape,o);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=a,l=Ni(i.shape,o);return l.length>0&&(s=s.sum(l)),s.neg().reshape(i.shape)}}},"Sub")}}),gbe=he({subStrict_:function(t,n){var e=K(t,"a","subStrict"),r=K(n,"b","subStrict");return ur(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),md=he({div_:function(t,n){var e,r=K(t,"a","div"),i=K(n,"b","div");if(e=$r(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return wB(r,i);var o={a:r,b:i};return _e.runKernelFunc(function(a,s){var l=a.realDivide(r,i);return s([r,i]),l},o,null,Q2,{})}});function V3(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=t.shape,s=e.slice();s.pop();var l=1;for(o=r;o<t.rank;++o)l*=a[o],s.push(a[o]);var u=Ta(t.shape).map(function(c){return c/l}).concat([1]).slice(0,r);return[s,i,l,u]}var qFe=Object.freeze({prepareAndValidate:V3}),j3=30;function A2(t){return t<=j3?t:O2(t,Math.floor(Math.sqrt(t)))}function CB(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var a=0;a<i;++a)if(e.shape[a]!==n.shape[a])throw new Error(o+" updates.shape["+a+"] ("+e.shape[a]+") != indices.shape["+a+"] ("+n.shape[a]+").");for(a=0;a<e.rank-i;++a)if(e.shape[a+i]!==t[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+e.shape[a+i]+") != shape["+(a+i)+"] ("+t[a+i]+")")}function IB(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}CB(e,n,t)}function Iv(t,n,e){for(var r=n.shape.length,i=r>1?n.shape[r-1]:1,o=e.length,a=1,s=i;s<o;++s)a*=e[s];var l=i<1?1:i;return{sliceRank:i,numUpdates:Nt(n.shape)/l,sliceSize:a,strides:Ta(e.slice(0,i)).concat([1]),outputSize:Nt(e)}}var GFe=Object.freeze({validateUpdateShape:CB,validateInput:IB,calculateShapes:Iv});function SB(t,n,e){ee(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),ee(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){ee(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function y3(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function J2(t,n,e){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((n[i]-t[i])/e[i]);return r}function EB(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=R2(0,o,s-1)}function DB(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?R2(0,o,s):R2(-1,o,s-1)}function U3(t,n,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(n[i]>0||e[i]!==t[i])return!1;return!0}function H3(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}var $Fe=Object.freeze({assertParamsValid:SB,maskToAxes:y3,computeOutShape:J2,startForAxis:EB,stopForAxis:DB,isSliceContinous:U3,computeFlatOffset:H3});function vbe(t,n){ee(F2(t),function(){return"The f passed in variableGrads(f) must be a function"}),ee(n==null||Array.isArray(n)&&n.every(function(c){return c instanceof zp}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var r in n=[],_e.registeredVariables)n.push(_e.registeredVariables[r]);var i=e?n.filter(function(c){return!c.trainable}):null,o=n.length;ee((n=n.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=_e.gradients(t,n,null,!0),s=a.value,l=a.grads;ee(l.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ee(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var u={};return n.forEach(function(c,d){l[d]!=null&&(u[c.name]=l[d])}),i?.forEach(function(c){return u[c.name]=null}),{value:s,grads:u}}function ew(t){return _e.customGrad(t)}var Av=he({softmax_:function(t,n){n===void 0&&(n=-1);var e=K(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return _e.runKernelFunc(function(r,i){var o=r.softmax(e,n);return i([o]),o},{logits:e},function(r,i){var o=i[0],a=r.mul(o);return{logits:function(){return a.sub(a.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),ybe=he({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=K(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return ew(function(r,i){var o=r.max(n,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(l,u){var c=u[0].exp();return l.sub(l.sum(n,!0).mul(c))}}})(e)}}),el=he({transpose_:function(t,n){var e=K(t,"x","transpose");if(n==null&&(n=e.shape.map(function(i,o){return o}).reverse()),ee(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(i){ee(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1)return e.clone();var r={perm:n};return _e.runKernelFunc(function(i){return i.transpose(e,n)},{x:e},null,"Transpose",r)}}),TB=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),AB=function(){function t(){}return t.prototype.time=function(n){return Fe("time")},t.prototype.read=function(n){return Fe("read")},t.prototype.readSync=function(n){return Fe("readSync")},t.prototype.numDataIds=function(){return Fe("numDataIds")},t.prototype.disposeData=function(n){return Fe("disposeData")},t.prototype.write=function(n,e,r){return Fe("write")},t.prototype.move=function(n,e,r,i){return Fe("move")},t.prototype.memory=function(){return Fe("memory")},t.prototype.floatPrecision=function(){return Fe("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,i){return Fe("batchMatMul")},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,Fe("fusedBatchMatMul")},t.prototype.slice=function(n,e,r){return Fe("slice")},t.prototype.stridedSlice=function(n,e,r,i){return Fe("stridedSlice")},t.prototype.unstack=function(n,e){return Fe("unstack")},t.prototype.reverse=function(n,e){return Fe("reverse")},t.prototype.concat=function(n,e){return Fe("concat")},t.prototype.neg=function(n){return Fe("neg")},t.prototype.add=function(n,e){return Fe("add")},t.prototype.addN=function(n){return Fe("addN")},t.prototype.subtract=function(n,e){return Fe("subtract")},t.prototype.multiply=function(n,e){return Fe("multiply")},t.prototype.realDivide=function(n,e){return Fe("realDivide")},t.prototype.floorDiv=function(n,e){return Fe("floorDiv")},t.prototype.sum=function(n,e){return Fe("sum")},t.prototype.prod=function(n,e){return Fe("prod")},t.prototype.unsortedSegmentSum=function(n,e,r){return Fe("unsortedSegmentSum")},t.prototype.argMin=function(n,e){return Fe("argMin")},t.prototype.argMax=function(n,e){return Fe("argMax")},t.prototype.equal=function(n,e){return Fe("equal")},t.prototype.notEqual=function(n,e){return Fe("notEqual")},t.prototype.less=function(n,e){return Fe("less")},t.prototype.lessEqual=function(n,e){return Fe("lessEqual")},t.prototype.greater=function(n,e){return Fe("greater")},t.prototype.greaterEqual=function(n,e){return Fe("greaterEqual")},t.prototype.logicalNot=function(n){return Fe("logicalNot")},t.prototype.logicalAnd=function(n,e){return Fe("logicalAnd")},t.prototype.logicalOr=function(n,e){return Fe("logicalOr")},t.prototype.where=function(n){return Fe("where")},t.prototype.select=function(n,e,r){return Fe("select")},t.prototype.topk=function(n,e,r){return Fe("topk")},t.prototype.min=function(n,e){return Fe("min")},t.prototype.minimum=function(n,e){return Fe("minimum")},t.prototype.mod=function(n,e){return Fe("mod")},t.prototype.max=function(n,e){return Fe("max")},t.prototype.maximum=function(n,e){return Fe("maximum")},t.prototype.all=function(n,e){return Fe("all")},t.prototype.any=function(n,e){return Fe("any")},t.prototype.squaredDifference=function(n,e){return Fe("squaredDifference")},t.prototype.ceil=function(n){return Fe("ceil")},t.prototype.floor=function(n){return Fe("floor")},t.prototype.round=function(n){return Fe("round")},t.prototype.sign=function(n){return Fe("sign")},t.prototype.isNaN=function(n){return Fe("isNaN")},t.prototype.isInf=function(n){return Fe("isInf")},t.prototype.isFinite=function(n){return Fe("isFinite")},t.prototype.pow=function(n,e){return Fe("pow")},t.prototype.exp=function(n){return Fe("exp")},t.prototype.expm1=function(n){return Fe("expm1")},t.prototype.softmax=function(n,e){return Fe("softmax")},t.prototype.log=function(n){return Fe("log")},t.prototype.log1p=function(n){return Fe("log1p")},t.prototype.sqrt=function(n){return Fe("sqrt")},t.prototype.rsqrt=function(n){return Fe("rsqrt")},t.prototype.square=function(n){return Fe("square")},t.prototype.reciprocal=function(n){return Fe("reciprocal")},t.prototype.relu=function(n){return Fe("relu")},t.prototype.relu6=function(n){return Fe("relu6")},t.prototype.prelu=function(n,e){return Fe("prelu")},t.prototype.elu=function(n){return Fe("elu")},t.prototype.eluDer=function(n,e){return Fe("eluDer")},t.prototype.selu=function(n){return Fe("selu")},t.prototype.int=function(n){return Fe("int")},t.prototype.clip=function(n,e,r){return Fe("clip")},t.prototype.abs=function(n){return Fe("abs")},t.prototype.complexAbs=function(n){return Fe("complexAbs")},t.prototype.sigmoid=function(n){return Fe("sigmoid")},t.prototype.softplus=function(n){return Fe("softplus")},t.prototype.sin=function(n){return Fe("sin")},t.prototype.cos=function(n){return Fe("cos")},t.prototype.tan=function(n){return Fe("tan")},t.prototype.asin=function(n){return Fe("asin")},t.prototype.acos=function(n){return Fe("acos")},t.prototype.atan=function(n){return Fe("atan")},t.prototype.atan2=function(n,e){return Fe("atan2")},t.prototype.sinh=function(n){return Fe("sinh")},t.prototype.cosh=function(n){return Fe("cosh")},t.prototype.tanh=function(n){return Fe("tanh")},t.prototype.asinh=function(n){return Fe("asinh")},t.prototype.acosh=function(n){return Fe("acosh")},t.prototype.atanh=function(n){return Fe("atanh")},t.prototype.erf=function(n){return Fe("erf")},t.prototype.step=function(n,e){return Fe("step")},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,Fe("fusedConv2d")},t.prototype.conv2d=function(n,e,r){return Fe("conv2d")},t.prototype.conv2dDerInput=function(n,e,r){return Fe("conv2dDerInput")},t.prototype.conv2dDerFilter=function(n,e,r){return Fe("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,Fe("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(n,e,r){return Fe("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return Fe("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return Fe("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(n,e,r){return Fe("conv3d")},t.prototype.conv3dDerInput=function(n,e,r){return Fe("conv3dDerInput")},t.prototype.conv3dDerFilter=function(n,e,r){return Fe("conv3dDerFilter")},t.prototype.maxPool=function(n,e){return Fe("maxPool")},t.prototype.maxPoolBackprop=function(n,e,r,i){return Fe("maxPoolBackprop")},t.prototype.avgPool=function(n,e){return Fe("avgPool")},t.prototype.avgPoolBackprop=function(n,e,r){return Fe("avgPoolBackprop")},t.prototype.avgPool3d=function(n,e){return Fe("avgPool3d")},t.prototype.avgPool3dBackprop=function(n,e,r){return Fe("avgPool3dBackprop")},t.prototype.maxPool3d=function(n,e){return Fe("maxPool3d")},t.prototype.maxPool3dBackprop=function(n,e,r,i){return Fe("maxPool3dBackprop")},t.prototype.reshape=function(n,e){return Fe("reshape")},t.prototype.cast=function(n,e){return Fe("cast")},t.prototype.tile=function(n,e){return Fe("tile")},t.prototype.pad=function(n,e,r){return Fe("pad")},t.prototype.transpose=function(n,e){return Fe("transpose")},t.prototype.gather=function(n,e,r){return Fe("gather")},t.prototype.gatherND=function(n,e){return Fe("gatherND")},t.prototype.scatterND=function(n,e,r){return Fe("scatterND")},t.prototype.batchToSpaceND=function(n,e,r){return Fe("batchToSpaceND")},t.prototype.spaceToBatchND=function(n,e,r){return Fe("spaceToBatchND")},t.prototype.resizeBilinear=function(n,e,r,i){return Fe("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(n,e,r){return Fe("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(n,e,r,i){return Fe("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return Fe("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(n,e,r,i,o,a){return Fe("batchNormalization")},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){return Fe("localResponseNormalization4D")},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){return Fe("LRNGrad")},t.prototype.multinomial=function(n,e,r,i){return Fe("multinomial")},t.prototype.oneHot=function(n,e,r,i){return Fe("oneHot")},t.prototype.cumsum=function(n,e,r,i){return Fe("cumsum")},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return Fe("nonMaxSuppression")},t.prototype.fft=function(n){return Fe("fft")},t.prototype.ifft=function(n){return Fe("ifft")},t.prototype.complex=function(n,e){return Fe("complex")},t.prototype.real=function(n){return Fe("real")},t.prototype.imag=function(n){return Fe("imag")},t.prototype.cropAndResize=function(n,e,r,i,o,a){return Fe("cropAndResize")},t.prototype.depthToSpace=function(n,e,r){return Fe("depthToSpace")},t.prototype.split=function(n,e,r){return Fe("split")},t.prototype.sparseToDense=function(n,e,r,i){return Fe("sparseToDense")},t.prototype.diag=function(n){return Fe("diag")},t.prototype.fill=function(n,e,r){return Fe("fill")},t.prototype.onesLike=function(n){return Fe("onesLike")},t.prototype.zerosLike=function(n){return Fe("zerosLike")},t.prototype.linspace=function(n,e,r){return Fe("linspace")},t.prototype.dispose=function(){return Fe("dispose")},t}();function Fe(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function gd(t,n,e,r,i,o,a){a===void 0&&(a="channelsLast");var s,l=W2(n),u=l[0],c=l[1];if(a==="channelsLast")s=[u,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[u,c,t[1],t[1]]}return bd(t,s,e,r,i,o,!1,a)}function Sv(t,n,e,r,i,o,a){a===void 0&&(a="NDHWC");var s,l,u=b3(n),c=u[0],d=u[1],p=u[2];if(a==="NDHWC")l="channelsLast",s=[c,d,p,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);l="channelsFirst",s=[c,d,p,t[1],t[1]]}return Ev(t,s,e,r,i,!1,l,o)}function bd(t,n,e,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],p=l[3];if(s==="channelsLast")u=t[0],c=t[1],d=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);u=t[0],p=t[1],c=t[2],d=t[3]}var h,f=n[0],m=n[1],g=n[3],y=W2(e),b=y[0],w=y[1],x=W2(r),I=x[0],D=x[1],A=nm(f,I),E=nm(m,D),R=function(V,X,Y,Q,G,re,ue,Te){var F,q,Z;if(typeof V=="number"){F={top:V,bottom:V,left:V,right:V,type:V===0?"VALID":"NUMBER"};var ae=function(Pe,Ge,qe,ht,ke){ht==null&&(ht=z3(Pe,Ge,qe));var se=Pe[0],zt=Pe[1],gt=gv((se-Ge+2*ht)/qe+1,ke);ee(Zr(gt),function(){return"The output # of rows ("+gt+") must be an integer. Change the stride and/or zero pad parameters"});var Xe=gv((zt-Ge+2*ht)/qe+1,ke);return ee(Zr(Xe),function(){return"The output # of columns ("+Xe+") must be an integer. Change the stride and/or zero pad parameters"}),[gt,Xe]}([X,Y],re,Q,V,Te);q=ae[0],Z=ae[1]}else if(V==="same"){q=Math.ceil(X/Q),Z=Math.ceil(Y/G);var pe=Math.max(0,(q-1)*Q+re-X),fe=Math.max(0,(Z-1)*G+ue-Y),me=Math.floor(pe/2),xe=pe-me,je=Math.floor(fe/2);F={top:me,bottom:xe,left:je,right:fe-je,type:"SAME"}}else{if(V!=="valid")throw Error("Unknown padding parameter: "+V);F={top:0,bottom:0,left:0,right:0,type:"VALID"},q=Math.ceil((X-re+1)/Q),Z=Math.ceil((Y-ue+1)/G)}return{padInfo:F,outHeight:q,outWidth:Z}}(i,c,d,b,w,A,E,o),N=R.padInfo,T=R.outHeight,M=R.outWidth,H=a?g*p:g;return s==="channelsFirst"?h=[u,H,T,M]:s==="channelsLast"&&(h=[u,T,M,H]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:p,outHeight:T,outWidth:M,outChannels:H,padInfo:N,strideHeight:b,strideWidth:w,filterHeight:f,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:E,dilationHeight:I,dilationWidth:D,inShape:t,outShape:h,filterShape:n}}function Ev(t,n,e,r,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],p=l[3],h=l[4];if(a==="channelsLast")u=t[0],c=t[1],d=t[2],p=t[3],h=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);u=t[0],h=t[1],c=t[2],d=t[3],p=t[4]}var f,m=n[0],g=n[1],y=n[2],b=n[4],w=b3(e),x=w[0],I=w[1],D=w[2],A=b3(r),E=A[0],R=A[1],N=A[2],T=nm(m,E),M=nm(g,R),H=nm(y,N),V=function(ue,Te,F,q,Z,ae,pe,fe,me,xe,je){var Pe,Ge,qe,ht;if(typeof ue=="number"){Pe={top:ue,bottom:ue,left:ue,right:ue,front:ue,back:ue,type:ue===0?"VALID":"NUMBER"};var ke=function(qt,Xt,vn,hn,On,Zt){On==null&&(On=z3(qt,Xt,hn));var Pn=qt[0],_t=qt[1],$i=qt[2],Wn=gv((Pn-Xt+2*On)/hn+1,Zt);ee(Zr(Wn),function(){return"The output # of depths ("+Wn+") must be an integer. Change the stride and/or zero pad parameters"});var Wo=gv((_t-Xt+2*On)/hn+1,Zt);ee(Zr(Wo),function(){return"The output # of rows ("+Wo+") must be an integer. Change the stride and/or zero pad parameters"});var or=gv(($i-Xt+2*On)/hn+1,Zt);return ee(Zr(or),function(){return"The output # of columns ("+or+") must be an integer. Change the stride and/or zero pad parameters"}),[Wn,Wo,or,vn]}([Te,F,q,1],fe,1,Z,ue,je);Ge=ke[0],qe=ke[1],ht=ke[2]}else if(ue==="same"){Ge=Math.ceil(Te/Z),qe=Math.ceil(F/ae),ht=Math.ceil(q/pe);var se=(Ge-1)*Z+fe-Te,zt=(qe-1)*ae+me-F,gt=(ht-1)*pe+xe-q,Xe=Math.floor(se/2),at=se-Xe,ut=Math.floor(zt/2),lt=zt-ut,Tt=Math.floor(gt/2);Pe={top:ut,bottom:lt,left:Tt,right:gt-Tt,front:Xe,back:at,type:"SAME"}}else{if(ue!=="valid")throw Error("Unknown padding parameter: "+ue);Pe={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ge=Math.ceil((Te-fe+1)/Z),qe=Math.ceil((F-me+1)/ae),ht=Math.ceil((q-xe+1)/pe)}return{padInfo:Pe,outDepth:Ge,outHeight:qe,outWidth:ht}}(i,c,d,p,x,I,D,T,M,H,s),X=V.padInfo,Y=V.outDepth,Q=V.outHeight,G=V.outWidth,re=o?b*h:b;return a==="channelsFirst"?f=[u,re,Y,Q,G]:a==="channelsLast"&&(f=[u,Y,Q,G,re]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:d,inWidth:p,inChannels:h,outDepth:Y,outHeight:Q,outWidth:G,outChannels:re,padInfo:X,strideDepth:x,strideHeight:I,strideWidth:D,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:T,effectiveFilterHeight:M,effectiveFilterWidth:H,dilationDepth:E,dilationHeight:R,dilationWidth:N,inShape:t,outShape:f,filterShape:n}}function z3(t,n,e,r){r===void 0&&(r=1);var i=nm(n,r);return Math.floor((t[0]*(e-1)-e+i)/2)}function W2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function b3(t){return typeof t=="number"?[t,t,t]:t}function nm(t,n){return n<=1?t:t+(t-1)*(n-1)}function gv(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function qp(t){var n=W2(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function Lo(t,n){return qp(t)||qp(n)}function tw(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function W3(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=pi(t.shape),i=t.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!I7(t.dtype,n))return _e.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var a=e.real(t);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var s=Ut(0,t.dtype);return o=e.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function q2(t,n){return _e.makeTensorFromDataId(t.dataId,n,t.dtype)}function q3(t,n,e){var r=(n-t)/(e-1),i=lm(e,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return oa(i,"float32")}var KFe=Object.freeze({castTensor:W3,reshapeTensor:q2,linspaceImpl:q3,upcastType:ao,axesAreInnerMostDims:O3,combineLocations:oB,computeOutAndReduceShapes:wo,expandShapeToKeepDim:ia,assertAxesAreInnerMostDims:Ea,getAxesPermutation:nl,getUndoAxesPermutation:X2,getInnerMostAxes:rl,getBroadcastDims:Xu,getReductionAxes:Ni,assertAndGetBroadcastShape:Hn,assertParamsConsistent:aB,computeOutShape:Wp,computePool2DInfo:gd,computePool3DInfo:Sv,computeConv2DInfo:bd,computeConv3DInfo:Ev,computeDefaultPad:z3,tupleValuesAreOne:qp,eitherStridesOrDilationsAreOne:Lo,convertConv2DDataFormat:tw,PARALLELIZE_THRESHOLD:j3,computeOptimalWindowSize:A2});function _3(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function L8(t,n){return{real:t[2*n],imag:t[2*n+1]}}function bbe(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function _be(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function wbe(t,n,e){var r=function(o,a,s){return function(l,u,c){for(var d=0,p=l.length,h=0,f=!1;d<p;){var m=c(u,l[h=d+(p-d>>>1)]);m>0?d=h+1:(p=h,f=!m)}return f?d:-d-1}(o,a,s||xbe)}(t,n,e),i=r<0?-(r+1):r;t.splice(i,0,n)}function xbe(t,n){return t>n?1:t<n?-1:0}function G3(t,n,e,r,i){return kB(t,n,e,r,i,0).selectedIndices}function $3(t,n,e,r,i,o){var a=kB(t,n,e,r,i,o,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function kB(t,n,e,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s=!1);for(var l=Array.from(n).map(function(x,I){return{score:x,boxIndex:I,suppressBeginIndex:0}}).filter(function(x){return x.score>i}).sort(B8),u=o>0?-.5/o:0,c=[],d=[];c.length<e&&l.length>0;){var p=l.pop(),h=p.score,f=p.boxIndex,m=p.suppressBeginIndex;if(h<i)break;for(var g=!1,y=c.length-1;y>=m;--y){var b=Cbe(t,f,c[y]);if(b>=r){g=!0;break}if(p.score=p.score*Ibe(r,u,b),p.score<=i)break}p.suppressBeginIndex=c.length,g||(p.score===h?(c.push(f),d.push(p.score)):p.score>i&&wbe(l,p,B8))}var w=c.length;return s&&(c.fill(0,w),d.fill(0,w)),{selectedIndices:oa(c,"int32"),selectedScores:oa(d,"float32"),numValidOutputs:Ut(w,"int32")}}function Cbe(t,n,e){var r=t.subarray(4*n,4*n+4),i=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(s-o)*(l-a),f=(d-u)*(p-c);if(h<=0||f<=0)return 0;var m=Math.max(o,u),g=Math.max(a,c),y=Math.min(s,d),b=Math.min(l,p),w=Math.max(y-m,0)*Math.max(b-g,0);return w/(h+f-w)}function Ibe(t,n,e){var r=Math.exp(n*e*e);return e<=t?r:0}function B8(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function MB(t,n,e){var r=new Array(t.rank).fill(0),i=t.shape.slice();return n.map(function(o){i[e]=o;var a=t.slice(r,i);return r[e]+=o,a})}function RB(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var i=gn(e,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=o[s]%t.shape[s];var l=t.locToIndex(a);i.values[r]=t.values[l]}return i.toTensor()}function NB(t,n,e,r,i){for(var o=n[n.length-1],a=[t.length/o,o],s=a[0],l=a[1],u=Hp(e,s*r),c=Hp("int32",s*r),d=0;d<s;d++){for(var p=d*l,h=t.subarray(p,p+l),f=[],m=0;m<h.length;m++)f.push({value:h[m],index:m});f.sort(function(x,I){return I.value-x.value});var g=d*r,y=u.subarray(g,g+r),b=c.subarray(g,g+r);for(m=0;m<r;m++)y[m]=f[m].value,b[m]=f[m].index}var w=n.slice();return w[w.length-1]=r,[so(u,w,e),so(c,w,"int32")]}function K3(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var i=gn(t,"int32"),o=gn([e.length,t.length],"int32");for(r=0;r<e.length;r++){var a=i.indexToLoc(e[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var Sbe=function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},Ebe=function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Dbe=function(t,n,e){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",l=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function FB(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function Da(t,n){return n===1?[t]:FB(t,n)}function Fo(){var t,n,e,r,i,o,a,s,l,u;return ze().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Vp(t,n,e){e===void 0&&(e="index");var r=Ta(n);return r.map(function(i,o){return"int "+t[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function Y3(t){var n=Ta(t).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var OB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Tbe(t,n,e,r){var i=[];t.forEach(function(h){var f=Nt(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?i.push("uniform float "+h.name+(f>1?"["+f+"]":"")+";"):(i.push("uniform sampler2D "+h.name+";"),i.push("uniform int offset"+h.name+";"))});var o,a,s=i.join(`
`),l=t.map(function(h){return function(f,m,g){g===void 0&&(g=!1);var y="";y+=g?PB(f):Zf(f);var b=f.shapeInfo.logicalShape,w=m.logicalShape;return b.length<=w.length&&(y+=g?function(x,I){var D,A=x.name,E=A.charAt(0).toUpperCase()+A.slice(1),R="get"+E+"AtOutCoords",N=x.shapeInfo.logicalShape.length,T=I.logicalShape.length,M=Xu(x.shapeInfo.logicalShape,I.logicalShape),H=Br(T),V=T-N,X=["x","y","z","w","u","v"];D=N===0?"":T<2&&M.length>=1?"coords = 0;":M.map(function(F){return"coords."+X[F+V]+" = 0;"}).join(`
`);var Y="";Y=T<2&&N>0?"coords":x.shapeInfo.logicalShape.map(function(F,q){return"coords."+X[q+V]}).join(", ");var Q="return outputValue;",G=Nt(x.shapeInfo.logicalShape)===1,re=Nt(I.logicalShape)===1;if(N!==1||G||re){if(G&&!re)Q=T===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(M.length){var ue=N-2,Te=N-1;M.indexOf(ue)>-1&&M.indexOf(Te)>-1?Q="return vec4(outputValue.x);":M.indexOf(ue)>-1?Q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":M.indexOf(Te)>-1&&(Q="return vec4(outputValue.xx, outputValue.zz);")}}else Q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+R+`() {
      `+H+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+E+"("+Y+`);
      `+Q+`
    }
  `}(f,m):function(x,I){var D=x.name,A=D.charAt(0).toUpperCase()+D.slice(1),E="get"+A+"AtOutCoords",R=I.texShape,N=x.shapeInfo.texShape,T=x.shapeInfo.logicalShape.length,M=I.logicalShape.length;if(!x.shapeInfo.isUniform&&T===M&&x.shapeInfo.flatOffset==null&&Fi(N,R))return`
      float `+E+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var H,V=Br(M),X=Xu(x.shapeInfo.logicalShape,I.logicalShape),Y=M-T,Q=["x","y","z","w","u","v"];H=T===0?"":M<2&&X.length>=1?"coords = 0;":X.map(function(re){return"coords."+Q[re+Y]+" = 0;"}).join(`
`);var G="";return G=M<2&&T>0?"coords":x.shapeInfo.logicalShape.map(function(re,ue){return"coords."+Q[ue+Y]}).join(", "),`
    float `+E+`() {
      `+V+` coords = getOutputCoords();
      `+H+`
      return get`+A+"("+G+`);
    }
  `}(f,m)),y}(h,n,r)}).join(`
`),u=n.texShape,c=Fo(),d=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),p=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Abe+`
    `+kbe+`
    `+Mbe+`
  `}(c);return n.isPacked?(o=function(h,f){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(x,I){var D=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,f);case 2:return function(x,I){var D=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)];if(Fi(x,I))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var A=Math.ceil(x[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+A+`);
      int c = imod(index, `+A+`) * 2;

      return ivec2(r, c);
    }
  `}(h,f);case 3:return m=h,g=f,y=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],b=Math.ceil(m[2]/2),w=b*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+w+`;
      index -= b * `+w+`;

      int r = 2 * (index / `+b+`);
      int c = imod(index, `+b+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(x,I){for(var D=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)],A=Math.ceil(x[x.length-1]/2),E=A*Math.ceil(x[x.length-2]/2),R=E,N="",T="b, r, c",M=2;M<x.length-1;M++)R*=x[x.length-M-1],N=`
      int b`+M+" = index / "+R+`;
      index -= b`+M+" * "+R+`;
    `+N,T="b"+M+", "+T;return`
    ivec`+x.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+N+`

      int b = index / `+E+`;
      index -= b * `+E+`;

      int r = 2 * (index / `+A+`);
      int c = imod(index, `+A+`) * 2;

      return ivec`+x.length+"("+T+`);
    }
  `}(h,f)}var m,g,y,b,w}(n.logicalShape,u),a=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(o=function(h,f){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,b){return b[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+b[1]+`.0);
      }
    `:b[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+b[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      return resTexRC.x * `+b[1]+` + resTexRC.y;
    }
  `}(0,f);case 2:return function(y,b){return Fi(y,b)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+b[0]+", "+b[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(h,f);case 3:return m=f,g=Vp(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,b){var w=Vp(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      `+w+`
      return ivec4(r, c, d, d2);
    }
  `}(h,f);case 5:return function(y,b){var w=Vp(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+b[0]+`,
                             `+b[1]+`));

      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+w+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,f);case 6:return function(y,b){var w=Vp(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+w+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,f);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,g}(n.logicalShape,u),a=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(p+=Rbe),[p,d,a,s,o,l,e].join(`
`)}function Zf(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=e.shapeInfo.texShape,u=l[0],c=l[1],d=Op(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+u+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Yf(e)+`
      }
    `;var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=Op(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+l+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=e.shapeInfo.texShape;if(a!=null&&Fi(r,a)){var s=a[0],l=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var u=cd(r),c=u.newShape,d=u.keptDims,p=c;if(p.length<r.length){var h=Jf(e,p);return`
      `+Zf(h)+`
      float `+o+`(int row, int col) {
        return `+o+"("+em(["row","col"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Yf(e)+`
      }
    `;var f=a[0],m=a[1],g=Op(i);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+f+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:f===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+f+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[1]*r[2],s=r[2],l=cd(r),u=l.newShape,c=l.keptDims,d=u;if(d.length<r.length){var p=Jf(e,d);return`
        `+Zf(p)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+em(["row","col","depth"],c)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+Yf(e)+`
      }
    `;var h=e.shapeInfo.texShape,f=h[0],m=h[1],g=e.shapeInfo.flatOffset;if(m===a&&g==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+f+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+f+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var y=Op(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+f+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[3],s=r[2]*a,l=r[1]*s,u=cd(r),c=u.newShape,d=u.keptDims;if(c.length<r.length){var p=Jf(e,c);return`
      `+Zf(p)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+em(["row","col","depth","depth2"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+s+", "+a+`, 1)));
        `+Yf(e)+`
      }
    `;var h=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,m=f[0],g=f[1];if(g===l&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Op(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+y+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[4],s=r[3]*a,l=r[2]*s,u=r[1]*l,c=cd(r),d=c.newShape,p=c.keptDims;if(d.length<r.length){var h=Jf(e,d);return`
      `+Zf(h)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+em(["row","col","depth","depth2","depth3"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+u+", "+l+", "+s+", "+a+`)) +
          depth3;
        `+Yf(e)+`
      }
    `;var f=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,g=m[0],y=m[1];if(y===u&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===a&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var b=Op(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+l+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+b+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=cd(r),s=a.newShape,l=a.keptDims;if(s.length<r.length){var u=Jf(e,s);return`
      `+Zf(u)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+em(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var c=r[5],d=r[4]*c,p=r[3]*d,h=r[2]*p,f=r[1]*h;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+h+", "+p+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Yf(e)+`
      }
    `;var m=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,y=g[0],b=g[1];if(b===f&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+p+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(b===c&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var w=Op(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+h+" + depth * "+p+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+w+`;
      vec2 uv = uvFromFlat(`+y+", "+b+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function PB(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Fo(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Fo();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+u.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),l=i.shapeInfo.texShape,u=l[0],c=l[1],d=Fo();if(l!=null&&Fi(o,l))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);

        return `+d.texture2D+"("+a+`, uv);
      }
    `;var p=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],h=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+p[0]+", "+p[1]+`, row, col);
      return `+d.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),l=i.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(o[0]===1){var c=o.slice(1),d=Jf(i,c);return`
        `+PB(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+em(["b","row","col"],[1,2])+`);
        }
      `}var p=u[0],h=u[1],f=Math.ceil(o[2]/2),m=f*Math.ceil(o[1]/2),g=Fo();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+p+", "+h+", "+m+", "+f+`, b, row, col);
      return `+g.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=c[0],p=c[1],h=Math.ceil(o[a-1]/2),f=h*Math.ceil(o[a-2]/2),m="int b, int row, int col",g="b * "+f+" + (row / 2) * "+h+" + (col / 2)",y=2;y<a-1;y++)m="int b"+y+", "+m,f*=o[a-y-1],g="b"+y+" * "+f+" + "+g;var b=Fo();return`
    vec4 `+l+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+p+`;
      int texC = index - texR * `+p+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+", "+d+`);
      return `+b.texture2D+"("+s+`, uv);
    }
  `}(t)}}var Abe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kbe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Mbe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Rbe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Op(t){return"offset"+t}function Yf(t){var n=t.name,e=Nt(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Br(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Jf(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function em(t,n){return n.map(function(e){return t[e]}).join(", ")}var Nbe=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ee(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,l=this.outputShape,u=l.length,c=Br(u),d=Da("coords",u);if(o===1){var p=Br(s=u+1);a=`
        `+p+" sourceLocR = "+p+"("+d.join()+`, 0);
        ++`+d[u-1]+`;
        `+p+" sourceLocG = "+p+"("+d.join()+`, 0);
        ++`+d[u-2]+`;
        `+p+" sourceLocA = "+p+"("+d.join()+`, 0);
        --`+d[u-1]+`;
        `+p+" sourceLocB = "+p+"("+d.join()+`, 0);
        --`+d[u-2]+";"}else s=u,a=`
        `+c+` sourceLocR = coords;
        ++`+d[u-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[u-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[u-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[u-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),f="."+h[s-1],m=h.map(function(E){return"int "+E}),g=Da("sourceLocR",s-1).concat("inIdx.r"),y=Da("sourceLocG",s-1).concat("inIdx.g"),b=Da("sourceLocB",s-1).concat("inIdx.b"),w=Da("sourceLocA",s-1).concat("inIdx.a"),x=e==="max"?"greaterThan":"lessThan",I=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",D=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+b.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",A=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+A+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[u-1]+" < "+(l[u-1]-1)+`;
        bool hasNextRow = `+d[u-2]+" < "+(l[u-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+f+", sourceLocG"+f+`,
          sourceLocB`+f+", sourceLocA"+f+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+I+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+x+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Fbe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=s-1-t.padInfo.top,c=l-1-t.padInfo.left,d=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},Obe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=c-1-t.padInfo.front,f=d-1-t.padInfo.top,m=p-1-t.padInfo.left,g=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+f+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+p+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Pbe=function(t,n,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Hn(t,n),Hn(t,e);var a="0.0";r!=null&&(Hn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Hn(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Lbe=function(t,n,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Hn(t,n),Hn(t,e);var a="vec4(0.0)";r!=null&&(Hn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Hn(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Bbe="return areal * breal - aimag * bimag;",Vbe="return areal * bimag + aimag * breal;",V8=function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Hn(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},qT="return a + b;",GT="return a - b;",j8="return a * b;",jbe=`
if (a == b) {
  return 1.0;
};
return a / b;`,LB="return (a < 0.) ? b * a : a;",di=function(t,n,e){this.variableNames=["A","B"],this.outputShape=Hn(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Ube=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,BB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Zl=function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Hn(n,e);var i=this.outputShape.length,o="";if(r)if(i===0||Nt(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Br(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=Da("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},Hbe=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),zbe=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),Wbe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},qbe=function(t){this.outputShape=[],this.outputShape=Wp(t,1),this.variableNames=t.map(function(s,l){return"T"+l});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Gbe=function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Wp(t,n);var e=this.outputShape,r=e.length,i=Br(r),o=Da("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(g,y){return"T"+y});var s=new Array(t.length-1);s[0]=t[0][n];for(var l=1;l<s.length;l++)s[l]=s[l-1]+t[l][n];var u=a[n],c=a.slice(-2),d=a.join(),p="if ("+u+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(l=1;l<s.length;l++){var h=s[l-1];p+=`
        if (`+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+`) {
          return getChannel(
            getT`+l+"("+g2(a,u,h)+`),
            vec2(`+g2(c,u,h)+`));
        }`}var f=s.length,m=s[s.length-1];p+=`
        return getChannel(
          getT`+f+"("+g2(a,u,m)+`),
          vec2(`+g2(c,u,m)+"));",this.userCode=`
      float getValue(`+a.map(function(g){return"int "+g})+`) {
        `+p+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function g2(t,n,e){var r=t.indexOf(n);return t.map(function(i,o){return o===r?i+" - "+e:i}).join()}var $be=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Kbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,s=e-1-t.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+u+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Ybe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Xbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=n-1-t.padInfo.front,l=e-1-t.padInfo.top,u=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+l+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Qbe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Zbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,a=e-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},U8=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),h=t.inChannels%4,f=t.dataFormat==="channelsLast",m=f?1:2,g=f?2:3,y=f?3:1,b="",w="";e&&(b=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,w="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+p+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+f+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+f+`) {
                dotProd +=
                    getX(batch, xR, xC, `+p+`) *
                    getW(wR, wC, `+p+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+p+`, xR, xC) *
                    getW(wR, wC, `+p+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2)
              );

              if (`+f+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2),
                getW(wR, wC, `+p+` + 2, d2)
              );

              if (`+f+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1),
                  getX(batch, xR, xC, `+p+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC),
                  getX(batch, `+p+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+x+`
        `+w+`
        setOutput(result);
      }
    `},Jbe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(f===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(f===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(f===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},H8=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,h=t.filterWidth,f=t.outChannels/t.inChannels,m="",g="";e&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,g="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+f+`;
        int q = d2 - d1 * `+f+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+p+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+g+`
        setOutput(result);
      }
    `},z8=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,h=t.filterWidth,f=h,m="int xR; int xC; int xCOffset;",g=0;g<p;g++)for(var y=0;y<h;y++)m+=`
          vec4 xTexelR`+g+"C"+2*y+` = vec4(0.);
          vec4 wR`+g+"C"+y+` = vec4(0.);
          vec4 xR`+g+"C"+y+" = vec4(0.);";for(g=0;g<p;g++)for(var b=0;b<f;b++){if(m+=`
          xR = xRCorner + `+g*c+`;
          xC = xCCorner + `+(y=2*b)*d+`;
        `,u===1){if(y<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+g+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+y+" = vec4(previous.zw, xTexelR"+g+"C"+y+`.xy);
                } else {
                  xR`+g+"C"+y+" = vec4(0, 0, xTexelR"+g+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xR`+g+"C"+y+" = xTexelR"+g+"C"+y+`;
              `,y+1<h)){var w=s%2==0?D3(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+w+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+y+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+w+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(y+1)+" = xTexelR"+g+"C"+(y+2)+`;
                `}}else y<h&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
              `,y+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+u+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(y+1)+" = vec4(xTexelR"+g+"C"+(y+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".xy, xTexelR"+g+"C"+(y+2)+`.xy);
              `,y+1<h&&(m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
                `)),m+="}");y<h&&(m+=`
            vec4 wTexelR`+g+"C"+y+" = getW("+g+", "+y+`, d1, q);
            wR`+g+"C"+y+" = vec4(wTexelR"+g+"C"+y+".xz, wTexelR"+g+"C"+y+`.xz);
          `,y+1<h&&(m+=`
              vec4 wTexelR`+g+"C"+(y+1)+" = getW("+g+", "+(y+1)+`, d1, q);
              wR`+g+"C"+(y+1)+` =
                vec4(wTexelR`+g+"C"+(y+1)+".xz, wTexelR"+g+"C"+(y+1)+".xz);"))}for(g=0;g<p;g++)for(y=0;y<h;y++)m+="dotProd += xR"+g+"C"+y+" * wR"+g+"C"+y+";";var x="",I="";e&&(x=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,I="result = activation(result);");var D=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+D+`
        `+I+`
        setOutput(result);
      }
    `},e_e=function(t,n,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],l=t[3],u=n[0],c=e[0],d=e[1];this.outputShape=[u,c,d,l];var p=r==="bilinear"?1:0,h=[a-1+".0",s-1+".0"],f=h[0],m=h[1],g=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],y=g[0],b=g[1],w=g[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],I=x[0],D=x[1],A=x[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+I+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+b+`;
        float width_scale = `+D+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+f+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+A+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},t_e=function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Br(r)+` coords = getOutputCoords();
        int end = `+W8(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+W8(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function W8(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var n_e=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=wv.DENSE;var n=mv(t),e=Fo();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Vp(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},r_e=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=wv.DENSE;var n=mv(t),e=Fo();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Vp(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},i_e=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),o_e=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},a_e=function(t){this.variableNames=["A"],this.outTexUsage=ns.DOWNLOAD;var n=Fo();this.outputShape=t,this.userCode=`
      `+OB+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},s_e=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ns.DOWNLOAD;var n=Fo();this.outputShape=t,this.userCode=`
      `+OB+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},l_e=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=Fo(),i=n[0],o=n[1];this.outputShape=t;var a="result";e&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+Y3(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},u_e=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Fo(),i=n[0],o=n[1];this.outputShape=t;var a="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;a+=`
          localCoords = coords;
          if(localCoords[2] + `+u+" < "+t[2]+`) {
            localCoords[2] += `+u+`;
            if(localCoords[1] + `+l+" < "+t[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Y3(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},c_e="return real * expR - imag * expI;",d_e="return real * expI + imag * expR;",q8=function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},p_e=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),h_e=function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var i=Br(this.rank),o=function(a,s){var l=a.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<a.length;d++)d===s?c.push("int(getIndices("+u[d]+"))"):c.push(""+u[d]);return c.join()}(t,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},f_e=function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=Br(n.length),i=Br(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function VB(t,n){var e=Fo();return P7(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function jB(t,n){return j7(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function UB(t,n){return U7(t,n,new Uint16Array([0,1,2,2,1,3]))}function kv(t,n,e,r,i,o,a){z7(e,r);var s=H7(t,n),l=t.TEXTURE_2D;return Rt(t,n,function(){return t.bindTexture(l,s)}),Rt(t,n,function(){return t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Rt(t,n,function(){return t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Rt(t,n,function(){return t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Rt(t,n,function(){return t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Rt(t,n,function(){return t.texImage2D(l,0,i,e,r,0,o,a,null)}),Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function HB(t,n,e,r,i){var o=Y2(e,r);return kv(t,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function zB(t,n,e,r,i){var o=Y2(e,r);return kv(t,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function WB(t,n,e,r,i){var o=Y2(e,r);return kv(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function qB(t,n,e,r,i){var o=Dv(e,r);return kv(t,n,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function GB(t,n,e,r,i){var o=Dv(e,r);return kv(t,n,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function $B(t,n,e,r){return Rt(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),f3(t,n,e,"clipSpacePos",r,3,20,0)&&f3(t,n,e,"uv",r,2,20,12)}function KB(t,n,e,r,i,o,a){var s,l,u;Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(s=new Float32Array(r*i*4),l=t.FLOAT,u=a.internalFormatPackedFloat),s.set(o),Rt(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,u,r,i,0,t.RGBA,l,s)}),Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function YB(t,n,e,r){Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?Rt(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Rt(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Rt(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function XB(t,n,e,r,i){var o=t.createBuffer();Rt(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var a=16*e*r;return Rt(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),Rt(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),Rt(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function QB(t,n,e){var r=t,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function ZB(t,n,e,r,i){var o=Y2(e,r),a=o[0],s=o[1],l=new Uint8Array(e*r*4);return Rt(t,n,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function JB(t,n,e,r,i,o,a,s){var l=t,u=new Float32Array(function(c,d){var p=Dv(c,d);return p[0]*p[1]*4}(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function eV(t,n,e,r){var i=new Float32Array(e*r*4);return Rt(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,i)}),i}var m_e=Object.freeze({createVertexShader:VB,createVertexBuffer:jB,createIndexBuffer:UB,createFloat32MatrixTexture:HB,createFloat16MatrixTexture:zB,createUnsignedBytesMatrixTexture:WB,createPackedMatrixTexture:qB,createFloat16PackedMatrixTexture:GB,bindVertexProgramAttributeStreams:$B,uploadDenseMatrixToTexture:KB,uploadPixelDataToTexture:YB,createBufferFromOutputTexture:XB,downloadFloat32MatrixFromBuffer:QB,downloadByteEncodedFloatMatrixFromOutputTexture:ZB,downloadPackedMatrixFromBuffer:JB,downloadMatrixFromPackedOutputTexture:eV}),tV=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=ze().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,N7(e,n)):this.gl=nu(e);var r="WEBGL_color_buffer_float";if(ze().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=pv(this.gl,this.debug,"OES_texture_float"),rs(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=pv(this.gl,this.debug,"OES_texture_half_float");else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),rs(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=pv(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",rs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!rs(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=jB(this.gl,this.debug),this.indexBuffer=UB(this.gl,this.debug),this.framebuffer=W7(this.gl,this.debug),this.textureConfig=F3(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return ze().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Rt(e,this.debug,function(){return e.finish()}),Rt(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Rt(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),Rt(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Rt(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Rt(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),HB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),zB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),WB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),YB(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,i){this.throwIfDisposed(),KB(this.gl,this.debug,n,e,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),GB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),qB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(m3(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Rt(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return ZB(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,i,o,a){return JB(this.gl,n,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return QB(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var i=XB(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,i=this;if(ze().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return eV(i.gl,i.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=L7(e,this.debug,n),i=VB(e,this.debug),o=B7(e,this.debug);return Rt(e,this.debug,function(){return e.attachShader(o,i)}),Rt(e,this.debug,function(){return e.attachShader(o,r)}),V7(e,this.debug,o),this.debug&&E2(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=$B(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Rt(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&E2(this.gl,this.debug,this.program),Rt(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?G7(this.gl,this.debug,n,e):$7(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Rt(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),K7(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var i=Dv(e,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&E2(this.gl,this.debug,this.program),hv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Rt(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Rt(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=pv(this.gl,this.debug,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return Ft(this,void 0,void 0,function(){var e=this;return Ot(this,function(r){switch(r.label){case 0:return[4,l3(function(){return e.disposed||e.isQueryAvailable(n,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||l3(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),D2(this.gl,this.debug,n,this.framebuffer),this.debug&&hv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(D2(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&hv(this.gl)):m3(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var i=this.gl;D2(i,this.debug,n,this.framebuffer),this.debug&&hv(i),this.outputTexture=n,Rt(i,this.debug,function(){return i.viewport(0,0,e,r)}),Rt(i,this.debug,function(){return i.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,i){var o=this;this.throwIfDisposed(),Rt(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function G8(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var i=e.logicalShape,o=n[r],a=o.shape;if(!Fi(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,l=o.isUniform?null:o.texData.texShape;if(!Fi(s,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+l+" must match")}})}var g_e=function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,l=e.outWidth,u=e.dilationWidth,c=e.dilationHeight,d=e.dataFormat,p=s.left,h=s.top,f=i*r,m=Fo(),g=d==="channelsLast",y=g?0:1,b=g?1:2,w="",x=0;x<=1;x++)for(var I=0;I<=1;I++)w+=`
          blockIndex = rc.y + `+I+`;
          pos = rc.x + `+x+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+a+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+f+`);

            if(d0 < `+n[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+o+". - "+p+`.);
              d1 = offsetX + `+u+" * (int(mod(float(pos), "+f+".) / "+i+`.));

              if(d1 < `+n[b]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*x+I)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*x+I)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+w+`

        `+m.output+` = result;
      }
    `},v_e=function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=t[3]-1;this.outputShape=t;var l="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+l+")":i===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},y_e=function(t,n,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},b_e=function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=n,s=t[3]-1;this.outputShape=t;var l="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+l+")":i===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},__e=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,l=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},w_e=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.front,d=l-1-t.padInfo.top,p=u-1-t.padInfo.left,h=s*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+p+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+u+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+u+` +
                  wR * `+u+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},$T=function(t,n,e,r,i,o,a){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?t[1]:t[2],l=Math.ceil(s/2),u=e?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",f="";o&&(h=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,f="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+p[0]+`);
          result += (`+d[1]+" * "+p[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+f+`

        setOutput(result);
      }
    `},x_e=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),C_e=function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},I_e=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=Da("rc",n),r=Br(n),i=function(s,l,u){if(s===1)return"rc > "+l[0];for(var c="",d=s-2;d<s;d++)c+=u[d]+" >= "+l[d],d<s-1&&(c+="||");return c}(n,t,e),o=function(s,l,u,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+u+`;
  `}(n,t[t.length-1],t[t.length-2],e),a=function(s,l){var u=s.length,c=function(d,p){for(var h=[],f=0;f<=1;f++)for(var m=0;m<=1;m++){for(var g=(f===0?"r":"rp1")+", "+(m===0?"c":"cp1"),y=2;y<d;y++)g=p[p.length-1-y]+","+g;h.push(g)}return h}(u,l);return u===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},S_e=function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(l,u){return l[0]+t[u]+l[1]});var r=t.length,i=Br(r),o=n.map(function(l){return l[0]}).join(","),a=n.map(function(l,u){return l[0]+t[u]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},E_e=function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(g,y){return g[0]+t[y]+g[1]});for(var r=t.length,i=Br(r),o=n.map(function(g){return g[0]}).join(","),a=n.map(function(g,y){return g[0]+t[y]}).join(","),s=Da("rc",r),l=Da("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+l.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+u+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,m=r===1?2:4;f<m;f++)h+=`
        `+d[f]+`
        if (`+p+`) {
          result[`+f+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+f+"] = getChannel(getX("+l.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},vv=function(t,n,e,r,i){if(r===void 0&&(r=!1),i===void 0&&(i=!1),this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,a=t.strideHeight,s=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var f=n==="avg",m="((batch  * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + d",g="(xR * "+t.inWidth+" + xC) * "+t.inChannels+" + d",y="0.0";if(f||(y="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+s+`);
        const ivec2 pads = ivec2(`+p+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+u+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = `+(r?i?m:g:"wR * "+d+" + wC")+`;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var b=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(b="avgValue / count");var w=4*Math.floor(o/4),x=o%4,I=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+p+", "+h+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+l+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+w+`; wC += 4) {
            int xC = xCCorner + wC * `+u+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              getValue(batch, xR, xC + 3 * `+u+`, d)
            );

            `+I+`
          }

          int xC = xCCorner + `+w+`;
          if (`+(x===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+I+`
          } else if (`+(x===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              initializationValue,
              initializationValue
            );

            `+I+`
          } else if (`+(x===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              initializationValue
            );

            `+I+`
          }
        }
        setOutput(`+b+`);
      }
    `}},KT=function(t,n,e,r,i){if(r===void 0&&(r=!1),i===void 0&&(i=!1),this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,a=t.strideDepth,s=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b=n==="avg",w="0.0";if(b||(w="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+s+", "+l+`);
        const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+p+`;
              wD += `+u+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = `+(r?i?"(((batch * "+t.inDepth+" + xD) * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"((xD * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"wD * "+h+" * "+f+` +
                      wR * `+f+" + wC")+`;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(x="avgValue / count");var I=4*Math.floor(o/4),D=o%4,A=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+s+", "+l+`);
      const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);
      const float initializationValue = `+w+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+w+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+p+`;
            wD += `+u+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+I+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+A+`
            }

            int xC = xCCorner + `+I+`;
            if (`+(D===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(D===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(D===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+A+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},D_e=function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var l=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");var u=4*Math.floor(e/4),c=e%4,d=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var h="";i%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+l+`);
      }
    `},T_e=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Vp(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+Y3(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `},A_e=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],l=a[2],u=[e&&s>1?i-1:i,e&&l>1?o-1:o],c=[e&&s>1?s-1:s,e&&l>1?l-1:l],d=u[0]/c[0],p=u[1]/c[1],h=1/d,f=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},k_e=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},M_e=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`,
          `+l[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},R_e=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],l=a[2],u=[e&&s>1?i-1:i,e&&l>1?o-1:o],c=[e&&s>1?s-1:s,e&&l>1?l-1:l],d=u[0]/c[0],p=u[1]/c[1],h=1/d,f=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},N_e=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var l=[r&&n>1?o-1:o,r&&e>1?a-1:a],u=[r&&n>1?n-1:n,r&&e>1?e-1:e],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},F_e=function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Br(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},O_e=function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=Da("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],a=Br(e);function s(l){var u=t.map(function(c,d){return function(p,h){return n.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+h[p]+" - 1":""+h[p]}(d,l)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return s(l)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(l){return l[e-1]="("+l[e-1]+" + 1)",s(l)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(l){return l[e-2]="("+l[e-2]+" + 1)",s(l)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(l){return l[e-1]="("+l[e-1]+" + 1)",l[e-2]="("+l[e-2]+" + 1)",s(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},$8=function(t,n,e,r,i,o,a){a===void 0&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Br(i.length),l=Br(o.length),u="";e===1?u="i":e===2&&(u="i, j");var c="getIndices("+u+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var p="getUpdates("+d+")",h=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},P_e=function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/e);this.outputShape=[r,a];var s=4*Math.floor(e/4),l=e%4,u=`
        sumValue += dot(values, segFilter);
    `,c="";i%e>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `},L_e=function(t,n,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],l=0;l<n.length;l++)s.push(""+o[l]),l<t&&a.push(""+o[l]);r=a.join(),i=s.join()}var u=Br(e);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},B_e=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=Br(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return YT.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+YT[s]+" = start["+s+"] + coords."+YT[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),YT=["x","y","z","w","u","v"],V_e=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=Br(this.rank),r=Da("coords",this.rank),i=Da("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(c,d){return"start["+d+"]"}).join()+");":n.map(function(c,d){return i[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+u+`
        vec4 result = vec4(0.);
        `+s+`
        `+l+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),j_e=function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=Br(e.length),o=Br(e.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=e.map(function(l,u){return s++,e.length===1?"coords * strides["+u+"] + begin["+u+"]":"coords["+(s-1)+"] * strides["+u+"] + begin["+u+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},U_e=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var i,o=K8(e,r),a=Y8(n,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===ts.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===ts.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===ts.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===ts.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===ts.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(n,e,r,i){if(this.freeTextures!=null){var o=Y8(e,K8(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function K8(t,n){if(t===ns.UPLOAD)return ts.PACKED_2X2_FLOAT32;if(t===ns.RENDER||t==null)return function(e){return ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ts.PACKED_2X2_FLOAT32:ts.UNPACKED_FLOAT32:e?ts.PACKED_2X2_FLOAT16:ts.UNPACKED_FLOAT16}(n);if(t===ns.DOWNLOAD||t===ns.PIXELS)return ts.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Y8(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var H_e=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var i=Br(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],u=[],c=0;c<a.length;c++)u.push("imod("+l[c]+", "+a[c]+")");return u.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},X3=1.7580993408473768,Q3=1.0507009873554805,Mn=function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},il="if (isnan(x)) return x;",z_e="return x;",X8="return abs(x);",nV=il+`
  return (x < 0.0) ? 0.0 : x;
`,rV=il+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,iV="return (x >= 0.0) ? x : (exp(x) - 1.0);",W_e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+X3+`;
  float scale = `+Q3+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Q8="return -x;",Z8="return ceil(x);",J8="return floor(x);",e7="return exp(x);",t7="return exp(x) - 1.0;",q_e=il+`
  return sin(x);
`,G_e=il+`
  return cos(x);
`,$_e=il+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,K_e=il+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Y_e=il+`
  return atan(x);
`,X_e=il+"return log(x + sqrt(x * x + 1.0));",Q_e=il+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Z_e=il+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,v2="return x;",J_e="return x;",oV=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aV=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sV=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,dv=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},e2e=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=Da("rc",n),r=Br(n),i=function(s,l){if(s===1)return"rc";for(var u="",c=0;c<s;c++)u+=l[c],c<s-1&&(u+=",");return u}(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},y2={};function b2(t,n){if(n===void 0&&(n=!1),t==="linear")return n?J_e:z_e;if(t==="relu")return n?oV:nV;if(t==="elu")return n?sV:iV;if(t==="relu6")return n?aV:rV;if(t==="prelu")return n?BB:LB;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var t2e=600,lV=function(t){function n(e){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!ze().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=nu(ze().getNumber("WEBGL_VERSION"));i.binaryCache=((r=ze().getNumber("WEBGL_VERSION"))in y2||(y2[r]={}),y2[r]),i.gpgpu=new tV(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new U_e(i.gpgpu),i.numMBBeforeWarning=ze().global.screen==null?1024:ze().global.screen.height*ze().global.screen.width*window.devicePixelRatio*t2e/1024/1024,i.texData=new TB(i,_e),i}return tl(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,r,i){if(ze().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:ns.UPLOAD}),o},n.prototype.move=function(e,r,i,o){if(ze().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:ns.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,a=r.complexTensors,s=r.slice,l=r.shape,u=r.isPacked;if(s!=null){var c=void 0;c=u?new dv(l,v2):new Mn(l,v2);var d=this.runWebGLProgram(c,[{dataId:e,shape:l,dtype:o}],o),p=this.readSync(d.dataId);return this.disposeData(d.dataId),p}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var h,f,m=this.activeTimers!=null;return m&&(h=Js()),o==="complex64"?f=_3(a.real.dataSync(),a.imag.dataSync()):f=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=Js()-h),this.convertAndCacheOnCPU(e,f)},n.prototype.read=function(e){return Ft(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E;return Ot(this,function(R){switch(R.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(N){return r.push(N)})];if(i=this.texData.get(e),o=i.values,a=i.shape,s=i.slice,l=i.dtype,u=i.complexTensors,c=i.isPacked,s!=null)return d=void 0,d=c?new dv(a,v2):new Mn(a,v2),p=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:l}],l),h=this.read(p.dataId),this.disposeData(p.dataId),[2,h];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ze().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,l!=="complex64"&&ze().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),g=this.texData.get(m.dataId),f=(E=this.gpgpu).createBufferFromTexture.apply(E,[g.texture].concat(mv(a)))),this.pendingRead.set(e,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:R.sent(),R.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return b=R.sent(),w=b[0],x=b[1],y=_3(w,x),[3,5];case 4:f==null?y=this.getValuesFromTexture(e):(I=Nt(a),y=this.gpgpu.downloadFloat32MatrixFromBuffer(f,I)),R.label=5;case 5:return m!=null&&this.disposeData(m.dataId),D=this.convertAndCacheOnCPU(e,y),A=this.pendingRead.get(e),this.pendingRead.delete(e),A.forEach(function(N){return N(D)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,D]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var i=e[r];if(!F7(i))throw ze().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.isPacked,l=Nt(o);if(ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),c=this.texData.get(u.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(mv(o))).subarray(0,l);return this.disposeData(u.dataId),d}var p=ze().getBool("WEBGL_PACK")&&s===!0,h=p?T2(o):o,f=p?new s_e(h):new a_e(h),m=this.runWebGLProgram(f,[{shape:h,dtype:a,dataId:e}],"float32"),g=this.texData.get(m.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,l);return this.disposeData(m.dataId),y},n.prototype.time=function(e){return Ft(this,void 0,void 0,function(){var r,i,o,a,s,l,u;return Ot(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),a=Qu(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=Qu(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return u=c.sent(),l.kernelMs=b7(u),l.getExtraProfileInfo=function(){return u.map(function(d,p){return{name:s[p],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Js(),endMs:null}},n.prototype.endTimer=function(e){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Js(),e)},n.prototype.getQueryTime=function(e){return Ft(this,void 0,void 0,function(){var r;return Ot(this,function(i){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,a=r.texShape,s=r.usage,l=r.isPacked,u=r.slice,c=u&&u.origDataId||e,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,l)));var p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return ze().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=_e.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&Nt(o.shape)<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:_e.keep(e.clone()),imag:_e.keep(r.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(Nt(i)===0)return so([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,a=U3(e.shape,r,i);if(o||!a){var s=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new V_e(i):new B_e(i),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[e],null,l)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},n.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),a=this.makeOutput(i,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=e.dtype;var l=H3(r,e.strides);o.slice&&(l+=o.slice.flatOffset),s.slice={flatOffset:l,origDataId:o.slice&&o.slice.origDataId||e.dataId};var u=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,u+1),a},n.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var a=J2(r,i,o);if(a.some(function(l){return l===0}))return so([],a);var s=new j_e(r,o,a);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,r){var i=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new O_e(e.shape,r):new F_e(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var i=e.map(function(h){return Ds(h)}),o=e.map(function(h){return eu(h)});return _o(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>ze().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),r),l=this.concat(e.slice(a),r);return this.concat([s,l],r)}if(ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new Gbe(e.map(function(h){return h.shape}),r);return this.compileAndRun(u,e)}var c=Wp(e.map(function(h){return h.shape}),r),d=e.map(function(h){return h.as2D(-1,Nt(h.shape.slice(r)))}),p=new qbe(d.map(function(h){return h.shape}));return this.compileAndRun(p,d).reshape(c)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Q8,e.dtype);var r=new Mn(e.shape,Q8);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,i,o){var a=i?e.shape[2]:e.shape[1],s=o?r.shape[1]:r.shape[2],l=i?e.shape[1]:e.shape[2],u=e.shape[0];if((a===1||s===1)&&l>1e3){i&&(e=el(e,[0,2,1])),o&&(r=el(r,[0,2,1]));var c=s===1?e:e.as3D(u,l,1),d=s===1?2:1,p=s===1?r.as3D(u,1,l):r;return this.multiply(c,p).sum(d,!0)}var h=ao(e.dtype,r.dtype),f=new $T(e.shape,[u,a,s],i,o);return this.compileAndRun(f,[e,r],h)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,l=e.activation,u=e.preluActivationWeights,c=o?r.shape[2]:r.shape[1],d=a?i.shape[1]:i.shape[2],p=r.shape[0],h=ao(r.dtype,i.dtype),f=s!=null,m=u!=null,g=l?b2(l,!0):null,y=new $T(r.shape,[p,c,d],o,a,f,g,m),b=[r,i];return s&&b.push(s),u&&b.push(u),this.compileAndRun(y,b,h)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),a=new V8(Bbe,e.shape,r.shape),s=new V8(Vbe,e.shape,r.shape),l=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],u=this.compileAndRun(a,l),c=this.compileAndRun(s,l),d=this.complex(u,c);return u.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,j8,e.dtype);var p=new di(j8,e.shape,r.shape);return this.compileAndRun(p,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){var l=[e,r,i],u=null;s!=null&&(u=s.shape,l.push(s));var c=null;if(a!=null&&(c=a.shape,l.push(a)),ze().getBool("WEBGL_PACK_NORMALIZATION")){var d=new Lbe(e.shape,r.shape,i.shape,u,c,o);return this.compileAndRun(d,l)}var p=new Pbe(e.shape,r.shape,i.shape,u,c,o);return this.compileAndRun(p,l)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){var s=ze().getBool("WEBGL_PACK_NORMALIZATION")?new b_e(e.shape,r,i,o,a):new v_e(e.shape,r,i,o,a);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,r,i,o,a,s,l){var u=new y_e(r.shape,o,a,s,l);return this.compileAndRun(u,[r,i,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(a){return bv(a)});return RB(gn(e.shape,e.dtype,i),r)}var o=new H_e(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,i){var o=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E_e(e.shape,r,i):new S_e(e.shape,r,i);return this.compileAndRun(o,[e])},n.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new h_e(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,i){ee(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(d,p){return d*p}),a=j2(e.shape,r,o),s=U2(a.length,r.length),l=H2(e.shape,r,o),u=pB(i,r.length),c=hB(l,i,r.length);return el(e.reshape(a),s).reshape(l).slice(u,c)},n.prototype.spaceToBatchND=function(e,r,i){ee(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,h){return p*h}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var l=e.pad(a),u=j2(l.shape,r,o,!1),c=U2(u.length,r.length,!1),d=H2(l.shape,r,o,!1);return el(l.reshape(u),c).reshape(d)},n.prototype.reduce=function(e,r,i){var o=e.shape[0],a=e.shape[1],s=A2(a),l=new D_e({windowSize:s,inSize:a,batchSize:o},r),u=this.compileAndRun(l,[e],i);return u.shape[1]===1?u:this.reduce(u,r,i)},n.prototype.argReduce=function(e,r,i){i===void 0&&(i=null);var o=e.shape[0],a=e.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=A2(a),l=new Dbe({windowSize:s,inSize:a,batchSize:o},r,i==null),u=[e];i!=null&&u.push(i);var c=this.compileAndRun(l,u,"int32");return c.shape[1]===1?c:this.argReduce(e,r,c)},n.prototype.argReducePacked=function(e,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,a=A2(o[o.length-1]),s=new Nbe(o,a,r,i==null),l=i==null?[e]:[e,i],u=this.compileAndRun(s,l,"int32");return u.rank===e.rank?this.argReducePacked(e,r,u):u},n.prototype.sum=function(e,r){Ea("sum",r,e.rank);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a),l=HT(e.dtype);return this.reduce(s,"sum",l).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a),l=HT(e.dtype);return this.reduce(s,"prod",l).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,i){var o=0,a=nl([o],e.rank),s=e;a!=null&&(s=el(e,a),o=rl(1,e.rank)[0]);var l=function(h,f,m){for(var g=[],y=h.length,b=0;b<y;b++)b!==f?g.push(h[b]):g.push(m);return g}(s.shape,o,i),u=Nt([s.shape[o]]),c=s.as2D(-1,u),d=HT(e.dtype),p=this.segOpCompute(c,"unsortedSegmentSum",r,d,i).reshape(l);return a!=null&&(p=el(p,X2(a))),p},n.prototype.segOpCompute=function(e,r,i,o,a){var s=e.shape[0],l=e.shape[1],u=function(p,h){var f,m=!1;for(p<=j3?(f=p,m=!0):f=O2(p,Math.floor(Math.sqrt(p)));!m;)f>h||f===p?m=!0:f=O2(p,f+1);return f}(l,a),c=new P_e({windowSize:u,inSize:l,batchSize:s,numSegments:a},r),d=this.compileAndRun(c,[e,i],o);return d.shape[1]===a?d:(i=V2(0,a).tile([l/u]),this.segOpCompute(d,r,i,o,a))},n.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(Ea("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!ze().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=wo(e.shape,o),s=a[0],l=Nt(a[1]),u=e.as2D(-1,l);return this.argReduce(u,i).reshape(s)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var a=new t_e(e.shape,i,o);return this.compileAndRun(a,[e])},n.prototype.equal=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var i=new di("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new di("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new di("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new di("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new di("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new di("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new Mn(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new di("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new di("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.select=function(e,r,i){var o=new L_e(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],ao(r.dtype,i.dtype))},n.prototype.where=function(e){L2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return K3(e.shape,r)},n.prototype.topk=function(e,r,i){return NB(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){Ea("min",r,e.rank);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new di(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.mod=function(e,r){var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new di(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Ea("max",r,e.rank);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new di(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.all=function(e,r){Ea("all",r,e.rank);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,r){Ea("any",r,e.rank);var i=wo(e.shape,r),o=i[0],a=Nt(i[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.floorDiv=function(e,r){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new di(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,qT);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=ao(e.dtype,r.dtype);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,qT,i);var o=new di(qT,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.packedUnaryOp=function(e,r,i){var o=new dv(e.shape,r);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,r,i,o,a){a===void 0&&(a=!1);var s=new Zl(i,e.shape,r.shape,a);return this.compileAndRun(s,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,a=this.texData.get(e.dataId),s=this.texData.get(r.dataId),l=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(p){var h=p[0],f=p[1],m=o.makeComplexComponentTensorInfo(e,h),g=o.makeComplexComponentTensorInfo(r,f),y=new di(i,e.shape,r.shape);return o.compileAndRun(y,[m,g],ao(h.dtype,f.dtype))}),u=l[0],c=l[1],d=this.complex(u,c);return u.dispose(),c.dispose(),d},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>ze().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var a=e.map(function(u){return u.dtype}).reduce(function(u,c){return ao(u,c)}),s=e.map(function(u){return u.shape}),l=ze().getBool("WEBGL_PACK")?new Ebe(e[0].shape,s):new Sbe(e[0].shape,s);return this.compileAndRun(l,e,a)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,GT);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=ao(e.dtype,r.dtype);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,GT,e.dtype);var o=new di(GT,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.pow=function(e,r){var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new di(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=ao(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Z8,e.dtype);var r=new Mn(e.shape,Z8);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,J8,e.dtype);var r=new Mn(e.shape,J8);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new Mn(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new Mn(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new Mn(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new Mn(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new Mn(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,e7,e.dtype);var r=new Mn(e.shape,e7);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,t7,e.dtype);var r=new Mn(e.shape,t7);return this.compileAndRun(r,[e])},n.prototype.softmax=function(e,r){var i=Oi([r],e.shape),o=this.max(e,i),a=ia(o.shape,i),s=this.subtract(e,o.reshape(a)),l=this.exp(s),u=this.sum(l,i).reshape(a);return md(l,u)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new Mn(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new Mn(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new Mn(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new Mn(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new Mn(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=ze().getBool("WEBGL_PACK")?new dv(e.shape,oV):new Mn(e.shape,nV),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=ze().getBool("WEBGL_PACK")?new dv(e.shape,aV):new Mn(e.shape,rV),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(BB,e.shape,r.shape):new di(LB,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.elu=function(e){if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,sV,e.dtype);var r=new Mn(e.shape,iV);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new di("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.selu=function(e){var r=new Mn(e.shape,W_e);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new Mn(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,i){var o,a=(o=ze().getBool("WEBGL_PACK_CLIP")?new zbe(e.shape):new Hbe(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,a)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,X8,e.dtype);var r=new Mn(e.shape,X8);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new Wbe(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var r=new Mn(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new Mn(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new Mn(e.shape,q_e);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new Mn(e.shape,G_e);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new Mn(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new Mn(e.shape,$_e);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new Mn(e.shape,K_e);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new Mn(e.shape,Y_e);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var i=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new di(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.sinh=function(e){var r=new Mn(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new Mn(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new Mn(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new Mn(e.shape,X_e);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new Mn(e.shape,Q_e);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new Mn(e.shape,Z_e);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new Mn(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var i=new Mn(e.shape,function(o){return o===void 0&&(o=0),il+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,r,i,o,a,s){var l=e.shape,u=this.texData.get(e.dataId),c=i.inChannels,d=l[0]*l[1]*l[2],p=i.outChannels,h=i.dataFormat==="channelsLast",f=(d===1||p===1)&&c>1e3,m=l[2]%2!=0&&!!u.isPacked;if(f||!ze().getBool("WEBGL_LAZILY_UNPACK")||!ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],y=this.reshape(e,[1,g,i.inChannels]),b=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var w=h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),x={dataId:e.dataId,shape:[1,w,i.inChannels],dtype:e.dtype},I=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,ee(fv(u.shape,x.shape),function(){return"packed reshape "+u.shape+" to "+x.shape+" isn't free"});var D=this.reshape(r,[1,i.inChannels,i.outChannels]),A=this.fusedBatchMatMul({a:x,b:D,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),E=this.texData.get(A.dataId);return ee(E.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=I,E.shape=i.outShape,_e.makeTensorFromDataId(A.dataId,i.outShape,A.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,i,o,a,s){var l=i.filterWidth,u=i.filterHeight,c=i.inChannels,d=i.outWidth,p=i.outHeight,h=i.dataFormat==="channelsLast",f=l*u*c,m=p*d,g=[f,m],y=e.squeeze([0]),b=r.reshape([1,f,-1]),w=new g_e(g,y.shape,i),x=this.compileAndRun(w,[y]).reshape([1,g[0],g[1]]),I=o!=null,D=s!=null,A=a?b2(a,!0):null,E=new $T(x.shape,[1,m,i.outChannels],!0,!1,I,A,D),R=[x,b];o&&R.push(o),D&&R.push(s);var N=this.compileAndRun(E,R);return h?N.reshape([1,p,d,i.outChannels]):N.reshape([1,i.outChannels,p,d])},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,l=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,a,s,l);if(ze().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,a,s,l);var u=a!=null,c=l!=null,d=s?b2(s,!1):null,p=new U8(o,u,d,c),h=[r,i];return a&&h.push(a),l&&h.push(l),this.compileAndRun(p,h)},n.prototype.conv2d=function(e,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,i);if(ze().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,i);var o=new U8(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,i){var o=new Kbe(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,i){var o=new $be(i);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,a=e.convInfo,s=e.bias,l=e.activation,u=e.preluActivationWeights,c=ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,d=l?b2(l,c):null,p=[i,o],h=s!=null,f=u!=null;return h&&p.push(s),f&&p.push(u),c?(r=new z8(a,h,d,f),this.compileAndRun(r,p)):(r=new H8(a,h,d,f),this.compileAndRun(r,p))},n.prototype.depthwiseConv2D=function(e,r,i){var o;return ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new z8(i),this.compileAndRun(o,[e,r])):(o=new H8(i),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new Zbe(i);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new Qbe(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,i){var o=new Jbe(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,i){var o=new Xbe(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,i){var o=new Ybe(i);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var i=new vv(r,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,r){var i=new vv(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,i,o){var a=new vv(o,"max",!0),s=this.compileAndRun(a,[r]),l=new __e(o),u=this.compileAndRun(l,[e,s],r.dtype);return s.dispose(),u},n.prototype.avgPoolBackprop=function(e,r,i){var o=new Fbe(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return W3(e,r,this)},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var l=new Array(e.rank).fill(0),u=e.shape.slice();u[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(e,l,u).reshape(o);return c},n.prototype.avgPool3d=function(e,r){var i=new KT(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,i){var o=new Obe(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var i=new KT(r,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,i,o){var a=new KT(o,"max",!0),s=this.compileAndRun(a,[r]),l=new w_e(o),u=this.compileAndRun(l,[e,s],r.dtype);return s.dispose(),u},n.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!fv(e.shape,r)&&(i.texture===null||!fv(i.shape,r))){var o=this.packedReshape(e,r);return _e.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return q2(e,r)},n.prototype.resizeBilinear=function(e,r,i,o){var a=ze().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new M_e(e.shape,r,i,o):new k_e(e.shape,r,i,o);return this.compileAndRun(a,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,r,i){var o=new A_e(e,r,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,i,o){var a=new N_e(e.shape,r,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new R_e(e,r,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,i,o){var a=r?e:Av(e),s=a.shape[0],l=a.shape[1],u=new x_e(s,l,i),c=u.getCustomSetupFunc(o);return this.compileAndRun(u,[a],"int32",c)},n.prototype.oneHot=function(e,r,i,o){var a=new C_e(e.size,r,i,o);return this.compileAndRun(a,[e])},n.prototype.diag=function(e){var r=new o_e(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return L2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),G3(e.dataSync(),r.dataSync(),i,o,a)},n.prototype.cropAndResize=function(e,r,i,o,a,s){var l=new e_e(e.shape,r.shape,o,a,s);return this.compileAndRun(l,[e,r,i],"float32")},n.prototype.depthToSpace=function(e,r,i){ee(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],a=i==="NHWC"?e.shape[1]:e.shape[2],s=i==="NHWC"?e.shape[2]:e.shape[3],l=i==="NHWC"?e.shape[3]:e.shape[1],u=a*r,c=s*r,d=l/(r*r),p=new i_e(i==="NHWC"?[o,u,c,d]:[o,d,u,c],r,i);return this.compileAndRun(p,[e])},n.prototype.split=function(e,r,i){return MB(e,r,i)},n.prototype.scatterND=function(e,r,i){var o=Iv(0,e,i),a=o.sliceRank,s=o.numUpdates,l=o.sliceSize,u=o.strides,c=o.outputSize,d=[c/l,l],p=e.reshape([s,a]),h=r.reshape([s,l]);if(c===0)return q2(so([]),i);var f=Ut(0),m=new $8(s,a,p.rank,h.rank,u,d);return this.compileAndRun(m,[h,p,f]).reshape(i)},n.prototype.sparseToDense=function(e,r,i,o){var a=Iv(0,e,i),s=a.sliceRank,l=a.numUpdates,u=a.strides,c=a.outputSize,d=new $8(l,s,e.rank,r.rank,u,[c,1],!1);return this.compileAndRun(d,[r,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new q8(c_e,e.shape,r),a=new q8(d_e,e.shape,r),s=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],l=this.compileAndRun(o,s),u=this.compileAndRun(a,s),c=this.complex(l,u).as2D(e.shape[0],e.shape[1]);return l.dispose(),u.dispose(),c},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=V3(e,r),s=a[0],l=a[1],u=a[2],c=a[3],d=r.reshape([l,o]),p=e.reshape([e.size/u,u]),h=new f_e(o,c,[l,u]);return this.compileAndRun(h,[p,d]).reshape(s)},n.prototype.fill=function(e,r,i){if((i=i||sm(r))==="string"){var o=yv(i,Nt(e));return o.fill(r),_e.makeTensor(o,e,i,this)}var a=new p_e(e,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],i,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,i){return q3(e,r,i)},n.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return _e.makeTensorFromDataId(i,e,r,this)},n.prototype.unpackTensor=function(e){var r=new e2e(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new I_e(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var i=[xv(e.shape)].concat(Cv(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},a=[xv(r)].concat(Cv(r)),s=new T_e(a,i),l=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:l.dataId,shape:r,dtype:l.dtype}},n.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,a=i.shape,s=i.dtype,l=T2(a);return r=o?new r_e(l):new n_e(l),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:l,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,i,o,a){var s=this;a===void 0&&(a=!1);var l=this.makeTensorInfo(e.outputShape,i),u=this.texData.get(l.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===wv.DENSE){var c=mv(e.outputShape);u.texShape=c.map(function(w){return 2*w})}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),Nt(l.shape)===0)return u.values=Hp(l.dtype,0),l;var d=[],p=r.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var x=s.texData.get(w.dataId);if(x.texture==null){if(!e.packedInputs&&Nt(w.shape)<=ze().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=w.shape)}else if(!!x.isPacked!=!!e.packedInputs)w=x.isPacked?s.unpackTensor(w):s.packTensor(w),d.push(w),x=s.texData.get(w.dataId);else if(x.isPacked&&!fv(x.shape,w.shape)){var I=w,D=w.shape;w.shape=x.shape,w=s.packedReshape(w,D),d.push(w),x=s.texData.get(w.dataId),I.shape=D}return s.uploadToGPU(w.dataId),{shape:w.shape,texData:x,isUniform:!1}});this.uploadToGPU(l.dataId);var h,f={shape:l.shape,texData:u,isUniform:!1},m=function(w,x,I){var D="";x.concat(I).forEach(function(R){var N=R.texData!=null&&R.texData.slice!=null&&R.texData.slice.flatOffset>0,T=R.isUniform?"uniform":R.texData.texShape;D+=R.shape+"_"+T+"_"+N});var A=w.userCode,E=w.constructor.name;return E+="_"+D+"_"+A}(e,p,f),g=this.getAndSaveBinary(m,function(){return function(w,x,I,D){var A=x.userCode,E=I.map(function(G,re){var ue={logicalShape:G.shape,texShape:G.isUniform?null:G.texData.texShape,isUniform:G.isUniform,isPacked:!G.isUniform&&G.texData.isPacked,flatOffset:null};return G.texData!=null&&G.texData.slice!=null&&G.texData.slice.flatOffset>0&&(ue.flatOffset=G.texData.slice.flatOffset),{name:x.variableNames[re],shapeInfo:ue}}),R=E.map(function(G){return G.shapeInfo}),N={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},T=Tbe(E,N,A,x.packedInputs),M=w.createProgram(T),H=null,V=w.getUniformLocation(M,"NAN",!1);ze().getNumber("WEBGL_VERSION")===1&&(H=w.getUniformLocation(M,"INFINITY",!1));for(var X={},Y=0;Y<x.variableNames.length;Y++){var Q=x.variableNames[Y];X[Q]=w.getUniformLocation(M,Q,!1),X["offset"+Q]=w.getUniformLocation(M,"offset"+Q,!1)}return{program:x,source:T,webGLProgram:M,uniformLocations:X,inShapeInfos:R,outShapeInfo:N,infLoc:H,nanLoc:V}}(s.gpgpu,e,p,f)}),y=this.activeTimers!=null;if(y&&(h=this.startTimer()),function(w,x,I,D,A){G8(x.inShapeInfos,I),G8([x.outShapeInfo],[D]);var E=D.texData.texture,R=D.texData.texShape;D.texData.isPacked?w.setOutputPackedMatrixTexture(E,R[0],R[1]):w.setOutputMatrixTexture(E,R[0],R[1]),w.setProgram(x.webGLProgram),ze().getNumber("WEBGL_VERSION")===1&&x.infLoc!==null&&w.gl.uniform1f(x.infLoc,1/0),x.nanLoc!==null&&w.gl.uniform1f(x.nanLoc,NaN),I.forEach(function(N,T){var M=x.program.variableNames[T],H=x.uniformLocations[M],V=x.uniformLocations["offset"+M];if(H!=null)if(N.isUniform)if(Nt(N.shape)<2)w.gl.uniform1f(H,N.uniformValues[0]);else{var X=N.uniformValues;X instanceof Float32Array||(X=new Float32Array(X)),w.gl.uniform1fv(H,X)}else N.texData.slice!=null&&V!=null&&w.gl.uniform1i(V,N.texData.slice.flatOffset),w.setInputMatrixTexture(N.texData.texture,H,T)}),A?.(w,x.webGLProgram),w.executeProgram()}(this.gpgpu,g,p,f,o),d.forEach(function(w){return s.disposeData(w.dataId)}),y&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)})),!ze().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&a===!1){var b=this.unpackTensor(l);return this.disposeData(l.dataId),b}return l},n.prototype.compileAndRun=function(e,r,i,o,a){a===void 0&&(a=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(e,r,i,o,a);return _e.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(ze().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Fn(function(){if(!ze().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ze().getBool("DEBUG");ze().set("DEBUG",!1);var i=e.abs(Ut(1e-8)).dataSync()[0];if(ze().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.values,l=i.texture,u=i.usage,c=i.isPacked;if(l==null){var d,p=this.activeTimers!=null;p&&(d=Js());var h=i.texShape;if(h==null&&(h=Q7(o,c),i.texShape=h),s!=null){var f=T2(o),m=void 0,g=h[1],y=h[0],b=s instanceof Uint8Array;c?(g=(r=Dv(h[0],h[1]))[0],y=r[1],m=new u_e(f,[y,g],b)):m=new l_e(f,[y,g],b);var w=this.makeTensorInfo([y,g],a);this.texData.get(w.dataId).usage=b?ns.PIXELS:ns.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),g,y,s);var x=this.runWebGLProgram(m,[w],a,null,!0),I=this.texData.get(x.dataId);i.texture=I.texture,i.texShape=I.texShape,i.isPacked=I.isPacked,i.usage=I.usage,this.disposeData(w.dataId),this.texData.delete(x.dataId),i.values=null,p&&(this.uploadWaitMs+=Js()-d)}else{var D=this.acquireTexture(h,u,a,c);i.texture=D}}},n.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),r!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var l=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),u=0;u<l.length;++u)l[u]=Math.round(a[u]);return l}throw new Error("Unknown dtype "+s)}(r,o)),i.values},n.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*T3(r)},n}(AB);R7()&&_e.registerBackend("webgl",function(){return new lV},2);function Kp(t,n){return t(n={exports:{}},n.exports),n.exports}var n2e=Kp(function(t){(function(n,e,r){function i(s){var l,u=this,c=(l=4022871197,function(d){d=d.toString();for(var p=0;p<d.length;p++){var h=.02519603282416938*(l+=d.charCodeAt(p));h-=l=h>>>0,l=(h*=l)>>>0,l+=4294967296*(h-=l)}return 23283064365386963e-26*(l>>>0)});u.next=function(){var d=2091639*u.s0+23283064365386963e-26*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=0|d)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(s),u.s0<0&&(u.s0+=1),u.s1-=c(s),u.s1<0&&(u.s1+=1),u.s2-=c(s),u.s2<0&&(u.s2+=1),c=null}function o(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function a(s,l){var u=new i(s),c=l&&l.state,d=u.next;return d.int32=function(){return 4294967296*u.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,t,!1)}),r2e=Kp(function(t){(function(n,e,r){function i(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),l.next()}function o(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function a(s,l){var u=new i(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,t,!1)}),i2e=Kp(function(t){(function(n,e,r){function i(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^d^d<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function a(s,l){var u=new i(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,t,!1)}),o2e=Kp(function(t){(function(n,e,r){function i(s){var l=this;l.next=function(){var u,c,d=l.x,p=l.i;return u=d[p],c=(u^=u>>>7)^u<<24,c^=(u=d[p+1&7])^u>>>10,c^=(u=d[p+3&7])^u>>>3,c^=(u=d[p+4&7])^u<<7,u=d[p+7&7],c^=(u^=u<<13)^u<<9,d[p]=c,l.i=p+1&7,c},function(u,c){var d,p=[];if(c===(0|c))p[0]=c;else for(c=""+c,d=0;d<c.length;++d)p[7&d]=p[7&d]<<15^c.charCodeAt(d)+p[d+1&7]<<13;for(;p.length<8;)p.push(0);for(d=0;d<8&&p[d]===0;++d);for(d==8?p[7]=-1:p[d],u.x=p,u.i=0,d=256;d>0;--d)u.next()}(l,s)}function o(s,l){return l.x=s.x.slice(),l.i=s.i,l}function a(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,t,!1)}),a2e=Kp(function(t){(function(n,e,r){function i(s){var l=this;l.next=function(){var u,c,d=l.w,p=l.X,h=l.i;return l.w=d=d+1640531527|0,c=p[h+34&127],u=p[h=h+1&127],c^=c<<13,u^=u<<17,c^=c>>>15,u^=u>>>12,c=p[h]=c^u,l.i=h,c+(d^d>>>16)|0},function(u,c){var d,p,h,f,m,g=[],y=128;for(c===(0|c)?(p=c,c=null):(c+="\0",p=0,y=Math.max(y,c.length)),h=0,f=-32;f<y;++f)c&&(p^=c.charCodeAt((f+32)%c.length)),f===0&&(m=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,f>=0&&(m=m+1640531527|0,h=(d=g[127&f]^=p+m)==0?h+1:0);for(h>=128&&(g[127&(c&&c.length||0)]=-1),h=127,f=512;f>0;--f)p=g[h+34&127],d=g[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,g[h]=p^d;u.w=m,u.X=g,u.i=h}(l,s)}function o(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function a(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,t,!1)}),s2e=Kp(function(t){(function(n,e,r){function i(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,h=l.d,f=l.a;return d=d<<25^d>>>7^p,p=p-h|0,h=h<<24^h>>>8^f,f=f-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-h|0,l.d=h<<16^p>>>16^f,l.a=f-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=0|s):u+=s;for(var c=0;c<u.length+20;c++)l.b^=0|u.charCodeAt(c),l.next()}function o(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function a(s,l){var u=new i(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,t,!1)}),Bp=Kp(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",l=e.pow(o,a),u=e.pow(2,52),c=2*u,d=o-1;function p(y,b,w){var x=[],I=m(function E(R,N){var T,M=[],H=typeof R;if(N&&H=="object")for(T in R)try{M.push(E(R[T],N-1))}catch{}return M.length?M:H=="string"?R:R+"\0"}((b=b==1?{entropy:!0}:b||{}).entropy?[y,g(n)]:y??function(){try{var E;return r&&(E=r.randomBytes)?E=E(o):(E=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(E)),g(E)}catch{var R=i.navigator,N=R&&R.plugins;return[+new Date,i,N,i.screen,g(n)]}}(),3),x),D=new h(x),A=function(){for(var E=D.g(a),R=l,N=0;E<u;)E=(E+N)*o,R*=o,N=D.g(1);for(;E>=c;)E/=2,R/=2,N>>>=1;return(E+N)/R};return A.int32=function(){return 0|D.g(4)},A.quick=function(){return D.g(4)/4294967296},A.double=A,m(g(D.S),n),(b.pass||w||function(E,R,N,T){return T&&(T.S&&f(T,D),E.state=function(){return f(D,{})}),N?(e[s]=E,R):E})(A,I,"global"in b?b.global:this==e,b.state)}function h(y){var b,w=y.length,x=this,I=0,D=x.i=x.j=0,A=x.S=[];for(w||(y=[w++]);I<o;)A[I]=I++;for(I=0;I<o;I++)A[I]=A[D=d&D+y[I%w]+(b=A[I])],A[D]=b;(x.g=function(E){for(var R,N=0,T=x.i,M=x.j,H=x.S;E--;)R=H[T=d&T+1],N=N*o+H[d&(H[T]=H[M=d&M+R])+(H[M]=R)];return x.i=T,x.j=M,N})(o)}function f(y,b){return b.i=y.i,b.j=y.j,b.S=y.S.slice(),b}function m(y,b){for(var w,x=y+"",I=0;I<x.length;)b[d&I]=d&(w^=19*b[d&I])+x.charCodeAt(I++);return g(b)}function g(y){return String.fromCharCode.apply(0,y)}if(e["seed"+s]=p,m(e.random(),n),t.exports){t.exports=p;try{r=E8()}catch{}}})([],Math)});Bp.alea=n2e,Bp.xor128=r2e,Bp.xorwow=i2e,Bp.xorshift7=o2e,Bp.xor4096=a2e,Bp.tychei=s2e;var nw=Bp.alea,l2e=he({addN_:function(t){ee(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ee(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(i,o){return K(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Fi(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return _e.runKernelFunc(function(i,o){return i.addN(n)},r,null,"AddN")}});function rw(){iB("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function uV(t){return t.rank===0||t.rank===1?t.as4D(1,1,1,t.size):t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function cV(t,n,e,r,i,o){o==null&&(o=.001);var a,s,l=K(t,"x","batchNorm"),u=K(n,"mean","batchNorm"),c=K(e,"variance","batchNorm");i!=null&&(a=K(i,"scale","batchNorm")),r!=null&&(s=K(r,"offset","batchNorm")),ee(u.rank===c.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ee(s==null||u.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ee(a==null||u.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var d={x:l,scale:a,offset:s,mean:u,variance:c},p={varianceEpsilon:o};return _e.runKernelFunc(function(h,f){var m=uV(l),g=h.batchNormalization(m,_2(u),_2(c),o,_2(a),_2(s));return f([l,u,c,a]),g},d,null,"FusedBatchNorm",p).reshape(l.shape)}function _2(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var u2e=he({batchNormalization_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),rw(),cV(t,n,e,o,i,r)}}),Mv=he({batchNorm_:cV});function dV(t,n,e,r,i,o){var a,s,l=K(t,"x","batchNorm"),u=K(n,"mean","batchNorm"),c=K(e,"variance","batchNorm");return i!=null&&(a=K(i,"scale","batchNorm")),r!=null&&(s=K(r,"offset","batchNorm")),ee(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ee(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),ee(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&ee(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&ee(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Mv(l,u,c,s,a,o)}var c2e=he({batchNormalization2d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),rw(),dV(t,n,e,o,i,r)}}),d2e=he({batchNorm2d_:dV});function pV(t,n,e,r,i,o){var a,s,l=K(t,"x","batchNorm"),u=K(n,"mean","batchNorm"),c=K(e,"variance","batchNorm");return i!=null&&(a=K(i,"scale","batchNorm")),r!=null&&(s=K(r,"offset","batchNorm")),ee(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ee(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),ee(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&ee(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&ee(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Mv(l,u,c,s,a,o)}var p2e=he({batchNormalization3d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),rw(),pV(t,n,e,o,i,r)}}),h2e=he({batchNorm3d_:pV});function hV(t,n,e,r,i,o){var a,s,l=K(t,"x","batchNorm"),u=K(n,"mean","batchNorm"),c=K(e,"variance","batchNorm");return i!=null&&(a=K(i,"scale","batchNorm")),r!=null&&(s=K(r,"offset","batchNorm")),ee(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),ee(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),ee(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&ee(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&ee(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Mv(l,u,c,s,a,o)}var f2e=he({batchNormalization4d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),rw(),hV(t,n,e,o,i,r)}}),m2e=he({batchNorm4d_:hV}),fV=he({broadcastTo_:function(t,n){var e=K(t,"broadcastTo","x"),r=e.shape;if(n.some(function(d){return!(d>0)||d%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var i=e.shape.slice();i.length<n.length;)i.unshift(1);e=e.reshape(i)}for(var o=e.shape,a=Array.from(n),s=n.length-1;s>=0;s--)if(o[s]===n[s])a[s]=1;else if(e.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var l=a.map(function(d,p){return d>1?p:-1}).filter(function(d){return d>=0});if(l.length===0)return e.clone();var u={x:e},c={shape:n,inputShape:o};return _e.runKernelFunc(function(d){return d.tile(e,a)},u,function(d){return{x:function(){return d.sum(l,!0)}}},mB,c)}}),g2e=he({clone_:function(t){var n=K(t,"x","clone",null);return _e.runKernelFunc(function(){return _e.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{x:n},null,vB)}}),iw=he({logicalAnd_:function(t,n){var e=K(t,"a","logicalAnd","bool"),r=K(n,"b","logicalAnd","bool");return Hn(e.shape,r.shape),_e.runKernelFunc(function(i){return i.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),v2e=he({logicalNot_:function(t){var n=K(t,"x","logicalNot","bool");return _e.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),mV=he({logicalOr_:function(t,n){var e=K(t,"a","logicalOr","bool"),r=K(n,"b","logicalOr","bool");return Hn(e.shape,r.shape),_e.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),y2e=he({logicalXor_:function(t,n){var e=K(t,"a","logicalXor","bool"),r=K(n,"b","logicalXor","bool");return Hn(e.shape,r.shape),mV(t,n).logicalAnd(iw(t,n).logicalNot())}}),Gp=he({where_:function(t,n,e){var r=K(n,"a","where"),i=K(e,"b","where"),o=K(t,"condition","where","bool");return ur(r.shape,i.shape,"Error in where: "),o.rank===1?ee(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ur(o.shape,i.shape,"Error in where: "),_e.runKernelFunc(function(a,s){var l=a.select(o,r,i);return s([o]),l},{$condition:o,$a:r,$b:i},function(a,s){var l=s[0];return{$condition:function(){return er(l).toFloat()},$a:function(){return a.mul(l.cast(a.dtype))},$b:function(){return a.mul(l.logicalNot().cast(a.dtype))}}})}}),gV=function(t){return Ft(this,void 0,void 0,function(){var n,e,r;return Ot(this,function(i){switch(i.label){case 0:return[4,(n=K(t,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=K3(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},vV=he({divNoNan_:function(t,n){var e,r=K(t,"a","div"),i=K(n,"b","div");r=(e=$r(r,i))[0],i=e[1];var o=md(r,i),a=er(o),s=i.equal(a);return Gp(s,a,o)}}),rm=he({tile_:function(t,n){var e=K(t,"x","tile",null);ee(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."});var r=[e],i={x:e},o={reps:n};return _e.runKernelFunc(function(a,s){var l=a.tile(e,n);return s([e]),l},i,null,yB,o,r)}}),yV=he({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var i=gn([t,n],r),o=t<=n?t:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,n);if(e==null)return s;if(e.length===1)return rm(ld(s,0),[e[0],1,1]);if(e.length===2)return rm(ld(ld(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return rm(ld(ld(ld(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),b2e=he({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var i=K(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,l=_e.runKernelFunc(function(u){return u.multinomial(s,r,n,e)},{logits2D:s});return a===1?l.as1D():l}}),G2=he({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=K(t,"indices","oneHot","int32"),o=i.shape.concat([n]),a={indices:i=i.flatten()},s={depth:n,onValue:e,offValue:r};return _e.runKernelFunc(function(l,u){return u([i]),l.oneHot(i,n,e,r)},a,null,gB,s).reshape(o)}}),ol=he({pad_:function(t,n,e){e===void 0&&(e=0);var r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:n,constantValue:e},o={x:r};return _e.runKernelFunc(function(a,s){return s([r]),a.pad(r,n,e)},o,null,bB,i)}}),_2e=he({pad1d_:function(t,n,e){return e===void 0&&(e=0),ee(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ol(t,[n],e)}}),w2e=he({pad2d_:function(t,n,e){return e===void 0&&(e=0),ee(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ol(t,n,e)}}),x2e=he({pad3d_:function(t,n,e){return e===void 0&&(e=0),ee(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ol(t,n,e)}}),C2e=he({pad4d_:function(t,n,e){return e===void 0&&(e=0),ee(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ol(t,n,e)}}),I2e=he({rand_:function(t,n,e){var r=Nt(t),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=n();return _e.makeTensor(i,t,e)}}),S2e=.001,bV=.1;function XT(){return _e.backend.floatPrecision()===32?S2e:bV}function QT(t,n,e){var r=!0;if((xo(t)||xo(n))&&(r=!1),xo(t)&&xo(n)&&(r=!0),r){var i=t.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(n)){var a=tu(t),s=tu(n);if(!Fi(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var l=xo(t)?t:Qu(t),u=xo(n)?n:Qu(n);if(l.length!==u.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+u.length+`.
Actual:   `+l+`.
Expected: `+u+".");for(var c=0;c<u.length;++c){var d=l[c],p=u[c];if(!e(d,p))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+p+`.
Actual:   `+l+`.
Expected: `+u+".")}}function ZT(t,n,e){return!isFinite(t)&&!isFinite(n)||!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}var YFe=Object.freeze({TEST_EPSILON_FLOAT16:bV,expectArraysClose:function(t,n,e){return e==null&&(e=XT()),QT(t,n,function(r,i){return ZT(r,i,e)})},testEpsilon:XT,expectPromiseToFail:function(t,n){t().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(t,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return dd(t)||dd(t[0])||dd(n)||dd(n[0])?QT(t,e,function(r,i){return r==i}):QT(t,n,function(r,i){return ZT(r,i,0)})},expectNumbersClose:function(t,n,e){if(e==null&&(e=XT()),!ZT(t,n,e))throw new Error("Numbers differ: actual === "+t+", expected === "+n)},expectValuesInRange:function(t,n,e){for(var r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error("Value out of range:"+t[r]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(t,n){expect(new Float32Array(t)).toEqual(new Float32Array(n))}}),Z3=function(){function t(n,e,r,i,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=nw(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var l=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*l,r=this.mean+this.stdDev*a*l,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),E2e=function(){function t(n,e,r,i){this.alpha=n,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=nw(o.toString()),this.randn=new Z3(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=1-.331*(n=i*i)*n,r=.5*n+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t}(),D2e=function(){function t(n,e,r,i){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=nw(i)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}(),T2e=he({randomGamma_:function(t,n,e,r,i){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new E2e(n,e,r,i),a=gn(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),A2e=he({randomNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new Z3(n,e,r,!1,i),a=gn(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),_V=he({randomUniform_:function(t,n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=gn(t,r),a=new D2e(n,e,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),wV=he({square_:function(t){var n=K(t,"x","square"),e=[n];return _e.runKernelFunc(function(r,i){return i([n]),r.square(n)},{x:n},null,"Square",{},e,[])}}),xV=he({squaredDifference_:function(t,n){var e,r=K(t,"a","squaredDifference"),i=K(n,"b","squaredDifference");e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape);var o={a:r,b:i},a=[r,i];return _e.runKernelFunc(function(s,l){var u=s.squaredDifference(r,i);return l([r,i]),u},o,function(s,l){var u=l[0],c=l[1],d=Ut(2);return{a:function(){return s.mul(u.sub(c).mul(d))},b:function(){return s.mul(c.sub(u).mul(d))}}},Z2,{},a,[])}}),k2e=he({truncatedNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var o=new Z3(n,e,r,!0,i),a=gn(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),CV=he({equal_:function(t,n){var e,r=K(t,"a","equal"),i=K(n,"b","equal");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),M2e=he({equalStrict_:function(t,n){var e=K(t,"a","equalStrict"),r=K(n,"b","equalStrict");return ur(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),R2e=he({greater_:function(t,n){var e,r=K(t,"a","greater"),i=K(n,"b","greater");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),IV=he({greaterEqual_:function(t,n){var e,r=K(t,"a","greaterEqual"),i=K(n,"b","greaterEqual");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],l=a[1];return{a:function(){return er(s)},b:function(){return er(l)}}},"GreaterEqual")}}),N2e=he({greaterEqualStrict_:function(t,n){var e=K(t,"a","greaterEqualStrict"),r=K(n,"b","greaterEqualStrict");return ur(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),F2e=he({greaterStrict_:function(t,n){var e=K(t,"a","greaterStrict"),r=K(n,"b","greaterStrict");return ur(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),O2e=he({less_:function(t,n){var e,r=K(t,"a","less"),i=K(n,"b","less");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),P2e=he({lessEqual_:function(t,n){var e,r=K(t,"a","lessEqual"),i=K(n,"b","lessEqual");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o,a){var s=o.lessEqual(r,i);return a([r,i]),s},{a:r,b:i},null,"LessEqual")}}),L2e=he({lessEqualStrict_:function(t,n){var e=K(t,"a","lessEqualStrict"),r=K(n,"b","lessEqualStrict");return ur(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),B2e=he({lessStrict_:function(t,n){var e=K(t,"a","lessStrict"),r=K(n,"b","lessStrict");return ur(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),V2e=he({notEqual_:function(t,n){var e,r=K(t,"a","notEqual"),i=K(n,"b","notEqual");return e=$r(r,i),r=e[0],i=e[1],Hn(r.shape,i.shape),_e.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),j2e=he({notEqualStrict_:function(t,n){var e=K(t,"a","notEqualStrict"),r=K(n,"b","notEqualStrict");return ur(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function n7(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function r7(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var J3=he({gather_:function(t,n,e){e===void 0&&(e=0);var r=K(t,"x","gather"),i=K(n,"indices","gather","int32");e=Oi(e,r.shape)[0];var o=function(a,s,l){for(var u=a.shape[l],c=[],d=1,p=1,h=0;h<l;h++)c.push(a.shape[h]),d*=a.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=l+1;h<a.rank;h++)c.push(a.shape[h]),p*=a.shape[h];return{batchSize:d,sliceSize:p,dimSize:u,outputShape:c}}(r,i,e);return _e.runKernelFunc(function(a,s){var l=a.gather(r,i.flatten(),e);return s([i]),l},{x:r,indices:i},function(a,s){var l=s[0];return{x:function(){var u=r.shape,c=l.size,d=u.slice(0,e),p=d.length,h=u.slice(e,u.length).slice(1),f=h.length,m=n7(0,p),g=n7(p+1,p+1+f),y=r7([d,[c],h]),b=a.reshape(y),w=l.reshape([c]),x=r7([[p],m,g]),I=b.transpose(x),D=SV(I,w,r.shape[e]),A=X2(x);return D=D.transpose(A)},indices:function(){return l}}},"Gather",{axis:e}).reshape(o.outputShape)}}),SV=he({unsortedSegmentSum_:function(t,n,e){var r=K(t,"x","unsortedSegmentSum"),i=K(n,"segmentIds","unsortedSegmentSum","int32");return ee(Zr(e),function(){return"numSegments must be of dtype int"}),_e.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(r,i,e);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return function(l,u){for(var c=B3(u,er(u)),d=J3(l,c),p=IV(u,Ut(0,"int32")),h=d.rank-p.rank,f=0;f<h;++f)p=ld(p,f+1);p=iw(p,um(d.shape,"bool"));var m=er(d);return Gp(p,d,m)}(o,s)}}})}}),U2e=function(t,n,e){return Ft(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,d,p,h,f,m;return Ot(this,function(g){switch(g.label){case 0:for(r=K(t,"tensor","boolMask"),i=K(n,"mask","boolMask","bool"),o=e??0,a=i.rank,s=r.shape,ee(a>0,function(){return"mask cannot be scalar"}),ur(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=o;u<o+a;u++)l*=s[u];return c=s.slice(0,o).concat([l],s.slice(o+a)),d=r.reshape(c),p=i.reshape([-1]),[4,gV(p)];case 1:return h=g.sent(),f=h.squeeze([1]),m=J3(d,f,o),t!==r&&r.dispose(),n!==i&&i.dispose(),f.dispose(),d.dispose(),p.dispose(),h.dispose(),[2,m]}})})};function EV(t,n,e,r,i,o,a){o===void 0&&(o="NHWC"),ee(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var s=t,l=n,u=!1;n.rank===3&&(u=!0,l=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,t[0],t[1],t[2]]),ee(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),ee(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),ee(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var c=o==="NHWC"?s[3]:s[1],d=o==="NHWC"?l.shape[3]:l.shape[1];ee(c===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[2]+"."}),ee(d===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+e.shape[3]+"."}),a!=null&&ee(Zr(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var p=tw(o),h=bd(s,e.shape,r,1,i,a,!1,p),f=_e.runKernelFunc(function(m,g){var y=m.conv2dDerInput(l,e,h);return g([e,l]),y},{dy4D:l,filter:e},function(m,g){var y=g[0],b=g[1];return{dy4D:function(){return tc(m,y,r,i,o,1,a)},filter:function(){return e5(m,b,y.shape,r,i,o,a)}}});return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function JT(t){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function DV(t,n,e,r,i){ee(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var l=o[4],u=a.shape[4];ee(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),ee(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),ee(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),ee(l===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+e.shape[3]+"."}),ee(u===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+e.shape[4]+"."});var c=Ev(o,e.shape,r,1,i),d=_e.runKernelFunc(function(p){return p.conv3dDerInput(a,e,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var H2e=he({conv1d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=K(t,"x","conv1d"),l=K(n,"filter","conv1d"),u=s,c=!1;s.rank===2&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),ee(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),ee(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),a!=null&&ee(Zr(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),ee(u.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),ee(Lo(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),ee(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),p=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),h=tc(p,d,[1,e],r,"NHWC",[1,o],a);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),tc=he({conv2d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=K(t,"x","conv2d"),l=K(n,"filter","conv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),a!=null&&ee(Zr(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=i==="NHWC"?u.shape[3]:u.shape[1];ee(d===l.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."}),ee(Lo(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var p=tw(i),h=bd(u.shape,l.shape,e,o,r,a,!1,p),f=[l,u],m=_e.runKernelFunc(function(g,y){var b=g.conv2d(u,l,h);return y([l,u]),b},{x:u,filter:l},function(g,y){var b=y,w=b[0],x=b[1];return ee(qp(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return TV(x.shape,g,w,e,r,i)},filter:function(){return e5(x,g,w.shape,e,r,i)}}},"Conv2D",h,f);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),z2e=he({conv3d_:function(t,n,e,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=K(t,"x","conv3d"),s=K(n,"filter","conv3d"),l=a,u=!1;a.rank===4&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),ee(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),ee(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),ee(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),ee(function(p,h){return JT(p)||JT(h)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),ee(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=Ev(l.shape,s.shape,e,o,r),d=_e.runKernelFunc(function(p,h){var f=p.conv3d(l,s,c);return h([l,s]),f},{x:l,$filter:s},function(p,h){ee(JT(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var f=h[0],m=h[1];return{x:function(){return DV(f.shape,p,m,e,r)},$filter:function(){return function(g,y,b,w,x){var I=g;g.rank===4&&(I=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var D=y;D.rank===4&&(D=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),ee(I.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+I.shape+"."}),ee(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),ee(b.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+b+"."}),ee(I.shape[4]===b[3],function(){return"Error in conv3dDerFilter: depth of input "+I.shape[4]+") must match input depth in filter ("+b[3]+"."}),ee(D.shape[4]===b[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+b[4]+")."});var A=Ev(I.shape,b,w,1,x);return _e.runKernelFunc(function(E){return E.conv3dDerFilter(I,D,A)},{x5D:I,dy5D:D})}(f,p,m.shape,e,r)}}});return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),e5=he({conv2dDerFilter_:function(t,n,e,r,i,o,a){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var l=n;l.rank===3&&(l=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),ee(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),ee(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),ee(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var u=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?l.shape[3]:l.shape[1];ee(u===e[2],function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+e[2]+"."}),ee(c===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+e[3]+")."}),a!=null&&ee(Zr(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var d=tw(o),p=bd(s.shape,e,r,1,i,a,!1,d);return _e.runKernelFunc(function(h){return h.conv2dDerFilter(s,l,p)},{x4D:s,dy4D:l})}}),TV=he({conv2dDerInput_:EV}),t5=he({depthwiseConv2d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=K(t,"x","depthwiseConv2d"),l=K(n,"filter","depthwiseConv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),ee(u.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),o==null&&(o=[1,1]),ee(Lo(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&ee(Zr(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=bd(u.shape,l.shape,e,o,r,a,!0),p=[u,l],h=_e.runKernelFunc(function(f,m){var g=f.depthwiseConv2D(u,l,d);return m([u,l]),g},{x:u,filter:l},function(f,m){ee(qp(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var g=m[0],y=m[1];return{x:function(){return AV(g.shape,f,y,d)},filter:function(){return kV(g,f,y.shape,d)}}},"DepthwiseConv2dNative",d,p);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),AV=he({depthwiseConv2dDerInput_:function(t,n,e,r){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=_e.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),kV=he({depthwiseConv2dDerFilter_:function(t,n,e,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),_e.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),n5=he({separableConv2d_:function(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=K(t,"x","separableConv2d"),l=K(n,"depthwiseFilter","separableConv2d"),u=K(e,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ee(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),ee(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),ee(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),ee(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var p=l.shape[2],h=l.shape[3];ee(u.shape[2]===p*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*h+", but got "+u.shape[2]+"."});var f=t5(c,l,r,i,a,o),m=tc(f,u,1,"valid",a);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),W2e=he({conv2dTranspose_:function(t,n,e,r,i,o){return EV(e,K(t,"x","conv2dTranspose"),K(n,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),q2e=he({conv3dTranspose_:function(t,n,e,r,i){return DV(e,K(t,"x","conv3dTranspose"),K(n,"filter","conv3dTranspose"),r,i)}}),MV=he({matMul_:function(t,n,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=K(t,"a","matMul"),a=K(n,"b","matMul");i=$r(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],l=r?a.shape[a.rank-1]:a.shape[a.rank-2],u=e?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=o.shape.slice(0,-2),p=a.shape.slice(0,-2),h=Nt(d),f=Nt(p);ee(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),ee(Fi(d,p),function(){return"Error in matMul: outer dimensions ("+d+") and ("+p+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),ee(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var m=o.shape.slice(0,-2).concat([u,c]),g=e?o.as3D(h,s,u):o.as3D(h,u,s),y=r?a.as3D(f,c,l):a.as3D(f,l,c),b={transposeA:e,transposeB:r};return _e.runKernelFunc(function(w,x){var I=w.batchMatMul(g,y,e,r);return x([g,y]),I},{a:g,b:y},function(w,x){var I=x,D=I[0],A=I[1];return e||r?!e&&r?{a:function(){return w.matMul(A,!1,!1)},b:function(){return w.matMul(D,!0,!1)}}:e&&!r?{a:function(){return A.matMul(w,!1,!0)},b:function(){return D.matMul(w,!1,!1)}}:{a:function(){return A.matMul(w,!0,!0)},b:function(){return w.matMul(D,!0,!0)}}:{a:function(){return w.matMul(A,!1,!0)},b:function(){return D.matMul(w,!0,!1)}}},"BatchMatMul",b).reshape(m)}}),G2e=he({dot_:function(t,n){var e=K(t,"t1","dot"),r=K(n,"t2","dot");ee(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return ee(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),$2e=he({outerProduct_:function(t,n){var e=K(t,"v1","outerProduct"),r=K(n,"v2","outerProduct");return ee(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Rv=he({reverse_:function(t,n){var e=K(t,"x","reverse");if(e.rank===0)return e.clone();var r=Oi(n,e.shape);return _e.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),K2e=he({reverse1d_:function(t){var n=K(t,"x","reverse");return ee(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Rv(n,0)}}),Y2e=he({reverse2d_:function(t,n){var e=K(t,"x","reverse");return ee(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Rv(e,n)}}),X2e=he({reverse3d_:function(t,n){var e=K(t,"x","reverse");return ee(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Rv(e,n)}}),Q2e=he({reverse4d_:function(t,n){var e=K(t,"x","reverse");return ee(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Rv(e,n)}});function RV(t,n,e,r,i,o){var a=K(t,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),ee(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),ee(Lo(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&ee(Zr(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=gd(s.shape,n,e,r,i,o);if(u.filterWidth===1&&u.filterHeight===1&&Fi(u.inShape,u.outShape))return a.clone();var c=[s],d=_e.runKernelFunc(function(p,h){var f=p.maxPool(s,u);return h([s,f]),f},{x:s},function(p,h){var f=h[0],m=h[1];return{x:function(){return function(g,y,b,w,x,I,D,A){var E=K(g,"dy","maxPoolBackprop"),R=K(y,"input","maxPoolBackprop"),N=K(b,"output","maxPoolBackprop");ee(R.rank===E.rank,function(){return"Rank of input ("+R.rank+") does not match rank of dy ("+E.rank+")"}),I==null&&(I=[1,1]),ee(Lo(x,I),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+I+"'"}),ee(E.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+E.rank+"."}),ee(R.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+R.rank+"."}),A!=null&&ee(Zr(D),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+D+"."});var T=gd(R.shape,w,x,I,D,A);return _e.runKernelFunc(function(M){return M.maxPoolBackprop(E,R,N,T)},{$dy:E,$input:R})}(p,f,m,n,e,r,i)}}},"MaxPool",u,c);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function NV(t,n,e,r,i,o){var a=K(t,"x","avgPool","float32");r==null&&(r=[1,1]),ee(Lo(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ee(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&ee(Zr(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=gd(s.shape,n,e,r,i,o);if(u.filterWidth===1&&u.filterHeight===1&&Fi(u.inShape,u.outShape))return a.clone();var c=_e.runKernelFunc(function(d){return d.avgPool(s,u)},{x:s},function(d){return{x:function(){return function(p,h,f,m,g,y){var b=K(p,"dy","avgPoolBackprop"),w=K(h,"input","avgPoolBackprop");ee(w.rank===b.rank,function(){return"Rank of input ("+w.rank+") does not match rank of dy ("+b.rank+")"}),g==null&&(g=[1,1]),ee(Lo(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var x=w,I=b,D=!1;w.rank===3&&(D=!0,x=w.as4D(1,w.shape[0],w.shape[1],w.shape[2]),I=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),ee(I.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."}),ee(x.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+x.rank+"."});var A=gd(x.shape,f,m,g,y),E=_e.runKernelFunc(function(R){return R.avgPoolBackprop(I,x,A)},{dy4D:I,input4D:x});return D?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}(d,s,n,e,r,i)}}},"AvgPool",u);return c=c.cast(a.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Ra=he({maxPool_:function(t,n,e,r,i){return RV(t,n,e,1,r,i)}}),Z2e=he({avgPool_:function(t,n,e,r,i){return NV(t,n,e,1,r,i)}}),J2e=he({pool_:function(t,n,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=K(t,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ee(Lo(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var u,c=gd(s.shape,n,o,i,r),d=[c.dilationHeight,c.dilationWidth];u=r==="same"?function(x,I){var D=x.map(function(R,N){return R+(R-1)*(I[N]-1)}).map(function(R){return R-1}),A=D.map(function(R){return Math.floor(R/2)}),E=D.map(function(R,N){return R-A[N]});return D.map(function(R,N){return[A[N],E[N]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var p=d[0]===1&&d[1]===1,h=function(x,I,D){var A=D.map(function(V){return V[0]}),E=D.map(function(V){return V[1]}),R=x.concat(A,E),N=I.map(function(V,X){return(V-R[X]%V)%V}),T=E.map(function(V,X){return V+N[X]}),M=I.map(function(V,X){return[A[X],T[X]]}),H=I.map(function(V,X){return[0,N[X]]});return[M,H]}([c.inHeight,c.inWidth],d,u),f=h[0],m=h[1],g=p?r:"valid",y=p?s:cB(s,d,f),b=(e==="avg"?function(){return NV(y,n,o,1,g)}:function(){return RV(y,n,o,1,g)})(),w=p?b:uB(b,d,m);return l?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),ewe=he({maxPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=K(t,"x","maxPool3d"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),ee(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),ee(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),ee(Lo(e,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&ee(Zr(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Sv(l.shape,n,e,a,r,i,o),d=_e.runKernelFunc(function(p,h){var f=p.maxPool3d(l,c);return h([l,f]),f},{x:l},function(p,h){var f=h[0],m=h[1];return{x:function(){return function(g,y,b,w,x,I,D,A){var E=K(g,"dy","maxPool3dBackprop"),R=K(y,"input","maxPool3dBackprop"),N=K(b,"output","maxPool3dBackprop"),T=E,M=R,H=N,V=!1;R.rank===4&&(V=!0,T=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3]),M=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),H=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),ee(T.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+T.rank+"."}),ee(M.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+M.rank+"."}),ee(H.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+H.rank+"."}),I==null&&(I=[1,1,1]),ee(Lo(x,I),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+I+"'"}),A!=null&&ee(Zr(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+D+"."});var X=Sv(M.shape,w,x,I,D,A),Y=_e.runKernelFunc(function(Q){return Q.maxPool3dBackprop(T,M,H,X)},{dy5D:T,input5D:M});return V?Y.as4D(Y.shape[1],Y.shape[2],Y.shape[3],Y.shape[4]):Y}(p,f,m,n,e,a,r,i)}}});return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),twe=he({avgPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=K(t,"x","avgPool3d","float32"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),ee(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),ee(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),ee(Lo(e,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&ee(Zr(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Sv(l.shape,n,e,a,r,i,o),d=_e.runKernelFunc(function(p){return p.avgPool3d(l,c)},{x:l},function(p){return{x:function(){return function(h,f,m,g,y,b,w){var x=K(h,"dy","avgPool3dBackprop"),I=K(f,"input","avgPool3dBackprop"),D=x,A=I,E=!1;I.rank===4&&(E=!0,D=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]),A=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3])),ee(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),ee(A.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+A.rank+"."}),y==null&&(y=[1,1,1]),ee(Lo(g,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+y+"'"}),w!=null&&ee(Zr(b),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+b+"."});var R=Sv(A.shape,m,g,y,b,w),N=_e.runKernelFunc(function(T){return T.avgPool3dBackprop(D,A,R)},{dy5D:D,input5D:A});return E?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(p,l,n,e,a,r,i)}}});return d=d.cast(l.dtype),u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),nwe=he({maxPoolWithArgmax_:function(t,n,e,r,i){i===void 0&&(i=!1);var o=K(t,"x","maxPoolWithArgmax"),a={filterSize:n,strides:e,pad:r,includeBatchInIndex:i},s=_e.runKernel("MaxPoolWithArgmax",{x:o},a);return{result:s[0],indexes:s[1]}}}),vd=he({slice_:function(t,n,e){var r,i,o=K(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(l){ee(l!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(l,u){return l>=0?l:(ee(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+u+"."}),o.shape[u]-r[u])}),SB(o,r,i);var a=o.shape,s={begin:r,size:i};return _e.runKernelFunc(function(l){return l.slice(o,r,i)},{x:o},function(l){for(var u=[],c=0;c<l.rank;c++)u.push([r[c],a[c]-r[c]-i[c]]);return{x:function(){return ol(l,u)}}},"Slice",s)}}),rwe=he({slice1d_:function(t,n,e){var r=K(t,"x","slice1d");return ee(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),vd(r,[n],[e])}}),iwe=he({slice2d_:function(t,n,e){var r=K(t,"x","slice2d");return ee(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),vd(r,n,e)}}),owe=he({slice3d_:function(t,n,e){var r=K(t,"x","slice3d");return ee(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),vd(r,n,e)}}),awe=he({slice4d_:function(t,n,e){var r=K(t,"x","slice4d");return ee(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),vd(r,n,e)}});function FV(t,n,e,r,i){return n.rank<e.rank&&(n=n.reshape(ia(n.shape,r))),t.rank<e.rank&&(t=t.reshape(ia(t.shape,r))),{x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return i==null?o:o.transpose(i)}}}var swe=he({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","all","bool"),i=Oi(n,r.shape),o=i,a=nl(o,r.rank);a!=null&&(r=r.transpose(a),o=rl(o.length,r.rank));var s=_e.runKernelFunc(function(u){return u.all(r,o)},{$x:r});if(e){var l=ia(s.shape,i);return s.reshape(l)}return s}}),lwe=he({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","any","bool"),i=Oi(n,r.shape),o=i,a=nl(o,r.rank);a!=null&&(r=r.transpose(a),o=rl(o.length,r.rank));var s=_e.runKernelFunc(function(u){return u.any(r,o)},{$x:r});if(e){var l=ia(s.shape,i);return s.reshape(l)}return s}}),uwe=he({argMax_:function(t,n){n===void 0&&(n=0);var e=K(t,"x","argMax");n==null&&(n=0);var r=Oi(n,e.shape),i=nl(r,e.rank);i!=null&&(e=e.transpose(i),r=rl(r.length,e.rank));var o={axis:r[0]},a=[e];return _e.runKernelFunc(function(s,l){var u=s.argMax(e,r[0]);return l([e]),u},{x:e},function(s,l){var u=l[0];return{x:function(){return er(u)}}},"ArgMax",o,a)}}),cwe=he({argMin_:function(t,n){n===void 0&&(n=0);var e=K(t,"x","argMin");n==null&&(n=0);var r=Oi(n,e.shape),i=nl(r,e.rank);return i!=null&&(e=e.transpose(i),r=rl(r.length,e.rank)),_e.runKernelFunc(function(o,a){var s=o.argMin(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return er(s)}}})}}),dwe=he({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","logSumExp"),i=Oi(n,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var l=ia(s.shape,i);return s.reshape(l)}return s}}),pwe=he({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","max"),i=r,o=Oi(n,r.shape),a=o,s=nl(a,r.rank);s!=null&&(r=r.transpose(s),a=rl(a.length,r.rank));var l=[r],u=_e.runKernelFunc(function(d,p){var h=d.max(r,a);return p([i,h]),h},{x:r},function(d,p){return FV(d,p[1],p[0],o,s)},"Max",{axes:a},l,[!0]);if(e){var c=ia(u.shape,o);u=u.reshape(c)}return u}}),hwe=he({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","mean"),i=Oi(n,r.shape),o=Nt(wo(r.shape,i)[1]);return ew(function(a){var s=Ut(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(l){var u=a.shape.slice();return i.forEach(function(c){u[c]=1}),l.reshape(u).mul(um(a.shape,"float32")).div(o)}}})(r)}}),fwe=he({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","min"),i=r,o=Oi(n,r.shape),a=o,s=nl(a,r.rank);s!=null&&(r=r.transpose(s),a=rl(a.length,r.rank));var l=[r],u=_e.runKernelFunc(function(d,p){var h=d.min(r,a);return p([i,h]),h},{x:r},function(d,p){return FV(d,p[1],p[0],o,s)},"Min",{axes:a},l,[!0]);if(e){var c=ia(u.shape,o);u=u.reshape(c)}return u}}),mwe=he({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=Oi(n,(t=K(t,"x","moments")).shape),i=t.mean(r,e),o=i.shape;e||(o=ia(i.shape,r));var a=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,e)}}}),ud=he({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Oi(n,r.shape);return ew(function(o){var a=nl(i,o.rank),s=i,l=o;a!=null&&(l=o.transpose(a),s=rl(s.length,o.rank));var u=function(h){var f=o.shape.slice();return i.forEach(function(m){f[m]=1}),h.reshape(f).mul(um(o.shape,"float32"))},c={axes:s},d=_e.runKernelFunc(function(h){return h.sum(l,s)},{x:l},function(h){return{x:function(){return u(h)}}},"Sum",c);if(e){var p=ia(d.shape,i);d=d.reshape(p)}return{value:d,gradFunc:u}})(r)}}),gwe=he({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=K(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Oi(n,r.shape),o=nl(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=rl(a.length,r.rank));var l=_e.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(e){var u=ia(l.shape,i);l=l.reshape(u)}return l}}),OV=he({elu_:function(t){var n=K(t,"x","elu");return _e.runKernelFunc(function(e,r){var i=e.elu(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return _e.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),vwe=he({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=K(t,"x","leakyRelu");return B3(Ut(n).mul(e),e)}}),PV=he({prelu_:function(t,n){var e=K(t,"x","prelu"),r=K(n,"alpha","prelu");return _e.runKernelFunc(function(i,o){var a=i.prelu(e,r);return o([e,r]),a},{x:e,alpha:r},function(i,o){var a=o[0],s=o[1],l=a.greater(0);return{x:function(){return Gp(l,i,i.mul(s))},alpha:function(){var u=Gp(l,er(i),i.mul(a)),c=Ni(s.shape,i.shape);return c.length>0&&(u=u.sum(c)),u.reshape(s.shape)}}},"Prelu")}}),cm=he({relu_:function(t){var n=K(t,"x","relu");return n.dtype==="bool"?n.toInt():_e.runKernelFunc(function(e,r){var i=e.relu(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),LV=he({relu6_:function(t){var n=K(t,"x","relu6");return n.dtype==="bool"?n.toInt():_e.runKernelFunc(function(e,r){var i=e.relu6(n);return r([n]),i},{x:n},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),ywe=he({selu_:function(t){var n=K(t,"x","selu");return _e.runKernelFunc(function(e,r){var i=e.selu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(Ut(0)),a=Ut(X3),s=Ut(Q3),l=e.mul(s),u=e.mul(a).mul(i.toFloat().exp());return Gp(o,l,u)}}})}}),bwe=he({localResponseNormalization_:function(t,n,e,r,i){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=K(t,"x","localResponseNormalization");ee(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),ee(Zr(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var l=_e.runKernelFunc(function(u,c){var d=u.localResponseNormalization4D(a,n,e,r,i);return c([a,d]),d},{x4D:a},function(u,c){var d=c[0],p=c[1];return{x4D:function(){return _e.runKernelFunc(function(h){return h.LRNGrad(u,d,p,n,e,r,i)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),BV=he({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=function s(l,u,c){if(c===void 0&&(c=null),l.rank===0)return l.abs();if(l.rank!==1&&c===null)return s(l.reshape([-1]),u,c);if(l.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(u===1)return l.abs().sum(c);if(u===1/0)return l.abs().max(c);if(u===-1/0)return l.abs().min(c);if(u==="euclidean"||u===2)return l.abs().pow(Ut(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}if(Array.isArray(c)&&c.length===2){if(u===1)return l.abs().sum(c[0]).max(c[1]-1);if(u===1/0)return l.abs().sum(c[1]).max(c[0]);if(u===-1/0)return l.abs().sum(c[1]).min(c[0]);if(u==="fro"||u==="euclidean")return l.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}throw new Error("Error in norm: invalid axis: "+c)}(t=K(t,"x","norm"),n,e),o=i.shape;if(r){var a=Oi(e,t.shape);o=ia(i.shape,a)}return i.reshape(o)}}),_we=he({basicLSTMCell_:function(t,n,e,r,i,o){var a=K(t,"forgetBias","basicLSTMCell"),s=K(n,"lstmKernel","basicLSTMCell"),l=K(e,"lstmBias","basicLSTMCell"),u=K(r,"data","basicLSTMCell"),c=K(i,"c","basicLSTMCell"),d=K(o,"h","basicLSTMCell"),p=u.concat(d,1).matMul(s).add(l),h=p.shape[0],f=p.shape[1]/4,m=[h,f],g=p.slice([0,0],m),y=p.slice([0,f],m),b=p.slice([0,2*f],m),w=p.slice([0,3*f],m),x=g.sigmoid().mulStrict(y.tanh()).addStrict(c.mulStrict(a.add(b).sigmoid())),I=x.tanh().mulStrict(w.sigmoid());return[x,I]}}),wwe=he({multiRNNCell_:function(t,n,e,r){for(var i=K(n,"data","multiRNNCell"),o=B2(e,"c","multiRNNCell"),a=B2(r,"h","multiRNNCell"),s=i,l=[],u=0;u<t.length;u++){var c=t[u](s,o[u],a[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var d=[],p=[];for(u=0;u<l.length;u+=2)d.push(l[u]),p.push(l[u+1]);return[d,p]}}),xwe=he({movingAverage_:function(t,n,e,r,i){i===void 0&&(i=!0);var o=K(t,"v","movingAverage"),a=K(n,"x","movingAverage"),s=K(e,"decay","movingAverage");M7(o,a),ee(Fi(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var l=Ut(1),u=l.sub(s),c=a.sub(o).mul(u);if(i){ee(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=K(r,"step","movingAverage");c=c.div(l.sub(z2(s,d)))}return o.add(c)}}),Cwe=he({stridedSlice_:function(t,n,e,r,i,o,a,s,l){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),r==null&&(r=new Array(n.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var u=K(t,"x","stridedSlice"),c=y3(s),d=u.shape.slice();c.forEach(function(g){n[g]=0,e[g]=1,d.splice(g,0,1)}),u=u.reshape(d);for(var p=0;p<u.rank;p++)n[p]=EB(i,n,r,u.shape,p),e[p]=DB(o,e,r,u.shape,p),r[p]=r[p]||1;var h=y3(l);h.forEach(function(g){e[g]=n[g]+1,r[g]=1});var f=J2(n,e,r),m=f.filter(function(g,y){return h.indexOf(y)===-1});return r.every(function(g){return g===1})?vd(u,n,f).reshape(m):_e.runKernelFunc(function(g){return g.stridedSlice(u,n,e,r)},{$x:u}).reshape(m)}}),Iwe=he({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=_e.runKernelFunc(function(a){return a.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),Swe=he({scatterND_:function(t,n,e){var r=K(t,"indices","scatterND","int32"),i=K(n,"updates","scatterND");return IB(i,r,e),_e.runKernelFunc(function(o){return o.scatterND(r,i,e)},{indices:r,updates:i},null,"ScatterNd",{shape:e})}}),r5=he({fft_:function(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return _e.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),$2=he({ifft_:function(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return _e.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),i5=he({rfft_:function(t,n){ee(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],i=t.size/r;if(n!=null&&n<r){var o=t.shape.map(function(y){return 0}),a=t.shape.map(function(y){return y});a[t.shape.length-1]=n,e=t.slice(o,a),r=n}else if(n!=null&&n>r){var s=t.shape.map(function(y){return y});s[t.shape.length-1]=n-r,e=t.concat(pi(s),t.shape.length-1),r=n}else e=t;var l=e.zerosLike(),u=_o(e,l).as2D(i,r),c=r5(u),d=Math.floor(r/2)+1,p=Ds(c),h=eu(c),f=p.split([d,r-d],p.shape.length-1),m=h.split([d,r-d],h.shape.length-1),g=e.shape.slice();return g[e.shape.length-1]=d,_o(f[0],m[0]).reshape(g)}}),VV=he({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),i=$2(r);return Ds(i)}var o=[e,2*(n-1)],a=Ds(t).as2D(e,n),s=eu(t).as2D(e,n),l=a.slice([0,1],[e,n-2]).reverse(1),u=s.slice([0,1],[e,n-2]).reverse(1).mul(Ut(-1)),c=a.concat(l,1),d=s.concat(u,1);return r=_o(c,d).as2D(o[0],o[1]),i=$2(r),Ds(i)}}),Ewe=Object.freeze({fft:r5,ifft:$2,rfft:i5,irfft:VV}),Dwe=he({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var i=K(t,"sparseIndices","sparseToDense","int32"),o=K(n,"sparseValues","sparseToDense"),a=K(r,"defaultValue","sparseToDense",o.dtype);return function(s,l,u,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,p=s.rank>1?s.shape[1]:1;if(u.length!==p)throw new Error("outputShape has incorrect number of elements:, "+u.length+", should be: "+p+".");var h=l.size;if(l.rank!==0&&(l.rank!==1||h!==d))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+d+"]");if(l.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,a),_e.runKernelFunc(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),Twe=he({gatherND_:function(t,n){var e=K(n,"indices","gatherND","int32"),r=K(t,"x","gatherND");return _e.runKernelFunc(function(i){return i.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),Awe=he({diag_:function(t){var n=K(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return _e.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),kwe=he({dropout_:function(t,n,e,r){var i=K(t,"x","dropout");if(ee(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),ee(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return t instanceof wr?i.clone():i;var o=function(l,u){if(u==null)return l.shape.slice();if(Fi(l.shape,u))return u;if(l.shape.length===u.length){for(var c=[],d=0;d<l.shape.length;d++)u[d]==null&&l.shape[d]!=null?c.push(l.shape[d]):c.push(u[d]);return c}return u}(i,e),a=1-n,s=_V(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function jV(t,n,e){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var a=2*Math.PI*o/(t+r-1);i[o]=n-e*Math.cos(a)}return oa(i,"float32")}var o5=he({hannWindow_:function(t){return jV(t,.5,.5)}}),UV=he({hammingWindow_:function(t){return jV(t,.54,.46)}}),a5=he({frame_:function(t,n,e,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,a=[];o+n<=t.size;)a.push(vd(t,o,n)),o+=e;if(r)for(;o<t.size;){var s=o+n-t.size,l=Ma([vd(t,o,n-s),ec([s],i)]);a.push(l),o+=e}return a.length===0?hd([],[0,n]):Ma(a).as2D(a.length,n)}}),HV=he({stft_:function(t,n,e,r,i){var o;i===void 0&&(i=o5),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=a5(t,n,e),s=Gr(a,i(n)),l=[],u=0;u<a.shape[0];u++)l.push(i5(s.slice([u,0],[1,n]),r));return Ma(l)}}),Mwe=Object.freeze({hannWindow:o5,hammingWindow:UV,frame:a5,stft:HV}),Oo,Rwe=function(t,n,e){return e===void 0&&(e=1),Ft(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,d,p,h,f,m,g;return Ot(this,function(y){switch(y.label){case 0:return r=K(t,"predictions","inTopK"),i=K(n,"targets","inTopK"),ee(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),ee(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),ur(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],ee(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return a=y.sent(),[4,i.data()];case 2:for(s=y.sent(),l=[a.length/o,o],c=l[1],d=Hp("bool",u=l[0]),p=0;p<u;p++){for(h=p*c,f=a.subarray(h,h+c),m=[],g=0;g<f.length;g++)m.push({value:f[g],index:g});for(m.sort(function(b,w){return w.value-b.value}),d[p]=0,g=0;g<e;g++)if(m[g].index===s[p]){d[p]=1;break}}return t!==r&&r.dispose(),n!==i&&i.dispose(),[2,so(d,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Oo||(Oo={}));var Nwe=he({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=Oo.SUM_BY_NONZERO_WEIGHTS);var i=K(t,"labels","absoluteDifference"),o=K(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=K(e,"weights","absoluteDifference")),ur(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return nc(s,a,r)}}),nc=he({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=Oo.SUM_BY_NONZERO_WEIGHTS);var r=K(t,"losses","computeWeightedLoss"),i=null;n!=null&&(i=K(n,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===Oo.NONE)return o;if(e===Oo.SUM)return o.sum();if(e===Oo.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(Ut(a)):s}if(e===Oo.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(Ut(r.size));var l=i.mul(um(r.shape)).notEqual(Ut(0)).sum().toFloat();return o.sum().div(l)}throw Error("Unknown reduction: "+e)}}),Fwe=he({cosineDistance_:function(t,n,e,r,i){i===void 0&&(i=Oo.SUM_BY_NONZERO_WEIGHTS);var o=K(t,"labels","cosineDistance"),a=K(n,"predictions","cosineDistance"),s=null;r!=null&&(s=K(r,"weights","cosineDistance")),ur(o.shape,a.shape,"Error in cosineDistance: ");var l=Ut(1).sub(o.mul(a).sum(e,!0));return nc(l,s,i)}}),Owe=he({hingeLoss_:function(t,n,e,r){r===void 0&&(r=Oo.SUM_BY_NONZERO_WEIGHTS);var i=K(t,"labels","hingeLoss"),o=K(n,"predictions","hingeLoss"),a=null;e!=null&&(a=K(e,"weights","hingeLoss")),ur(i.shape,o.shape,"Error in hingeLoss: ");var s=Ut(1);i=Ut(2).mul(i).sub(s);var l=s.sub(i.mul(o)).relu();return nc(l,a,r)}}),Pwe=he({huberLoss_:function(t,n,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Oo.SUM_BY_NONZERO_WEIGHTS);var o=K(t,"labels","huberLoss"),a=K(n,"predictions","huberLoss"),s=null;e!=null&&(s=K(e,"weights","huberLoss")),ur(o.shape,a.shape,"Error in huberLoss: ");var l=Ut(r),u=a.sub(o).abs(),c=xB(u,l),d=u.sub(c),p=Ut(.5).mul(c.square()).add(l.mul(d));return nc(p,s,i)}}),Lwe=he({logLoss_:function(t,n,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Oo.SUM_BY_NONZERO_WEIGHTS);var o=K(t,"labels","logLoss"),a=K(n,"predictions","logLoss"),s=null;e!=null&&(s=K(e,"weights","logLoss")),ur(o.shape,a.shape,"Error in logLoss: ");var l=Ut(1),u=Ut(r),c=o.mul(a.add(u).log()).neg().sub(l.sub(o).mul(l.sub(a).add(u).log()));return nc(c,s,i)}}),Bwe=he({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=Oo.SUM_BY_NONZERO_WEIGHTS);var i=K(t,"labels","meanSquaredError"),o=K(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=K(e,"weights","meanSquaredError")),ur(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return nc(s,a,r)}}),Vwe=he({sigmoidCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Oo.SUM_BY_NONZERO_WEIGHTS);var o=K(t,"multiClassLabels","sigmoidCrossEntropy"),a=K(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=K(e,"weights","sigmoidCrossEntropy")),ur(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Ut(r),u=Ut(1),c=Ut(.5);o=o.mul(u.sub(l)).add(c.mul(l))}var d=function(p,h){var f=K(p,"labels","sigmoidCrossEntropyWithLogits"),m=K(h,"logits","sigmoidCrossEntropyWithLogits");ur(f.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),y=m.mul(f),b=m.abs().neg().exp().log1p();return g.sub(y).add(b)}(o,a);return nc(d,s,i)}}),jwe=he({softmaxCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Oo.SUM_BY_NONZERO_WEIGHTS);var o=K(t,"onehotLabels","softmaxCrossEntropy"),a=K(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=K(e,"weights","softmaxCrossEntropy")),ur(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Ut(r),u=Ut(1),c=Ut(o.shape[1]);o=o.mul(u.sub(l)).add(l.div(c))}var d=function(p,h,f){if(f===void 0&&(f=-1),f===-1&&(f=h.rank-1),f!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+f);return ew(function(m,g,y){var b=g.logSumExp([f],!0),w=g.toFloat().sub(b);return y([m,w]),{value:w.mul(m).neg().sum([f]),gradFunc:function(x,I){var D=I[0],A=I[1],E=ia(x.shape,[f]);return[x.reshape(E).mul(D.toFloat().sub(A.exp())),x.reshape(E).mul(A.exp().sub(D.toFloat()))]}}})(p,h)}(o,a);return nc(d,s,i)}}),Uwe=Object.freeze({get Reduction(){return Oo},absoluteDifference:Nwe,computeWeightedLoss:nc,cosineDistance:Fwe,hingeLoss:Owe,huberLoss:Pwe,logLoss:Lwe,meanSquaredError:Bwe,sigmoidCrossEntropy:Vwe,softmaxCrossEntropy:jwe});function i7(t,n){return n===void 0&&(n=!1),_e.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],i=yV(e),o=t.clone(),a=hd([[1]],[1,1]),s=a.clone(),l=e>=r?r:e,u=function(d){var p,h=o,f=s,m=i;p=_e.tidy(function(){var g=o.slice([d,d],[e-d,1]),y=g.norm(),b=o.slice([d,d],[1,1]),w=hd([[-1]]).where(b.greater(0),hd([[1]])),x=b.sub(w.mul(y)),I=g.div(x);s=I.shape[0]===1?a.clone():a.concat(I.slice([1,0],[I.shape[0]-1,I.shape[1]]),0);var D=w.matMul(x).div(y).neg(),A=o.slice([d,0],[e-d,r]),E=D.mul(s),R=s.transpose();if(d===0)o=A.sub(E.matMul(R.matMul(A)));else{var N=A.sub(E.matMul(R.matMul(A)));o=o.slice([0,0],[d,r]).concat(N,0)}var T=E.transpose(),M=i.slice([0,d],[e,i.shape[1]-d]);if(d===0)i=M.sub(M.matMul(s).matMul(T));else{var H=M.sub(M.matMul(s).matMul(T));i=i.slice([0,0],[e,d]).concat(H,1)}return[s,o,i]}),s=p[0],o=p[1],i=p[2],Aa([h,f,m])},c=0;c<l;++c)u(c);return!n&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var Hwe=he({bandPart_:function(t,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=K(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),a=o[0],s=o[1];if(!(n<=a))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+a+").");if(!(e<=s))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+s+").");n<0&&(n=a),e<0&&(e=s);var l=V2(0,a,1,"int32").reshape([-1,1]),u=V2(0,s,1,"int32"),c=ka(l,u),d=iw(c.lessEqual(Ut(+n,"int32")),c.greaterEqual(Ut(-e,"int32"))),p=pi([a,s],r.dtype);return Zu(Tv(r.reshape([-1,a,s])).map(function(h){return Gp(d,h,p)})).reshape(i)}}),zwe=he({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,ee(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(l){ee(t[l].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[l].shape[0]+" vs. "+e+")"})},i=1;i<t.length;++i)r(i)}else n=!0,t=P3(t,t.shape[0],0).map(function(l){return dB(l,[0])});ee(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(l){o.push(_e.tidy(function(){var u=a[l];if(l>0)for(var c=0;c<l;++c){var d=ud(o[c].mulStrict(u)).mul(o[c]);u=u.sub(d)}return u.div(BV(u,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return n?Zu(o,0):o}}),Wwe=he({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return i7(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=Tv(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(a){var s=i7(a,n),l=s[0],u=s[1];i.push(l),o.push(u)}),[Zu(i,0).reshape(t.shape),Zu(o,0).reshape(t.shape)]}}),qwe=Object.freeze({bandPart:Hwe,gramSchmidt:zwe,qr:Wwe});function ow(t,n,e,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var a=t.shape[0];return e=Math.min(e,a),ee(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ee(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ee(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ee(n.rank===1,function(){return"scores must be a 1D tensor"}),ee(n.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+n.shape[0]}),ee(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var Gwe=he({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=K(t,"images","resizeBilinear");ee(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],l=_e.runKernelFunc(function(u,c){return c([i]),u.resizeBilinear(i,a,s,e)},{x:i},function(u,c){return{x:function(){return _e.runKernelFunc(function(d){return d.resizeBilinearBackprop(u,c[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:a,newWidth:s});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),$we=he({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=K(t,"images","resizeNearestNeighbor");ee(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),ee(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],l=_e.runKernelFunc(function(u,c){return c([i]),u.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(u,c){return{batchImages:function(){return _e.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(u,c[0],e)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Kwe=he({nonMaxSuppression_:function(t,n,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=K(t,"boxes","nonMaxSuppression"),a=K(n,"scores","nonMaxSuppression"),s=ow(o,a,e,r,i);e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var l={maxOutputSize:e,iouThreshold:r,scoreThreshold:i};return _e.runKernelFunc(function(u){return u.nonMaxSuppression(o,a,e,r,i)},{boxes:o,scores:a},null,"NonMaxSuppressionV3",l)}}),Ywe=function(t,n,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ft(this,void 0,void 0,function(){var o,a,s,l,u,c,d;return Ot(this,function(p){switch(p.label){case 0:return o=K(t,"boxes","nonMaxSuppressionAsync"),a=K(n,"scores","nonMaxSuppressionAsync"),s=ow(o,a,e,r,i),e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return l=p.sent(),u=l[0],c=l[1],d=G3(u,c,e,r,i),o!==t&&o.dispose(),a!==n&&a.dispose(),[2,d]}})})},Xwe=he({nonMaxSuppressionWithScore_:function(t,n,e,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var a=K(t,"boxes","nonMaxSuppression"),s=K(n,"scores","nonMaxSuppression"),l=ow(a,s,e,r,i,o),u={maxOutputSize:e=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:o=l.softNmsSigma},c=_e.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}}),Qwe=function(t,n,e,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Ft(this,void 0,void 0,function(){var a,s,l,u,c,d,p;return Ot(this,function(h){switch(h.label){case 0:return a=K(t,"boxes","nonMaxSuppressionAsync"),s=K(n,"scores","nonMaxSuppressionAsync"),l=ow(a,s,e,r,i,o),e=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return u=h.sent(),c=u[0],d=u[1],p=$3(c,d,e,r,i,o),a!==t&&a.dispose(),s!==n&&s.dispose(),[2,p]}})})},Zwe=he({cropAndResize_:function(t,n,e,r,i,o){var a=K(t,"image","cropAndResize"),s=K(n,"boxes","cropAndResize","float32"),l=K(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var u=s.shape[0];return ee(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),ee(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."}),ee(l.rank===1&&l.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."}),ee(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ee(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ee(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),_e.runKernelFunc(function(c,d){return c.cropAndResize(a,s,l,r,i,o)},{images:a,boxes:s,boxInd:l},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),s5=Object.freeze({resizeBilinear:Gwe,resizeNearestNeighbor:$we,nonMaxSuppression:Kwe,nonMaxSuppressionAsync:Ywe,nonMaxSuppressionWithScore:Xwe,nonMaxSuppressionWithScoreAsync:Qwe,cropAndResize:Zwe}),l5=function(t,n){return!(t>0)||n==="linear"},u5=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},c5=function(t,n){var e=n,r=Ni(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},d5=function(t,n,e){if(n==="linear")return t;if(n==="relu")return cm(t);if(n==="elu")return OV(t);if(n==="relu6")return LV(t);if(n==="prelu")return PV(t,e);throw new Error("Unknown fused activation "+n+".")},Jwe=he({fusedMatMul_:function(t){var n,e=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,a=t.transposeB,s=a!==void 0&&a,l=t.bias,u=t.activation,c=u===void 0?"linear":u,d=t.preluActivationWeights;if(l5(_e.state.gradientDepth,c)===!1){var p=MV(e,r,o,s);return l!=null&&(p=Po(p,l)),d5(p,c,d)}var h=K(e,"a","fused matMul"),f=K(r,"b","fused matMul");n=$r(h,f),h=n[0],f=n[1];var m=o?h.shape[h.rank-2]:h.shape[h.rank-1],g=s?f.shape[f.rank-1]:f.shape[f.rank-2],y=o?h.shape[h.rank-1]:h.shape[h.rank-2],b=s?f.shape[f.rank-2]:f.shape[f.rank-1],w=h.shape.slice(0,-2),x=f.shape.slice(0,-2),I=Nt(w),D=Nt(x);ee(h.rank>=2&&f.rank>=2&&h.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+f.rank+"."}),ee(Fi(w,x),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+x+") of Tensors with shapes "+h.shape+" and "+f.shape+" must match."}),ee(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+h.shape+" and "+f.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var A,E,R=h.shape.slice(0,-2).concat([y,b]),N=o?h.as3D(I,m,y):h.as3D(I,y,m),T=s?f.as3D(D,b,g):f.as3D(D,g,b);l!=null&&Hn(R,(A=$r(A=K(l,"bias","fused matMul"),h)[0]).shape),d!=null&&(E=K(d,"prelu weights","fused matMul"));var M={a:N,b:T};l!=null&&(M.bias=A),d!=null&&(M.preluActivationWeights=E);var H=[N,T];return _e.runKernelFunc(function(V,X){var Y=V.fusedBatchMatMul({a:N,b:T,transposeA:o,transposeB:s,bias:A,activation:c,preluActivationWeights:E});return X([N,T,Y]),Y},M,function(V,X){var Y=X[0],Q=X[1],G=X[2],re=u5(V,G,c),ue={};return l!=null&&(ue={bias:function(){return c5(A,re)}}),Object.assign(o||s?!o&&s?{a:function(){return re.matMul(Q,!1,!1)},b:function(){return re.matMul(Y,!0,!1)}}:o&&!s?{a:function(){return Q.matMul(re,!1,!0)},b:function(){return Y.matMul(re,!1,!1)}}:{a:function(){return Q.matMul(re,!0,!0)},b:function(){return re.matMul(Y,!0,!0)}}:{a:function(){return re.matMul(Q,!1,!0)},b:function(){return Y.matMul(re,!0,!1)}},ue)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},H,[!0]).reshape(R)}}),exe=he({fusedConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,l=s===void 0?[1,1]:s,u=t.dimRoundingMode,c=t.bias,d=t.activation,p=d===void 0?"linear":d,h=t.preluActivationWeights;if(p=p||"linear",l5(_e.state.gradientDepth,p)===!1){var f=tc(n,e,r,i,a,l,u);return c!=null&&(f=Po(f,c)),d5(f,p,h)}var m=K(n,"x","conv2d"),g=K(e,"filter","conv2d"),y=m,b=!1;m.rank===3&&(b=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ee(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),ee(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),u!=null&&ee(Zr(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."}),ee(y.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),ee(Lo(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),ee(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var w,x,I=bd(y.shape,g.shape,r,l,i,u);c!=null&&(w=$r(w=K(c,"bias","fused conv2d"),m)[0],Hn(I.outShape,w.shape)),h!=null&&(x=K(h,"prelu weights","fused conv2d"));var D={x:y,filter:g};c!=null&&(D.bias=w),h!=null&&(D.preluActivationWeights=x);var A=[g,y],E=_e.runKernelFunc(function(R,N){var T=R.fusedConv2d({input:y,filter:g,convInfo:I,bias:w,activation:p,preluActivationWeights:x});return N([g,y,T]),T},D,function(R,N){var T=N,M=T[0],H=T[1],V=T[2],X=u5(R,V,p);ee(qp(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var Y={};return c!=null&&(Y={bias:function(){return c5(w,X)}}),Object.assign({x:function(){return TV(H.shape,X,M,r,i)},filter:function(){return e5(H,X,M.shape,r,i)}},Y)},"FusedConv2D",{convInfo:I,activation:p},A,[!0]);return b?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),txe=he({fusedDepthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,l=s===void 0?[1,1]:s,u=t.dimRoundingMode,c=t.bias,d=t.activation,p=d===void 0?"linear":d,h=t.preluActivationWeights;if(l5(_e.state.gradientDepth,p)===!1){var f=t5(n,e,r,i,a,l,u);return c!=null&&(f=Po(f,c)),d5(f,p,h)}var m=K(n,"x","depthwiseConv2d"),g=K(e,"filter","depthwiseConv2d"),y=m,b=!1;m.rank===3&&(b=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ee(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),ee(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),ee(y.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),l==null&&(l=[1,1]),ee(Lo(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),u!=null&&ee(Zr(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+i+"."});var w,x,I=bd(y.shape,g.shape,r,l,i,u,!0);c!=null&&(w=$r(w=K(c,"bias","fused conv2d"),m)[0],Hn(I.outShape,w.shape)),h!=null&&(x=K(h,"prelu weights","fused depthwiseConv2d"));var D={x:y,filter:g};c!=null&&(D.bias=w),h!=null&&(D.preluActivationWeights=x);var A=[g,y],E=_e.runKernelFunc(function(R,N){var T=R.fusedDepthwiseConv2D({input:y,filter:g,convInfo:I,bias:w,activation:p,preluActivationWeights:x});return N([g,y,T]),T},D,function(R,N){ee(qp(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var T=N[0],M=N[1],H=N[2],V=u5(R,H,p),X={};return c!=null&&(X={bias:function(){return c5(w,V)}}),Object.assign({x:function(){return AV(M.shape,V,T,I)},filter:function(){return kV(M,V,T.shape,I)}},X)},"FusedDepthwiseConv2D",{convInfo:I,activation:p},A,[!0]);return b?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),nxe=Object.freeze({matMul:Jwe,conv2d:exe,depthwiseConv2d:txe}),rxe=Object.freeze({image:s5,linalg:qwe,losses:Uwe,spectral:Ewe,fused:nxe,signal:Mwe,add:Po,addN:l2e,batchNorm:Mv,batchNormalization:u2e,batchNorm2d:d2e,batchNormalization2d:c2e,batchNorm3d:h2e,batchNormalization3d:p2e,batchNorm4d:m2e,batchNormalization4d:f2e,broadcastTo:fV,clone:g2e,div:md,divNoNan:vV,eye:yV,multinomial:b2e,oneHot:G2,pad:ol,pad1d:_2e,pad2d:w2e,pad3d:x2e,pad4d:C2e,rand:I2e,randomGamma:T2e,randomNormal:A2e,randomUniform:_V,square:wV,squaredDifference:xV,tile:rm,truncatedNormal:k2e,conv1d:H2e,conv2d:tc,conv3d:z2e,depthwiseConv2d:t5,separableConv2d:n5,conv2dTranspose:W2e,conv3dTranspose:q2e,op:he,booleanMaskAsync:U2e,complex:_o,real:Ds,imag:eu,concat:Ma,concat1d:bye,concat2d:_ye,concat3d:wye,concat4d:xye,split:P3,matMul:MV,dot:G2e,outerProduct:$2e,reverse:Rv,reverse1d:K2e,reverse2d:Y2e,reverse3d:X2e,reverse4d:Q2e,maxPool:Ra,avgPool:Z2e,pool:J2e,maxPool3d:ewe,avgPool3d:twe,maxPoolWithArgmax:nwe,slice:vd,slice1d:rwe,slice2d:iwe,slice3d:owe,slice4d:awe,abs:Tye,acos:Aye,acosh:kye,asin:Mye,asinh:Rye,atan:Nye,atanh:Fye,ceil:Oye,clipByValue:Pye,cos:Lye,cosh:Bye,erf:Vye,exp:jye,expm1:Uye,floor:Hye,log:zye,log1p:Wye,logSigmoid:qye,neg:L3,reciprocal:Gye,round:$ye,rsqrt:_B,sigmoid:Kye,sign:Yye,isNaN:Xye,isInf:Qye,isFinite:Zye,sin:Jye,sinh:ebe,softplus:tbe,sqrt:nbe,step:rbe,tan:ibe,tanh:obe,all:swe,any:lwe,argMax:uwe,argMin:cwe,logSumExp:dwe,max:pwe,mean:hwe,min:fwe,moments:mwe,sum:ud,prod:gwe,equal:CV,equalStrict:M2e,greater:R2e,greaterEqual:IV,greaterEqualStrict:N2e,greaterStrict:F2e,less:O2e,lessEqual:P2e,lessEqualStrict:L2e,lessStrict:B2e,notEqual:V2e,notEqualStrict:j2e,addStrict:abe,atan2:sbe,divStrict:lbe,floorDiv:wB,maximum:B3,maximumStrict:ube,minimum:xB,minimumStrict:cbe,mod:dbe,modStrict:pbe,mul:Gr,mulStrict:hbe,pow:z2,powStrict:fbe,squaredDifferenceStrict:mbe,sub:ka,subStrict:gbe,elu:OV,leakyRelu:vwe,prelu:PV,relu:cm,relu6:LV,selu:ywe,logicalAnd:iw,logicalNot:v2e,logicalOr:mV,logicalXor:y2e,where:Gp,whereAsync:gV,buffer:gn,print:Cye,batchToSpaceND:uB,cast:Iye,cumsum:Sye,depthToSpace:Eye,expandDims:ld,reshape:Ku,spaceToBatchND:cB,squeeze:dB,stack:Zu,unstack:Tv,setdiff1dAsync:Dye,fill:ec,linspace:yye,ones:um,range:V2,scalar:Ut,tensor:so,tensor1d:oa,tensor2d:hd,tensor3d:sB,tensor4d:Es,tensor5d:mye,tensor6d:gye,variable:vye,zeros:pi,onesLike:lB,zerosLike:er,transpose:el,softmax:Av,logSoftmax:ybe,localResponseNormalization:bwe,norm:BV,gather:J3,unsortedSegmentSum:SV,basicLSTMCell:_we,multiRNNCell:wwe,movingAverage:xwe,stridedSlice:Cwe,topk:Iwe,scatterND:Swe,fft:r5,ifft:$2,rfft:i5,irfft:VV,sparseToDense:Dwe,gatherND:Twe,diag:Awe,dropout:kwe,hannWindow:o5,hammingWindow:UV,frame:a5,stft:HV,inTopKAsync:Rwe});function Ze(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){e!=null&&ee(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function w3(t,n,e,r,i,o){for(var a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,f=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=gn(i.outShape,e),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],w=i.outShape[3],x=0;x<i.batchSize;++x)for(var I=x*y,D=x*r[0],A=0;A<i.inChannels;++A)for(var E=0;E<i.outHeight;++E)for(var R=E*a-p,N=Math.max(0,R),T=Math.min(i.inHeight,c+R),M=I+E*b,H=0;H<i.outWidth;++H){for(var V=H*s-h,X=Math.max(0,V),Y=Math.min(i.inWidth,d+V),Q=f,G=0,re=0,ue=N;ue<T;ue+=l){for(var Te=D+ue*r[1],F=X;F<Y;F+=u){var q=t[Te+F*r[2]+A];o==="max"&&q>Q?Q=q:o==="avg"&&(G+=q,re++)}if(isNaN(Q))break}g[M+H*w+A]=o==="avg"?G/re:Q}return m}function zV(t,n,e,r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);for(var a=gn(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=gn(n,e,t),g=0;g<r.batchSize;++g)for(var y=0;y<r.inChannels;++y)for(var b=0;b<r.outHeight;++b){for(var w=b*s-h,x=w;x<0;)x+=u;for(var I=Math.min(r.inHeight,d+w),D=0;D<r.outWidth;++D){for(var A=D*l-f,E=A;E<0;)E+=c;for(var R=Math.min(r.inWidth,p+A),N=Number.NEGATIVE_INFINITY,T=-1,M=x;M<I;M+=u)for(var H=M-w,V=E;V<R;V+=c){var X=V-A,Y=m.get(g,M,V,y);Y>N&&(N=Y,T=i?o?((g*r.inHeight+M)*r.inWidth+V)*r.inChannels+y:(M*r.inWidth+V)*r.inChannels+y:H*p+X)}a.set(T,g,b,D,y)}}return a}function e3(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var ixe=function(t){function n(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new TB(e,_e),e}return tl(n,t),n.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,ze().get("IS_NODE")&&L2(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),i=r.dtype,o=r.complexTensors;return i==="complex64"?_3(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if(e.dtype==="string")try{i=r.map(function(o){return bv(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gn(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return _e.makeTensorFromDataId(o,r,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return Ft(this,void 0,void 0,function(){var r;return Ot(this,function(i){return r=Js(),e(),[2,{kernelMs:Js()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:_e.keep(e.clone()),imag:_e.keep(r.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(Ze(e,"slice"),U3(e.shape,r,i)){var o=H3(r,e.strides),a=Nt(i);return so(this.readSync(e.dataId).subarray(o,o+a),i,e.dtype)}for(var s=gn(i,e.dtype),l=this.bufferSync(e),u=0;u<s.size;++u){var c=s.indexToLoc(u).map(function(d,p){return d+r[p]});s.values[u]=l.get.apply(l,c)}return s.toTensor()},n.prototype.stridedSlice=function(e,r,i,o){Ze(e,"stridedSlice");var a=J2(r,i,o);if(a.some(function(h){return h===0}))return so([],a);for(var s=gn(a,e.dtype),l=this.bufferSync(e),u=0;u<s.size;u++){for(var c=s.indexToLoc(u),d=new Array(c.length),p=0;p<d.length;p++)d[p]=c[p]*o[p]+r[p];s.set.apply(s,[l.get.apply(l,d)].concat(c))}return s.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=gn([e.size,e.size],e.dtype),o=i.values,a=0;a<r.length;a++)o[a*e.size+a]=r[a];return i.toTensor()},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var l=new Array(e.rank).fill(0),u=e.shape.slice();u[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(e,l,u).reshape(o);return c},n.prototype.reverse=function(e,r){Ze(e,"reverse");for(var i=gn(e.shape,e.dtype),o=this.bufferSync(e),a=function(l){var u=i.indexToLoc(l),c=u.slice();r.forEach(function(d){return c[d]=e.shape[d]-1-c[d]}),i.set.apply(i,[o.get.apply(o,c)].concat(u))},s=0;s<i.size;s++)a(s);return i.toTensor()},n.prototype.concat=function(e,r){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(h){return Ds(h)}),a=e.map(function(h){return eu(h)});return _o(this.concat(o,r),this.concat(a,r))}var s=e.map(function(h){var f=Nt(h.shape.slice(r));return h.as2D(-1,f)}),l=Wp(s.map(function(h){return h.shape}),1),u=gn(l,e[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){u.set(i.readSync(h.dataId),c),c+=h.size})}else{var d=0;s.forEach(function(h){for(var f=i.readSync(h.dataId),m=0,g=0;g<h.shape[0];++g)for(var y=g*l[1]+d,b=0;b<h.shape[1];++b)u[y+b]=f[m++];d+=h.shape[1]})}var p=Wp(e.map(function(h){return h.shape}),r);return so(u,p,e[0].dtype)},n.prototype.neg=function(e){return Ze(e,"neg"),this.multiply(Ut(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(e,r,ao(e.dtype,r.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var r=this;Ze(e,"addN");for(var i=e.map(function(c){return r.readSync(c.dataId)}),o=gn(e[0].shape,e[0].dtype),a=o.values,s=0;s<e.length;s++)for(var l=i[s],u=0;u<a.length;u++)a[u]+=l[u];return o.toTensor()},n.prototype.softmax=function(e,r){var i=Oi([r],e.shape),o=this.max(e,i),a=ia(o.shape,i),s=this.subtract(e,o.reshape(a)),l=this.exp(s),u=this.sum(l,i).reshape(a);return md(l,u)},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(e,r,ao(e.dtype,r.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,r){return Ze([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,r,i,o){Ze([e,r],"matMul");for(var a=i?e.shape[1]:e.shape[2],s=i?e.shape[2]:e.shape[1],l=o?r.shape[1]:r.shape[2],u=e.shape[0],c=this.readSync(e.dataId),d=this.readSync(r.dataId),p=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=p[0],f=p[1],m=p[2],g=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],y=g[0],b=g[1],w=g[2],x=s*l,I=gn([u,s,l],e.dtype),D=I.values,A=this.blockSize,E=0;E<u;E++)for(var R=0;R<s;R+=A)for(var N=0;N<l;N+=A)for(var T=0;T<a;T+=A)for(var M=Math.min(R+A,s),H=Math.min(N+A,l),V=Math.min(T+A,a),X=R;X<M;X++)for(var Y=N;Y<H;Y++){for(var Q=0,G=T;G<V;G++)Q+=c[E*h+X*f+G*m]*d[G*y+Y*b+E*w];D[E*x+(X*l+Y)]+=Q}return I.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,l=e.activation,u=e.preluActivationWeights,c=this.batchMatMul(r,i,o,a);return s&&(c=this.add(c,s)),l&&(c=e3(this,c,l,u)),c},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(e,r,ao(e.dtype,r.dtype),function(i,o){return i*o})},n.prototype.floorDiv=function(e,r){return Ze([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,r){Ze(e,"sum"),Ea("sum",r,e.rank);for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,ao(e.dtype,"int32")),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=0,f=0;f<l;++f)h+=c[p+f];u[d]=h}return s},n.prototype.prod=function(e,r){Ze(e,"sum");for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,ao(e.dtype,"int32")),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=1,f=0;f<l;++f)h*=c[p+f];u[d]=h}return s},n.prototype.unsortedSegmentSum=function(e,r,i){Ze(e,"unsortedSegmentSum");for(var o=[],a=e.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var l=Ut(s,"int32"),u=CV(l,r).asType("float32").mul(e).sum(0);o.push(u)}return Zu(o)},n.prototype.argMin=function(e,r){Ze(e,"argMin");var i=[r];Ea("argMin",i,e.rank);for(var o=wo(e.shape,i),a=o[0],s=o[1],l=pi(a,"int32"),u=Nt(s),c=this.readSync(l.dataId),d=this.readSync(e.dataId),p=0;p<c.length;++p){for(var h=p*u,f=d[h],m=0,g=0;g<u;++g){var y=d[h+g];y<f&&(f=y,m=g)}c[p]=m}return l},n.prototype.argMax=function(e,r){Ze(e,"argMax");var i=[r];Ea("argMax",i,e.rank);for(var o=wo(e.shape,i),a=o[0],s=o[1],l=pi(a,"int32"),u=Nt(s),c=this.readSync(l.dataId),d=this.readSync(e.dataId),p=0;p<c.length;++p){for(var h=p*u,f=d[h],m=0,g=0;g<u;++g){var y=d[h+g];y>f&&(f=y,m=g)}c[p]=m}return l},n.prototype.cumsum=function(e,r,i,o){if(Ze(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var a=ao(e.dtype,"int32"),s=pi(e.shape,a),l=this.readSync(s.dataId),u=this.readSync(e.dataId),c=e.shape[e.rank-1],d=o?function(g,y){return g+c-y-1}:function(g,y){return g+y},p=0;p<u.length;p+=c)for(var h=0;h<c;h++){var f=d(p,h);if(h===0)l[f]=i?0:u[f];else{var m=d(p,h-1);l[f]=i?u[m]+l[m]:u[f]+l[m]}}return s},n.prototype.equal=function(e,r){return Ze([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,r){return Ze([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,r){return Ze([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,r){return Ze([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,r){return Ze([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,r){return Ze([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){Ze(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return Ze([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,r){return Ze([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},n.prototype.select=function(e,r,i){Ze([e,r,i],"select");for(var o=this.readSync(e.dataId),a=this.readSync(r.dataId),s=this.readSync(i.dataId),l=pi(r.shape,ao(r.dtype,i.dtype)),u=this.readSync(l.dataId),c=0,d=e.rank===0||e.rank>1||r.rank===1?1:Nt(r.shape.slice(1)),p=0;p<o.length;p++)for(var h=0;h<d;h++)o[p]===1?u[c++]=a[p]:u[c++]=s[p];return l},n.prototype.where=function(e){Ze([e],"where");var r=this.readSync(e.dataId);return K3(e.shape,r)},n.prototype.topk=function(e,r,i){return Ze(e,"topk"),NB(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){Ze(e,"min"),Ea("min",r,e.rank);for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,e.dtype),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0;f<l;++f){var m=c[p+f];m<h&&(h=m)}u[d]=h}return s},n.prototype.minimum=function(e,r){return Ze([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,r){return Ze([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},n.prototype.max=function(e,r){Ze(e,"max"),Ea("max",r,e.rank);for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,e.dtype),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0;f<l;++f){var m=c[p+f];m>h&&(h=m)}u[d]=h}return s},n.prototype.maximum=function(e,r){return Ze([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,r){Ze(e,"all"),Ea("all",r,e.rank);for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,e.dtype),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0;f<l;++f){var m=c[p+f];h=h&&m}u[d]=h}return s},n.prototype.any=function(e,r){Ze(e,"any"),Ea("any",r,e.rank);for(var i=wo(e.shape,r),o=i[0],a=i[1],s=pi(o,e.dtype),l=Nt(a),u=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<u.length;++d){for(var p=d*l,h=c[p],f=0;f<l;++f){var m=c[p+f];h=h||m}u[d]=h}return s},n.prototype.squaredDifference=function(e,r){return Ze([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i-o;return a*a})},n.prototype.ceil=function(e){Ze(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){Ze(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){Ze(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){Ze(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){Ze(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){Ze(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){Ze(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=Math.floor(r[o]);r[o]-a<.5?i[o]=Math.floor(r[o]):r[o]-a>.5?i[o]=Math.ceil(r[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){Ze(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){Ze(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){Ze(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){Ze(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log1p(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){Ze(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){Ze(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){Ze(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){Ze(e,"relu");for(var r=pi(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return r},n.prototype.relu6=function(e){Ze(e,"relu");for(var r=pi(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return r},n.prototype.prelu=function(e,r){return Ze([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){Ze(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){Ze([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),a=this.readSync(e.dataId),s=0;s<o.length;++s){var l=o[s];i[s]=l>=1?a[s]:a[s]*(l+1)}return this.makeOutput(i,r.shape,"float32")},n.prototype.selu=function(e){Ze(e,"selu");for(var r=X3,i=Q3,o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var l=a[s];o[s]=l>=0?i*l:r*(Math.exp(l)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,i){Ze(e,"clip");for(var o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var l=a[s];o[s]=l>i?i:l<r?r:l}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var a=i[2*o],s=i[2*o+1];r[o]=Math.hypot(a,s)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){Ze(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){Ze(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){Ze(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a]>-r,l=o[a]<r,u=Math.exp(o[a]),c=void 0;c=l?u:s?o[a]:Math.log(1+u),i[a]=c}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){Ze(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){Ze(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){Ze(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){Ze(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){Ze(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){Ze(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return Ze([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){Ze(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){Ze(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){Ze(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=_7(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){Ze(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){Ze(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){Ze(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){Ze(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),l=1/(1+.3275911*s);r[o]=a*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-s*s))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),Ze(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:r}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,l=e.preluActivationWeights,u=this.conv2d(r,i,o);return a&&(u=this.add(u,a)),s&&(u=e3(this,u,s,l)),u},n.prototype.conv2d=function(e,r,i){Ze([e,r],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,l=i.dilationWidth,u=i.padInfo.left,c=i.padInfo.top,d=i.dataFormat==="channelsLast",p=gn(i.outShape,e.dtype),h=e.strides[0],f=d?e.strides[1]:e.strides[2],m=d?e.strides[2]:1,g=d?1:e.strides[1],y=p.strides[0],b=d?p.strides[1]:p.strides[2],w=d?p.strides[2]:1,x=d?1:p.strides[1],I=this.readSync(e.dataId),D=this.readSync(r.dataId),A=p.values,E=0;E<i.batchSize;++E)for(var R=E*h,N=E*y,T=0;T<i.outHeight;++T)for(var M=N+T*b,H=T*i.strideHeight-c,V=0;V<o;V++){var X=H+V*s;if(!(X<0||X>=i.inHeight))for(var Y=V*r.strides[0],Q=R+X*f,G=0;G<i.outWidth;++G)for(var re=M+G*w,ue=G*i.strideWidth-u,Te=0;Te<a;Te++){var F=ue+Te*l;if(!(F<0||F>=i.inWidth))for(var q=Q+F*m,Z=Y+Te*r.strides[1],ae=0;ae<i.inChannels;++ae){for(var pe=I[q+ae*g],fe=0;fe<i.outChannels;++fe)A[re+fe*x]+=pe*D[Z+fe];Z+=i.outChannels}}}return p.toTensor()},n.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,l=i.dilationDepth,u=i.dilationHeight,c=i.dilationWidth,d=i.padInfo.front,p=i.padInfo.left,h=i.padInfo.top,f=gn(i.outShape,e.dtype),m=this.readSync(e.dataId),g=this.readSync(r.dataId),y=f.values,b=0;b<i.batchSize;++b)for(var w=b*e.strides[0],x=b*f.strides[0],I=0;I<i.outDepth;++I)for(var D=x+I*f.strides[1],A=I*i.strideDepth-d,E=0;E<o;E++){var R=A+E*l;if(!(R<0||R>=i.inDepth))for(var N=E*r.strides[0],T=w+R*e.strides[1],M=0;M<i.outHeight;++M)for(var H=D+M*f.strides[2],V=M*i.strideHeight-h,X=0;X<a;X++){var Y=V+X*u;if(!(Y<0||Y>=i.inHeight))for(var Q=N+X*r.strides[1],G=T+Y*e.strides[2],re=0;re<i.outWidth;++re)for(var ue=H+re*i.outChannels,Te=re*i.strideWidth-p,F=0;F<s;F++){var q=Te+F*c;if(!(q<0||q>=i.inWidth))for(var Z=Q+F*r.strides[2],ae=G+q*i.inChannels,pe=Z,fe=0;fe<i.inChannels;++fe){for(var me=m[ae+fe],xe=0;xe<i.outChannels;++xe)y[ue+xe]+=me*g[pe+xe];pe+=i.outChannels}}}}return f.toTensor()},n.prototype.conv2dDerInput=function(e,r,i){Ze([e,r],"conv2dDerInput");for(var o=gn(i.inShape,"float32"),a=o.values,s=this.readSync(e.dataId),l=this.readSync(r.dataId),u=r.strides,c=u[0],d=u[1],p=u[2],h=i.batchSize,f=i.filterHeight,m=i.filterWidth,g=i.inChannels,y=i.inHeight,b=i.inWidth,w=i.outChannels,x=i.outHeight,I=i.outWidth,D=i.strideHeight,A=i.strideWidth,E=i.dataFormat,R=f-1-i.padInfo.top,N=m-1-i.padInfo.left,T=E==="channelsLast",M=o.strides[0],H=T?o.strides[1]:o.strides[2],V=T?o.strides[2]:1,X=T?1:o.strides[1],Y=e.strides[0],Q=T?e.strides[1]:e.strides[2],G=T?e.strides[2]:1,re=T?1:e.strides[1],ue=0;ue<h;++ue)for(var Te=0;Te<g;++Te)for(var F=0;F<y;++F)for(var q=F-R,Z=Math.max(0,Math.ceil(q/D)),ae=Math.min(x,(f+q)/D),pe=0;pe<b;++pe){for(var fe=pe-N,me=Math.max(0,Math.ceil(fe/A)),xe=Math.min(I,(m+fe)/A),je=0,Pe=Z;Pe<ae;++Pe)for(var Ge=Pe*D-q,qe=me;qe<xe;++qe)for(var ht=Y*ue+Q*Pe+G*qe,ke=c*(f-1-Ge)+d*(m-1-(qe*A-fe))+p*Te,se=0;se<w;++se)je+=s[ht+re*se]*l[ke+se];a[M*ue+H*F+V*pe+X*Te]=je}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,i){for(var o=gn(i.inShape,"float32"),a=o.values,s=o.strides,l=s[0],u=s[1],c=s[2],d=s[3],p=this.readSync(e.dataId),h=e.strides,f=h[0],m=h[1],g=h[2],y=h[3],b=this.readSync(r.dataId),w=r.strides,x=w[0],I=w[1],D=w[2],A=w[3],E=i.batchSize,R=i.filterDepth,N=i.filterHeight,T=i.filterWidth,M=i.inChannels,H=i.inDepth,V=i.inHeight,X=i.inWidth,Y=i.outChannels,Q=i.outDepth,G=i.outHeight,re=i.outWidth,ue=i.strideDepth,Te=i.strideHeight,F=i.strideWidth,q=R-1-i.padInfo.front,Z=N-1-i.padInfo.top,ae=T-1-i.padInfo.left,pe=0;pe<E;++pe)for(var fe=0;fe<M;++fe)for(var me=0;me<H;++me)for(var xe=me-q,je=Math.max(0,Math.ceil(xe/ue)),Pe=Math.min(Q,(R+xe)/ue),Ge=0;Ge<V;++Ge)for(var qe=Ge-Z,ht=Math.max(0,Math.ceil(qe/Te)),ke=Math.min(G,(N+qe)/Te),se=0;se<X;++se){for(var zt=se-ae,gt=Math.max(0,Math.ceil(zt/F)),Xe=Math.min(re,(T+zt)/F),at=0,ut=je;ut<Pe;++ut)for(var lt=ut*ue-xe,Tt=ht;Tt<ke;++Tt)for(var qt=Tt*Te-qe,Xt=gt;Xt<Xe;++Xt)for(var vn=f*pe+m*ut+g*Tt+y*Xt,hn=x*(R-1-lt)+I*(N-1-qt)+D*(T-1-(Xt*F-zt))+A*fe,On=0;On<Y;++On)at+=p[vn+On]*b[hn+On];a[l*pe+u*me+c*Ge+d*se+fe]=at}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,i){Ze([e,r],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,l=i.filterWidth,u=i.dataFormat==="channelsLast",c=gn(i.filterShape,"float32"),d=i.padInfo.left,p=i.padInfo.top,h=this.bufferSync(e),f=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((p-m)/o)),y=Math.min(i.outHeight,(i.inHeight+p-m)/o),b=0;b<l;++b)for(var w=Math.max(0,Math.ceil((d-b)/a)),x=Math.min(i.outWidth,(i.inWidth+d-b)/a),I=0;I<i.inChannels;++I)for(var D=0;D<i.outChannels;++D){for(var A=0,E=0;E<i.batchSize;++E)for(var R=g;R<y;++R)for(var N=m+R*o-p,T=w;T<x;++T){var M=b+T*a-d;A+=u?h.get(E,N,M,I)*f.get(E,R,T,D):h.get(E,I,N,M)*f.get(E,D,R,T)}c.set(A,m,b,I,D)}return c.toTensor()},n.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,l=i.filterDepth,u=i.filterHeight,c=i.filterWidth,d=gn(i.filterShape,"float32"),p=d.values,h=d.strides,f=h[0],m=h[1],g=h[2],y=h[3],b=this.readSync(r.dataId),w=r.strides,x=w[0],I=w[1],D=w[2],A=w[3],E=this.readSync(e.dataId),R=e.strides,N=R[0],T=R[1],M=R[2],H=R[3],V=i.padInfo.front,X=i.padInfo.left,Y=i.padInfo.top,Q=0;Q<l;++Q)for(var G=Math.max(0,Math.ceil((V-Q)/o)),re=Math.min(i.outDepth,(i.inDepth+V-Q)/o),ue=Q*f,Te=0;Te<u;++Te)for(var F=Math.max(0,Math.ceil((Y-Te)/a)),q=Math.min(i.outHeight,(i.inHeight+Y-Te)/a),Z=Te*m+ue,ae=0;ae<c;++ae)for(var pe=Math.max(0,Math.ceil((X-ae)/s)),fe=Math.min(i.outWidth,(i.inWidth+X-ae)/s),me=ae*g+Z,xe=0;xe<i.inChannels;++xe)for(var je=xe*y+me,Pe=0;Pe<i.outChannels;++Pe){for(var Ge=0,qe=0;qe<i.batchSize;++qe)for(var ht=qe*N,ke=qe*x,se=G;se<re;++se)for(var zt=(Q+se*o-V)*T+ht,gt=se*I+ke,Xe=F;Xe<q;++Xe)for(var at=(Te+Xe*a-Y)*M+zt,ut=Xe*D+gt,lt=pe;lt<fe;++lt){var Tt=lt*A+ut;Ge+=E[(ae+lt*s-X)*H+at+xe]*b[Tt+Pe]}p[je+Pe]=Ge}return d.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,l=e.preluActivationWeights,u=this.depthwiseConv2D(r,i,o);return a&&(u=this.add(u,a)),s&&(u=e3(this,u,s,l)),u},n.prototype.depthwiseConv2D=function(e,r,i){Ze([e,r],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,l=i.dilationWidth,u=i.padInfo.left,c=i.padInfo.top,d=i.outChannels/i.inChannels,p=gn(i.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(r.dataId),m=p.values,g=0;g<i.batchSize;++g)for(var y=g*e.strides[0],b=g*p.strides[0],w=0;w<i.outHeight;++w)for(var x=b+w*p.strides[1],I=w*i.strideHeight-u,D=0;D<o;++D){var A=I+D*s;if(!(A<0||A>=i.inHeight))for(var E=D*r.strides[0],R=y+A*e.strides[1],N=0;N<i.outWidth;++N)for(var T=x+N*p.strides[2],M=N*i.strideWidth-c,H=0;H<a;++H){var V=M+H*l;if(!(V<0||V>=i.inWidth))for(var X=E+H*r.strides[1],Y=R+V*i.inChannels,Q=T,G=X,re=0;re<i.inChannels;++re){for(var ue=h[Y+re],Te=0;Te<d;++Te)m[Q+Te]+=ue*f[G+Te];Q+=d,G+=d}}}return p.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,i){Ze([e,r],"depthwiseConv2DDerInput");for(var o=gn(i.inShape,"float32"),a=o.values,s=o.strides,l=s[0],u=s[1],c=s[2],d=this.readSync(e.dataId),p=e.strides,h=p[0],f=p[1],m=p[2],g=this.readSync(r.dataId),y=r.strides,b=y[0],w=y[1],x=y[2],I=i.batchSize,D=i.filterHeight,A=i.filterWidth,E=i.inChannels,R=i.inHeight,N=i.inWidth,T=i.outChannels,M=i.outHeight,H=i.outWidth,V=i.strideHeight,X=i.strideWidth,Y=D-1-i.padInfo.top,Q=A-1-i.padInfo.left,G=T/E,re=0;re<I;++re)for(var ue=0;ue<E;++ue)for(var Te=0;Te<R;++Te)for(var F=Te-Y,q=Math.max(0,Math.ceil(F/V)),Z=Math.min(M,(D+F)/V),ae=0;ae<N;++ae){for(var pe=ae-Q,fe=Math.max(0,Math.ceil(pe/X)),me=Math.min(H,(A+pe)/X),xe=0,je=q;je<Z;++je)for(var Pe=je*V-F,Ge=fe;Ge<me;++Ge)for(var qe=h*re+f*je+m*Ge,ht=b*(D-1-Pe)+w*(A-1-(Ge*X-pe))+x*ue,ke=0;ke<G;++ke)xe+=d[qe+(ue*G+ke)]*g[ht+ke];a[l*re+u*Te+c*ae+ue]=xe}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){Ze([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,l=i.filterWidth,u=gn(i.filterShape,"float32"),c=i.padInfo.left,d=i.padInfo.top,p=i.outChannels/i.inChannels,h=this.bufferSync(e),f=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((d-m)/o)),y=Math.min(i.outHeight,(i.inHeight+d-m)/o),b=0;b<l;++b)for(var w=Math.max(0,Math.ceil((c-b)/a)),x=Math.min(i.outWidth,(i.inWidth+c-b)/a),I=0;I<i.outChannels;++I){for(var D=Math.trunc(I/p),A=I%p,E=0,R=0;R<i.batchSize;++R)for(var N=g;N<y;++N)for(var T=m+N*o-d,M=w;M<x;++M){var H=b+M*a-c;E+=h.get(R,T,H,D)*f.get(R,N,M,I)}u.set(E,m,b,D,A)}return u.toTensor()},n.prototype.tile=function(e,r){return Ze(e,"tile"),RB(this.bufferSync(e),r)},n.prototype.pad=function(e,r,i){Ze(e,"pad");var o=r.map(function(p,h){return p[0]+e.shape[h]+p[1]}),a=r.map(function(p){return p[0]}),s=this.bufferSync(e),l=gn(o,e.dtype);i!==0&&l.values.fill(i);for(var u=0;u<e.size;u++){var c=s.indexToLoc(u),d=c.map(function(p,h){return p+a[h]});l.set.apply(l,[s.get.apply(s,c)].concat(d))}return l.toTensor()},n.prototype.gather=function(e,r,i){Ze([e,r],"gather");var o=e.shape.slice(),a=this.readSync(r.dataId);o[i]=a.length;for(var s=gn(o,e.dtype),l=this.bufferSync(e),u=0;u<s.size;++u){var c=s.indexToLoc(u),d=c.slice();d[i]=a[c[i]];var p=l.locToIndex(d);s.values[u]=l.values[p]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,r,i){Ze([e],"batchToSpaceND");var o=r.reduce(function(d,p){return d*p}),a=j2(e.shape,r,o),s=U2(a.length,r.length),l=H2(e.shape,r,o),u=pB(i,r.length),c=hB(l,i,r.length);return el(e.reshape(a),s).reshape(l).slice(u,c)},n.prototype.spaceToBatchND=function(e,r,i){Ze([e],"spaceToBatchND");var o=r.reduce(function(p,h){return p*h}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var l=e.pad(a),u=j2(l.shape,r,o,!1),c=U2(u.length,r.length,!1),d=H2(l.shape,r,o,!1);return el(l.reshape(u),c).reshape(d)},n.prototype.maxPool=function(e,r){return Ze(e,"maxPool"),w3(this.readSync(e.dataId),e.shape,e.dtype,e.strides,r,"max").toTensor()},n.prototype.maxPoolBackprop=function(e,r,i,o){Ze([r,i],"maxPoolBackprop");for(var a=this.readSync(r.dataId),s=gn(o.outShape,r.dtype,zV(a,r.shape,r.dtype,o).values),l=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterHeight,h=o.effectiveFilterWidth,f=h-1-o.padInfo.left,m=p-1-o.padInfo.top,g=gn(r.shape,"float32"),y=this.bufferSync(e),b=0;b<o.batchSize;++b)for(var w=0;w<o.inChannels;++w)for(var x=0;x<o.inHeight;++x)for(var I=0;I<o.inWidth;++I){for(var D=x-m,A=I-f,E=0,R=0;R<p;R+=c){var N=(D+R)/l;if(!(N<0||N>=o.outHeight||Math.floor(N)!==N))for(var T=0;T<h;T+=d){var M=(A+T)/u;if(!(M<0||M>=o.outWidth||Math.floor(M)!==M)){var H=p*h-1-s.get(b,N,M,w)===R*h+T?1:0;H!==0&&(E+=y.get(b,N,M,w)*H)}}}g.set(E,b,x,I,w)}return g.toTensor()},n.prototype.avgPoolBackprop=function(e,r,i){Ze([e,r],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,l=i.filterWidth,u=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,h=p-1-i.padInfo.left,f=d-1-i.padInfo.top,m=gn(r.shape,"float32"),g=1/(s*l),y=this.bufferSync(e),b=0;b<i.batchSize;++b)for(var w=0;w<i.inChannels;++w)for(var x=0;x<i.inHeight;++x)for(var I=0;I<i.inWidth;++I){for(var D=x-f,A=I-h,E=0,R=0;R<d;R+=u){var N=(D+R)/o;if(!(N<0||N>=i.outHeight||Math.floor(N)!==N))for(var T=0;T<p;T+=c){var M=(A+T)/a;M<0||M>=i.outWidth||Math.floor(M)!==M||(E+=y.get(b,N,M,w))}}m.set(E*g,b,x,I,w)}return m.toTensor()},n.prototype.pool3d=function(e,r,i){Ze(e,"pool3d");for(var o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=this.readSync(e.dataId),w=gn(r.outShape,e.dtype),x=w.values,I=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[2]*r.outShape[3]*r.outShape[4],A=r.outShape[3]*r.outShape[4],E=r.outShape[4],R=0;R<r.batchSize;++R)for(var N=R*I,T=R*e.strides[0],M=0;M<r.inChannels;++M)for(var H=0;H<r.outDepth;++H){for(var V=H*o-f,X=V;X<0;)X+=l;for(var Y=Math.min(r.inDepth,d+V),Q=N+H*D,G=0;G<r.outHeight;++G){for(var re=G*a-m,ue=re;ue<0;)ue+=u;for(var Te=Math.min(r.inHeight,p+re),F=Q+G*A,q=0;q<r.outWidth;++q){for(var Z=q*s-g,ae=Z;ae<0;)ae+=c;for(var pe=Math.min(r.inWidth,h+Z),fe=F+q*E,me=y,xe=0,je=0,Pe=X;Pe<Y;Pe+=l){for(var Ge=T+Pe*e.strides[1],qe=ue;qe<Te;qe+=u){for(var ht=Ge+qe*e.strides[2],ke=ae;ke<pe;ke+=c){var se=b[ht+ke*e.strides[3]+M];if(i==="max"&&se>me?me=se:i==="avg"&&(xe+=se,je++),isNaN(me))break}if(isNaN(me))break}if(isNaN(me))break}x[fe+M]=i==="avg"?xe/je:me}}}return w.toTensor()},n.prototype.avgPool3d=function(e,r){return Ze(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,i){Ze([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,l=i.filterDepth,u=i.filterHeight,c=i.filterWidth,d=i.dilationDepth,p=i.dilationHeight,h=i.dilationWidth,f=i.effectiveFilterDepth,m=i.effectiveFilterHeight,g=i.effectiveFilterWidth,y=f-1-i.padInfo.front,b=g-1-i.padInfo.left,w=m-1-i.padInfo.top,x=gn(r.shape,"float32"),I=1/(l*u*c),D=this.bufferSync(e),A=0;A<i.batchSize;++A)for(var E=0;E<i.inChannels;++E)for(var R=0;R<i.inDepth;++R)for(var N=0;N<i.inHeight;++N)for(var T=0;T<i.inWidth;++T){for(var M=R-y,H=N-w,V=T-b,X=0,Y=0;Y<f;Y+=d){var Q=(M+Y)/o;if(!(Q<0||Q>=i.outDepth||Math.floor(Q)!==Q))for(var G=0;G<m;G+=p){var re=(H+G)/a;if(!(re<0||re>=i.outHeight||Math.floor(re)!==re))for(var ue=0;ue<g;ue+=h){var Te=(V+ue)/s;Te<0||Te>=i.outWidth||Math.floor(Te)!==Te||(X+=D.get(A,Q,re,Te,E))}}}x.set(X*I,A,R,N,T,E)}return x.toTensor()},n.prototype.maxPool3d=function(e,r){return Ze(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var i=gn(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var w=0;w<r.inChannels;++w)for(var x=0;x<r.outDepth;++x){for(var I=x*o-f,D=I;D<0;)D+=l;for(var A=Math.min(r.inDepth,d+I),E=0;E<r.outHeight;++E){for(var R=E*a-m,N=R;N<0;)N+=u;for(var T=Math.min(r.inHeight,p+R),M=0;M<r.outWidth;++M){for(var H=M*s-g,V=H;V<0;)V+=c;for(var X=Math.min(r.inWidth,h+H),Y=Number.NEGATIVE_INFINITY,Q=-1,G=D;G<A;G+=l)for(var re=G-I,ue=N;ue<T;ue+=u)for(var Te=ue-R,F=V;F<X;F+=c){var q=F-H,Z=y.get(b,G,ue,F,w);Z>=Y&&(Y=Z,Q=re*p*h+Te*p+q)}i.set(Q,b,x,E,M,w)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,i,o){Ze([r,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,o),s=o.strideDepth,l=o.strideHeight,u=o.strideWidth,c=o.dilationDepth,d=o.dilationHeight,p=o.dilationWidth,h=o.effectiveFilterDepth,f=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=h-1-o.padInfo.front,y=m-1-o.padInfo.left,b=f-1-o.padInfo.top,w=gn(r.shape,"float32"),x=this.bufferSync(a),I=this.bufferSync(e),D=0;D<o.batchSize;++D)for(var A=0;A<o.inChannels;++A)for(var E=0;E<o.inDepth;++E)for(var R=0;R<o.inHeight;++R)for(var N=0;N<o.inWidth;++N){for(var T=E-g,M=R-b,H=N-y,V=0,X=0;X<h;X+=c){var Y=(T+X)/s;if(!(Y<0||Y>=o.outDepth||Math.floor(Y)!==Y))for(var Q=0;Q<f;Q+=d){var G=(M+Q)/l;if(!(G<0||G>=o.outHeight||Math.floor(G)!==G))for(var re=0;re<m;re+=p){var ue=(H+re)/u;if(!(ue<0||ue>=o.outWidth||Math.floor(ue)!==ue)){var Te=h*f*m-1-x.get(D,Y,G,ue,A)===X*f*m+Q*m+re?1:0;Te!==0&&(V+=I.get(D,Y,G,ue,A)*Te)}}}}w.set(V,D,E,R,N,A)}return w.toTensor()},n.prototype.cast=function(e,r){return W3(e,r,this)},n.prototype.reshape=function(e,r){return q2(e,r)},n.prototype.avgPool=function(e,r){return Ze(e,"avgPool"),Ze(e,"maxPool"),w3(this.readSync(e.dataId),e.shape,e.dtype,e.strides,r,"avg").toTensor().toFloat()},n.prototype.resizeBilinear=function(e,r,i,o){Ze(e,"resizeBilinear");for(var a=e.shape,s=a[0],l=a[1],u=a[2],c=a[3],d=this.readSync(e.dataId),p=new Float32Array(Nt([s,r,i,c])),h=[o&&r>1?l-1:l,o&&i>1?u-1:u],f=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=0,g=h[0]/f[0],y=h[1]/f[1],b=0;b<s;b++)for(var w=0;w<r;w++)for(var x=g*w,I=Math.floor(x),D=x-I,A=Math.min(l-1,Math.ceil(x)),E=b*e.strides[0]+I*e.strides[1],R=b*e.strides[0]+A*e.strides[1],N=0;N<i;N++)for(var T=y*N,M=Math.floor(T),H=T-M,V=Math.min(u-1,Math.ceil(T)),X=E+M*e.strides[2],Y=R+M*e.strides[2],Q=E+V*e.strides[2],G=R+V*e.strides[2],re=0;re<c;re++){var ue=d[X+re],Te=d[Y+re],F=ue+(d[Q+re]-ue)*H,q=F+(Te+(d[G+re]-Te)*H-F)*D;p[m++]=q}return so(p,[s,r,i,c])},n.prototype.resizeBilinearBackprop=function(e,r,i){Ze([e,r],"resizeBilinearBackprop");for(var o=r.shape,a=o[0],s=o[1],l=o[2],u=o[3],c=e.shape,d=c[1],p=c[2],h=new Float32Array(a*s*l*u),f=[i&&d>1?s-1:s,i&&p>1?l-1:l],m=[i&&d>1?d-1:d,i&&p>1?p-1:p],g=f[0]/m[0],y=f[1]/m[1],b=this.readSync(e.dataId),w=0,x=0;x<a;x++)for(var I=x*r.strides[0],D=0;D<d;D++)for(var A=D*g,E=Math.floor(A),R=Math.min(Math.ceil(A),s-1),N=I+E*r.strides[1],T=I+R*r.strides[1],M=A-E,H=1-M,V=0;V<p;V++)for(var X=V*y,Y=Math.floor(X),Q=Math.min(Math.ceil(X),l-1),G=X-Y,re=1-G,ue=N+Y*r.strides[2],Te=N+Q*r.strides[2],F=T+Y*r.strides[2],q=T+Q*r.strides[2],Z=H*re,ae=H*G,pe=M*re,fe=M*G,me=0;me<u;me++){var xe=b[w++];h[ue+me]+=xe*Z,h[Te+me]+=xe*ae,h[F+me]+=xe*pe,h[q+me]+=xe*fe}return Es(h,[a,l,s,u],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,i,o){Ze(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],l=a[1],u=a[2],c=a[3],d=this.readSync(e.dataId),p=new Float32Array(s*r*i*c),h=[o&&r>1?l-1:l,o&&i>1?u-1:u],f=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=h[0]/f[0],g=h[1]/f[1],y=0,b=0;b<s;b++)for(var w=b*e.strides[0],x=0;x<r;x++)for(var I=m*x,D=w+Math.min(l-1,o?Math.round(I):Math.floor(I))*e.strides[1],A=0;A<i;A++)for(var E=g*A,R=D+Math.min(u-1,o?Math.round(E):Math.floor(E))*e.strides[2],N=0;N<c;N++){var T=d[R+N];p[y++]=T}return so(p,[s,r,i,c],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){Ze([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,a=o[0],s=o[1],l=o[2],u=o[3],c=e.shape,d=c[1],p=c[2],h=new Float32Array(a*s*l*u),f=this.readSync(e.dataId),m=[i&&d>1?s-1:s,i&&p>1?l-1:l],g=[i&&d>1?d-1:d,i&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],w=1/y,x=1/b,I=2*Math.ceil(w)+2,D=2*Math.ceil(x)+2,A=0;A<a;A++)for(var E=A*r.strides[0],R=0;R<s;R++)for(var N=E+R*r.strides[1],T=Math.floor(R*w),M=Math.floor(T-I/2),H=0;H<l;H++)for(var V=N+H*r.strides[2],X=Math.floor(H*x),Y=Math.floor(X-D/2),Q=0;Q<u;Q++){for(var G=0,re=0;re<I;re++){var ue=re+M;if(!(ue<0||ue>=d)){var Te=E+ue*e.strides[1],F=ue*y;if(R===Math.min(s-1,i?Math.round(F):Math.floor(F)))for(var q=0;q<D;q++){var Z=q+Y;if(!(Z<0||Z>=p)){var ae=Te+Z*e.strides[2],pe=Z*b;H===Math.min(l-1,i?Math.round(pe):Math.floor(pe))&&(G+=f[ae+Q])}}}}h[V+Q]=G}return Es(h,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){Ze([e,r,i,a,s],"batchNorm");for(var l=this.readSync(e.dataId),u=this.readSync(r.dataId),c=this.readSync(i.dataId),d=a?this.readSync(a.dataId):new Float32Array([1]),p=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(l.length),f=p.length,m=d.length,g=c.length,y=u.length,b=0,w=0,x=0,I=0,D=0;D<l.length;++D)h[D]=p[b++]+(l[D]-u[w++])*d[x++]/Math.sqrt(c[I++]+o),b>=f&&(b=0),w>=y&&(w=0),x>=m&&(x=0),I>=g&&(I=0);return Es(h,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){Ze(e,"localResponseNormalization4D");var s=e.shape[3],l=s-1,u=this.readSync(e.dataId),c=e.size,d=new Float32Array(c);function p(g){for(var y=g%s,b=g-y+Math.max(0,y-r),w=g-y+Math.min(y+r,l),x=0;b<=w;b++){var I=u[b];x+=I*I}return x}for(var h=0;h<c;h++){var f=p(h),m=u[h]*Math.pow(i+o*f,-a);d[h]=m}return Es(d,e.shape)},n.prototype.LRNGrad=function(e,r,i,o,a,s,l){Ze(e,"LRNGrad");for(var u=e.shape[3],c=this.readSync(e.dataId),d=this.readSync(r.dataId),p=this.readSync(i.dataId),h=new Float32Array(e.size),f=e.size,m=0;m<f;m++){for(var g=m%u,y=m-g+Math.max(0,g-o),b=m-g+Math.min(u,g+o+1),w=0,x=y;x<b;x++)w+=Math.pow(d[x],2);for(w=s*w+a,x=y;x<b;x++){var I=-2*s*l*d[x]*p[m]/w;m===x&&(I+=Math.pow(w,-l)),I*=c[m],h[x]+=I}}return Es(h,e.shape)},n.prototype.multinomial=function(e,r,i,o){Ze(e,"multinomial");for(var a=r?e:Av(e),s=a.shape[0],l=a.shape[1],u=pi([s,i],"int32"),c=this.readSync(u.dataId),d=this.readSync(a.dataId),p=0;p<s;++p){var h=p*l,f=new Float32Array(l-1);f[0]=d[h];for(var m=1;m<f.length;++m)f[m]=f[m-1]+d[h+m];for(var g=nw(o.toString()),y=p*i,b=0;b<i;++b){var w=g();c[y+b]=f.length;for(var x=0;x<f.length;x++)if(w<f[x]){c[y+b]=x;break}}}return u},n.prototype.oneHot=function(e,r,i,o){Ze(e,"oneHot");var a=new Float32Array(e.size*r);a.fill(o);for(var s=this.readSync(e.dataId),l=0;l<e.size;++l)s[l]>=0&&s[l]<r&&(a[l*r+s[l]]=i);return hd(a,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return Ze(e,"nonMaxSuppression"),G3(this.readSync(e.dataId),this.readSync(r.dataId),i,o,a)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],a=gn(e.shape,"float32"),s=gn(e.shape,"float32"),l=Ds(e).as2D(i,o),u=eu(e).as2D(i,o),c=0;c<i;c++)for(var d=l.slice([c,0],[1,o]),p=u.slice([c,0],[1,o]),h=_o(d,p),f=this.readSync(this.fftImpl(h,r).dataId),m=0;m<o;m++){var g=L8(f,m);a.values[c*o+m]=g.real,s.values[c*o+m]=g.imag}return _o(a.toTensor(),s.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(a=_o(Ds(a).div(Ut(o)),eu(a).div(Ut(o)))),a}var s=this.readSync(e.dataId),l=function(u){for(var c=new Float32Array(u.length/2),d=new Float32Array(u.length/2),p=0;p<u.length;p+=2)c[p/2]=u[p],d[p/2]=u[p+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(s,o,r));return _o(l.real,l.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,i){if(r===1)return e;var o=this.readSync(e.dataId),a=r/2,s=function(y){for(var b=Math.ceil(y.length/4),w=new Float32Array(b),x=new Float32Array(b),I=0;I<y.length;I+=4)w[Math.floor(I/4)]=y[I],x[Math.floor(I/4)]=y[I+1];return{real:w,imag:x}}(o),l=_o(s.real,s.imag).as1D(),u=function(y){for(var b=Math.floor(y.length/4),w=new Float32Array(b),x=new Float32Array(b),I=2;I<y.length;I+=4)w[Math.floor(I/4)]=y[I],x[Math.floor(I/4)]=y[I+1];return{real:w,imag:x}}(o),c=_o(u.real,u.imag).as1D();l=this.fftRadix2(l,a,i),c=this.fftRadix2(c,a,i);var d=function(y,b){for(var w=new Float32Array(y/2),x=new Float32Array(y/2),I=0;I<Math.ceil(y/2);I++){var D=(b?2:-2)*Math.PI*(I/y);w[I]=Math.cos(D),x[I]=Math.sin(D)}return{real:w,imag:x}}(r,i),p=_o(d.real,d.imag).mul(c),h=l.add(p),f=l.sub(p),m=Ds(h).concat(Ds(f)),g=eu(h).concat(eu(f));return _o(m,g).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,l=0,u=0;u<r;u++){var c=_be(a*u,r,i),d=L8(e,u);s+=d.real*c.real-d.imag*c.imag,l+=d.real*c.imag+d.imag*c.real}i&&(s/=r,l/=r),bbe(o,s,l,a)}return o},n.prototype.depthToSpace=function(e,r,i){ee(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),ee(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],a=e.shape[1],s=e.shape[2],l=e.shape[3],u=a*r,c=s*r,d=l/(r*r),p=this.readSync(e.dataId),h=new Float32Array(o*u*c*d),f=0,m=0;m<o;++m)for(var g=0;g<u;++g)for(var y=Math.floor(g/r),b=g%r,w=0;w<c;++w)for(var x=Math.floor(w/r),I=(b*r+w%r)*d,D=0;D<d;++D){var A=D+I+l*(x+s*(y+a*m));h[f++]=p[A]}return Es(h,[o,u,c,d])},n.prototype.broadcastedBinaryOp=function(e,r,i,o){var a=Hn(e.shape,r.shape),s=gn(a,i),l=this.readSync(e.dataId),u=this.readSync(r.dataId),c=Xu(e.shape,a),d=Xu(r.shape,a),p=s.values;if(c.length+d.length===0)for(var h=0;h<p.length;++h)p[h]=o(l[h%l.length],u[h%u.length]);else{var f=this.bufferSync(e),m=this.bufferSync(r),g=function(y){var b=s.indexToLoc(y),w=b.slice(-e.rank);c.forEach(function(A){return w[A]=0});var x=f.locToIndex(w),I=b.slice(-r.rank);d.forEach(function(A){return I[A]=0});var D=m.locToIndex(I);p[y]=o(l[x],u[D])};for(h=0;h<p.length;++h)g(h)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=Hn(e.shape,r.shape),a=gn(o,"float32"),s=gn(o,"float32"),l=this.readSync(e.dataId),u=this.readSync(r.dataId),c=Xu(e.shape,o),d=Xu(r.shape,o),p=a.values,h=s.values;if(c.length+d.length===0)for(var f=0;f<p.length;f++){var m=f%l.length,g=f%u.length,y=i(l[2*m],l[2*m+1],u[2*g],u[2*g+1]);p[f]=y.real,h[f]=y.imag}else{var b=this.bufferSync(this.data.get(e.dataId).complexTensors.real),w=this.bufferSync(this.data.get(r.dataId).complexTensors.real),x=function(I){var D=a.indexToLoc(I),A=D.slice(-e.rank);c.forEach(function(M){return A[M]=0});var E=b.locToIndex(A),R=D.slice(-r.rank);d.forEach(function(M){return R[M]=0});var N=w.locToIndex(R),T=i(l[2*E],l[2*E+1],u[2*N],u[2*N+1]);p[I]=T.real,h[I]=T.imag};for(f=0;f<p.length;f++)x(f)}return this.complex(a.toTensor(),s.toTensor())},n.prototype.split=function(e,r,i){return MB(e,r,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,i,o,a,s){for(var l=e.shape,u=l[0],c=l[1],d=l[2],p=l[3],h=r.shape[0],f=o[0],m=o[1],g=gn([h,f,m,p],"float32"),y=this.readSync(r.dataId),b=this.readSync(i.dataId),w=this.readSync(e.dataId),x=e.strides,I=g.strides,D=0;D<h;D++){var A=4*D,E=y[A],R=y[A+1],N=y[A+2],T=y[A+3],M=b[D];if(!(M>=u))for(var H=f>1?(N-E)*(c-1)/(f-1):0,V=m>1?(T-R)*(d-1)/(m-1):0,X=0;X<f;X++){var Y=f>1?E*(c-1)+X*H:.5*(E+N)*(c-1);if(Y<0||Y>c-1)for(var Q=0;Q<m;Q++)for(var G=0;G<p;G++){var re=G+Q*I[2]+X*I[1]+D*I[0];g.values[re]=s}else if(a==="bilinear"){var ue=Math.floor(Y),Te=Math.ceil(Y),F=Y-ue;for(Q=0;Q<m;Q++)if((Pe=m>1?R*(d-1)+Q*V:.5*(R+T)*(d-1))<0||Pe>d-1)for(G=0;G<p;G++)re=G+Q*I[2]+X*I[1]+D*I[0],g.values[re]=s;else{var q=Math.floor(Pe),Z=Math.ceil(Pe),ae=Pe-q;for(G=0;G<p;G++){var pe=w[re=G+q*x[2]+ue*x[1]+M*x[0]],fe=w[re=G+Z*x[2]+ue*x[1]+M*x[0]],me=w[re=G+q*x[2]+Te*x[1]+M*x[0]],xe=pe+(fe-pe)*ae,je=me+(w[re=G+Z*x[2]+Te*x[1]+M*x[0]]-me)*ae;re=G+Q*I[2]+X*I[1]+D*I[0],g.values[re]=xe+(je-xe)*F}}}else for(Q=0;Q<m;++Q){var Pe;if((Pe=m>1?R*(d-1)+Q*V:.5*(R+T)*(d-1))<0||Pe>d-1)for(G=0;G<p;G++)re=G+Q*I[2]+X*I[1]+D*I[0],g.values[re]=s;else{var Ge=Math.round(Pe),qe=Math.round(Y);for(G=0;G<p;G++){var ht=G+Ge*x[2]+qe*x[1]+M*x[0],ke=G+Q*I[2]+X*I[1]+D*I[0];g.values[ke]=w[ht]}}}}}return g.toTensor()},n.prototype.sparseToDense=function(e,r,i,o){var a=Iv(0,e,i),s=a.sliceRank,l=a.numUpdates,u=a.sliceSize,c=a.strides,d=a.outputSize;return this.scatter(e,r,i,d,u,l,s,c,o,!1)},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=V3(e,r),s=a[0],l=a[1],u=a[2],c=a[3];if(l===0)return so([],s,e.dtype);for(var d=new _v([l,u],e.dtype),p=this.readSync(r.dataId),h=this.readSync(e.dataId),f=0;f<l;f++){for(var m=[],g=0,y=0;y<o;y++){var b=p[f*o+y];g+=b*c[y],m.push(b)}if(g<0||g>=e.size/u)throw new Error("Invalid indices: "+m+" does not index into "+e.shape);for(var w=0;w<u;w++)d.values[f*u+w]=h[g*u+w]}return d.toTensor().reshape(s)},n.prototype.scatterND=function(e,r,i){var o=Iv(0,e,i),a=o.sliceRank,s=o.numUpdates,l=o.sliceSize,u=o.strides,c=o.outputSize,d=Ut(0);return this.scatter(e,r,i,c,l,s,a,u,d,!0)},n.prototype.fill=function(e,r,i){var o=yv(i=i||sm(r),Nt(e));return o.fill(r),_e.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=yv(e.dtype,Nt(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,i){return q3(e,r,i)},n.prototype.scatter=function(e,r,i,o,a,s,l,u,c,d){var p=[o/a,a],h=this.readSync(e.dataId),f=this.readSync(r.dataId);if(o===0)return so([],i,r.dtype);var m=new _v(p,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var g=0;g<s;g++){for(var y=[],b=0,w=0;w<l;w++){var x=h[g*l+w];y.push(x),b+=x*u[w]}if(b<0||b>=o/a)throw new Error("Invalid indices: "+y+" does not index into "+i);for(var I=0;I<a;I++)d?m.values[b*a+I]+=f[g*a+I]:m.values[b*a+I]=r.rank===0?f[0]:f[g*a+I]}return m.toTensor().reshape(i)},n}(AB);function WV(t,n){return{kernelName:t,backendName:"cpu",kernelFunc:function(e){var r=e.inputs,i=e.backend,o=r,a=o.a,s=o.b,l=i;Ze([a,s],t);var u=l.data.get(a.dataId).values,c=l.data.get(s.dataId).values,d=n(a.shape,s.shape,u,c,a.dtype),p=d[0],h=d[1];return{dataId:l.write(p,h,a.dtype),shape:h,dtype:a.dtype}}}}function qV(t){return function(n,e,r,i,o){var a=Hn(n,e),s=a.length,l=Ta(a),u=Hp(o,Nt(a)),c=n.length,d=e.length,p=Ta(n),h=Ta(e),f=Xu(n,a),m=Xu(e,a);if(f.length+m.length===0)for(var g=0;g<u.length;++g)u[g]=t(r[g%r.length],i[g%i.length]);else{var y=function(b){var w=R3(b,s,l),x=w.slice(-c);f.forEach(function(E){return x[E]=0});var I=P2(x,c,p),D=w.slice(-d);m.forEach(function(E){return D[E]=0});var A=P2(D,d,h);u[b]=t(r[I],i[A])};for(g=0;g<u.length;++g)y(g)}return[u,a]}}_e.registerBackend("cpu",function(){return new ixe},1);var oxe=qV(function(t,n){return t/n}),axe=WV(Q2,oxe),sxe={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.attrs,r=t.backend,i=n.x,o=e,a=o.filterSize,s=o.strides,l=o.pad,u=o.includeBatchInIndex,c=r;Ze(i,"MaxPoolWithArgmax");var d=c.data.get(i.dataId).values,p=gd(i.shape,a,s,[1,1],l),h=function(b,w,x,I,D){var A=w3(b,0,x,Ta(w),D,"max"),E=zV(b,w,x,D,!0,I);return[A.values,E.values]}(d,i.shape,i.dtype,u,p),f=h[0],m=h[1],g=c.write(f,p.outShape,i.dtype),y=c.write(m,p.outShape,i.dtype);return[{dataId:g,shape:p.outShape,dtype:i.dtype},{dataId:y,shape:p.outShape,dtype:"int32"}]}},lxe={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,i=n,o=i.boxes,a=i.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,p=e;Ze(o,"NonMaxSuppressionWithScore");var h=$3(p.data.get(o.dataId).values,p.data.get(a.dataId).values,l,u,c,d);return[h.selectedIndices,h.selectedScores]}},uxe={kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e;Ze(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var l=o[s];a[s]=l*l}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},cxe=qV(function(t,n){var e=t-n;return e*e});function GV(t,n,e,r,i){for(var o=Nt(n),a=n.length,s=Ta(n),l=Ta(i),u=Hp(e,Nt(i)),c=0;c<o;++c){for(var d=R3(c,a,s),p=new Array(d.length),h=0;h<p.length;h++)p[h]=d[r[h]];u[P2(p,a,l)]=t[c]}return u}for(w2=0,t3=[lxe,uxe,WV(Z2,cxe),axe,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.attrs,r=t.backend,i=n.x,o=e.perm,a=r;Ze(i,"transpose");for(var s=i.shape.length,l=new Array(s),u=0;u<l.length;u++)l[u]=i.shape[o[u]];var c=GV(a.data.get(i.dataId).values,i.shape,i.dtype,o,l);return{dataId:a.write(c,l,i.dtype),shape:l,dtype:i.dtype}}},sxe];w2<t3.length;w2++)v7(t3[w2]);var w2,t3,Xf,dxe=function(t){this.variableNames=["A"];var n=Fo(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},pxe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Fo(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `},hxe=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var i=Br(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],u=new Array(s),c=0;c<a.length;c++)u[a[c]]=l[c];return u.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},fxe=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Br(this.rank),o=FB("rc",this.rank),a=new Array(this.rank);for(r=0;r<n.length;r++)a[n[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",l="++"+o[this.rank-1]+" < "+e[this.rank-1],u="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+l+`) {
        result[1] = `+u+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+l+`) {
          result[3] = `+u+`;
        }
      }
      setOutput(result);
    }
    `};for(x2=0,n3=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,i=n.pixels,o=r.numChannels,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,l=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=l[0],c=l[1],d=[c,u],p=[c,u,o];(s||a)&&(Xf==null&&(Xf=document.createElement("canvas").getContext("2d")),Xf.canvas.width=u,Xf.canvas.height=c,Xf.drawImage(i,0,0,u,c),i=Xf.canvas);var h=e.makeTensorInfo(d,"int32");e.texData.get(h.dataId).usage=ns.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(h.dataId),i);var f=ze().getBool("WEBGL_PACK")?new pxe(p):new dxe(p),m=e.runWebGLProgram(f,[h],"int32");return e.disposeData(h.dataId),m}},{kernelName:Q2,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n;return function(i,o,a){var s=new di(jbe,i.shape,o.shape);return ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(s=new Zl(Ube,i.shape,o.shape,!0)),a.runWebGLProgram(s,[i,o],"float32")}(r.a,r.b,e)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs;L2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=n,o=i.boxes,a=i.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,p=e,h=$3(p.readSync(o.dataId),p.readSync(a.dataId),l,u,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e,o=new Mn(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Z2,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,i=r.a,o=r.b,a=e,s=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zl("return (a - b) * (a - b);",i.shape,o.shape):new di("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(t){for(var n,e=t.inputs,r=t.attrs,i=t.backend,o=e.x,a=r.perm,s=i,l=o.shape.length,u=new Array(l),c=0;c<u.length;c++)u[c]=o.shape[a[c]];if(s.shouldExecuteOnCPU([o])){var d=GV(s.texData.get(o.dataId).values,o.shape,o.dtype,a,u);n=s.makeTensorInfo(u,o.dtype),s.texData.get(n.dataId).values=d}else n=function(p,h,f){var m=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fxe(p.shape,h):new hxe(p.shape,h);return f.runWebGLProgram(m,[p],p.dtype)}(o,a,s);return n}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.attrs,r=t.backend,i=n.x,o=e,a=o.filterSize,s=o.strides,l=o.pad,u=o.includeBatchInIndex,c=r;ee(i.shape.length===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+i.shape.length+"."});var d=[1,1];ee(Lo(s,d),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+d+"'"});var p=gd(i.shape,a,s,d,l),h=function(f,m,g,y){var b=new vv(g,"max",!1),w=y.runWebGLProgram(b,[f],"float32");return b=new vv(g,"max",!0,!0,m),[w,y.runWebGLProgram(b,[f],"float32")]}(i,u,p,c);return[h[0],h[1]]}}];x2<n3.length;x2++)v7(n3[x2]);var x2,n3;for(C2=0,r3=[{kernelName:fB,inputsToSave:["a","b"],gradFunc:function(t,n){var e=n[0],r=n[1],i=Hn(e.shape,r.shape);return{a:function(){var o=t,a=Ni(e.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(e.shape)},b:function(){var o=t,a=Ni(r.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(t,n){var e={};return n.forEach(function(r,i){e[i]=function(){return t.clone()}}),e}},{kernelName:mB,gradFunc:function(t,n,e){for(var r=e,i=r.inputShape,o=r.shape,a=Array.from(o),s=i.length-1;s>=0;s--)if(i[s]===o[s])a[s]=1;else if(i[s]!==1)throw new Error("broadcastTo(): ["+i+"] cannot be broadcast to ["+o+"].");var l=[];for(s=0;s<a.length;s++)a[s]>1&&l.push(s);return{x:function(){return t.sum(l,!0)}}}},{kernelName:Q2,inputsToSave:["a","b"],gradFunc:function(t,n){var e=n[0],r=n[1],i=Hn(e.shape,r.shape);return{a:function(){var o=md(t,r.toFloat()),a=Ni(e.shape,i);return a.length>0?ud(o,a).reshape(e.shape):o},b:function(){var o=t.mul(e.toFloat()),a=Ni(r.shape,i);a.length>0&&(o=ud(o,a).reshape(r.shape));var s=wV(r);return L3(md(o,s.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,n,e){var r=e.varianceEpsilon,i=n[0],o=n[1],a=n[2],s=n[3],l=uV(i),u=s??Ut(1),c=Ni(o.shape,l.shape),d=[];if(o.rank===1){for(var p=0;p<l.shape.length-1;++p)d.push(l.shape[p]);d.push(1)}var h=ka(i,o),f=Gr(t,u),m=_B(Po(a,Ut(r))),g=Gr(Gr(Gr(m,m),m),Ut(-.5));return{x:function(){return o.rank===1?Ku(Gr(Gr(t,rm(m.as4D(1,1,1,o.shape[0]),d)),u),i.shape):Ku(Gr(Gr(t,m),u),i.shape)},mean:function(){var y=Gr(Gr(m,Ut(-1)),f);return o.rank===1&&(y=ud(y,c)),Ku(y,o.shape)},variance:function(){var y=Gr(Gr(g,h),f);return o.rank===1&&(y=ud(y,c)),Ku(y,o.shape)},scale:function(){var y=Gr(h,m),b=Gr(t,y);return o.rank===1&&(b=ud(b,c)),Ku(b,o.shape)},offset:function(){var y=t;return o.rank===1&&(y=ud(y,c)),Ku(y,o.shape)}}}},{kernelName:vB,gradFunc:function(t){return{x:function(){return t.toFloat()}}}},{kernelName:gB,inputsToSave:["indices"],gradFunc:function(t,n){var e=n[0];return{indices:function(){return pi(e.shape,"float32")}}}},{kernelName:bB,inputsToSave:["x"],gradFunc:function(t,n,e){var r=n[0],i=e.paddings.map(function(o){return o[0]});return{x:function(){return t.slice(i,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(t,n){var e=n[0];return{x:function(){return t.mul(e.toFloat().mul(2))}}}},{kernelName:Z2,inputsToSave:["a","b"],gradFunc:function(t,n){var e=n[0],r=n[1],i=Ut(2);return{a:function(){return Gr(t,Gr(i,ka(e,r)))},b:function(){return Gr(t,Gr(i,ka(r,e)))}}}},{kernelName:yB,inputsToSave:["x"],gradFunc:function(t,n,e){var r=n[0],i=e.reps;return{x:function(){var o=er(r);if(r.rank===1)for(var a=0;a<i[0];++a)o=o.add(t.slice([a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(a=0;a<i[0];++a)for(var s=0;s<i[1];++s)o=o.add(t.slice([a*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(a=0;a<i[0];++a)for(s=0;s<i[1];++s)for(var l=0;l<i[2];++l)o=o.add(t.slice([a*r.shape[0],s*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(r.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<i[0];++a)for(s=0;s<i[1];++s)for(l=0;l<i[2];++l)for(var u=0;u<i[3];++u)o=o.add(t.slice([a*r.shape[0],s*r.shape[1],l*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return o}}}},{kernelName:"Transpose",gradFunc:function(t,n,e){var r=X2(e.perm);return{x:function(){return el(t,r)}}}}];C2<r3.length;C2++)iye(r3[C2]);var C2,r3,mxe=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();ze().get("IS_BROWSER")&&ze().setPlatform("browser",new mxe);var i3,gxe=function(){return T8()},vxe=function(){function t(){this.util=A8(),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return ze().global.fetch!=null?ze().global.fetch(n,e):(i3==null&&(i3=gxe()),i3(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t}();ze().get("IS_NODE")&&ze().setPlatform("node",new vxe);var x3={float32:4,int32:4,uint16:2,uint8:1,bool:1},K2=4;function $V(t,n){for(var e={},r=0,i=function(s){var l=s.name,u=s.dtype,c=s.shape,d=Nt(c),p=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var f=x3[h.dtype],m=t.slice(r,r+d*f),g=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(u==="float32")p=Float32Array.from(g,function(D){return D*h.scale+h.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+u);p=Int32Array.from(g,function(D){return Math.round(D*h.scale+h.min)})}r+=d*f}else if(u==="string"){var y=Nt(s.shape);p=[];for(var b=0;b<y;b++){var w=new Uint32Array(t.slice(r,r+K2))[0];r+=K2;var x=new Uint8Array(t.slice(r,r+w));p.push(x),r+=w}}else{var I=x3[u];if(m=t.slice(r,r+d*I),u==="float32")p=new Float32Array(m);else if(u==="int32")p=new Int32Array(m);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);p=new Uint8Array(m)}r+=d*I}e[l]=so(p,c,u)},o=0,a=n;o<a.length;o++)i(a[o]);return e}function yxe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var C3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function o7(t){return C3?Buffer.byteLength(t):new Blob([t]).size}function p5(t){var n=0;t.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function a7(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function Nv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:o7(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:o7(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var is=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var i=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(n,r);a!==null&&i.push(a)}),i},t}(),im="://",fd=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){ee(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(im)&&(n=n.slice(0,n.indexOf(im))),ee(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();ee(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function k2(t){if(t.indexOf(im)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+fd.getSchemes().join(","));return{scheme:t.split(im)[0],path:t.split(im)[1]}}function s7(t,n,e){return e===void 0&&(e=!1),Ft(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,d;return Ot(this,function(p){switch(p.label){case 0:return ee(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),ee((r=is.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),ee(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],ee((o=is.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),ee(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),a=o[0],s=k2(t).scheme,l=k2(t).path,u=s===k2(t).scheme,[4,i.load()];case 1:return c=p.sent(),e&&u?[4,fd.getManager(s).removeModel(l)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,a.save(c)];case 4:return d=p.sent(),!e||u?[3,6]:[4,fd.getManager(s).removeModel(l)];case 5:p.sent(),p.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var jp="models_store",pd="model_info_store";function KV(){if(!ze().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function I3(t){var n=t.result;n.createObjectStore(jp,{keyPath:"modelPath"}),n.createObjectStore(pd,{keyPath:"modelPath"})}var om=function(){function t(n){if(this.indexedDB=KV(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return I3(a)},a.onsuccess=function(){var s=a.result;if(e==null){var l=s.transaction(jp,"readonly"),u=l.objectStore(jp).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(u.result.modelArtifacts)},u.onerror=function(m){return s.close(),o(u.error)},l.oncomplete=function(){return s.close()}}else{var c,d=Nv(e),p=s.transaction(pd,"readwrite"),h=p.objectStore(pd),f=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});f.onsuccess=function(){var m=(c=s.transaction(jp,"readwrite")).objectStore(jp).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:d});m.onsuccess=function(){return i({modelArtifactsInfo:d})},m.onerror=function(g){var y=(h=p.objectStore(pd)).delete(r.modelPath);y.onsuccess=function(){return s.close(),o(m.error)},y.onerror=function(b){return s.close(),o(m.error)}}},f.onerror=function(m){return s.close(),o(f.error)},p.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),l7=function(t){return ze().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(om.URL_SCHEME)?(n=t.slice(om.URL_SCHEME.length),new om(n)):null;var n};is.registerSaveRouter(l7),is.registerLoadRouter(l7);var bxe=function(){function t(){this.indexedDB=KV()}return t.prototype.listModels=function(){return Ft(this,void 0,void 0,function(){var n=this;return Ot(this,function(e){return[2,new Promise(function(r,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return I3(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(pd,"readonly"),l=s.objectStore(pd).getAll();l.onsuccess=function(){for(var u={},c=0,d=l.result;c<d.length;c++){var p=d[c];u[p.modelPath]=p.modelArtifactsInfo}r(u)},l.onerror=function(u){return a.close(),i(l.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(n){return Ft(this,void 0,void 0,function(){var e=this;return Ot(this,function(r){var i;return n=(i=n).startsWith(om.URL_SCHEME)?i.slice(om.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return I3(s)},s.onsuccess=function(){var l,u=s.result,c=u.transaction(pd,"readwrite"),d=c.objectStore(pd),p=d.get(n);p.onsuccess=function(){if(p.result==null)return u.close(),a(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var h=d.delete(n),f=function(){var m=(l=u.transaction(jp,"readwrite")).objectStore(jp).delete(n);m.onsuccess=function(){return o(p.result.modelArtifactsInfo)},m.onerror=function(g){return a(p.error)}};h.onsuccess=f,h.onerror=function(m){return f(),u.close(),a(p.error)}},p.onerror=function(h){return u.close(),a(p.error)},c.oncomplete=function(){l==null?u.close():l.oncomplete=function(){return u.close()}}},s.onerror=function(l){return a(s.error)}})]})})},t}();if(ze().getBool("IS_BROWSER"))try{fd.registerManager(om.URL_SCHEME,new bxe)}catch{}var Yu="/",tm="tensorflowjs_models",YV="info",_xe="model_topology",wxe="weight_specs",xxe="weight_data",Cxe="model_metadata";function XV(t){return{info:[tm,t,YV].join(Yu),topology:[tm,t,_xe].join(Yu),weightSpecs:[tm,t,wxe].join(Yu),weightData:[tm,t,xxe].join(Yu),modelMetadata:[tm,t,Cxe].join(Yu)}}function Ixe(t){var n=t.split(Yu);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Yu)}var am=function(){function t(n){if(!ze().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=XV(this.modelPath)}return t.prototype.save=function(n){return Ft(this,void 0,void 0,function(){var e,r,i;return Ot(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=Nv(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(C3)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),l="",u=0,c=s.length;u<c;u++)l+=String.fromCharCode(s[u]);return btoa(l)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Ft(this,void 0,void 0,function(){var n,e,r,i,o,a,s;return Ot(this,function(l){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy,e.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(u){if(C3){var c=Buffer.from(u,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(u),p=new Uint8Array(d.length),h=0;h<d.length;++h)p.set([d.charCodeAt(h)],h);return p.buffer}(s),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),u7=function(t){return ze().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(am.URL_SCHEME)?(n=t.slice(am.URL_SCHEME.length),new am(n)):null;var n};is.registerSaveRouter(u7),is.registerLoadRouter(u7);var Sxe=function(){function t(){ee(ze().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ee(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ft(this,void 0,void 0,function(){var n,e,r,i,o,a;return Ot(this,function(s){for(n={},e=tm+Yu,r=Yu+YV,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(a=Ixe(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return Ft(this,void 0,void 0,function(){var e,r;return Ot(this,function(i){var o;if(n=(o=n).startsWith(am.URL_SCHEME)?o.slice(am.URL_SCHEME.length):o,e=XV(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(ze().getBool("IS_BROWSER"))try{fd.registerManager(am.URL_SCHEME,new Sxe)}catch{}var Exe="model",Dxe=".json",Txe=".weights.bin";function c7(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var o3=function(){function t(n){if(!ze().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=Exe),this.modelTopologyFileName=n+Dxe,this.weightDataFileName=n+Txe}return t.prototype.save=function(n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s;return Ot(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,c7(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,c7(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:Nv(n)}]}})})},t.URL_SCHEME="downloads://",t}(),Axe=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return Ft(this,void 0,void 0,function(){var n,e,r=this;return Ot(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(l){var u=JSON.parse(l.target.result),c=u.modelTopology;if(c!=null){e.length===0&&o({modelTopology:c});var d=u.weightsManifest;if(d!=null){var p;try{p=r.checkManifestAndWeightFiles(d,e)}catch(g){return void a(g)}var h=[],f=[],m=[];d.forEach(function(g){g.paths.forEach(function(y){f.push(y),m.push(null)}),h.push.apply(h,g.weights)}),d.forEach(function(g){g.paths.forEach(function(y){var b=new FileReader;b.onload=function(w){var x=w.target.result,I=f.indexOf(y);m[I]=x,m.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:h,weightData:p5(m),format:u.format,generatedBy:u.generatedBy,convertedBy:u.convertedBy,userDefinedMetadata:u.userDefinedMetadata})},b.onerror=function(w){return a("Failed to weights data from file of path '"+y+"'.")},b.readAsArrayBuffer(p[y])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(l){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],i=e.map(function(l){return a7(l.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(l){var u=a7(l);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),i.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");o[l]=e[i.indexOf(u)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function d7(t,n,e,r){(function(o){ee(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){ee(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),ee(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),ee(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=e+ ++i/t.length*(r-e);return n(s),a}),o}))}function QV(t,n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c;return Ot(this,function(d){switch(d.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?ze().platform.fetch:n.fetchFunc,r=t.map(function(p){return e(p,n.requestInit,{isBinary:!0})}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,d7(r,n.onProgress,i,o)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(p){return p.arrayBuffer()}),l=.5,u=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,d7(s,n.onProgress,l,u)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function p7(t){var n=this;return function(e,r,i){return r===void 0&&(r=""),Ft(n,void 0,void 0,function(){var o,a,s,l,u,c,d,p,h,f;return Ot(this,function(m){switch(m.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],l=[],e.forEach(function(g,y){var b=0;g.weights.forEach(function(w){var x="quantization"in w?w.quantization.dtype:w.dtype,I=x3[x]*Nt(w.shape),D=function(){o[y]=!0,a[y]==null&&(a[y]=[]),a[y].push({manifestEntry:w,groupOffset:b,sizeBytes:I})};i!=null?i.forEach(function(A,E){A===w.name&&(D(),s[E]=!0)}):D(),l.push(w.name),b+=I})}),!s.every(function(g){return g}))throw u=i.filter(function(g,y){return!s[y]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return c=o.reduce(function(g,y,b){return y&&g.push(b),g},[]),d=[],c.forEach(function(g){e[g].paths.forEach(function(y){var b=r+(r.endsWith("/")?"":"/")+y;d.push(b)})}),[4,t(d)];case 1:return p=m.sent(),h={},f=0,c.forEach(function(g){for(var y=e[g].paths.length,b=0,w=0;w<y;w++)b+=p[f+w].byteLength;for(var x=new ArrayBuffer(b),I=new Uint8Array(x),D=0,A=0;A<y;A++){var E=new Uint8Array(p[f+A]);I.set(E,D),D+=E.byteLength}a[g].forEach(function(R){var N=$V(x.slice(R.groupOffset,R.groupOffset+R.sizeBytes),[R.manifestEntry]);for(var T in N)h[T]=N[T]}),f+=y}),[2,h]}})})}}is.registerSaveRouter(function(t){return ze().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(o3.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new o3(n)}(t.slice(o3.URL_SCHEME.length)):null});var ZV=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(ee(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=ze().platform.fetch,ee(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&ee(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return Ft(this,void 0,void 0,function(){var e,r,i,o;return Ot(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Nv(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Ft(this,void 0,void 0,function(){var n,e,r,i,o,a,s,l,u,c,d,p;return Ot(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,n.json()];case 3:return e=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,a=e.generatedBy,s=e.convertedBy,l=e.format,u=e.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:p=h.sent(),c=p[0],d=p[1],h.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:d,userDefinedMetadata:u,generatedBy:a,convertedBy:s,format:l}]}})})},t.prototype.loadWeights=function(n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d,p;return Ot(this,function(h){switch(h.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(f){var m=f.lastIndexOf("/"),g=f.lastIndexOf("?"),y=f.substring(0,m),b=g>m?f.substring(g):"";return[y+"/",b]}(e),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],l=0,u=n;l<u.length;l++)c=u[l],s.push.apply(s,c.weights);return d=[],n.forEach(function(f){f.paths.forEach(function(m){d.push(a+m+o)})}),[4,QV(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=h.sent(),[2,[s,p5(p)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function S3(t){return t.match(ZV.URL_SCHEME_REGEX)!=null}var h7=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return S3(e)}):S3(t))?E3(t,{onProgress:n}):null};function E3(t,n){return new ZV(t,n)}is.registerSaveRouter(h7),is.registerLoadRouter(h7);var a3=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(n){return[2,this.modelArtifacts]})})},t}(),kxe=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){return[2,this.saveHandler(n)]})})},t}(),aw=Object.freeze({browserFiles:function(t){return new Axe(t)},browserHTTPRequest:function(t,n){return E3(t,n)},concatenateArrayBuffers:p5,decodeWeights:$V,encodeWeights:function(t,n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s=this;return Ot(this,function(l){switch(l.label){case 0:for(e=[],r=[],i=Array.isArray(t)?t.map(function(u){return u.name}):Object.keys(t),o=function(u){var c=i[u],d=Array.isArray(t)?t[u].tensor:t[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var p={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise(function(f){return Ft(s,void 0,void 0,function(){var m,g,y,b,w,x,I;return Ot(this,function(D){switch(D.label){case 0:return[4,d.bytes()];case 1:for(m=D.sent(),g=m.reduce(function(A,E){return A+E.length},0)+K2*m.length,y=new Uint8Array(g),b=0,w=0;w<m.length;w++)x=m[w],I=new Uint8Array(new Uint32Array([x.length]).buffer),y.set(I,b),b+=K2,y.set(x,b),b+=x.length;return f(y),[2]}})})});r.push(h)}else r.push(d.data());n!=null&&(p.group=n),e.push(p)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:yxe(l.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new a3(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new a3({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new a3({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return is.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:Nv,getSaveHandlers:function(t){return is.getSaveHandlers(t)},http:E3,isHTTPScheme:S3,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),Ft(this,void 0,void 0,function(){return Ot(this,function(i){return[2,p7(function(o){return QV(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return is.registerLoadRouter(t)},registerSaveRouter:function(t){return is.registerSaveRouter(t)},weightsLoaderFactory:p7,withSaveHandler:function(t){return new kxe(t)},copyModel:function(t,n){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){return[2,s7(t,n,!1)]})})},listModels:function(){return Ft(this,void 0,void 0,function(){var t,n,e,r,i,o,a;return Ot(this,function(s){switch(s.label){case 0:t=fd.getSchemes(),n={},e=0,r=t,s.label=1;case 1:return e<r.length?(i=r[e],[4,fd.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+im+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){return[2,s7(t,n,!0)]})})},removeModel:function(t){return Ft(this,void 0,void 0,function(){var n;return Ot(this,function(e){return n=k2(t),[2,fd.getManager(n.scheme).removeModel(n.path)]})})}}),Qf,Mxe=he({confusionMatrix_:function(t,n,e){var r=K(t,"labels","confusionMatrix"),i=K(n,"predictions","confusionMatrix");ee(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),ee(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ee(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),ee(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),ee(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=G2(r.asType("int32"),e),a=G2(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}}),XFe=Object.freeze({confusionMatrix:Mxe}),Rxe=he({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(g7("FromPixels",_e.backendName)!=null)return _e.runKernel("FromPixels",{pixels:t},{numChannels:n});var s,l,u=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=u[0],d=u[1];if(a?s=t.getContext("2d").getImageData(0,0,c,d).data:r||e?s=t.data:(o||i)&&(Qf==null&&(Qf=document.createElement("canvas").getContext("2d")),Qf.canvas.width=c,Qf.canvas.height=d,Qf.drawImage(t,0,0,c,d),s=Qf.getImageData(0,0,c,d).data),n===4)l=new Int32Array(s);else{var p=c*d;l=new Int32Array(p*n);for(var h=0;h<p;h++)for(var f=0;f<n;++f)l[h*n+f]=s[4*h+f]}return sB(l,[d,c,n],"int32")}}),sw=Object.freeze({toPixels:function(t,n){return Ft(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E;return Ot(this,function(R){switch(R.label){case 0:if(e=K(t,"img","toPixels"),t instanceof wr||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.data()];case 1:return s=R.sent(),l=e.min(),u=e.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(c=R.sent(),d=c[0],p=c[1],h=d[0],f=p[0],l.dispose(),u.dispose(),e.dtype==="float32"){if(h<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+f+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(h<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+f+"].")}for(m=e.dtype==="float32"?255:1,g=new Uint8ClampedArray(o*i*4),y=0;y<i*o;++y)b=void 0,w=void 0,x=void 0,I=void 0,a===1?(b=s[y]*m,w=s[y]*m,x=s[y]*m,I=255):a===3?(b=s[3*y]*m,w=s[3*y+1]*m,x=s[3*y+2]*m,I=255):a===4&&(b=s[4*y]*m,w=s[4*y+1]*m,x=s[4*y+2]*m,I=s[4*y+3]*m),g[(D=4*y)+0]=Math.round(b),g[D+1]=Math.round(w),g[D+2]=Math.round(x),g[D+3]=Math.round(I);return n!=null&&(n.width=o,n.height=i,A=n.getContext("2d"),E=new ImageData(g,o,i),A.putImageData(E,0,0)),e!==t&&e.dispose(),[2,g]}})})},fromPixels:Rxe}),JV=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),e9=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function _d(t){ee(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),ee(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),ee(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),e9.register(t)}var QFe=Object.freeze({Serializable:JV,SerializationMap:e9,registerClass:_d});var ZFe=Object.freeze({gpgpu_util:m_e,webgl_util:hye,forceHalfFloat:function(){ze().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:lV,setWebGLContext:N7,GPGPUContext:tV}),Yp=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return tl(n,t),n.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;if(i!=null){var l=i.map(function(u){return{name:u.name,tensor:s[u.name]}});this.applyGradients(l)}else this.applyGradients(s);return Aa(s),r?a:(a.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return vbe(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&Aa(this.iterations_)},n.prototype.saveIterations=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ut(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return Ft(this,void 0,void 0,function(){var r;return Ot(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}(JV);Object.defineProperty(Yp,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var t9=function(t){function n(e,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=_e.backend.epsilon()),o}return tl(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=_e.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Fn(function(){return er(a).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Fn(function(){return er(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var l=r.accumulatedGrads[o].variable,u=r.accumulatedUpdates[o].variable;Fn(function(){var c=l.mul(r.rho).add(s.square().mul(1-r.rho)),d=u.add(r.epsilon).sqrt().div(l.add(r.epsilon).sqrt()).mul(s),p=u.mul(r.rho).add(d.square().mul(1-r.rho));l.assign(c),u.assign(p);var h=d.mul(-r.learningRate).add(a);a.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Aa(this.accumulatedGrads.map(function(e){return e.variable})),Aa(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){var e;return Ot(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){var r;return Ot(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Yp);_d(t9);var n9=function(t){function n(e,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return tl(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=_e.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Fn(function(){return ec(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var l=r.accumulatedGrads[o].variable;Fn(function(){var u=l.add(s.square());l.assign(u);var c=s.div(u.add(_e.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&Aa(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Yp);_d(n9);var r9=function(t){function n(e,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],Fn(function(){a.accBeta1=Ut(r).variable(),a.accBeta2=Ut(i).variable()}),o==null&&(a.epsilon=_e.backend.epsilon()),a}return tl(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Fn(function(){var o=ka(1,r.accBeta1),a=ka(1,r.accBeta2);i.forEach(function(s,l){var u=_e.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:Fn(function(){return er(u).variable(!1)})}),r.accumulatedSecondMoment[l]==null&&(r.accumulatedSecondMoment[l]={originalName:s+"/v",variable:Fn(function(){return er(u).variable(!1)})});var c=Array.isArray(e)?e[l].tensor:e[s];if(c!=null){var d=r.accumulatedFirstMoment[l].variable,p=r.accumulatedSecondMoment[l].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),f=p.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(o),g=f.div(a);d.assign(h),p.assign(f);var y=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(u);u.assign(y)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Aa(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&Aa(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){var e;return Ot(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){var r,i=this;return Ot(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),Fn(function(){i.accBeta1.assign(z2(i.beta1,i.iterations_+1)),i.accBeta2.assign(z2(i.beta2,i.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Yp);_d(r9);var i9=function(t){function n(e,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Fn(function(){s.iteration=Ut(0).variable(),s.accBeta1=Ut(r).variable()}),o==null&&(s.epsilon=_e.backend.epsilon()),s}return tl(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Fn(function(){var o=ka(1,r.accBeta1),a=md(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,l){var u=_e.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:er(u).variable(!1)}),r.accumulatedWeightedInfNorm[l]==null&&(r.accumulatedWeightedInfNorm[l]={originalName:s+"/v",variable:er(u).variable(!1)});var c=Array.isArray(e)?e[l].tensor:e[s];if(c!=null){var d=r.accumulatedFirstMoment[l].variable,p=r.accumulatedWeightedInfNorm[l].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),f=p.mul(r.beta2),m=c.abs(),g=f.maximum(m);d.assign(h),p.assign(g);var y=a.div(o).mul(h.div(g.add(r.epsilon))).add(u);u.assign(y)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Aa(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&Aa(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Yp);_d(i9);var h5=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return tl(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var s=_e.registeredVariables[i];Fn(function(){var l=r.c.mul(a).add(s);s.assign(l)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=fye(Ut(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(Yp);_d(h5);var o9=function(t){function n(e,r,i){i===void 0&&(i=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=Ut(o.momentum),o}return tl(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=_e.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:Fn(function(){return er(a).variable(!1)})});var s=r.accumulations[o].variable,l=Array.isArray(e)?e[o].tensor:e[i];l!=null&&Fn(function(){var u,c=r.m.mul(s).add(l);u=r.useNesterov?r.c.mul(l.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(u)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Aa(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){return Ot(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){return Ot(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(h5);_d(o9);var a9=function(t){function n(e,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;if(s.learningRate=e,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=_e.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return tl(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=_e.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Fn(function(){return er(a).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:Fn(function(){return er(a).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Fn(function(){return er(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var l=r.accumulatedMeanSquares[o].variable,u=r.accumulatedMoments[o].variable;Fn(function(){var c=l.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[o].variable,p=d.mul(r.decay).add(s.mul(1-r.decay)),h=u.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(p.square().add(r.epsilon)).sqrt()));l.assign(c),d.assign(p),u.assign(h);var f=a.sub(h);a.assign(f)}else{var m=l.mul(r.decay).add(s.square().mul(1-r.decay));h=u.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),l.assign(m),u.assign(h),f=a.sub(h),a.assign(f)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Aa(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Aa(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&Aa(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ft(this,void 0,void 0,function(){var e;return Ot(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ft(this,void 0,void 0,function(){var r;return Ot(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Yp);_d(a9);var Pp=function(){function t(){}return t.sgd=function(n){return new h5(n)},t.momentum=function(n,e,r){return r===void 0&&(r=!1),new o9(n,e,r)},t.rmsprop=function(n,e,r,i,o){return e===void 0&&(e=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new a9(n,e,r,i,o)},t.adam=function(n,e,r,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new r9(n,e,r,i)},t.adadelta=function(n,e,r){return n===void 0&&(n=.001),e===void 0&&(e=.95),r===void 0&&(r=null),new t9(n,e,r)},t.adamax=function(n,e,r,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new i9(n,e,r,i,o)},t.adagrad=function(n,e){return e===void 0&&(e=.1),new n9(n,e)},t}(),JFe={sgd:Pp.sgd,momentum:Pp.momentum,adadelta:Pp.adadelta,adagrad:Pp.adagrad,rmsprop:Pp.rmsprop,adamax:Pp.adamax,adam:Pp.adam};wr.prototype.add=function(t){return Po(this,t)},wr.prototype.broadcastTo=function(t){return fV(this,t)},wr.prototype.div=function(t){return md(this,t)},wr.prototype.divNoNan=function(t){return vV(this,t)},wr.prototype.squaredDifference=function(t){return xV(this,t)},wr.prototype.tile=function(t){return rm(this,t)},wr.prototype.oneHot=function(t,n,e){return n===void 0&&(n=1),e===void 0&&(e=0),G2(this,t,n,e)},wr.prototype.transpose=function(t){return el(this,t)},wr.prototype.pad=function(t,n){return ol(this,t,n)},wr.prototype.batchNorm=function(t,n,e,r,i){return Mv(this,t,n,e,r,i)},Ue=rxe;var al=function(){function t(n,e){if(!ru(n)||!ru(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();var Tn=function(){function t(n,e){this._x=n,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return new t(this.x/n.x,this.y/n.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}();function Fv(t,n){return t instanceof wr&&t.shape.length===n}function s9(t){return Fv(t,2)}function wd(t){return Fv(t,3)}function Ts(t){return Fv(t,4)}function l9(t){return t%1!==0}function f5(t){return t%2===0}function dm(t,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(t*e)/e}function m5(t){return t&&t.width&&t.height}function u9(t,n){var e=t.width,r=t.height,i=n/Math.max(r,e);return new al(Math.round(e*i),Math.round(r*i))}function pm(t){return t.reduce(function(n,e){return n.add(e)},new Tn(0,0)).div(new Tn(t.length,t.length))}function rc(t,n,e){return Array(t).fill(0).map(function(r,i){return n+i*e})}function ru(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function lw(t){return ru(t)&&0<=t&&t<=1}var lo=function(){function t(n,e){e===void 0&&(e=!0);var r=n||{},i=[r.left,r.top,r.right,r.bottom].every(ru),o=[r.x,r.y,r.width,r.height].every(ru);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],l=a[1],u=a[2],c=a[3];t.assertIsValidBox({x:s,y:l,width:u,height:c},"Box.constructor",e),this._x=s,this._y=l,this._width=u,this._height=c}return t.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(ru)},t.assertIsValidBox=function(n,e,r){if(r===void 0&&(r=!1),!t.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new Tn(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new Tn(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new Tn(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new Tn(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),e=n[0],r=n[1],i=n[2],o=n[3];return new t({x:e,y:r,width:i,height:o})},t.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),e=n[0],r=n[1],i=n[2],o=n[3];return new t({x:e,y:r,width:i,height:o})},t.prototype.toSquare=function(){var n=this,e=n.x,r=n.y,i=n.width,o=n.height,a=Math.abs(i-o);return i<o&&(e-=a/2,i+=a),o<i&&(r-=a/2,o+=a),new t({x:e,y:r,width:i,height:o})},t.prototype.rescale=function(n){var e=m5(n)?n.width:n,r=m5(n)?n.height:n;return new t({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},t.prototype.pad=function(n,e){var r=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],i=r[0],o=r[1],a=r[2],s=r[3];return new t({x:i,y:o,width:a,height:s})},t.prototype.clipAtImageBorders=function(n,e){var r=this,i=r.x,o=r.y,a=r.right,s=r.bottom,l=Math.max(i,0),u=Math.max(o,0),c=a-l,d=s-u,p=Math.min(c,n-l),h=Math.min(d,e-u);return new t({x:l,y:u,width:p,height:h}).floor()},t.prototype.shift=function(n,e){var r=this,i=r.width,o=r.height,a=this.x+n,s=this.y+e;return new t({x:a,y:s,width:i,height:o})},t.prototype.padAtBorders=function(n,e){var r=this.width+1,i=this.height+1,o=1,a=1,s=r,l=i,u=this.left,c=this.top,d=this.right,p=this.bottom;return d>e&&(s=-d+e+r,d=e),p>n&&(l=-p+n+i,p=n),u<1&&(l=2-u,u=1),c<1&&(l=2-c,c=1),{dy:a,edy:l,dx:o,edx:s,y:c,ey:p,x:u,ex:d,w:r,h:i}},t.prototype.calibrate=function(n){return new t({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},t}();var xd=function(t){Ql(n,t);function n(e,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{left:e,top:r,right:i,bottom:o},a)||this}return n}(lo);var g5=function(t){Ql(n,t);function n(e,r){var i=t.call(this,e)||this;return i._label=r,i}return n.assertIsValidLabeledBox=function(e,r){if(lo.assertIsValidBox(e,r),!ru(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(lo);var uw=function(){function t(n,e,r,i,o){this._imageDims=new al(o.width,o.height),this._score=n,this._classScore=e,this._className=r,this._box=new lo(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new lo(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},t}();var xOe=function(t){Ql(n,t);function n(e,r,i,o){var a=t.call(this,e,r)||this;return a._score=i,a._classScore=o,a}return n.assertIsValidPredictedBox=function(e,r){if(g5.assertIsValidLabeledBox(e,r),!lw(e.score)||!lw(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n}(g5);var hm=function(t){Ql(n,t);function n(e,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{x:e,y:r,width:i,height:o},a)||this}return n}(lo);function v5(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:n}}function cw(t){var n="";if(!t)try{t=G1("fs")}catch(r){n=r.toString()}var e=t?function(r){return new Promise(function(i,o){t.readFile(r,function(a,s){return a?o(a):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function y5(){var t=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=cw();return $f({Canvas:t||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:n||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:e,createImageElement:r,fetch:i},o)}function b5(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function _5(){return typeof global=="object"&&typeof G1=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var Gi;function Nxe(){if(!Gi)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Gi}function w5(t){Gi=t}function x5(){b5()&&w5(v5()),_5()&&w5(y5())}function Fxe(t){if(Gi||x5(),!Gi)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=t.Canvas,e=n===void 0?Gi.Canvas:n,r=t.Image,i=r===void 0?Gi.Image:r;Gi.Canvas=e,Gi.Image=i,Gi.createCanvasElement=t.createCanvasElement||function(){return new e},Gi.createImageElement=t.createImageElement||function(){return new i},Gi.ImageData=t.ImageData||Gi.ImageData,Gi.Video=t.Video||Gi.Video,Gi.fetch=t.fetch||Gi.fetch,Gi.readFile=t.readFile||Gi.readFile}var cr={getEnv:Nxe,setEnv:w5,initialize:x5,createBrowserEnv:v5,createFileSystem:cw,createNodejsEnv:y5,monkeyPatch:Fxe,isBrowser:b5,isNodejs:_5};x5();function fm(t){return!cr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Co(t){var n=cr.getEnv(),e=n.Canvas,r=n.CanvasRenderingContext2D;if(t instanceof r)return t;var i=fm(t);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var ic=function(t){return t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT",t}(ic||{}),dw=function(){function t(n){n===void 0&&(n={});var e=n.anchorPosition,r=n.backgroundColor,i=n.fontColor,o=n.fontSize,a=n.fontStyle,s=n.padding;this.anchorPosition=e||ic.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=s||4}return t}();var C5=function(){function t(n,e,r){r===void 0&&(r={}),this.text=typeof n=="string"?[n]:n instanceof t?n.text:n,this.anchor=e,this.options=new dw(r)}return t.prototype.measureWidth=function(n){var e=this.options.padding;return this.text.map(function(r){return n.measureText(r).width}).reduce(function(r,i){return r<i?i:r},0)+2*e},t.prototype.measureHeight=function(){var n=this.options,e=n.fontSize,r=n.padding;return this.text.length*e+2*r},t.prototype.getUpperLeft=function(n,e){var r=this.options.anchorPosition,i=r===ic.BOTTOM_RIGHT||r===ic.TOP_RIGHT,o=r===ic.BOTTOM_LEFT||r===ic.BOTTOM_RIGHT,a=this.measureWidth(n),s=this.measureHeight(),l=i?this.anchor.x-a:this.anchor.x,u=o?this.anchor.y-s:this.anchor.y;if(e){var c=e.width,d=e.height,p=Math.max(Math.min(l,c-a),0),h=Math.max(Math.min(u,d-s),0);return{x:p,y:h}}return{x:l,y:u}},t.prototype.draw=function(n){var e=fm(n),r=Co(e),i=this.options,o=i.backgroundColor,a=i.fontColor,s=i.fontSize,l=i.fontStyle,u=i.padding;r.font=s+"px "+l;var c=this.measureWidth(r),d=this.measureHeight();r.fillStyle=o;var p=this.getUpperLeft(r,e);r.fillRect(p.x,p.y,c,d),r.fillStyle=a,this.text.forEach(function(h,f){var m=u+p.x,g=u+p.y+(f+1)*s;r.fillText(h,m,g)})},t}();var c9=function(){function t(n){n===void 0&&(n={});var e=n.boxColor,r=n.lineWidth,i=n.label,o=n.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=i;var a={anchorPosition:ic.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new dw(Object.assign({},a,o))}return t}();var Oxe=function(){function t(n,e){e===void 0&&(e={}),this.box=new lo(n),this.options=new c9(e)}return t.prototype.draw=function(n){var e=Co(n),r=this.options,i=r.boxColor,o=r.lineWidth,a=this.box,s=a.x,l=a.y,u=a.width,c=a.height;e.strokeStyle=i,e.lineWidth=o,e.strokeRect(s,l,u,c);var d=this.options.label;d&&new C5([d],{x:s-o/2,y:l},this.options.drawLabelOptions).draw(n)},t}();var wt={};Lx(wt,{SeparableConvParams:()=>pw,TinyYolov2:()=>Vxe,TinyYolov2Options:()=>R5,TinyYolov2SizeType:()=>_9,convLayer:()=>Ov,disposeUnusedWeightTensors:()=>I5,extractConvParamsFactory:()=>S5,extractFCParamsFactory:()=>Pxe,extractSeparableConvParamsFactory:()=>E5,extractWeightEntryFactory:()=>T5,extractWeightsFactory:()=>A5,getModelUris:()=>Pv,loadSeparableConvParamsFactory:()=>D5,validateConfig:()=>M5});function Ov(t,n,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),Fn(function(){var i=Po(tc(t,n.filters,[1,1],e),n.bias);return r?cm(i):i})}function I5(t,n){Object.keys(t).forEach(function(e){n.some(function(r){return r.originalPath===e})||t[e].dispose()})}function S5(t,n){return function(e,r,i,o){var a=Es(t(e*r*i*i),[i,i,e,r]),s=oa(t(r));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function Pxe(t,n){return function(e,r,i){var o=hd(t(e*r),[e,r]),a=oa(t(r));return n.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var pw=function(){function t(n,e,r){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=r}return t}();function E5(t,n){return function(e,r,i){var o=Es(t(9*e),[3,3,e,1]),a=Es(t(e*r),[1,1,e,r]),s=oa(t(r));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new pw(o,a,s)}}function D5(t){return function(n){var e=t(n+"/depthwise_filter",4),r=t(n+"/pointwise_filter",4),i=t(n+"/bias",1);return new pw(e,r,i)}}function T5(t,n){return function(e,r,i){var o=t[e];if(!Fv(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return n.push({originalPath:e,paramPath:i||e}),o}}function A5(t){var n=t;function e(i){var o=n.slice(0,i);return n=n.slice(i),o}function r(){return n}return{extractWeights:e,getRemainingWeights:r}}function Pv(t,n){var e=n+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:e};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),o=t.endsWith(".json")?i[i.length-1]:e,a=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=t.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+o:a+"/"+o}}function hw(t){var n=cr.getEnv(),e=n.Image,r=n.Video;return t instanceof e&&t.complete||t instanceof r&&t.readyState>=3}function d9(t){return new Promise(function(n,e){if(t instanceof cr.getEnv().Canvas||hw(t))return n();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),n(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}t.addEventListener("load",r),t.addEventListener("error",i)})}function Lv(t){var n=cr.getEnv(),e=n.Image,r=n.Video;return t instanceof e?new al(t.naturalWidth,t.naturalHeight):t instanceof r?new al(t.videoWidth,t.videoHeight):new al(t.width,t.height)}function Xp(t){var n=t.width,e=t.height,r=cr.getEnv().createCanvasElement,i=r();return i.width=n,i.height=e,i}function mm(t,n){var e=cr.getEnv().ImageData;if(!(t instanceof e)&&!hw(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=n||Lv(t),i=r.width,o=r.height,a=Xp({width:i,height:o});return t instanceof e?Co(a).putImageData(t,0,0):Co(a).drawImage(t,0,0,i,o),a}function fw(t,n){return Wi(this,void 0,void 0,function(){var e,r;return qi(this,function(i){switch(i.label){case 0:return e=cr.getEnv().fetch,[4,e(t,n)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function p9(t){return Wi(this,void 0,void 0,function(){return qi(this,function(n){switch(n.label){case 0:return[4,fw(t)];case 1:return[2,n.sent().json()]}})})}function h9(t,n){return Wi(this,void 0,void 0,function(){var e,r,i,o,a,s;return qi(this,function(l){switch(l.label){case 0:return e=n||cr.getEnv().createCanvasElement(),r=t.shape.slice(Ts(t)?1:0),i=r[0],o=r[1],a=r[2],s=Fn(function(){return t.as3D(i,o,a).toInt()}),[4,sw.toPixels(s,e)];case 1:return l.sent(),s.dispose(),[2,e]}})})}function f9(t,n,e){e===void 0&&(e=!1);var r=cr.getEnv(),i=r.Image,o=r.Canvas;if(!(t instanceof i||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Lv(t),s=n/Math.max(a.height,a.width),l=s*a.width,u=s*a.height,c=Xp({width:n,height:n}),d=t instanceof o?t:mm(t),p=Math.abs(l-u)/2,h=e&&l<u?p:0,f=e&&u<l?p:0;return Co(c).drawImage(d,h,f,l,u),c}function k5(t){var n=cr.getEnv(),e=n.Image,r=n.Canvas,i=n.Video;return t instanceof e||t instanceof r||t instanceof i}function m9(t,n){return Wi(this,void 0,void 0,function(){var e,r,i,o;return qi(this,function(a){switch(a.label){case 0:return e=Pv(t,n),r=e.manifestUri,i=e.modelBaseUri,[4,p9(r)];case 1:return o=a.sent(),[2,aw.loadWeights(o,i)]}})})}function g9(t,n){return n===void 0&&(n=!1),Fn(function(){var e=t.shape.slice(1),r=e[0],i=e[1];if(r===i)return t;var o=Math.abs(r-i),a=Math.round(o*(n?.5:1)),s=r>i?2:1,l=function(h){var f=t.shape.slice();return f[s]=h,ec(f,0)},u=l(a),c=o-u.shape[s],d=n&&c?l(c):null,p=[d,t,u].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Ma(p,s)})}var Qp=function(){function t(n,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(i,o){if(wd(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(Ts(i)){var a=i.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var s=i instanceof cr.getEnv().Canvas?i:mm(i);r._canvases[o]=s,r._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var n=this;return rc(this.batchSize,0,1).map(function(e,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},t.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},t.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},t.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},t.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),r=this.getInputHeight(n);return u9({width:e,height:r},this.inputSize)},t.prototype.toBatchTensor=function(n,e){var r=this;return e===void 0&&(e=!0),this._inputSize=n,Fn(function(){var i=rc(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof wr){var l=Ts(s)?s:s.expandDims();return l=g9(l,e),(l.shape[1]!==n||l.shape[2]!==n)&&(l=s5.resizeBilinear(l,[n,n])),l.as3D(n,n,3)}if(s instanceof cr.getEnv().Canvas)return sw.fromPixels(f9(s,n,e));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=Zu(i.map(function(a){return a.toFloat()})).as4D(r.batchSize,n,n,3);return o})},t}();function xr(t){return Wi(this,void 0,void 0,function(){var n,e,r;return qi(this,function(i){switch(i.label){case 0:if(t instanceof Qp)return[2,t];if(n=Array.isArray(t)?t:[t],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=n.map(fm),r.forEach(function(o,a){if(!k5(o)&&!wd(o)&&!Ts(o))throw typeof n[a]=="string"?new Error("toNetInput -"+e(a)+" string passed, but could not resolve HTMLElement for element id "+n[a]):new Error("toNetInput -"+e(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ts(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+e(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return k5(o)&&d9(o)}))];case 1:return i.sent(),[2,new Qp(r,Array.isArray(t))]}})})}var uo=function(){function t(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),r=e.obj,i=e.objProp;return r[i]},t.prototype.reassignParamFromPath=function(n,e){var r=this.traversePropertyPath(n),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof zp})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof zp)})},t.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var r=e.path,i=e.tensor;n.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var r=e.path,i=e.tensor,o=so(i.dataSync());i.dispose(),n.reassignParamFromPath(r,o)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},t.prototype.load=function(n){return Wi(this,void 0,void 0,function(){return qi(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return Wi(this,void 0,void 0,function(){var e;return qi(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,m9(n,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(n){return Wi(this,void 0,void 0,function(){var e,r,i,o,a,s,l,u,c,d;return qi(this,function(p){switch(p.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=cr.getEnv().readFile,r=Pv(n,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,a=function(h){return Promise.all(h.map(function(f){return e(f).then(function(m){return m.buffer})}))},s=aw.weightsLoaderFactory(a),c=(u=JSON).parse,[4,e(i)];case 1:return l=c.apply(u,[p.sent().toString()]),[4,s(l,o)];case 2:return d=p.sent(),this.loadFromWeightMap(d),[2]}})})},t.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(n){var e=this.extractParams(n),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,a){if(!o.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+n);return{obj:o.nextObj,objProp:a,nextObj:o.nextObj[a]}},{nextObj:this.params}),r=e.obj,i=e.objProp;if(!r||!i||!(r[i]instanceof wr))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:i}},t}();function v9(t,n,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(t.right,n.right)-Math.max(t.left,n.left)),i=Math.max(0,Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top)),o=r*i;return e?o/(t.area+n.area-o):o/Math.min(t.area,n.area)}function oc(t,n,e,r){r===void 0&&(r=!0);for(var i=n.map(function(s,l){return{score:s,boxIndex:l}}).sort(function(s,l){return s.score-l.score}).map(function(s){return s.boxIndex}),o=[],a=function(){var s=i.pop();o.push(s);for(var l=i,u=[],c=0;c<l.length;c++){var d=l[c],p=t[s],h=t[d];u.push(v9(p,h,r))}i=i.filter(function(f,m){return u[m]<=e})};i.length>0;)a();return o}function iu(t,n){return Fn(function(){var e=n[0],r=n[1],i=n[2],o=ec(f2(t.shape.slice(0,3),[1]),e),a=ec(f2(t.shape.slice(0,3),[1]),r),s=ec(f2(t.shape.slice(0,3),[1]),i),l=Ma([o,a,s],3);return ka(t,l)})}function mw(t){return 1/(1+Math.exp(-t))}var gw=function(t){return typeof t=="number"};function M5(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!gw(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(n){return n||{}}).every(function(n){return gw(n.x)&&gw(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(gw)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function gm(t){return Fn(function(){var n=Gr(t,Ut(.10000000149011612));return Po(cm(ka(t,n)),n)})}function ac(t,n){return Fn(function(){var e=ol(t,[[0,0],[1,1],[1,1],[0,0]]);return e=tc(e,n.conv.filters,[1,1],"valid"),e=ka(e,n.bn.sub),e=Gr(e,n.bn.truediv),e=Po(e,n.conv.bias),gm(e)})}function sc(t,n){return Fn(function(){var e=ol(t,[[0,0],[1,1],[1,1],[0,0]]);return e=n5(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=Po(e,n.bias),gm(e)})}function Lxe(t,n){var e=S5(t,n);function r(a,s){var l=oa(t(a)),u=oa(t(a));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:l,truediv:u}}function i(a,s,l){var u=e(a,s,3,l+"/conv"),c=r(s,l+"/bn");return{conv:u,bn:c}}var o=E5(t,n);return{extractConvParams:e,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function y9(t,n,e,r){var i=A5(t),o=i.extractWeights,a=i.getRemainingWeights,s=[],l=Lxe(o,s),u=l.extractConvParams,c=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams,p;if(n.withSeparableConvs){var h=r[0],f=r[1],m=r[2],g=r[3],y=r[4],b=r[5],w=r[6],x=r[7],I=r[8],D=n.isFirstLayerConv2d?u(h,f,3,"conv0"):d(h,f,"conv0"),A=d(f,m,"conv1"),E=d(m,g,"conv2"),R=d(g,y,"conv3"),N=d(y,b,"conv4"),T=d(b,w,"conv5"),M=x?d(w,x,"conv6"):void 0,H=I?d(x,I,"conv7"):void 0,V=u(I||x||w,5*e,1,"conv8");p={conv0:D,conv1:A,conv2:E,conv3:R,conv4:N,conv5:T,conv6:M,conv7:H,conv8:V}}else{var h=r[0],f=r[1],m=r[2],g=r[3],y=r[4],b=r[5],w=r[6],x=r[7],I=r[8],D=c(h,f,"conv0"),A=c(f,m,"conv1"),E=c(m,g,"conv2"),R=c(g,y,"conv3"),N=c(y,b,"conv4"),T=c(b,w,"conv5"),M=c(w,x,"conv6"),H=c(x,I,"conv7"),V=u(I,5*e,1,"conv8");p={conv0:D,conv1:A,conv2:E,conv3:R,conv4:N,conv5:T,conv6:M,conv7:H,conv8:V}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:p,paramMappings:s}}function Bxe(t,n){var e=T5(t,n);function r(s){var l=e(s+"/sub",1),u=e(s+"/truediv",1);return{sub:l,truediv:u}}function i(s){var l=e(s+"/filters",4),u=e(s+"/bias",1);return{filters:l,bias:u}}function o(s){var l=i(s+"/conv"),u=r(s+"/bn");return{conv:l,bn:u}}var a=D5(e);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function b9(t,n){var e=[],r=Bxe(t,e),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(n.withSeparableConvs){var l=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:l>7?a("conv6"):void 0,conv7:l>8?a("conv7"):void 0,conv8:i("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return I5(t,e),{params:s,paramMappings:e}}var _9=function(t){return t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG",t}(_9||{}),R5=function(){function t(n){var e=n===void 0?{}:n,r=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}();var Vxe=function(t){Ql(n,t);function n(e){var r=t.call(this,"TinyYolov2")||this;return M5(e),r._config=e,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,r){var i=ac(e,r.conv0);return i=Ra(i,[2,2],[2,2],"same"),i=ac(i,r.conv1),i=Ra(i,[2,2],[2,2],"same"),i=ac(i,r.conv2),i=Ra(i,[2,2],[2,2],"same"),i=ac(i,r.conv3),i=Ra(i,[2,2],[2,2],"same"),i=ac(i,r.conv4),i=Ra(i,[2,2],[2,2],"same"),i=ac(i,r.conv5),i=Ra(i,[2,2],[1,1],"same"),i=ac(i,r.conv6),i=ac(i,r.conv7),Ov(i,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,r){var i=this.config.isFirstLayerConv2d?gm(Ov(e,r.conv0,"valid",!1)):sc(e,r.conv0);return i=Ra(i,[2,2],[2,2],"same"),i=sc(i,r.conv1),i=Ra(i,[2,2],[2,2],"same"),i=sc(i,r.conv2),i=Ra(i,[2,2],[2,2],"same"),i=sc(i,r.conv3),i=Ra(i,[2,2],[2,2],"same"),i=sc(i,r.conv4),i=Ra(i,[2,2],[2,2],"same"),i=sc(i,r.conv5),i=Ra(i,[2,2],[1,1],"same"),i=r.conv6?sc(i,r.conv6):i,i=r.conv7?sc(i,r.conv7):i,Ov(i,r.conv8,"valid",!1)},n.prototype.forwardInput=function(e,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Fn(function(){var a=e.toBatchTensor(r,!1).toFloat();return a=i.config.meanRgb?iu(a,i.config.meanRgb):a,a=a.div(Ut(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},n.prototype.forward=function(e,r){return Wi(this,void 0,void 0,function(){var i;return qi(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,xr(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,r){return r===void 0&&(r={}),Wi(this,void 0,void 0,function(){var i,o,a,s,l,u,c,d,p,h,f,m,g,y,b=this;return qi(this,function(w){switch(w.label){case 0:return i=new R5(r),o=i.inputSize,a=i.scoreThreshold,[4,xr(e)];case 1:return s=w.sent(),[4,this.forwardInput(s,o)];case 2:return l=w.sent(),u=Fn(function(){return Tv(l)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(u,s.getReshapedInputDimensions(0),a)];case 3:return d=w.sent(),l.dispose(),u.dispose(),p=d.map(function(x){return x.box}),h=d.map(function(x){return x.score}),f=d.map(function(x){return x.classScore}),m=d.map(function(x){return b.config.classes[x.label]}),g=oc(p.map(function(x){return x.rescale(o)}),h,this.config.iouThreshold,!0),y=g.map(function(x){return new uw(h[x],f[x],m[x],p[x],c)}),[2,y]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return b9(e,this.config)},n.prototype.extractParams=function(e){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return y9(e,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(e,r,i){return Wi(this,void 0,void 0,function(){var o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E,R,N,T,M,H,V,X,Y,Q,G=this;return qi(this,function(re){switch(re.label){case 0:return o=r.width,a=r.height,s=Math.max(o,a),l=s/o,u=s/a,c=e.shape[1],d=this.config.anchors.length,p=Fn(function(){var ue=e.reshape([c,c,d,G.boxEncodingSize]),Te=ue.slice([0,0,0,0],[c,c,d,4]),F=ue.slice([0,0,0,4],[c,c,d,1]),q=G.withClassScores?Av(ue.slice([0,0,0,5],[c,c,d,G.config.classes.length]),3):Ut(0);return[Te,F,q]}),h=p[0],f=p[1],m=p[2],g=[],[4,f.array()];case 1:return y=re.sent(),[4,h.array()];case 2:b=re.sent(),w=0,re.label=3;case 3:if(!(w<c))return[3,12];x=0,re.label=4;case 4:if(!(x<c))return[3,11];I=0,re.label=5;case 5:return I<d?(D=mw(y[w][x][I][0]),!i||D>i?(A=(x+mw(b[w][x][I][0]))/c*l,E=(w+mw(b[w][x][I][1]))/c*u,R=Math.exp(b[w][x][I][2])*this.config.anchors[I].x/c*l,N=Math.exp(b[w][x][I][3])*this.config.anchors[I].y/c*u,T=A-R/2,M=E-N/2,H={row:w,col:x,anchor:I},this.withClassScores?[4,this.extractPredictedClass(m,H)]:[3,7]):[3,9]):[3,10];case 6:return Q=re.sent(),[3,8];case 7:Q={classScore:1,label:0},re.label=8;case 8:V=Q,X=V.classScore,Y=V.label,g.push($f({box:new xd(T,M,T+R,M+N),score:D,classScore:D*X,label:Y},H)),re.label=9;case 9:return I++,[3,5];case 10:return x++,[3,4];case 11:return w++,[3,3];case 12:return h.dispose(),f.dispose(),m.dispose(),[2,g]}})})},n.prototype.extractPredictedClass=function(e,r){return Wi(this,void 0,void 0,function(){var i,o,a,s;return qi(this,function(l){switch(l.label){case 0:return i=r.row,o=r.col,a=r.anchor,[4,e.array()];case 1:return s=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(u,c){return s[i][o][a][c]}).map(function(u,c){return{classScore:u,label:c}}).reduce(function(u,c){return u.classScore>c.classScore?u:c})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(uo);var F5={};Lx(F5,{DrawFaceLandmarks:()=>k9,DrawFaceLandmarksOptions:()=>A9,drawContour:()=>lc,drawDetections:()=>jxe,drawFaceExpressions:()=>Uxe,drawFaceLandmarks:()=>qxe});function lc(t,n,e){if(e===void 0&&(e=!1),t.beginPath(),n.slice(1).forEach(function(o,a){var s=o.x,l=o.y,u=n[a];t.moveTo(u.x,u.y),t.lineTo(s,l)}),e){var r=n[n.length-1],i=n[0];if(!r||!i)return;t.moveTo(r.x,r.y),t.lineTo(i.x,i.y)}t.stroke()}var Jr=function(t){kt(n,t);function n(e,r,i){return t.call(this,e,e,"",r,i)||this}return n.prototype.forSize=function(e,r){var i=t.prototype.forSize.call(this,e,r),o=i.score,a=i.relativeBox,s=i.imageDims;return new n(o,a,s)},n}(uw);function Id(t){return t.detection instanceof Jr}function vm(t,n){var e={detection:n};return Object.assign({},t,e)}function jxe(t,n){var e=Array.isArray(n)?n:[n];e.forEach(function(r){var i=r instanceof Jr?r.score:Id(r)?r.detection.score:void 0,o=r instanceof Jr?r.box:Id(r)?r.detection.box:new lo(r),a=i?""+dm(i):void 0;new Cd.DrawBox(o,{label:a}).draw(t)})}function aa(t,n,e){return pt(function(){var r=MT(t,n.depthwise_filter,n.pointwise_filter,e,"same");return r=kn(r,n.bias),r})}function vw(t,n,e){return e===void 0&&(e=!1),pt(function(){var r=Ur(e?kn(es(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):aa(t,n.conv0,[2,2])),i=aa(r,n.conv1,[1,1]),o=Ur(kn(r,i)),a=aa(o,n.conv2,[1,1]);return Ur(kn(r,kn(i,a)))})}function Bv(t,n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),pt(function(){var i=Ur(e?kn(es(t,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):aa(t,n.conv0,r?[2,2]:[1,1])),o=aa(i,n.conv1,[1,1]),a=Ur(kn(i,o)),s=aa(a,n.conv2,[1,1]),l=Ur(kn(i,kn(o,s))),u=aa(l,n.conv3,[1,1]);return Ur(kn(i,kn(o,kn(s,u))))})}function yw(t,n){var e=wt.extractConvParamsFactory(t,n),r=wt.extractSeparableConvParamsFactory(t,n);function i(a,s,l,u){u===void 0&&(u=!1);var c=u?e(a,s,3,l+"/conv0"):r(a,s,l+"/conv0"),d=r(s,s,l+"/conv1"),p=r(s,s,l+"/conv2");return{conv0:c,conv1:d,conv2:p}}function o(a,s,l,u){u===void 0&&(u=!1);var c=i(a,s,l,u),d=c.conv0,p=c.conv1,h=c.conv2,f=r(s,s,l+"/conv3");return{conv0:d,conv1:p,conv2:h,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function w9(t){var n=[],e=wt.extractWeightsFactory(t),r=e.extractWeights,i=e.getRemainingWeights,o=yw(r,n).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),l=o(64,128,"dense2"),u=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:l,dense3:u}}}function bw(t){return function(n){var e=t(n+"/filters",4),r=t(n+"/bias",1);return{filters:e,bias:r}}}function _w(t,n){var e=wt.extractWeightEntryFactory(t,n),r=bw(e),i=wt.loadSeparableConvParamsFactory(e);function o(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),d=i(s+"/conv2");return{conv0:u,conv1:c,conv2:d}}function a(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),d=i(s+"/conv2"),p=i(s+"/conv3");return{conv0:u,conv1:c,conv2:d,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function x9(t){var n=[],e=_w(t,n).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return wt.disposeUnusedWeightTensors(t,n),{params:r,paramMappings:n}}var ww=function(t){kt(n,t);function n(){return t.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return pt(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=iu(i,o).div(ot(255)),s=Bv(a,r.dense0,!0);return s=Bv(s,r.dense1),s=Bv(s,r.dense2),s=Bv(s,r.dense3),s=Wu(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return x9(e)},n.prototype.extractParams=function(e){return w9(e)},n}(uo);function Na(t,n){return pt(function(){return kn(ov(t,n.weights),n.bias)})}function C9(t,n,e){var r=[],i=wt.extractWeightsFactory(t),o=i.extractWeights,a=i.getRemainingWeights,s=wt.extractFCParamsFactory(o,r),l=s(n,e,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:l}}}function I9(t){var n=[],e=wt.extractWeightEntryFactory(t,n);function r(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:r("fc")};return wt.disposeUnusedWeightTensors(t,n),{params:i,paramMappings:n}}function xw(t){var n={},e={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?e:n;i[r]=t[r]}),{featureExtractorMap:n,classifierMap:e}}var Cw=function(t){kt(n,t);function n(e,r){var i=t.call(this,e)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return pt(function(){var o=e instanceof Qp?r.faceFeatureExtractor.forwardInput(e):e;return Na(o.as2D(o.shape[0],-1),i.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return C9(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var r=xw(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),I9(o)},n.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,a=e.slice(0,e.length-o),s=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},n}(uo);var S9=["neutral","happy","sad","angry","fearful","disgusted","surprised"],ym=function(){function t(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);S9.forEach(function(r,i){e[r]=n[i]})}return t.prototype.asSortedArray=function(){var n=this;return S9.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,r){return r.probability-e.probability})},t}();var E9=function(t){kt(n,t);function n(e){return e===void 0&&(e=new ww),t.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var r=this;return pt(function(){return Ja(r.runNet(e))})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictExpressions=function(e){return Et(this,void 0,void 0,function(){var r,i,o,a,s=this;return Dt(this,function(l){switch(l.label){case 0:return[4,xr(e)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return i=l.sent(),[4,Promise.all(Lr(i).map(function(u){return Et(s,void 0,void 0,function(){var c;return Dt(this,function(d){switch(d.label){case 0:return[4,u.data()];case 1:return c=d.sent(),u.dispose(),[2,c]}})})}))];case 3:return o=l.sent(),i.dispose(),a=o.map(function(u){return new ym(u)}),[2,r.isBatchInput?a:a[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(Cw);function D9(t){return t.expressions instanceof ym}function N5(t,n){var e={expressions:n};return Object.assign({},t,e)}function Uxe(t,n,e,r){e===void 0&&(e=.1);var i=Array.isArray(n)?n:[n];i.forEach(function(o){var a=o instanceof ym?o:D9(o)?o.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var s=a.asSortedArray(),l=s.filter(function(d){return d.probability>e}),u=Id(o)?o.detection.box.bottomLeft:r||new Tn(0,0),c=new Cd.DrawTextField(l.map(function(d){return d.expression+" ("+dm(d.probability)+")"}),u);c.draw(t)})}function T9(t){var n=t.map(function(s){return s.x}),e=t.map(function(s){return s.y}),r=n.reduce(function(s,l){return l<s?l:s},1/0),i=e.reduce(function(s,l){return l<s?l:s},1/0),o=n.reduce(function(s,l){return s<l?l:s},0),a=e.reduce(function(s,l){return s<l?l:s},0);return new xd(r,i,o,a)}var Hxe=.5,zxe=.43,Wxe=.45,ou=function(){function t(n,e,r){r===void 0&&(r=new Tn(0,0));var i=e.width,o=e.height;this._imgDims=new al(i,o),this._shift=r,this._positions=n.map(function(a){return a.mul(new Tn(i,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new Tn(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new Tn(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},t.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new Tn(n,e))},t.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},t.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var r=n instanceof Jr?n.box.floor():new lo(n);return this.shiftBy(r.x,r.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},t.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],r=n[1],i=n[2],o=function(d){return i.sub(d).magnitude()},a=(o(e)+o(r))/2,s=Math.floor(a/Wxe),l=pm(n),u=Math.floor(Math.max(0,l.x-Hxe*s)),c=Math.floor(Math.max(0,l.y-zxe*s));return new hm(u,c,Math.min(s,this.imageWidth+u),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(n){var e=T9(this.positions);return e.pad(e.width*n,e.height*n)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}();var Iw=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(pm)},n}(ou);function Vv(t){return Id(t)&&t.landmarks instanceof ou&&t.unshiftedLandmarks instanceof ou&&t.alignedRect instanceof Jr}function bm(t,n){var e=t.detection.box,r=n.shiftBy(e.x,e.y),i=r.align(),o=t.detection.imageDims,a=new Jr(t.detection.score,i.rescale(o.reverse()),o),s={landmarks:r,unshiftedLandmarks:n,alignedRect:a};return Object.assign({},t,s)}var A9=function(){function t(n){n===void 0&&(n={});var e=n.drawLines,r=e===void 0?!0:e,i=n.drawPoints,o=i===void 0?!0:i,a=n.lineWidth,s=n.lineColor,l=n.pointSize,u=n.pointColor;this.drawLines=r,this.drawPoints=o,this.lineWidth=a||1,this.pointSize=l||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"}return t}();var k9=function(){function t(n,e){e===void 0&&(e={}),this.faceLandmarks=n,this.options=new A9(e)}return t.prototype.draw=function(n){var e=Co(n),r=this.options,i=r.drawLines,o=r.drawPoints,a=r.lineWidth,s=r.lineColor,l=r.pointSize,u=r.pointColor;if(i&&this.faceLandmarks instanceof Iw&&(e.strokeStyle=s,e.lineWidth=a,lc(e,this.faceLandmarks.getJawOutline()),lc(e,this.faceLandmarks.getLeftEyeBrow()),lc(e,this.faceLandmarks.getRightEyeBrow()),lc(e,this.faceLandmarks.getNose()),lc(e,this.faceLandmarks.getLeftEye(),!0),lc(e,this.faceLandmarks.getRightEye(),!0),lc(e,this.faceLandmarks.getMouth(),!0)),o){e.strokeStyle=u,e.fillStyle=u;var c=function(d){e.beginPath(),e.arc(d.x,d.y,l,0,2*Math.PI),e.fill()};this.faceLandmarks.positions.forEach(c)}},t}();function qxe(t,n){var e=Array.isArray(n)?n:[n];e.forEach(function(r){var i=r instanceof ou?r:Vv(r)?r.landmarks:void 0;if(!i)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new k9(i).draw(t)})}function Gxe(t,n){var e=wt.extractConvParamsFactory(t,n),r=wt.extractSeparableConvParamsFactory(t,n);function i(a,s,l){var u=r(a,s,l+"/separable_conv0"),c=r(s,s,l+"/separable_conv1"),d=e(a,s,1,l+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:d}}function o(a,s){var l=r(a,a,s+"/separable_conv0"),u=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function M9(t,n){var e=[],r=wt.extractWeightsFactory(t),i=r.extractWeights,o=r.getRemainingWeights,a=Gxe(i,e),s=a.extractConvParams,l=a.extractSeparableConvParams,u=a.extractReductionBlockParams,c=a.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),p=u(32,64,"entry_flow/reduction_block_0"),h=u(64,128,"entry_flow/reduction_block_1"),f={conv_in:d,reduction_block_0:p,reduction_block_1:h},m={};rc(n,0,1).forEach(function(w){m["main_block_"+w]=c(128,"middle_flow/main_block_"+w)});var g=u(128,256,"exit_flow/reduction_block"),y=l(256,512,"exit_flow/separable_conv"),b={reduction_block:g,separable_conv:y};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:f,middle_flow:m,exit_flow:b}}}function $xe(t,n){var e=wt.extractWeightEntryFactory(t,n),r=bw(e),i=wt.loadSeparableConvParamsFactory(e);function o(s){var l=i(s+"/separable_conv0"),u=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:l,separable_conv1:u,expansion_conv:c}}function a(s){var l=i(s+"/separable_conv0"),u=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}}function R9(t,n){var e=[],r=$xe(t,e),i=r.extractConvParams,o=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,l=i("entry_flow/conv_in"),u=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),d={conv_in:l,reduction_block_0:u,reduction_block_1:c},p={};rc(n,0,1).forEach(function(g){p["main_block_"+g]=s("middle_flow/main_block_"+g)});var h=a("exit_flow/reduction_block"),f=o("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:f};return wt.disposeUnusedWeightTensors(t,e),{params:{entry_flow:d,middle_flow:p,exit_flow:m},paramMappings:e}}function N9(t,n,e){return kn(es(t,n.filters,e,"same"),n.bias)}function O5(t,n,e){e===void 0&&(e=!0);var r=e?Ur(t):t;return r=aa(r,n.separable_conv0,[1,1]),r=aa(Ur(r),n.separable_conv1,[1,1]),r=Yl(r,[3,3],[2,2],"same"),r=kn(r,N9(t,n.expansion_conv,[2,2])),r}function Kxe(t,n){var e=aa(Ur(t),n.separable_conv0,[1,1]);return e=aa(Ur(e),n.separable_conv1,[1,1]),e=aa(Ur(e),n.separable_conv2,[1,1]),e=kn(e,t),e}var F9=function(t){kt(n,t);function n(e){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return n.prototype.forwardInput=function(e){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return pt(function(){var o=e.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=iu(o,a).div(ot(256)),l=Ur(N9(s,i.entry_flow.conv_in,[2,2]));return l=O5(l,i.entry_flow.reduction_block_0,!1),l=O5(l,i.entry_flow.reduction_block_1),rc(r._numMainBlocks,0,1).forEach(function(u){l=Kxe(l,i.middle_flow["main_block_"+u])}),l=O5(l,i.exit_flow.reduction_block),l=Ur(aa(l,i.exit_flow.separable_conv,[1,1])),l})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return R9(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return M9(e,this._numMainBlocks)},n}(uo);function O9(t){var n=[],e=wt.extractWeightsFactory(t),r=e.extractWeights,i=e.getRemainingWeights,o=wt.extractFCParamsFactory(r,n),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{fc:{age:a,gender:s}}}}function P9(t){var n=[],e=wt.extractWeightEntryFactory(t,n);function r(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return wt.disposeUnusedWeightTensors(t,n),{params:i,paramMappings:n}}var jv=function(t){return t.FEMALE="female",t.MALE="male",t}(jv||{});var L9=function(t){kt(n,t);function n(e){e===void 0&&(e=new F9(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return pt(function(){var o=e instanceof Qp?r.faceFeatureExtractor.forwardInput(e):e,a=Wu(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=Na(a,i.fc.age).as1D(),l=Na(a,i.fc.gender);return{age:s,gender:l}})},n.prototype.forwardInput=function(e){var r=this;return pt(function(){var i=r.runNet(e),o=i.age,a=i.gender;return{age:o,gender:Ja(a)}})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return Et(this,void 0,void 0,function(){var r,i,o,a,s,l,u=this;return Dt(this,function(c){switch(c.label){case 0:return[4,xr(e)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),o=Lr(i.age),a=Lr(i.gender),s=o.map(function(d,p){return{ageTensor:d,genderTensor:a[p]}}),[4,Promise.all(s.map(function(d){var p=d.ageTensor,h=d.genderTensor;return Et(u,void 0,void 0,function(){var f,m,g,y,b;return Dt(this,function(w){switch(w.label){case 0:return[4,p.data()];case 1:return f=w.sent()[0],[4,h.data()];case 2:return m=w.sent()[0],g=m>.5,y=g?jv.MALE:jv.FEMALE,b=g?m:1-m,p.dispose(),h.dispose(),[2,{age:f,gender:y,genderProbability:b}]}})})}))];case 3:return l=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?l:l[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return O9(e)},n.prototype.extractParamsFromWeigthMap=function(e){var r=xw(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),P9(o)},n.prototype.extractParams=function(e){var r=1539,i=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},n}(uo);var B9=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],pm([e[3],e[4]])]},n}(ou);var P5=function(){function t(n,e){this._label=n,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+dm(this.distance)+")":"")},t}();var Sw=function(){function t(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t}();function Uv(t,n){return Et(this,void 0,void 0,function(){var e,r,i,o,a,s,l;return Dt(this,function(u){switch(u.label){case 0:return e=cr.getEnv().Canvas,r=t,t instanceof e?[3,5]:[4,xr(t)];case 1:if(i=u.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof e?(a=o,[3,4]):[3,2];case 2:return[4,h9(o)];case 3:a=u.sent(),u.label=4;case 4:r=a,u.label=5;case 5:return s=Co(r),l=n.map(function(c){return c instanceof Jr?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,l.map(function(c){var d=c.x,p=c.y,h=c.width,f=c.height,m=Xp({width:h,height:f});return Co(m).putImageData(s.getImageData(d,p,h,f),0,0),m})]}})})}function Hv(t,n){return Et(this,void 0,void 0,function(){return Dt(this,function(e){if(!wd(t)&&!Ts(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ts(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,pt(function(){var r=t.shape.slice(Ts(t)?1:0),i=r[0],o=r[1],a=r[2],s=n.map(function(u){return u instanceof Jr?u.forSize(o,i).box:u}).map(function(u){return u.clipAtImageBorders(o,i)}),l=s.map(function(u){var c=u.x,d=u.y,p=u.width,h=u.height;return RT(t.as3D(i,o,a),[d,c,0],[h,p,a])});return l})]})})}var Ew=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.postProcess=function(e,r,i){var o=i.map(function(s){var l=s.width,u=s.height,c=r/Math.max(u,l);return{width:l*c,height:u*c}}),a=o.length;return pt(function(){var s=function(p,h){return Ia([Uf([68],p),Uf([68],h)],1).as2D(1,136).as1D()},l=function(p,h){var f=o[p],m=f.width,g=f.height;return h(m,g)?Math.abs(m-g)/2:0},u=function(p){return l(p,function(h,f){return h<f})},c=function(p){return l(p,function(h,f){return f<h})},d=e.mul(Uf([a,136],r)).sub(Ia(Array.from(Array(a),function(p,h){return s(u(h),c(h))}))).div(Ia(Array.from(Array(a),function(p,h){return s(o[h].width,o[h].height)})));return d})},n.prototype.forwardInput=function(e){var r=this;return pt(function(){var i=r.runNet(e);return r.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){var a=o[0],s=o[1];return{height:a,width:s}}))})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.detectLandmarks=function(e){return Et(this,void 0,void 0,function(){var r,i,o,a=this;return Dt(this,function(s){switch(s.label){case 0:return[4,xr(e)];case 1:return r=s.sent(),i=pt(function(){return Lr(a.forwardInput(r))}),[4,Promise.all(i.map(function(l,u){return Et(a,void 0,void 0,function(){var c,d,p,h,f;return Dt(this,function(m){switch(m.label){case 0:return p=(d=Array).from,[4,l.data()];case 1:return c=p.apply(d,[m.sent()]),h=c.filter(function(g,y){return f5(y)}),f=c.filter(function(g,y){return!f5(y)}),[2,new Iw(Array(68).fill(0).map(function(g,y){return new Tn(h[y],f[y])}),{height:r.getInputHeight(u),width:r.getInputWidth(u)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(Cw);var Dw=function(t){kt(n,t);function n(e){return e===void 0&&(e=new ww),t.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(Ew);function V9(t){var n=[],e=_w(t,n).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return wt.disposeUnusedWeightTensors(t,n),{params:r,paramMappings:n}}function j9(t){var n=[],e=wt.extractWeightsFactory(t),r=e.extractWeights,i=e.getRemainingWeights,o=yw(r,n).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),l=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:l}}}var U9=function(t){kt(n,t);function n(){return t.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return pt(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=iu(i,o).div(ot(255)),s=vw(a,r.dense0,!0);return s=vw(s,r.dense1),s=vw(s,r.dense2),s=Wu(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return V9(e)},n.prototype.extractParams=function(e){return j9(e)},n}(uo);var H9=function(t){kt(n,t);function n(e){return e===void 0&&(e=new U9),t.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(Ew);var JBe=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(Dw);function z9(t,n){return kn(Sa(t,n.weights),n.biases)}function L5(t,n,e,r,i){i===void 0&&(i="same");var o=n.conv,a=o.filters,s=o.bias,l=es(t,a,e,i);return l=kn(l,s),l=z9(l,n.scale),r?Ur(l):l}function W9(t,n){return L5(t,n,[1,1],!0)}function B5(t,n){return L5(t,n,[1,1],!1)}function Tw(t,n){return L5(t,n,[2,2],!0,"valid")}function Yxe(t,n){function e(s,l,u){var c=t(s),d=c.length/(l*u*u);if(l9(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+l+", filterSize: "+u);return pt(function(){return Ss(xa(c,[l,d,u,u]),[2,3,1,0])})}function r(s,l,u,c){var d=e(s,l,u),p=Ro(t(l));return n.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:p}}function i(s,l){var u=Ro(t(s)),c=Ro(t(s));return n.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:u,biases:c}}function o(s,l,u,c){var d=r(s,l,u,c+"/conv"),p=i(l,c+"/scale");return{conv:d,scale:p}}function a(s,l,u,c,d){d===void 0&&(d=!1);var p=o((d?.5:1)*s,l,u,c+"/conv1"),h=o(s,l,u,c+"/conv2");return{conv1:p,conv2:h}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function q9(t){var n=wt.extractWeightsFactory(t),e=n.extractWeights,r=n.getRemainingWeights,i=[],o=Yxe(e,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,l=a(4704,32,7,"conv32_down"),u=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),p=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),f=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),y=s(147456,128,3,"conv128_1"),b=s(147456,128,3,"conv128_2"),w=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),I=s(589824,256,3,"conv256_2"),D=s(589824,256,3,"conv256_down_out"),A=pt(function(){return Ss(K0(e(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var E={conv32_down:l,conv32_1:u,conv32_2:c,conv32_3:d,conv64_down:p,conv64_1:h,conv64_2:f,conv64_3:m,conv128_down:g,conv128_1:y,conv128_2:b,conv256_down:w,conv256_1:x,conv256_2:I,conv256_down_out:D,fc:A};return{params:E,paramMappings:i}}function Xxe(t,n){var e=wt.extractWeightEntryFactory(t,n);function r(a){var s=e(a+"/scale/weights",1),l=e(a+"/scale/biases",1);return{weights:s,biases:l}}function i(a){var s=e(a+"/conv/filters",4),l=e(a+"/conv/bias",1),u=r(a);return{conv:{filters:s,bias:l},scale:u}}function o(a){return{conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function G9(t){var n=[],e=Xxe(t,n),r=e.extractConvLayerParams,i=e.extractResidualLayerParams,o=r("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),l=i("conv32_3"),u=i("conv64_down"),c=i("conv64_1"),d=i("conv64_2"),p=i("conv64_3"),h=i("conv128_down"),f=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),y=i("conv256_1"),b=i("conv256_2"),w=i("conv256_down_out"),x=t.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!s9(x))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var I={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:l,conv64_down:u,conv64_1:c,conv64_2:d,conv64_3:p,conv128_down:h,conv128_1:f,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:b,conv256_down_out:w,fc:x};return wt.disposeUnusedWeightTensors(t,n),{params:I,paramMappings:n}}function sl(t,n){var e=W9(t,n.conv1);return e=B5(e,n.conv2),e=kn(e,t),e=Ur(e),e}function zv(t,n){var e=Tw(t,n.conv1);e=B5(e,n.conv2);var r=Wu(t,2,2,"valid"),i=ci(r.shape),o=r.shape[3]!==e.shape[3],a=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(a){var s=e.shape.slice();s[1]=1;var l=ci(s);e=oo([e,l],1);var u=e.shape.slice();u[2]=1;var c=ci(u);e=oo([e,c],2)}return r=o?oo([r,i],3):r,e=kn(r,e),e=Ur(e),e}var V5=function(t){kt(n,t);function n(){return t.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return pt(function(){var i=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],a=iu(i,o).div(ot(256)),s=Tw(a,r.conv32_down);s=Yl(s,3,2,"valid"),s=sl(s,r.conv32_1),s=sl(s,r.conv32_2),s=sl(s,r.conv32_3),s=zv(s,r.conv64_down),s=sl(s,r.conv64_1),s=sl(s,r.conv64_2),s=sl(s,r.conv64_3),s=zv(s,r.conv128_down),s=sl(s,r.conv128_1),s=sl(s,r.conv128_2),s=zv(s,r.conv256_down),s=sl(s,r.conv256_1),s=sl(s,r.conv256_2),s=zv(s,r.conv256_down_out);var l=s.mean([1,2]),u=ov(l,r.fc);return u})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return Et(this,void 0,void 0,function(){var r,i,o,a=this;return Dt(this,function(s){switch(s.label){case 0:return[4,xr(e)];case 1:return r=s.sent(),i=pt(function(){return Lr(a.forwardInput(r))}),[4,Promise.all(i.map(function(l){return l.data()}))];case 2:return o=s.sent(),i.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return G9(e)},n.prototype.extractParams=function(e){return q9(e)},n}(uo);function j5(t,n){var e={descriptor:n};return Object.assign({},t,e)}var Wv=function(){function t(n){var e=n===void 0?{}:n,r=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,a=e.scoreThresholds,s=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Qxe(t,n){function e(l,u){var c=xa(t(9*l),[3,3,l,1]),d=Ro(t(l)),p=Ro(t(l)),h=Ro(t(l)),f=Ro(t(l));return n.push({paramPath:u+"/filters"},{paramPath:u+"/batch_norm_scale"},{paramPath:u+"/batch_norm_offset"},{paramPath:u+"/batch_norm_mean"},{paramPath:u+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:p,batch_norm_mean:h,batch_norm_variance:f}}function r(l,u,c,d,p){var h=xa(t(l*u*c*c),[c,c,l,u]),f=Ro(t(u));return n.push({paramPath:d+"/filters"},{paramPath:d+"/"+(p?"batch_norm_offset":"bias")}),{filters:h,bias:f}}function i(l,u,c,d){var p=r(l,u,c,d,!0),h=p.filters,f=p.bias;return{filters:h,batch_norm_offset:f}}function o(l,u,c){var d=e(l,c+"/depthwise_conv"),p=i(l,u,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:p}}function a(){var l=i(3,32,3,"mobilenetv1/conv_0"),u=o(32,64,"mobilenetv1/conv_1"),c=o(64,128,"mobilenetv1/conv_2"),d=o(128,128,"mobilenetv1/conv_3"),p=o(128,256,"mobilenetv1/conv_4"),h=o(256,256,"mobilenetv1/conv_5"),f=o(256,512,"mobilenetv1/conv_6"),m=o(512,512,"mobilenetv1/conv_7"),g=o(512,512,"mobilenetv1/conv_8"),y=o(512,512,"mobilenetv1/conv_9"),b=o(512,512,"mobilenetv1/conv_10"),w=o(512,512,"mobilenetv1/conv_11"),x=o(512,1024,"mobilenetv1/conv_12"),I=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:h,conv_6:f,conv_7:m,conv_8:g,conv_9:y,conv_10:b,conv_11:w,conv_12:x,conv_13:I}}function s(){var l=i(1024,256,1,"prediction_layer/conv_0"),u=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),d=i(128,256,3,"prediction_layer/conv_3"),p=i(256,128,1,"prediction_layer/conv_4"),h=i(128,256,3,"prediction_layer/conv_5"),f=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),b=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),w=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),x=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),I=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),E=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),R=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),N=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),T=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),M={box_encoding_predictor:g,class_predictor:y},H={box_encoding_predictor:b,class_predictor:w},V={box_encoding_predictor:x,class_predictor:I},X={box_encoding_predictor:D,class_predictor:A},Y={box_encoding_predictor:E,class_predictor:R},Q={box_encoding_predictor:N,class_predictor:T};return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:h,conv_6:f,conv_7:m,box_predictor_0:M,box_predictor_1:H,box_predictor_2:V,box_predictor_3:X,box_predictor_4:Y,box_predictor_5:Q}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function $9(t){var n=[],e=wt.extractWeightsFactory(t),r=e.extractWeights,i=e.getRemainingWeights,o=Qxe(r,n),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,l=a(),u=s(),c=c2(r(5118*4),[1,5118,4]),d={extra_dim:c};if(n.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:l,prediction_layer:u,output_layer:d},paramMappings:n}}function Zxe(t,n){var e=wt.extractWeightEntryFactory(t,n);function r(u,c,d){var p=e(u+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),h=e(u+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:p,batch_norm_offset:h}}function i(u){var c="mobilenetv1/conv_"+u,d="MobilenetV1/Conv2d_"+u+"_depthwise",p=c+"/depthwise_conv",h=c+"/pointwise_conv",f=e(d+"/depthwise_weights",4,p+"/filters"),m=e(d+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),g=e(d+"/BatchNorm/beta",1,p+"/batch_norm_offset"),y=e(d+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),b=e(d+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance");return{depthwise_conv:{filters:f,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:y,batch_norm_variance:b},pointwise_conv:r("MobilenetV1",u,h)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function a(u,c){var d=e(u+"/weights",4,c+"/filters"),p=e(u+"/biases",1,c+"/bias");return{filters:d,bias:p}}function s(u){var c=a("Prediction/BoxPredictor_"+u+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+u+"/box_encoding_predictor"),d=a("Prediction/BoxPredictor_"+u+"/ClassPredictor","prediction_layer/box_predictor_"+u+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function K9(t){var n=[],e=Zxe(t,n),r=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!wd(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return wt.disposeUnusedWeightTensors(t,n),{params:a,paramMappings:n}}function As(t,n,e){return pt(function(){var r=es(t,n.filters,e,"same");return r=kn(r,n.batch_norm_offset),ev(r,0,6)})}var Jxe=.0010000000474974513;function eCe(t,n,e){return pt(function(){var r=h2(t,n.filters,e,"same");return r=AT(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,Jxe),ev(r,0,6)})}function tCe(t){return[2,4,6,12].some(function(n){return n===t})?[2,2]:[1,1]}function Y9(t,n){return pt(function(){var e=null,r=As(t,n.conv_0,[2,2]),i=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(i.forEach(function(o,a){var s=a+1,l=tCe(s);r=eCe(r,o.depthwise_conv,l),r=As(r,o.pointwise_conv,[1,1]),s===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function X9(t,n,e,r,i){var o=t.shape[0],a=Math.min(e,o),s=n.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>i}).sort(function(c,d){return d.score-c.score}),l=function(c){return c<=r?1:0},u=[];return s.forEach(function(c){if(!(u.length>=a)){for(var d=c.score,p=u.length-1;p>=0;--p){var h=nCe(t,c.boxIndex,u[p]);if(h!==0&&(c.score*=l(h),c.score<=i))break}d===c.score&&u.push(c.boxIndex)}}),u}function nCe(t,n,e){var r=t.arraySync(),i=Math.min(r[n][0],r[n][2]),o=Math.min(r[n][1],r[n][3]),a=Math.max(r[n][0],r[n][2]),s=Math.max(r[n][1],r[n][3]),l=Math.min(r[e][0],r[e][2]),u=Math.min(r[e][1],r[e][3]),c=Math.max(r[e][0],r[e][2]),d=Math.max(r[e][1],r[e][3]),p=(a-i)*(s-o),h=(c-l)*(d-u);if(p<=0||h<=0)return 0;var f=Math.max(i,l),m=Math.max(o,u),g=Math.min(a,c),y=Math.min(s,d),b=Math.max(g-f,0)*Math.max(y-m,0);return b/(p+h-b)}function rCe(t){var n=Lr(Ss(t,[1,0])),e=[No(n[2],n[0]),No(n[3],n[1])],r=[kn(n[0],Xl(e[0],ot(2))),kn(n[1],Xl(e[1],ot(2)))];return{sizes:e,centers:r}}function iCe(t,n){var e=rCe(t),r=e.sizes,i=e.centers,o=Lr(Ss(n,[1,0])),a=Xl(Sa(d2(Xl(o[2],ot(5))),r[0]),ot(2)),s=kn(Sa(Xl(o[0],ot(10)),r[0]),i[0]),l=Xl(Sa(d2(Xl(o[3],ot(5))),r[1]),ot(2)),u=kn(Sa(Xl(o[1],ot(10)),r[1]),i[1]);return Ss(Ia([No(s,a),No(u,l),kn(s,a),kn(u,l)]),[1,0])}function Q9(t,n,e){return pt(function(){var r=t.shape[0],i=iCe(ra(Ip(e.extra_dim,[r,1,1]),[-1,4]),ra(t,[-1,4]));i=ra(i,[r,i.shape[0]/r,4]);var o=TT(qu(n,[0,0,1],[-1,-1,-1])),a=qu(o,[0,0,0],[-1,-1,1]);a=ra(a,[r,a.shape[1]]);var s=Lr(i),l=Lr(a);return{boxes:s,scores:l}})}function Zp(t,n){return pt(function(){var e=t.shape[0],r=ra(wt.convLayer(t,n.box_encoding_predictor),[e,-1,1,4]),i=ra(wt.convLayer(t,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function Z9(t,n,e){return pt(function(){var r=As(t,e.conv_0,[1,1]),i=As(r,e.conv_1,[2,2]),o=As(i,e.conv_2,[1,1]),a=As(o,e.conv_3,[2,2]),s=As(a,e.conv_4,[1,1]),l=As(s,e.conv_5,[2,2]),u=As(l,e.conv_6,[1,1]),c=As(u,e.conv_7,[2,2]),d=Zp(n,e.box_predictor_0),p=Zp(t,e.box_predictor_1),h=Zp(i,e.box_predictor_2),f=Zp(a,e.box_predictor_3),m=Zp(l,e.box_predictor_4),g=Zp(c,e.box_predictor_5),y=oo([d.boxPredictionEncoding,p.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),b=oo([d.classPrediction,p.classPrediction,h.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:y,classPredictions:b}})}var Sd=function(){function t(n){var e=n===void 0?{}:n,r=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}();var Aw=function(t){kt(n,t);function n(){return t.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return pt(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=No(Sa(i,ot(.007843137718737125)),ot(1)),a=Y9(o,r.mobilenetv1),s=Z9(a.out,a.conv11,r.prediction_layer),l=s.boxPredictions,u=s.classPredictions;return Q9(l,u,r.output_layer)})},n.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Dt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,xr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E;return Dt(this,function(R){switch(R.label){case 0:return i=new Sd(r),o=i.maxResults,a=i.minConfidence,[4,xr(e)];case 1:for(s=R.sent(),l=this.forwardInput(s),u=l.boxes,c=l.scores,d=u[0],p=c[0],h=1;h<u.length;h++)u[h].dispose(),c[h].dispose();return g=(m=Array).from,[4,p.data()];case 2:return f=g.apply(m,[R.sent()]),y=.5,b=X9(d,f,o,y,a),w=s.getReshapedInputDimensions(0),x=s.inputSize,I=x/w.width,D=x/w.height,A=d.arraySync(),E=b.map(function(N){var T=[Math.max(0,A[N][0]),Math.min(1,A[N][2])].map(function(Q){return Q*D}),M=T[0],H=T[1],V=[Math.max(0,A[N][1]),Math.min(1,A[N][3])].map(function(Q){return Q*I}),X=V[0],Y=V[1];return new Jr(f[N],new hm(X,M,Y-X,H-M),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),p.dispose(),[2,E]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return K9(e)},n.prototype.extractParams=function(e){return $9(e)},n}(uo);var e9e=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(Aw);var J9=function(t){kt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n}(wt.TinyYolov2Options);var au=function(){function t(){}return t.prototype.then=function(n){return Et(this,void 0,void 0,function(){var e;return Dt(this,function(r){switch(r.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Et(this,void 0,void 0,function(){return Dt(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},t}();function Jp(t,n,e,r,i){return i===void 0&&(i=function(o){var a=o.alignedRect;return a}),Et(this,void 0,void 0,function(){var o,a,s,l,u;return Dt(this,function(c){switch(c.label){case 0:return o=t.map(function(d){return Vv(d)?i(d):d.detection}),s=r,s?[3,5]:n instanceof dt?[4,Hv(n,o)]:[3,2];case 1:return l=c.sent(),[3,4];case 2:return[4,Uv(n,o)];case 3:l=c.sent(),c.label=4;case 4:s=l,c.label=5;case 5:return a=s,[4,e(a)];case 6:return u=c.sent(),a.forEach(function(d){return d instanceof dt&&d.dispose()}),[2,u]}})})}function _m(t,n,e,r,i){return Et(this,void 0,void 0,function(){var o=this;return Dt(this,function(a){return[2,Jp([t],n,function(s){return Et(o,void 0,void 0,function(){return Dt(this,function(l){return[2,e(s[0])]})})},r,i)]})})}function ej(t){return pt(function(){return Ia(Lr(t,3).reverse(),3)})}var qv=2,eh=12;function oCe(t,n){var e=wt.extractConvParamsFactory(t,n),r=wt.extractFCParamsFactory(t,n);function i(u,c){var d=Ro(t(u));return n.push({paramPath:c}),d}function o(u,c,d){d===void 0&&(d=!1);var p=e(u[0],u[1],3,c+"/conv1"),h=i(u[1],c+"/prelu1_alpha"),f=e(u[1],u[2],3,c+"/conv2"),m=i(u[2],c+"/prelu2_alpha"),g=e(u[2],u[3],d?2:3,c+"/conv3"),y=i(u[3],c+"/prelu3_alpha");return{conv1:p,prelu1_alpha:h,conv2:f,prelu2_alpha:m,conv3:g,prelu3_alpha:y}}function a(){var u=o([3,10,16,32],"pnet"),c=e(32,2,1,"pnet/conv4_1"),d=e(32,4,1,"pnet/conv4_2");return xs({},u,{conv4_1:c,conv4_2:d})}function s(){var u=o([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=i(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return xs({},u,{fc1:c,prelu4_alpha:d,fc2_1:p,fc2_2:h})}function l(){var u=o([3,32,64,64],"onet"),c=e(64,128,2,"onet/conv4"),d=i(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),h=i(256,"onet/prelu5_alpha"),f=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return xs({},u,{conv4:c,prelu4_alpha:d,fc1:p,prelu5_alpha:h,fc2_1:f,fc2_2:m,fc2_3:g})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:l}}function tj(t){var n=wt.extractWeightsFactory(t),e=n.extractWeights,r=n.getRemainingWeights,i=[],o=oCe(e,i),a=o.extractPNetParams,s=o.extractRNetParams,l=o.extractONetParams,u=a(),c=s(),d=l();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:c,onet:d},paramMappings:i}}function aCe(t,n){var e=wt.extractWeightEntryFactory(t,n);function r(c){var d=e(c+"/weights",4,c+"/filters"),p=e(c+"/bias",1);return{filters:d,bias:p}}function i(c){var d=e(c+"/weights",2),p=e(c+"/bias",1);return{weights:d,bias:p}}function o(c){return e(c,1)}function a(c){var d=r(c+"/conv1"),p=o(c+"/prelu1_alpha"),h=r(c+"/conv2"),f=o(c+"/prelu2_alpha"),m=r(c+"/conv3"),g=o(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:p,conv2:h,prelu2_alpha:f,conv3:m,prelu3_alpha:g}}function s(){var c=a("pnet"),d=r("pnet/conv4_1"),p=r("pnet/conv4_2");return xs({},c,{conv4_1:d,conv4_2:p})}function l(){var c=a("rnet"),d=i("rnet/fc1"),p=o("rnet/prelu4_alpha"),h=i("rnet/fc2_1"),f=i("rnet/fc2_2");return xs({},c,{fc1:d,prelu4_alpha:p,fc2_1:h,fc2_2:f})}function u(){var c=a("onet"),d=r("onet/conv4"),p=o("onet/prelu4_alpha"),h=i("onet/fc1"),f=o("onet/prelu5_alpha"),m=i("onet/fc2_1"),g=i("onet/fc2_2"),y=i("onet/fc2_3");return xs({},c,{conv4:d,prelu4_alpha:p,fc1:h,prelu5_alpha:f,fc2_1:m,fc2_2:g,fc2_3:y})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:u}}function nj(t){var n=[],e=aCe(t,n),r=e.extractPNetParams,i=e.extractRNetParams,o=e.extractONetParams,a=r(),s=i(),l=o();return wt.disposeUnusedWeightTensors(t,n),{params:{pnet:a,rnet:s,onet:l},paramMappings:n}}function Gv(t,n){var e=n[0],r=n[1];return{height:Math.floor(e*t),width:Math.floor(r*t)}}function rj(t,n,e){for(var r=e[0],i=e[1],o=eh/t,a=[],s=Math.min(r,i)*o,l=0;s>=12;)a.push(o*Math.pow(n,l)),s=s*n,l+=1;return a}var wm=function(t){kt(n,t);function n(e,r,i,o){return t.call(this,{left:e,top:r,right:i,bottom:o},!0)||this}return n}(lo);function kw(t){return pt(function(){return Sa(No(t,ot(127.5)),ot(.0078125))})}function uc(t,n){return pt(function(){return kn(Ur(t),Sa(n,tv(Ur(tv(t)))))})}function xm(t,n,e){return e===void 0&&(e=!1),pt(function(){var r=wt.convLayer(t,n.conv1,"valid");return r=uc(r,n.prelu1_alpha),r=Yl(r,e?[2,2]:[3,3],[2,2],"same"),r=wt.convLayer(r,n.conv2,"valid"),r=uc(r,n.prelu2_alpha),r=e?r:Yl(r,[3,3],[2,2],"valid"),r=wt.convLayer(r,n.conv3,"valid"),r=uc(r,n.prelu3_alpha),r})}function ij(t,n){return pt(function(){var e=xm(t,n,!0),r=wt.convLayer(e,n.conv4_1,"valid"),i=ko(Np(r,3),3),o=Ja(No(r,i),3),a=wt.convLayer(e,n.conv4_2,"valid");return{prob:o,regions:a}})}function sCe(t,n){return pt(function(){var e=Gv(n,t.shape.slice(1)),r=e.height,i=e.width,o=PT.resizeBilinear(t,[r,i]),a=kw(o);return Ss(a,[0,2,1,3])})}function lCe(t,n,e,r){for(var i=[],o=t.arraySync(),a=0;a<t.shape[0];a++)for(var s=0;s<t.shape[1];s++)o[a][s]>=r&&i.push(new Tn(s,a));var l=i.map(function(u){var c=new xd(Math.round((u.y*qv+1)/e),Math.round((u.x*qv+1)/e),Math.round((u.y*qv+eh)/e),Math.round((u.x*qv+eh)/e)),d=o[u.y][u.x],p=n.arraySync(),h=new wm(p[u.y][u.x][0],p[u.y][u.x][1],p[u.y][u.x][2],p[u.y][u.x][3]);return{cell:c,score:d,region:h}});return l}function oj(t,n,e,r,i){i.stage1=[];var o=n.map(function(p){return pt(function(){var h={scale:p},f=sCe(t,p),m=Date.now(),g=ij(f,r),y=g.prob,b=g.regions;h.pnet=Date.now()-m;var w=Lr(Lr(y,3)[1])[0],x=Lr(b)[0];return{scoresTensor:w,regionsTensor:x,scale:p,statsForScale:h}})}),a=o.map(function(p){var h=p.scoresTensor,f=p.regionsTensor,m=p.scale,g=p.statsForScale,y=lCe(h,f,m,e);if(h.dispose(),f.dispose(),!y.length)return i.stage1.push(g),[];var b=Date.now(),w=oc(y.map(function(x){return x.cell}),y.map(function(x){return x.score}),.5);return g.nms=Date.now()-b,g.numBoxes=w.length,i.stage1.push(g),w.map(function(x){return y[x]})}),s=a.reduce(function(p,h){return p.concat(h)},[]),l=[],u=[];if(s.length>0){var c=Date.now(),d=oc(s.map(function(p){return p.cell}),s.map(function(p){return p.score}),.7);i.stage1_nms=Date.now()-c,u=d.map(function(p){return s[p].score}),l=d.map(function(p){return s[p]}).map(function(p){var h=p.cell,f=p.region;return new xd(h.left+f.left*h.width,h.top+f.top*h.height,h.right+f.right*h.width,h.bottom+f.bottom*h.height).toSquare().round()})}return{boxes:l,scores:u}}function Mw(t,n,e){var r=e.width,i=e.height;return Et(this,void 0,void 0,function(){var o,a,s,l=this;return Dt(this,function(u){switch(u.label){case 0:return o=Co(t),[4,Promise.all(n.map(function(c){return Et(l,void 0,void 0,function(){var d,p,h,f,m,g,y,b;return Dt(this,function(w){return d=c.padAtBorders(t.height,t.width),p=d.y,h=d.ey,f=d.x,m=d.ex,g=f-1,y=p-1,b=o.getImageData(g,y,m-g,h-y),[2,cr.isNodejs()?mm(b):createImageBitmap(b)]})})}))];case 1:return a=u.sent(),s=[],a.forEach(function(c){var d=Xp({width:r,height:i}),p=Co(d);p.drawImage(c,0,0,r,i);for(var h=p.getImageData(0,0,r,i).data,f=[],m=0;m<h.length;m+=4)f.push(h[m+2]),f.push(h[m+1]),f.push(h[m]);s.push(f)}),[2,s.map(function(c){var d=pt(function(){var p=Ss(xa(c,[1,r,i,3]),[0,2,1,3]).toFloat();return kw(p)});return d})]}})})}function aj(t,n){return pt(function(){var e=xm(t,n),r=ra(e,[e.shape[0],n.fc1.weights.shape[0]]),i=Na(r,n.fc1),o=uc(i,n.prelu4_alpha),a=Na(o,n.fc2_1),s=ko(Np(a,1),1),l=Ja(No(a,s),1),u=Na(o,n.fc2_2),c=Lr(l,1)[1];return{scores:c,regions:u}})}function sj(t,n,e,r,i){return Et(this,void 0,void 0,function(){var o,a,s,l,u,c,d,p,h,f,m,g,y,b;return Dt(this,function(w){switch(w.label){case 0:return o=Date.now(),[4,Mw(t,n,{width:24,height:24})];case 1:return a=w.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(x){var I=aj(x,r);return x.dispose(),I}),i.stage2_rnet=Date.now()-o,l=s.length>1?oo(s.map(function(x){return x.scores})):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[w.sent()]),l.dispose(),p=u.map(function(x,I){return{score:x,idx:I}}).filter(function(x){return x.score>e}).map(function(x){var I=x.idx;return I}),h=p.map(function(x){return n[x]}),f=p.map(function(x){return u[x]}),m=[],g=[],h.length>0&&(o=Date.now(),y=oc(h,f,.7),i.stage2_nms=Date.now()-o,b=y.map(function(x){var I=s[p[x]].regions.arraySync();return new wm(I[0][0],I[0][1],I[0][2],I[0][3])}),g=y.map(function(x){return f[x]}),m=y.map(function(x,I){return h[x].calibrate(b[I])})),s.forEach(function(x){x.regions.dispose(),x.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function lj(t,n){return pt(function(){var e=xm(t,n);e=Yl(e,[2,2],[2,2],"same"),e=wt.convLayer(e,n.conv4,"valid"),e=uc(e,n.prelu4_alpha);var r=ra(e,[e.shape[0],n.fc1.weights.shape[0]]),i=Na(r,n.fc1),o=uc(i,n.prelu5_alpha),a=Na(o,n.fc2_1),s=ko(Np(a,1),1),l=Ja(No(a,s),1),u=Na(o,n.fc2_2),c=Na(o,n.fc2_3),d=Lr(l,1)[1];return{scores:d,regions:u,points:c}})}function uj(t,n,e,r,i){return Et(this,void 0,void 0,function(){var o,a,s,l,u,c,d,p,h,f,m,g,y,b,w;return Dt(this,function(x){switch(x.label){case 0:return o=Date.now(),[4,Mw(t,n,{width:48,height:48})];case 1:return a=x.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(I){var D=lj(I,r);return I.dispose(),D}),i.stage3_onet=Date.now()-o,l=s.length>1?oo(s.map(function(I){return I.scores})):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[x.sent()]),l.dispose(),p=u.map(function(I,D){return{score:I,idx:D}}).filter(function(I){return I.score>e}).map(function(I){var D=I.idx;return D}),h=p.map(function(I){var D=s[I].regions.arraySync();return new wm(D[0][0],D[0][1],D[0][2],D[0][3])}),f=p.map(function(I,D){return n[I].calibrate(h[D])}),m=p.map(function(I){return u[I]}),g=[],y=[],b=[],f.length>0&&(o=Date.now(),w=oc(f,m,.7,!1),i.stage3_nms=Date.now()-o,g=w.map(function(I){return f[I]}),y=w.map(function(I){return m[I]}),b=w.map(function(I,D){return Array(5).fill(0).map(function(A,E){var R=s[I].points.arraySync();return new Tn(R[0][E]*(g[D].width+1)+g[D].left,R[0][E+5]*(g[D].height+1)+g[D].top)})})),s.forEach(function(I){I.regions.dispose(),I.scores.dispose(),I.points.dispose()}),[2,{boxes:g,scores:y,points:b}]}})})}var U5=function(t){kt(n,t);function n(){return t.call(this,"Mtcnn")||this}return n.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E;return Dt(this,function(R){switch(R.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),l=pt(function(){return ej(ko(f8.fromPixels(o)).toFloat())}),u=function(N){return l.dispose(),a.total=Date.now()-s,N},c=l.shape.slice(1),d=c[0],p=c[1],h=new Wv(r),f=h.minFaceSize,m=h.scaleFactor,g=h.maxNumScales,y=h.scoreThresholds,b=h.scaleSteps,w=(b||rj(f,m,[d,p])).filter(function(N){var T=Gv(N,[d,p]);return Math.min(T.width,T.height)>eh}).slice(0,g),a.scales=w,a.pyramid=w.map(function(N){return Gv(N,[d,p])}),x=Date.now(),[4,oj(l,w,y[0],i.pnet,a)];case 1:return I=R.sent(),a.total_stage1=Date.now()-x,I.boxes.length?(a.stage2_numInputBoxes=I.boxes.length,x=Date.now(),[4,sj(o,I.boxes,y[1],i.rnet,a)]):[2,u({results:[],stats:a})];case 2:return D=R.sent(),a.total_stage2=Date.now()-x,D.boxes.length?(a.stage3_numInputBoxes=D.boxes.length,x=Date.now(),[4,uj(o,D.boxes,y[2],i.onet,a)]):[2,u({results:[],stats:a})];case 3:return A=R.sent(),a.total_stage3=Date.now()-x,E=A.boxes.map(function(N,T){return bm(vm({},new Jr(A.scores[T],new hm(N.left/p,N.top/d,N.width/p,N.height/d),{height:d,width:p})),new B9(A.points[T].map(function(M){return M.sub(new Tn(N.left,N.top)).div(new Tn(N.width,N.height))}),{width:N.width,height:N.height}))}),[2,u({results:E,stats:a})]}})})},n.prototype.forward=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,xr(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,xr(e)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return nj(e)},n.prototype.extractParams=function(e){return tj(e)},n}(uo);var cj=.4,dj=[new Tn(1.603231,2.094468),new Tn(6.041143,7.080126),new Tn(2.882459,3.518061),new Tn(4.266906,5.178857),new Tn(9.041765,10.66308)],pj=[117.001,114.697,97.404];var H5=function(t){kt(n,t);function n(){var e=this,r={withSeparableConvs:!0,iouThreshold:cj,classes:["face"],anchors:dj,meanRgb:pj,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=t.call(this,r)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Et(this,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new Jr(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(wt.TinyYolov2);var hj=.4,fj=[new Tn(.738768,.874946),new Tn(2.42204,2.65704),new Tn(4.30971,7.04493),new Tn(10.246,4.59428),new Tn(12.6868,11.8741)],mj=[new Tn(1.603231,2.094468),new Tn(6.041143,7.080126),new Tn(2.882459,3.518061),new Tn(4.266906,5.178857),new Tn(9.041765,10.66308)],gj=[117.001,114.697,97.404],vj="tiny_yolov2_model",yj="tiny_yolov2_separable_conv_model";var z5=function(t){kt(n,t);function n(e){e===void 0&&(e=!0);var r=this,i=Object.assign({},{withSeparableConvs:e,iouThreshold:hj,classes:["face"]},e?{anchors:mj,meanRgb:gj}:{anchors:fj,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Et(this,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new Jr(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?yj:vj},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(wt.TinyYolov2);var Kr={ssdMobilenetv1:new Aw,tinyFaceDetector:new H5,tinyYolov2:new z5,mtcnn:new U5,faceLandmark68Net:new Dw,faceLandmark68TinyNet:new H9,faceRecognitionNet:new V5,faceExpressionNet:new E9,ageGenderNet:new L9};function W5(t,n){var e={age:n};return Object.assign({},t,e)}function q5(t,n,e){var r={gender:n,genderProbability:e};return Object.assign({},t,r)}var bj=function(t){kt(n,t);function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return n}(au);var $v=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i=this;return Dt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Jp(e,this.input,function(a){return Et(i,void 0,void 0,function(){return Dt(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(l){return Kr.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(a,s){return N5(a,r[s])})]}})})},n.prototype.withAgeAndGender=function(){return new Yv(this,this.input)},n}(bj);var Kv=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Dt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,_m(e,this.input,function(o){return Kr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,N5(e,r)]}})})},n.prototype.withAgeAndGender=function(){return new Xv(this,this.input)},n}(bj);var Cm=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Sm(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Dm(this,this.input)},n}($v);var Im=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Em(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Tm(this,this.input)},n}(Kv);var _j=function(t){kt(n,t);function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return n}(au);var Yv=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i=this;return Dt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Jp(e,this.input,function(a){return Et(i,void 0,void 0,function(){return Dt(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(l){return Kr.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(a,s){var l=r[s],u=l.age,c=l.gender,d=l.genderProbability;return W5(q5(a,c,d),u)})]}})})},n.prototype.withFaceExpressions=function(){return new $v(this,this.input)},n}(_j);var Xv=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,a;return Dt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?[4,_m(e,this.input,function(l){return Kr.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,o=r.gender,a=r.genderProbability,[2,W5(q5(e,o,a),i)]}})})},n.prototype.withFaceExpressions=function(){return new Kv(this,this.input)},n}(_j);var Sm=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Dm(this,this.input)},n}(Yv);var Em=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Im(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Tm(this,this.input)},n}(Xv);var wj=function(t){kt(n,t);function n(e,r){var i=t.call(this)||this;return i.parentTask=e,i.input=r,i}return n}(au);var Dm=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Dt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),[4,Jp(e,this.input,function(o){return Promise.all(o.map(function(a){return Kr.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,a){return j5(e[a],o)})]}})})},n.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},n.prototype.withAgeAndGender=function(){return new Sm(this,this.input)},n}(wj);var Tm=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Dt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,_m(e,this.input,function(o){return Kr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,j5(e,r)]}})})},n.prototype.withFaceExpressions=function(){return new Im(this,this.input)},n.prototype.withAgeAndGender=function(){return new Em(this,this.input)},n}(wj);var xj=function(t){kt(n,t);function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Kr.faceLandmark68TinyNet:Kr.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(au);var Cj=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,a,s=this;return Dt(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return e=l.sent(),r=e.map(function(u){return u.detection}),this.input instanceof dt?[4,Hv(this.input,r)]:[3,3];case 2:return o=l.sent(),[3,5];case 3:return[4,Uv(this.input,r)];case 4:o=l.sent(),l.label=5;case 5:return i=o,[4,Promise.all(i.map(function(u){return s.landmarkNet.detectLandmarks(u)}))];case 6:return a=l.sent(),i.forEach(function(u){return u instanceof dt&&u.dispose()}),[2,e.map(function(u,c){return bm(u,a[c])})]}})})},n.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},n.prototype.withAgeAndGender=function(){return new Sm(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Dm(this,this.input)},n}(xj);var Ij=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,a;return Dt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?(r=e.detection,this.input instanceof dt?[4,Hv(this.input,[r])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,Uv(this.input,[r])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(l){return l instanceof dt&&l.dispose()}),[2,bm(e,a)]}})})},n.prototype.withFaceExpressions=function(){return new Im(this,this.input)},n.prototype.withAgeAndGender=function(){return new Em(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Tm(this,this.input)},n}(xj);var Sj=function(t){kt(n,t);function n(e,r){r===void 0&&(r=new Sd);var i=t.call(this)||this;return i.input=e,i.options=r,i}return n}(au);var Ej=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o;return Dt(this,function(a){switch(a.label){case 0:return e=this,r=e.input,i=e.options,i instanceof Wv?[4,Kr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(o=i instanceof J9?function(s){return Kr.tinyFaceDetector.locateFaces(s,i)}:i instanceof Sd?function(s){return Kr.ssdMobilenetv1.locateFaces(s,i)}:i instanceof wt.TinyYolov2Options?function(s){return Kr.tinyYolov2.locateFaces(s,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return Et(e,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(a){return vm({},a)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new Cj(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new $v(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new Yv(this.runAndExtendWithFaceDetections(),this.input)},n}(Sj);var Dj=function(t){kt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Dt(this,function(i){switch(i.label){case 0:return[4,new Ej(this.input,this.options)];case 1:return e=i.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return Et(e,void 0,void 0,function(){var i;return Dt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?vm({},i):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new Ij(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new Kv(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new Xv(this.runAndExtendWithFaceDetection(),this.input)},n}(Sj);function Tj(t,n){return n===void 0&&(n=new Sd),new Dj(t,n)}function Aj(t,n){if(t.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(t),r=Array.from(n);return Math.sqrt(e.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}var $Ue=function(){function t(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(a){if(a instanceof Sw)return a;if(a instanceof Float32Array)return new Sw(o(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Sw(o(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(n,e){return e.map(function(r){return Aj(r,n)}).reduce(function(r,i){return r+i},0)/(e.length||1)},t.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new P5(o,e.computeMeanDistance(n,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new P5("unknown",e.distance)},t}();var bHe=xs({},Cd,F5);var Am=(()=>{class t{register(e){throw new Error("Method not implemented.")}constructor(e){this.http=e,this.apiUrl="http://192.168.1.8:8080/api"}login(e){return this.http.post(`${this.apiUrl}/login`,e).pipe(_n(r=>(r&&r.token&&this.setToken(r.token),r)))}getCurrentUser(){let r={Authorization:`Bearer ${this.getToken()}`};return this.http.get(`${this.apiUrl}/users`,{headers:r})}isLoggedIn(){return!!this.getToken()}logout(){this.removeToken()}setToken(e){sessionStorage.setItem("token",e),console.log("Token stored in localStorage:",e)}getToken(){return typeof window<"u"?sessionStorage.getItem("token"):null}removeToken(){sessionStorage.removeItem("token")}loginWithFace(e){return this.http.post(`${this.apiUrl}/login/face`,e)}static{this.\u0275fac=function(r){return new(r||t)(Bt(cp))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ed=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://192.168.1.8:8080/api/locker"}addLocker(e){return this.http.post(this.apiUrl,e)}checkLockerStatus(){return this.http.get(`${this.apiUrl}/check-status`)}openNewLocker(e){return this.http.post(`${this.apiUrl}/open`,e)}closeLocker(e,r){return this.http.post(`${this.apiUrl}/${e}/close`,r)}addInvoice(e){return this.http.post("http://192.168.1.8:8080/api/locker/invoice",e)}getLockersDataById(e){return this.http.get(`${this.apiUrl}/${e}`)}getHistoryReseipts(){return this.http.get("http://192.168.1.8:8080/api/historyReseipt")}static{this.\u0275fac=function(r){return new(r||t)(Bt(cp))}}static{this.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mj=(()=>{class t{constructor(e,r,i){this.authService=e,this.lockerService=r,this.router=i,this.loginData={email:"",password:""},this.isFaceRecognitionSupported=!0,this.isFaceRecognitionEnabled=!1}ngOnInit(){}onSubmit(){this.authService.login(this.loginData).subscribe(e=>{console.log("Login Successful",e),this.checkLockerStatus()},e=>{console.log("Login failed",e),e.error?alert("Login Error: "+JSON.stringify(e.error)):alert("Login Error: "+e.message)})}checkLockerStatus(){this.lockerService.checkLockerStatus().subscribe(e=>{e.status==="open"?confirm("\u0647\u0646\u0627\u0643 \u062E\u0632\u0646\u0629 \u0645\u0641\u062A\u0648\u062D\u0629. \u0647\u0644 \u062A\u0631\u064A\u062F \u063A\u0644\u0642\u0647\u0627\u061F")?(this.router.navigate(["/close"],{queryParams:{lockerId:e.locker.id,lockerStatus:e.locker.status}}),this.lockerService.closeLocker(e.locker.id,this.lockerData).subscribe(i=>{console.log("Error closing locker:",i)})):this.router.navigate(["/cashier"]):(this.openNewLocker(),this.router.navigate(["/cashier"]))},e=>{console.log("Error checking locker status:",e),this.router.navigate(["/cashier"])})}openNewLocker(){let e={employees_id:1,status:"open"};this.lockerService.openNewLocker(e).subscribe(r=>{console.log("Locker opened successfully:",r)},r=>{console.log("Error opening locker:",r)})}initializeFaceRecogition(){return xu(this,null,function*(){try{let e="/assets/models/";yield Kr.ssdMobilenetv1.loadFromUri(e),yield Kr.faceLandmark68Net.loadFromUri(e),yield Kr.faceRecognitionNet.loadFromUri(e),this.isFaceRecognitionEnabled=!0}catch(e){console.error("Face recognition initialization failed :",e),this.isFaceRecognitionSupported=!1}})}onFaceLogin(){return xu(this,null,function*(){if(!this.isFaceRecognitionSupported){alert("Face recognition is not available");return}let e=document.getElementById("faceVideo");try{let r=yield navigator.mediaDevices.getUserMedia({video:!0});e.srcObject=r,yield e.play(),yield Kr.ssdMobilenetv1.loadFromUri("/models"),yield Kr.faceLandmark68Net.loadFromUri("/models"),yield Kr.faceRecognitionNet.loadFromUri("/models");let i=yield Tj(e).withFaceLandmarks().withFaceDescriptor();if(i){let o=i.descriptor;r.getTracks().forEach(a=>a.stop()),this.authService.loginWithFace({face_descriptor:JSON.stringify(o)}).subscribe(a=>{console.log("Face login successful",a),this.router.navigate(["/cashier"])},a=>{console.error("Face login failed:",a),alert("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0628\u0648\u0627\u0633\u0637\u0629 \u0627\u0644\u0648\u062C\u0647")})}else alert("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0648\u062C\u0647. \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649."),r.getTracks().forEach(o=>o.stop())}catch(r){console.error("Error accessing camera",r)}})}static{this.\u0275fac=function(r){return new(r||t)(Oe(Am),Oe(Ed),Oe(ta))}}static{this.\u0275cmp=ct({type:t,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"bgLogin"],[1,"background"],[1,"shape"],[1,"form-login","text-center","justify-content-center",3,"ngSubmit"],["for","username"],["name","email","required","","type","text","placeholder","Email or Phone","id","username",3,"ngModelChange","ngModel"],["for","password"],["required","","name","password","type","password","placeholder","Password","id","password",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"div",1),Ve(2,"div",2)(3,"div",2),oe(),ie(4,"form",3),et("ngSubmit",function(){return i.onSubmit()}),ie(5,"h3"),st(6,"Login Here"),oe(),ie(7,"label",4),st(8,"Username"),oe(),ie(9,"input",5),ki("ngModelChange",function(a){return Hi(i.loginData.email,a)||(i.loginData.email=a),a}),oe(),ie(10,"label",6),st(11,"Password"),oe(),ie(12,"input",7),ki("ngModelChange",function(a){return Hi(i.loginData.password,a)||(i.loginData.password=a),a}),oe(),ie(13,"button",8),st(14,"Log In"),oe()()()),r&2&&(P(9),Ai("ngModel",i.loginData.email),P(3),Ai("ngModel",i.loginData.password))},dependencies:[d_,vs,ys,u_,bE,ea,l0],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.background[_ngcontent-%COMP%]{width:430px;height:520px;position:absolute;transform:translate(-50%,-50%);left:50%;top:50%}.background[_ngcontent-%COMP%]   .shape[_ngcontent-%COMP%]{height:200px;width:200px;position:absolute;border-radius:50%}.shape[_ngcontent-%COMP%]:first-child{background:linear-gradient(#1845ad,#23a2f6);left:-80px;top:-80px}.shape[_ngcontent-%COMP%]:last-child{background:linear-gradient(to right,#ff512f,#f09819);right:-30px;bottom:-80px}.form-login[_ngcontent-%COMP%]{height:520px;width:400px;background-color:#ffffff21;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.1);box-shadow:0 0 40px #08071099;padding:50px 35px}.form-login[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#fff;letter-spacing:.5px;outline:none;border:none}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;font-weight:500;line-height:42px;text-align:center}label[_ngcontent-%COMP%]{display:block;margin-top:30px;font-size:16px;font-weight:500}input[_ngcontent-%COMP%]{display:block;height:50px;width:100%;background-color:#ffffff12;border-radius:3px;padding:0 10px;margin-top:8px;font-size:14px;font-weight:300}[_ngcontent-%COMP%]::placeholder{color:#e5e5e5}button[_ngcontent-%COMP%]{margin-top:50px;width:100%;background-color:#141313;color:#000;padding:15px 0;font-size:18px;font-weight:600;border-radius:5px;cursor:pointer}.social[_ngcontent-%COMP%]{margin-top:30px;display:flex}.social[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:red;width:150px;border-radius:3px;padding:5px 10px 10px 5px;background-color:#ffffff45;color:#eaf0fb;text-align:center}.social[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#ffffff78}.social[_ngcontent-%COMP%]   .fb[_ngcontent-%COMP%]{margin-left:25px}.social[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}"]})}}return t})();var Vo=Uint8Array,os=Uint16Array,J5=Int32Array,Nw=new Vo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fw=new Vo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y5=new Vo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oj=function(t,n){for(var e=new os(31),r=0;r<31;++r)e[r]=n+=1<<t[r-1];for(var i=new J5(e[30]),r=1;r<30;++r)for(var o=e[r];o<e[r+1];++o)i[o]=o-e[r]<<5|r;return{b:e,r:i}},Pj=Oj(Nw,2),Lj=Pj.b,X5=Pj.r;Lj[28]=258,X5[258]=28;var Bj=Oj(Fw,0),cCe=Bj.b,Rj=Bj.r,Q5=new os(32768);for(dr=0;dr<32768;++dr)cc=(dr&43690)>>1|(dr&21845)<<1,cc=(cc&52428)>>2|(cc&13107)<<2,cc=(cc&61680)>>4|(cc&3855)<<4,Q5[dr]=((cc&65280)>>8|(cc&255)<<8)>>1;var cc,dr,su=function(t,n,e){for(var r=t.length,i=0,o=new os(n);i<r;++i)t[i]&&++o[t[i]-1];var a=new os(n);for(i=1;i<n;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(e){s=new os(1<<n);var l=15-n;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=n-t[i],d=a[t[i]-1]++<<c,p=d|(1<<c)-1;d<=p;++d)s[Q5[d]>>l]=u}else for(s=new os(r),i=0;i<r;++i)t[i]&&(s[i]=Q5[a[t[i]-1]++]>>15-t[i]);return s},Dd=new Vo(288);for(dr=0;dr<144;++dr)Dd[dr]=8;var dr;for(dr=144;dr<256;++dr)Dd[dr]=9;var dr;for(dr=256;dr<280;++dr)Dd[dr]=7;var dr;for(dr=280;dr<288;++dr)Dd[dr]=8;var dr,Jv=new Vo(32);for(dr=0;dr<32;++dr)Jv[dr]=5;var dr,dCe=su(Dd,9,0),pCe=su(Dd,9,1),hCe=su(Jv,5,0),fCe=su(Jv,5,1),G5=function(t){for(var n=t[0],e=1;e<t.length;++e)t[e]>n&&(n=t[e]);return n},ll=function(t,n,e){var r=n/8|0;return(t[r]|t[r+1]<<8)>>(n&7)&e},$5=function(t,n){var e=n/8|0;return(t[e]|t[e+1]<<8|t[e+2]<<16)>>(n&7)},eA=function(t){return(t+7)/8|0},Vj=function(t,n,e){return(n==null||n<0)&&(n=0),(e==null||e>t.length)&&(e=t.length),new Vo(t.subarray(n,e))};var mCe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ul=function(t,n,e){var r=new Error(n||mCe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ul),!e)throw r;return r},gCe=function(t,n,e,r){var i=t.length,o=r?r.length:0;if(!i||n.f&&!n.l)return e||new Vo(0);var a=!e,s=a||n.i!=2,l=n.i;a&&(e=new Vo(i*3));var u=function(Pe){var Ge=e.length;if(Pe>Ge){var qe=new Vo(Math.max(Ge*2,Pe));qe.set(e),e=qe}},c=n.f||0,d=n.p||0,p=n.b||0,h=n.l,f=n.d,m=n.m,g=n.n,y=i*8;do{if(!h){c=ll(t,d,1);var b=ll(t,d+1,3);if(d+=3,b)if(b==1)h=pCe,f=fCe,m=9,g=5;else if(b==2){var D=ll(t,d,31)+257,A=ll(t,d+10,15)+4,E=D+ll(t,d+5,31)+1;d+=14;for(var R=new Vo(E),N=new Vo(19),T=0;T<A;++T)N[Y5[T]]=ll(t,d+T*3,7);d+=A*3;for(var M=G5(N),H=(1<<M)-1,V=su(N,M,1),T=0;T<E;){var X=V[ll(t,d,H)];d+=X&15;var w=X>>4;if(w<16)R[T++]=w;else{var Y=0,Q=0;for(w==16?(Q=3+ll(t,d,3),d+=2,Y=R[T-1]):w==17?(Q=3+ll(t,d,7),d+=3):w==18&&(Q=11+ll(t,d,127),d+=7);Q--;)R[T++]=Y}}var G=R.subarray(0,D),re=R.subarray(D);m=G5(G),g=G5(re),h=su(G,m,1),f=su(re,g,1)}else ul(1);else{var w=eA(d)+4,x=t[w-4]|t[w-3]<<8,I=w+x;if(I>i){l&&ul(0);break}s&&u(p+x),e.set(t.subarray(w,I),p),n.b=p+=x,n.p=d=I*8,n.f=c;continue}if(d>y){l&&ul(0);break}}s&&u(p+131072);for(var ue=(1<<m)-1,Te=(1<<g)-1,F=d;;F=d){var Y=h[$5(t,d)&ue],q=Y>>4;if(d+=Y&15,d>y){l&&ul(0);break}if(Y||ul(2),q<256)e[p++]=q;else if(q==256){F=d,h=null;break}else{var Z=q-254;if(q>264){var T=q-257,ae=Nw[T];Z=ll(t,d,(1<<ae)-1)+Lj[T],d+=ae}var pe=f[$5(t,d)&Te],fe=pe>>4;pe||ul(3),d+=pe&15;var re=cCe[fe];if(fe>3){var ae=Fw[fe];re+=$5(t,d)&(1<<ae)-1,d+=ae}if(d>y){l&&ul(0);break}s&&u(p+131072);var me=p+Z;if(p<re){var xe=o-re,je=Math.min(re,me);for(xe+p<0&&ul(3);p<je;++p)e[p]=r[xe+p]}for(;p<me;++p)e[p]=e[p-re]}}n.l=h,n.p=F,n.b=p,n.f=c,h&&(c=1,n.m=m,n.d=f,n.n=g)}while(!c);return p!=e.length&&a?Vj(e,0,p):e.subarray(0,p)},dc=function(t,n,e){e<<=n&7;var r=n/8|0;t[r]|=e,t[r+1]|=e>>8},Qv=function(t,n,e){e<<=n&7;var r=n/8|0;t[r]|=e,t[r+1]|=e>>8,t[r+2]|=e>>16},K5=function(t,n){for(var e=[],r=0;r<t.length;++r)t[r]&&e.push({s:r,f:t[r]});var i=e.length,o=e.slice();if(!i)return{t:Uj,l:0};if(i==1){var a=new Vo(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(I,D){return I.f-D.f}),e.push({s:-1,f:25001});var s=e[0],l=e[1],u=0,c=1,d=2;for(e[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=e[e[u].f<e[d].f?u++:d++],l=e[u!=c&&e[u].f<e[d].f?u++:d++],e[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var p=o[0].s,r=1;r<i;++r)o[r].s>p&&(p=o[r].s);var h=new os(p+1),f=Z5(e[c-1],h,0);if(f>n){var r=0,m=0,g=f-n,y=1<<g;for(o.sort(function(D,A){return h[A.s]-h[D.s]||D.f-A.f});r<i;++r){var b=o[r].s;if(h[b]>n)m+=y-(1<<f-h[b]),h[b]=n;else break}for(m>>=g;m>0;){var w=o[r].s;h[w]<n?m-=1<<n-h[w]++-1:++r}for(;r>=0&&m;--r){var x=o[r].s;h[x]==n&&(--h[x],++m)}f=n}return{t:new Vo(h),l:f}},Z5=function(t,n,e){return t.s==-1?Math.max(Z5(t.l,n,e+1),Z5(t.r,n,e+1)):n[t.s]=e},Nj=function(t){for(var n=t.length;n&&!t[--n];);for(var e=new os(++n),r=0,i=t[0],o=1,a=function(l){e[r++]=l},s=1;s<=n;++s)if(t[s]==i&&s!=n)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return{c:e.subarray(0,r),n}},Zv=function(t,n){for(var e=0,r=0;r<n.length;++r)e+=t[r]*n[r];return e},jj=function(t,n,e){var r=e.length,i=eA(n+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=e[o];return(i+4+r)*8},Fj=function(t,n,e,r,i,o,a,s,l,u,c){dc(n,c++,e),++i[256];for(var d=K5(i,15),p=d.t,h=d.l,f=K5(o,15),m=f.t,g=f.l,y=Nj(p),b=y.c,w=y.n,x=Nj(m),I=x.c,D=x.n,A=new os(19),E=0;E<b.length;++E)++A[b[E]&31];for(var E=0;E<I.length;++E)++A[I[E]&31];for(var R=K5(A,7),N=R.t,T=R.l,M=19;M>4&&!N[Y5[M-1]];--M);var H=u+5<<3,V=Zv(i,Dd)+Zv(o,Jv)+a,X=Zv(i,p)+Zv(o,m)+a+14+3*M+Zv(A,N)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&H<=V&&H<=X)return jj(n,c,t.subarray(l,l+u));var Y,Q,G,re;if(dc(n,c,1+(X<V)),c+=2,X<V){Y=su(p,h,0),Q=p,G=su(m,g,0),re=m;var ue=su(N,T,0);dc(n,c,w-257),dc(n,c+5,D-1),dc(n,c+10,M-4),c+=14;for(var E=0;E<M;++E)dc(n,c+3*E,N[Y5[E]]);c+=3*M;for(var Te=[b,I],F=0;F<2;++F)for(var q=Te[F],E=0;E<q.length;++E){var Z=q[E]&31;dc(n,c,ue[Z]),c+=N[Z],Z>15&&(dc(n,c,q[E]>>5&127),c+=q[E]>>12)}}else Y=dCe,Q=Dd,G=hCe,re=Jv;for(var E=0;E<s;++E){var ae=r[E];if(ae>255){var Z=ae>>18&31;Qv(n,c,Y[Z+257]),c+=Q[Z+257],Z>7&&(dc(n,c,ae>>23&31),c+=Nw[Z]);var pe=ae&31;Qv(n,c,G[pe]),c+=re[pe],pe>3&&(Qv(n,c,ae>>5&8191),c+=Fw[pe])}else Qv(n,c,Y[ae]),c+=Q[ae]}return Qv(n,c,Y[256]),c+Q[256]},vCe=new J5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Uj=new Vo(0),yCe=function(t,n,e,r,i,o){var a=o.z||t.length,s=new Vo(r+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(r,s.length-i),u=o.l,c=(o.r||0)&7;if(n){c&&(l[0]=o.r>>3);for(var d=vCe[n-1],p=d>>13,h=d&8191,f=(1<<e)-1,m=o.p||new os(32768),g=o.h||new os(f+1),y=Math.ceil(e/3),b=2*y,w=function(ht){return(t[ht]^t[ht+1]<<y^t[ht+2]<<b)&f},x=new J5(25e3),I=new os(288),D=new os(32),A=0,E=0,R=o.i||0,N=0,T=o.w||0,M=0;R+2<a;++R){var H=w(R),V=R&32767,X=g[H];if(m[V]=X,g[H]=V,T<=R){var Y=a-R;if((A>7e3||N>24576)&&(Y>423||!u)){c=Fj(t,l,0,x,I,D,E,N,M,R-M,c),N=A=E=0,M=R;for(var Q=0;Q<286;++Q)I[Q]=0;for(var Q=0;Q<30;++Q)D[Q]=0}var G=2,re=0,ue=h,Te=V-X&32767;if(Y>2&&H==w(R-Te))for(var F=Math.min(p,Y)-1,q=Math.min(32767,R),Z=Math.min(258,Y);Te<=q&&--ue&&V!=X;){if(t[R+G]==t[R+G-Te]){for(var ae=0;ae<Z&&t[R+ae]==t[R+ae-Te];++ae);if(ae>G){if(G=ae,re=Te,ae>F)break;for(var pe=Math.min(Te,ae-2),fe=0,Q=0;Q<pe;++Q){var me=R-Te+Q&32767,xe=m[me],je=me-xe&32767;je>fe&&(fe=je,X=me)}}}V=X,X=m[V],Te+=V-X&32767}if(re){x[N++]=268435456|X5[G]<<18|Rj[re];var Pe=X5[G]&31,Ge=Rj[re]&31;E+=Nw[Pe]+Fw[Ge],++I[257+Pe],++D[Ge],T=R+G,++A}else x[N++]=t[R],++I[t[R]]}}for(R=Math.max(R,T);R<a;++R)x[N++]=t[R],++I[t[R]];c=Fj(t,l,u,x,I,D,E,N,M,R-M,c),u||(o.r=c&7|l[c/8|0]<<3,c-=7,o.h=g,o.p=m,o.i=R,o.w=T)}else{for(var R=o.w||0;R<a+u;R+=65535){var qe=R+65535;qe>=a&&(l[c/8|0]=u,qe=a),c=jj(l,c+1,t.subarray(R,qe))}o.i=a}return Vj(s,0,r+eA(c)+i)};var Hj=function(){var t=1,n=0;return{p:function(e){for(var r=t,i=n,o=e.length|0,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=e[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,n=i},d:function(){return t%=65521,n%=65521,(t&255)<<24|(t&65280)<<8|(n&255)<<8|n>>8}}},bCe=function(t,n,e,r,i){if(!i&&(i={l:1},n.dictionary)){var o=n.dictionary.subarray(-32768),a=new Vo(o.length+t.length);a.set(o),a.set(t,o.length),t=a,i.w=o.length}return yCe(t,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+n.mem,e,r,i)};var zj=function(t,n,e){for(;e;++n)t[n]=e,e>>>=8};var _Ce=function(t,n){var e=n.level,r=e==0?0:e<6?1:e==9?3:2;if(t[0]=120,t[1]=r<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=Hj();i.p(n.dictionary),zj(t,2,i.d())}},wCe=function(t,n){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ul(6,"invalid zlib data"),(t[1]>>5&1)==+!n&&ul(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Ow(t,n){n||(n={});var e=Hj();e.p(t);var r=bCe(t,n,n.dictionary?6:2,4);return _Ce(r,n),zj(r,r.length-4,e.d()),r}function Wj(t,n){return gCe(t.subarray(wCe(t,n&&n.dictionary),-4),{i:2},n&&n.out,n&&n.dictionary)}var xCe=typeof TextDecoder<"u"&&new TextDecoder,CCe=0;try{xCe.decode(Uj,{stream:!0}),CCe=1}catch{}var on=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function tA(){on.console&&typeof on.console.log=="function"&&on.console.log.apply(on.console,arguments)}var Mr={log:tA,warn:function(t){on.console&&(typeof on.console.warn=="function"?on.console.warn.apply(on.console,arguments):tA.call(null,arguments))},error:function(t){on.console&&(typeof on.console.error=="function"?on.console.error.apply(on.console,arguments):tA(t))}};function nA(t,n,e){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){th(r.response,n,e)},r.onerror=function(){Mr.error("could not download file")},r.send()}function qj(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Pw(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var e1,sA,th=on.saveAs||((typeof window>"u"?"undefined":Ir(window))!=="object"||window!==on?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,n,e){var r=on.URL||on.webkitURL,i=document.createElement("a");n=n||t.name||"download",i.download=n,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?qj(i.href)?nA(t,n,e):Pw(i,i.target="_blank"):Pw(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Pw(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,e){if(n=n||t.name||"download",typeof t=="string")if(qj(t))nA(t,n,e);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Pw(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Ir(o)!=="object"&&(Mr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,e),n)}:function(t,n,e,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return nA(t,n,e);var i=t.type==="application/octet-stream",o=/constructor/i.test(on.HTMLElement)||on.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":Ir(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var c=s.result;c=a?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},s.readAsDataURL(t)}else{var l=on.URL||on.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});function lU(t){var n;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<e.length;r++){var i=e[r].re,o=e[r].process,a=i.exec(t);a&&(n=o(a),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}function rA(t,n){var e=t[0],r=t[1],i=t[2],o=t[3];e=jo(e,r,i,o,n[0],7,-680876936),o=jo(o,e,r,i,n[1],12,-389564586),i=jo(i,o,e,r,n[2],17,606105819),r=jo(r,i,o,e,n[3],22,-1044525330),e=jo(e,r,i,o,n[4],7,-176418897),o=jo(o,e,r,i,n[5],12,1200080426),i=jo(i,o,e,r,n[6],17,-1473231341),r=jo(r,i,o,e,n[7],22,-45705983),e=jo(e,r,i,o,n[8],7,1770035416),o=jo(o,e,r,i,n[9],12,-1958414417),i=jo(i,o,e,r,n[10],17,-42063),r=jo(r,i,o,e,n[11],22,-1990404162),e=jo(e,r,i,o,n[12],7,1804603682),o=jo(o,e,r,i,n[13],12,-40341101),i=jo(i,o,e,r,n[14],17,-1502002290),e=Uo(e,r=jo(r,i,o,e,n[15],22,1236535329),i,o,n[1],5,-165796510),o=Uo(o,e,r,i,n[6],9,-1069501632),i=Uo(i,o,e,r,n[11],14,643717713),r=Uo(r,i,o,e,n[0],20,-373897302),e=Uo(e,r,i,o,n[5],5,-701558691),o=Uo(o,e,r,i,n[10],9,38016083),i=Uo(i,o,e,r,n[15],14,-660478335),r=Uo(r,i,o,e,n[4],20,-405537848),e=Uo(e,r,i,o,n[9],5,568446438),o=Uo(o,e,r,i,n[14],9,-1019803690),i=Uo(i,o,e,r,n[3],14,-187363961),r=Uo(r,i,o,e,n[8],20,1163531501),e=Uo(e,r,i,o,n[13],5,-1444681467),o=Uo(o,e,r,i,n[2],9,-51403784),i=Uo(i,o,e,r,n[7],14,1735328473),e=Ho(e,r=Uo(r,i,o,e,n[12],20,-1926607734),i,o,n[5],4,-378558),o=Ho(o,e,r,i,n[8],11,-2022574463),i=Ho(i,o,e,r,n[11],16,1839030562),r=Ho(r,i,o,e,n[14],23,-35309556),e=Ho(e,r,i,o,n[1],4,-1530992060),o=Ho(o,e,r,i,n[4],11,1272893353),i=Ho(i,o,e,r,n[7],16,-155497632),r=Ho(r,i,o,e,n[10],23,-1094730640),e=Ho(e,r,i,o,n[13],4,681279174),o=Ho(o,e,r,i,n[0],11,-358537222),i=Ho(i,o,e,r,n[3],16,-722521979),r=Ho(r,i,o,e,n[6],23,76029189),e=Ho(e,r,i,o,n[9],4,-640364487),o=Ho(o,e,r,i,n[12],11,-421815835),i=Ho(i,o,e,r,n[15],16,530742520),e=zo(e,r=Ho(r,i,o,e,n[2],23,-995338651),i,o,n[0],6,-198630844),o=zo(o,e,r,i,n[7],10,1126891415),i=zo(i,o,e,r,n[14],15,-1416354905),r=zo(r,i,o,e,n[5],21,-57434055),e=zo(e,r,i,o,n[12],6,1700485571),o=zo(o,e,r,i,n[3],10,-1894986606),i=zo(i,o,e,r,n[10],15,-1051523),r=zo(r,i,o,e,n[1],21,-2054922799),e=zo(e,r,i,o,n[8],6,1873313359),o=zo(o,e,r,i,n[15],10,-30611744),i=zo(i,o,e,r,n[6],15,-1560198380),r=zo(r,i,o,e,n[13],21,1309151649),e=zo(e,r,i,o,n[4],6,-145523070),o=zo(o,e,r,i,n[11],10,-1120210379),i=zo(i,o,e,r,n[2],15,718787259),r=zo(r,i,o,e,n[9],21,-343485551),t[0]=Ad(e,t[0]),t[1]=Ad(r,t[1]),t[2]=Ad(i,t[2]),t[3]=Ad(o,t[3])}function Gw(t,n,e,r,i,o){return n=Ad(Ad(n,t),Ad(r,o)),Ad(n<<i|n>>>32-i,e)}function jo(t,n,e,r,i,o,a){return Gw(n&e|~n&r,t,n,i,o,a)}function Uo(t,n,e,r,i,o,a){return Gw(n&r|e&~r,t,n,i,o,a)}function Ho(t,n,e,r,i,o,a){return Gw(n^e^r,t,n,i,o,a)}function zo(t,n,e,r,i,o,a){return Gw(e^(n|~r),t,n,i,o,a)}function uU(t){var n,e=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)rA(r,ICe(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(rA(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*e,rA(r,i),r}function ICe(t){var n,e=[];for(n=0;n<64;n+=4)e[n>>2]=t.charCodeAt(n)+(t.charCodeAt(n+1)<<8)+(t.charCodeAt(n+2)<<16)+(t.charCodeAt(n+3)<<24);return e}e1=on.atob.bind(on),sA=on.btoa.bind(on);var Gj="0123456789abcdef".split("");function SCe(t){for(var n="",e=0;e<4;e++)n+=Gj[t>>8*e+4&15]+Gj[t>>8*e&15];return n}function ECe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function lA(t){return uU(t).map(ECe).join("")}var DCe=function(t){for(var n=0;n<t.length;n++)t[n]=SCe(t[n]);return t.join("")}(uU("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ad(t,n){if(DCe){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}return t+n&4294967295}function uA(t,n){var e,r,i,o;if(t!==e){for(var a=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+a.charCodeAt(l))%256,s[l]=s[u],s[u]=c}e=t,r=s}else s=r;var d=n.length,p=0,h=0,f="";for(l=0;l<d;l++)h=(h+(c=s[p=(p+1)%256]))%256,s[p]=s[h],s[h]=c,a=s[(s[p]+s[h])%256],f+=String.fromCharCode(n.charCodeAt(l)^a);return f}var $j={print:4,modify:8,copy:16,"annot-forms":32};function Rm(t,n,e,r){this.v=1,this.r=2;var i=192;t.forEach(function(s){if($j.perm!==void 0)throw new Error("Invalid permission: "+s);i+=$j[s]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(n+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=lA(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=uA(this.encryptionKey,this.padding)}function Nm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var n="",e=t.length,r=0;r<e;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=t[r]}return n}function Kj(t){if(Ir(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(e,r,i){if(i=i||!1,typeof e!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(e)||(n[e]={});var o=Math.random().toString(35);return n[e][o]=[r,!!i],o},this.unsubscribe=function(e){for(var r in n)if(n[r][e])return delete n[r][e],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(e){if(n.hasOwnProperty(e)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in n[e]){var a=n[e][o];try{a[0].apply(t,r)}catch(s){on.console&&Mr.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Ww(t){if(!(this instanceof Ww))return new Ww(t);var n="opacity,stroke-opacity".split(",");for(var e in t)t.hasOwnProperty(e)&&n.indexOf(e)>=0&&(this[e]=t[e]);this.id="",this.objectNumber=-1}function cU(t,n){this.gState=t,this.matrix=n,this.id="",this.objectNumber=-1}function nh(t,n,e,r,i){if(!(this instanceof nh))return new nh(t,n,e,r,i);this.type=t==="axial"?2:3,this.coords=n,this.colors=e,cU.call(this,r,i)}function Fm(t,n,e,r,i){if(!(this instanceof Fm))return new Fm(t,n,e,r,i);this.boundingBox=t,this.xStep=n,this.yStep=e,this.stream="",this.cloneIndex=0,cU.call(this,r,i)}function Jt(t){var n,e=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,u="S",c=null;Ir(t=t||{})==="object"&&(e=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(n=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(o===!0?["FlateEncode"]:a),r=r||"mm",e=(""+(e||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=Kj;var f="1.3",m=h.__private__.getPdfVersion=function(){return f};h.__private__.setPdfVersion=function(C){f=C};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var y=h.__private__.getPageFormat=function(C){return g[C]};i=i||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},w=b.COMPAT;function x(){this.saveGraphicsState(),se(new en(_t,0,0,-_t,0,fc()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),u="n",w=b.ADVANCED}function I(){this.restoreGraphicsState(),u="S",w=b.COMPAT}var D=h.__private__.combineFontStyleAndFontWeight=function(C,B){if(C=="bold"&&B=="normal"||C=="bold"&&B==400||C=="normal"&&B=="italic"||C=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(C=B==400||B==="normal"?C==="italic"?"italic":"normal":B!=700&&B!=="bold"||C!=="normal"?(B==700?"bold":B)+""+C:"bold"),C};h.advancedAPI=function(C){var B=w===b.COMPAT;return B&&x.call(this),typeof C!="function"||(C(this),B&&I.call(this)),this},h.compatAPI=function(C){var B=w===b.ADVANCED;return B&&I.call(this),typeof C!="function"||(C(this),B&&x.call(this)),this},h.isAdvancedAPI=function(){return w===b.ADVANCED};var A,E=function(C){if(w!==b.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=h.roundToPrecision=h.__private__.roundToPrecision=function(C,B){var le=n||B;if(isNaN(C)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(le).replace(/0+$/,"")};A=h.hpf=h.__private__.hpf=typeof l=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,l)}:l==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,16)};var N=h.f2=h.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return R(C,2)},T=h.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return R(C,3)},M=h.scale=h.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return w===b.COMPAT?C*_t:w===b.ADVANCED?C:void 0},H=function(C){return w===b.COMPAT?fc()-C:w===b.ADVANCED?C:void 0},V=function(C){return M(H(C))};h.__private__.setPrecision=h.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(n=parseInt(C,10))};var X,Y="00000000000000000000000000000000",Q=h.__private__.getFileId=function(){return Y},G=h.__private__.setFileId=function(C){return Y=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Io=new Rm(c.userPermissions,c.userPassword,c.ownerPassword,Y)),Y};h.setFileId=function(C){return G(C),this},h.getFileId=function(){return Q()};var re=h.__private__.convertDateToPDFDate=function(C){var B=C.getTimezoneOffset(),le=B<0?"+":"-",ge=Math.floor(Math.abs(B/60)),Ae=Math.abs(B%60),He=[le,Z(ge),"'",Z(Ae),"'"].join("");return["D:",C.getFullYear(),Z(C.getMonth()+1),Z(C.getDate()),Z(C.getHours()),Z(C.getMinutes()),Z(C.getSeconds()),He].join("")},ue=h.__private__.convertPDFDateToDate=function(C){var B=parseInt(C.substr(2,4),10),le=parseInt(C.substr(6,2),10)-1,ge=parseInt(C.substr(8,2),10),Ae=parseInt(C.substr(10,2),10),He=parseInt(C.substr(12,2),10),tt=parseInt(C.substr(14,2),10);return new Date(B,le,ge,Ae,He,tt,0)},Te=h.__private__.setCreationDate=function(C){var B;if(C===void 0&&(C=new Date),C instanceof Date)B=re(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=C}return X=B},F=h.__private__.getCreationDate=function(C){var B=X;return C==="jsDate"&&(B=ue(X)),B};h.setCreationDate=function(C){return Te(C),this},h.getCreationDate=function(C){return F(C)};var q,Z=h.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},ae=h.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},pe=0,fe=[],me=[],xe=0,je=[],Pe=[],Ge=!1,qe=me,ht=function(){pe=0,xe=0,me=[],fe=[],je=[],pu=Ci(),Rs=Ci()};h.__private__.setCustomOutputDestination=function(C){Ge=!0,qe=C};var ke=function(C){Ge||(qe=C)};h.__private__.resetCustomOutputDestination=function(){Ge=!1,qe=me};var se=h.__private__.out=function(C){return C=C.toString(),xe+=C.length+1,qe.push(C),qe},zt=h.__private__.write=function(C){return se(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},gt=h.__private__.getArrayBuffer=function(C){for(var B=C.length,le=new ArrayBuffer(B),ge=new Uint8Array(le);B--;)ge[B]=C.charCodeAt(B);return le},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Xe};var at=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(C){return at=w===b.ADVANCED?C/_t:C,this};var ut,lt=h.__private__.getFontSize=h.getFontSize=function(){return w===b.COMPAT?at:at*_t},Tt=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(C){return Tt=C,this},h.__private__.getR2L=h.getR2L=function(){return Tt};var qt,Xt=h.__private__.setZoomMode=function(C){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))ut=C;else if(isNaN(C)){if(B.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');ut=C}else ut=parseInt(C,10)};h.__private__.getZoomMode=function(){return ut};var vn,hn=h.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');qt=C};h.__private__.getPageMode=function(){return qt};var On=h.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');vn=C};h.__private__.getLayoutMode=function(){return vn},h.__private__.setDisplayMode=h.setDisplayMode=function(C,B,le){return Xt(C),On(B),hn(le),this};var Zt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(C){if(Object.keys(Zt).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Zt[C]},h.__private__.getDocumentProperties=function(){return Zt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(C){for(var B in Zt)Zt.hasOwnProperty(B)&&C[B]&&(Zt[B]=C[B]);return this},h.__private__.setDocumentProperty=function(C,B){if(Object.keys(Zt).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Zt[C]=B};var Pn,_t,$i,Wn,Wo,or={},Hr={},hl=[],pr={},Md={},ei={},ks={},du=null,ti=0,yn=[],hr=new Kj(h),Rd=t.hotfixes||[],po={},fl={},ml=[],en=function C(B,le,ge,Ae,He,tt){if(!(this instanceof C))return new C(B,le,ge,Ae,He,tt);isNaN(B)&&(B=1),isNaN(le)&&(le=0),isNaN(ge)&&(ge=0),isNaN(Ae)&&(Ae=1),isNaN(He)&&(He=0),isNaN(tt)&&(tt=0),this._matrix=[B,le,ge,Ae,He,tt]};Object.defineProperty(en.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(en.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(en.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(en.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(en.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(en.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(en.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(en.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(en.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(en.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(en.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(en.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(en.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(en.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(en.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(en.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),en.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(C)},en.prototype.multiply=function(C){var B=C.sx*this.sx+C.shy*this.shx,le=C.sx*this.shy+C.shy*this.sy,ge=C.shx*this.sx+C.sy*this.shx,Ae=C.shx*this.shy+C.sy*this.sy,He=C.tx*this.sx+C.ty*this.shx+this.tx,tt=C.tx*this.shy+C.ty*this.sy+this.ty;return new en(B,le,ge,Ae,He,tt)},en.prototype.decompose=function(){var C=this.sx,B=this.shy,le=this.shx,ge=this.sy,Ae=this.tx,He=this.ty,tt=Math.sqrt(C*C+B*B),Ct=(C/=tt)*le+(B/=tt)*ge;le-=C*Ct,ge-=B*Ct;var Kt=Math.sqrt(le*le+ge*ge);return Ct/=Kt,C*(ge/=Kt)<B*(le/=Kt)&&(C=-C,B=-B,Ct=-Ct,tt=-tt),{scale:new en(tt,0,0,Kt,0,0),translate:new en(1,0,0,1,Ae,He),rotate:new en(C,B,-B,C,0,0),skew:new en(1,0,Ct,1,0,0)}},en.prototype.toString=function(C){return this.join(" ")},en.prototype.inversed=function(){var C=this.sx,B=this.shy,le=this.shx,ge=this.sy,Ae=this.tx,He=this.ty,tt=1/(C*ge-B*le),Ct=ge*tt,Kt=-B*tt,xn=-le*tt,bn=C*tt;return new en(Ct,Kt,xn,bn,-Ct*Ae-xn*He,-Kt*Ae-bn*He)},en.prototype.applyToPoint=function(C){var B=C.x*this.sx+C.y*this.shx+this.tx,le=C.x*this.shy+C.y*this.sy+this.ty;return new yh(B,le)},en.prototype.applyToRectangle=function(C){var B=this.applyToPoint(C),le=this.applyToPoint(new yh(C.x+C.w,C.y+C.h));return new Ym(B.x,B.y,le.x-B.x,le.y-B.y)},en.prototype.clone=function(){var C=this.sx,B=this.shy,le=this.shx,ge=this.sy,Ae=this.tx,He=this.ty;return new en(C,B,le,ge,Ae,He)},h.Matrix=en;var Ms=h.matrixMult=function(C,B){return B.multiply(C)},gl=new en(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=gl;var sa=function(C,B){if(!Md[C]){var le=(B instanceof nh?"Sh":"P")+(Object.keys(pr).length+1).toString(10);B.id=le,Md[C]=le,pr[le]=B,hr.publish("addPattern",B)}};h.ShadingPattern=nh,h.TilingPattern=Fm,h.addShadingPattern=function(C,B){return E("addShadingPattern()"),sa(C,B),this},h.beginTilingPattern=function(C){E("beginTilingPattern()"),_1(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},h.endTilingPattern=function(C,B){E("endTilingPattern()"),B.stream=Pe[q].join(`
`),sa(C,B),hr.publish("endTilingPattern",B),ml.pop().restore()};var Pi=h.__private__.newObject=function(){var C=Ci();return Oa(C,!0),C},Ci=h.__private__.newObjectDeferred=function(){return pe++,fe[pe]=function(){return xe},pe},Oa=function(C,B){return B=typeof B=="boolean"&&B,fe[C]=xe,B&&se(C+" 0 obj"),C},oh=h.__private__.newAdditionalObject=function(){var C={objId:Ci(),content:""};return je.push(C),C},pu=Ci(),Rs=Ci(),Ns=h.__private__.decodeColorString=function(C){var B=C.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var le=parseFloat(B[0]);B=[le,le,le,"r"]}for(var ge="#",Ae=0;Ae<3;Ae++)ge+=("0"+Math.floor(255*parseFloat(B[Ae])).toString(16)).slice(-2);return ge},Fs=h.__private__.encodeColorString=function(C){var B;typeof C=="string"&&(C={ch1:C});var le=C.ch1,ge=C.ch2,Ae=C.ch3,He=C.ch4,tt=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var Ct=new lU(le);if(Ct.ok)le=Ct.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var Kt=parseInt(le.substr(1),16);le=Kt>>16&255,ge=Kt>>8&255,Ae=255&Kt}if(ge===void 0||He===void 0&&le===ge&&ge===Ae)if(typeof le=="string")B=le+" "+tt[0];else switch(C.precision){case 2:B=N(le/255)+" "+tt[0];break;case 3:default:B=T(le/255)+" "+tt[0]}else if(He===void 0||Ir(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return B=["1.","1.","1.",tt[1]].join(" ");if(typeof le=="string")B=[le,ge,Ae,tt[1]].join(" ");else switch(C.precision){case 2:B=[N(le/255),N(ge/255),N(Ae/255),tt[1]].join(" ");break;default:case 3:B=[T(le/255),T(ge/255),T(Ae/255),tt[1]].join(" ")}}else if(typeof le=="string")B=[le,ge,Ae,He,tt[2]].join(" ");else switch(C.precision){case 2:B=[N(le),N(ge),N(Ae),N(He),tt[2]].join(" ");break;case 3:default:B=[T(le),T(ge),T(Ae),T(He),tt[2]].join(" ")}return B},vl=h.__private__.getFilters=function(){return a},as=h.__private__.putStream=function(C){var B=(C=C||{}).data||"",le=C.filters||vl(),ge=C.alreadyAppliedFilters||[],Ae=C.addLength1||!1,He=B.length,tt=C.objectId,Ct=function(So){return So};if(c!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ct=Io.encryptor(tt,0));var Kt={};le===!0&&(le=["FlateEncode"]);var xn=C.additionalKeyValues||[],bn=(Kt=Jt.API.processDataByFilters!==void 0?Jt.API.processDataByFilters(B,le):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(Kt.data.length!==0&&(xn.push({key:"Length",value:Kt.data.length}),Ae===!0&&xn.push({key:"Length1",value:He})),bn.length!=0)if(bn.split("/").length-1==1)xn.push({key:"Filter",value:bn});else{xn.push({key:"Filter",value:"["+bn+"]"});for(var Yn=0;Yn<xn.length;Yn+=1)if(xn[Yn].key==="DecodeParms"){for(var Yr=[],ni=0;ni<Kt.reverseChain.split("/").length-1;ni+=1)Yr.push("null");Yr.push(xn[Yn].value),xn[Yn].value="["+Yr.join(" ")+"]"}}se("<<");for(var Ii=0;Ii<xn.length;Ii++)se("/"+xn[Ii].key+" "+xn[Ii].value);se(">>"),Kt.data.length!==0&&(se("stream"),se(Ct(Kt.data)),se("endstream"))},yl=h.__private__.putPage=function(C){var B=C.number,le=C.data,ge=C.objId,Ae=C.contentsObjId;Oa(ge,!0),se("<</Type /Page"),se("/Parent "+C.rootDictionaryObjId+" 0 R"),se("/Resources "+C.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(A(C.mediaBox.bottomLeftX))+" "+parseFloat(A(C.mediaBox.bottomLeftY))+" "+A(C.mediaBox.topRightX)+" "+A(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&se("/CropBox ["+A(C.cropBox.bottomLeftX)+" "+A(C.cropBox.bottomLeftY)+" "+A(C.cropBox.topRightX)+" "+A(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&se("/BleedBox ["+A(C.bleedBox.bottomLeftX)+" "+A(C.bleedBox.bottomLeftY)+" "+A(C.bleedBox.topRightX)+" "+A(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&se("/TrimBox ["+A(C.trimBox.bottomLeftX)+" "+A(C.trimBox.bottomLeftY)+" "+A(C.trimBox.topRightX)+" "+A(C.trimBox.topRightY)+"]"),C.artBox!==null&&se("/ArtBox ["+A(C.artBox.bottomLeftX)+" "+A(C.artBox.bottomLeftY)+" "+A(C.artBox.topRightX)+" "+A(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&se("/UserUnit "+C.userUnit),hr.publish("putPage",{objId:ge,pageContext:yn[B],pageNumber:B,page:le}),se("/Contents "+Ae+" 0 R"),se(">>"),se("endobj");var He=le.join(`
`);return w===b.ADVANCED&&(He+=`
Q`),Oa(Ae,!0),as({data:He,filters:vl(),objectId:Ae}),se("endobj"),ge},Nd=h.__private__.putPages=function(){var C,B,le=[];for(C=1;C<=ti;C++)yn[C].objId=Ci(),yn[C].contentsObjId=Ci();for(C=1;C<=ti;C++)le.push(yl({number:C,data:Pe[C],objId:yn[C].objId,contentsObjId:yn[C].contentsObjId,mediaBox:yn[C].mediaBox,cropBox:yn[C].cropBox,bleedBox:yn[C].bleedBox,trimBox:yn[C].trimBox,artBox:yn[C].artBox,userUnit:yn[C].userUnit,rootDictionaryObjId:pu,resourceDictionaryObjId:Rs}));Oa(pu,!0),se("<</Type /Pages");var ge="/Kids [";for(B=0;B<ti;B++)ge+=le[B]+" 0 R ";se(ge+"]"),se("/Count "+ti),se(">>"),se("endobj"),hr.publish("postPutPages")},ah=function(C){hr.publish("putFont",{font:C,out:se,newObject:Pi,putStream:as}),C.isAlreadyPutted!==!0&&(C.objectNumber=Pi(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Nm(C.postScriptName)),se("/Subtype /Type1"),typeof C.encoding=="string"&&se("/Encoding /"+C.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},sh=function(){for(var C in or)or.hasOwnProperty(C)&&(d===!1||d===!0&&p.hasOwnProperty(C))&&ah(or[C])},lh=function(C){C.objectNumber=Pi();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[A(C.x),A(C.y),A(C.x+C.width),A(C.y+C.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var le=C.pages[1].join(`
`);as({data:le,additionalKeyValues:B,objectId:C.objectNumber}),se("endobj")},uh=function(){for(var C in po)po.hasOwnProperty(C)&&lh(po[C])},n1=function(C,B){var le,ge=[],Ae=1/(B-1);for(le=0;le<1;le+=Ae)ge.push(le);if(ge.push(1),C[0].offset!=0){var He={offset:0,color:C[0].color};C.unshift(He)}if(C[C.length-1].offset!=1){var tt={offset:1,color:C[C.length-1].color};C.push(tt)}for(var Ct="",Kt=0,xn=0;xn<ge.length;xn++){for(le=ge[xn];le>C[Kt+1].offset;)Kt++;var bn=C[Kt].offset,Yn=(le-bn)/(C[Kt+1].offset-bn),Yr=C[Kt].color,ni=C[Kt+1].color;Ct+=ae(Math.round((1-Yn)*Yr[0]+Yn*ni[0]).toString(16))+ae(Math.round((1-Yn)*Yr[1]+Yn*ni[1]).toString(16))+ae(Math.round((1-Yn)*Yr[2]+Yn*ni[2]).toString(16))}return Ct.trim()},Kw=function(C,B){B||(B=21);var le=Pi(),ge=n1(C.colors,B),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+B+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),as({data:ge,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),se("endobj"),C.objectNumber=Pi(),se("<< /ShadingType "+C.type),se("/ColorSpace /DeviceRGB");var He="/Coords ["+A(parseFloat(C.coords[0]))+" "+A(parseFloat(C.coords[1]))+" ";C.type===2?He+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3])):He+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3]))+" "+A(parseFloat(C.coords[4]))+" "+A(parseFloat(C.coords[5])),se(He+="]"),C.matrix&&se("/Matrix ["+C.matrix.toString()+"]"),se("/Function "+le+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},Yw=function(C,B){var le=Ci(),ge=Pi();B.push({resourcesOid:le,objectOid:ge}),C.objectNumber=ge;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+C.boundingBox.map(A).join(" ")+"]"}),Ae.push({key:"XStep",value:A(C.xStep)}),Ae.push({key:"YStep",value:A(C.yStep)}),Ae.push({key:"Resources",value:le+" 0 R"}),C.matrix&&Ae.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),as({data:C.stream,additionalKeyValues:Ae,objectId:C.objectNumber}),se("endobj")},ch=function(C){var B;for(B in pr)pr.hasOwnProperty(B)&&(pr[B]instanceof nh?Kw(pr[B]):pr[B]instanceof Fm&&Yw(pr[B],C))},r1=function(C){for(var B in C.objectNumber=Pi(),se("<<"),C)switch(B){case"opacity":se("/ca "+N(C[B]));break;case"stroke-opacity":se("/CA "+N(C[B]))}se(">>"),se("endobj")},Xw=function(){var C;for(C in ei)ei.hasOwnProperty(C)&&r1(ei[C])},Vm=function(){for(var C in se("/XObject <<"),po)po.hasOwnProperty(C)&&po[C].objectNumber>=0&&se("/"+C+" "+po[C].objectNumber+" 0 R");hr.publish("putXobjectDict"),se(">>")},Qw=function(){Io.oid=Pi(),se("<<"),se("/Filter /Standard"),se("/V "+Io.v),se("/R "+Io.r),se("/U <"+Io.toHexString(Io.U)+">"),se("/O <"+Io.toHexString(Io.O)+">"),se("/P "+Io.P),se(">>"),se("endobj")},i1=function(){for(var C in se("/Font <<"),or)or.hasOwnProperty(C)&&(d===!1||d===!0&&p.hasOwnProperty(C))&&se("/"+C+" "+or[C].objectNumber+" 0 R");se(">>")},Zw=function(){if(Object.keys(pr).length>0){for(var C in se("/Shading <<"),pr)pr.hasOwnProperty(C)&&pr[C]instanceof nh&&pr[C].objectNumber>=0&&se("/"+C+" "+pr[C].objectNumber+" 0 R");hr.publish("putShadingPatternDict"),se(">>")}},dh=function(C){if(Object.keys(pr).length>0){for(var B in se("/Pattern <<"),pr)pr.hasOwnProperty(B)&&pr[B]instanceof h.TilingPattern&&pr[B].objectNumber>=0&&pr[B].objectNumber<C&&se("/"+B+" "+pr[B].objectNumber+" 0 R");hr.publish("putTilingPatternDict"),se(">>")}},Jw=function(){if(Object.keys(ei).length>0){var C;for(C in se("/ExtGState <<"),ei)ei.hasOwnProperty(C)&&ei[C].objectNumber>=0&&se("/"+C+" "+ei[C].objectNumber+" 0 R");hr.publish("putGStateDict"),se(">>")}},fi=function(C){Oa(C.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),i1(),Zw(),dh(C.objectOid),Jw(),Vm(),se(">>"),se("endobj")},o1=function(){var C=[];sh(),Xw(),uh(),ch(C),hr.publish("putResources"),C.forEach(fi),fi({resourcesOid:Rs,objectOid:Number.MAX_SAFE_INTEGER}),hr.publish("postPutResources")},a1=function(){hr.publish("putAdditionalObjects");for(var C=0;C<je.length;C++){var B=je[C];Oa(B.objId,!0),se(B.content),se("endobj")}hr.publish("postPutAdditionalObjects")},s1=function(C){Hr[C.fontName]=Hr[C.fontName]||{},Hr[C.fontName][C.fontStyle]=C.id},jm=function(C,B,le,ge,Ae){var He={id:"F"+(Object.keys(or).length+1).toString(10),postScriptName:C,fontName:B,fontStyle:le,encoding:ge,isStandardFont:Ae||!1,metadata:{}};return hr.publish("addFont",{font:He,instance:this}),or[He.id]=He,s1(He),He.id},ex=function(C){for(var B=0,le=Xe.length;B<le;B++){var ge=jm.call(this,C[B][0],C[B][1],C[B][2],Xe[B][3],!0);d===!1&&(p[ge]=!0);var Ae=C[B][0].split("-");s1({id:ge,fontName:Ae[0],fontStyle:Ae[1]||""})}hr.publish("addFonts",{fonts:or,dictionary:Hr})},Os=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(ge){var B=ge.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var le="Error in function "+B.split(`
`)[0].split("<")[0]+": "+ge.message;if(!on.console)throw new Error(le);on.console.error(le,ge),on.alert&&alert(le)}},C.foo.bar=C,C.foo},ph=function(C,B){var le,ge,Ae,He,tt,Ct,Kt,xn,bn;if(Ae=(B=B||{}).sourceEncoding||"Unicode",tt=B.outputEncoding,(B.autoencode||tt)&&or[Pn].metadata&&or[Pn].metadata[Ae]&&or[Pn].metadata[Ae].encoding&&(He=or[Pn].metadata[Ae].encoding,!tt&&or[Pn].encoding&&(tt=or[Pn].encoding),!tt&&He.codePages&&(tt=He.codePages[0]),typeof tt=="string"&&(tt=He[tt]),tt)){for(Kt=!1,Ct=[],le=0,ge=C.length;le<ge;le++)(xn=tt[C.charCodeAt(le)])?Ct.push(String.fromCharCode(xn)):Ct.push(C[le]),Ct[le].charCodeAt(0)>>8&&(Kt=!0);C=Ct.join("")}for(le=C.length;Kt===void 0&&le!==0;)C.charCodeAt(le-1)>>8&&(Kt=!0),le--;if(!Kt)return C;for(Ct=B.noBOM?[]:[254,255],le=0,ge=C.length;le<ge;le++){if((bn=(xn=C.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ct.push(bn),Ct.push(xn-(bn<<8))}return String.fromCharCode.apply(void 0,Ct)},la=h.__private__.pdfEscape=h.pdfEscape=function(C,B){return ph(C,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Um=h.__private__.beginPage=function(C){Pe[++ti]=[],yn[ti]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},u1(ti),ke(Pe[q])},l1=function(C,B){var le,ge,Ae;switch(e=B||e,typeof C=="string"&&(le=y(C.toLowerCase()),Array.isArray(le)&&(ge=le[0],Ae=le[1])),Array.isArray(C)&&(ge=C[0]*_t,Ae=C[1]*_t),isNaN(ge)&&(ge=i[0],Ae=i[1]),(ge>14400||Ae>14400)&&(Mr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Ae=Math.min(14400,Ae)),i=[ge,Ae],e.substr(0,1)){case"l":Ae>ge&&(i=[Ae,ge]);break;case"p":ge>Ae&&(i=[Ae,ge])}Um(i),m1(qm),se(Ps),$m!==0&&se($m+" J"),Km!==0&&se(Km+" j"),hr.publish("addPage",{pageNumber:ti})},tx=function(C){C>0&&C<=ti&&(Pe.splice(C,1),yn.splice(C,1),ti--,q>ti&&(q=ti),this.setPage(q))},u1=function(C){C>0&&C<=ti&&(q=C)},nx=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Pe.length-1},c1=function(C,B,le){var ge,Ae=void 0;return le=le||{},C=C!==void 0?C:or[Pn].fontName,B=B!==void 0?B:or[Pn].fontStyle,ge=C.toLowerCase(),Hr[ge]!==void 0&&Hr[ge][B]!==void 0?Ae=Hr[ge][B]:Hr[C]!==void 0&&Hr[C][B]!==void 0?Ae=Hr[C][B]:le.disableWarning===!1&&Mr.warn("Unable to look up font label for font '"+C+"', '"+B+"'. Refer to getFontList() for available fonts."),Ae||le.noFallback||(Ae=Hr.times[B])==null&&(Ae=Hr.times.normal),Ae},rx=h.__private__.putInfo=function(){var C=Pi(),B=function(ge){return ge};for(var le in c!==null&&(B=Io.encryptor(C,0)),se("<<"),se("/Producer ("+la(B("jsPDF "+Jt.version))+")"),Zt)Zt.hasOwnProperty(le)&&Zt[le]&&se("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+la(B(Zt[le]))+")");se("/CreationDate ("+la(B(X))+")"),se(">>"),se("endobj")},Hm=h.__private__.putCatalog=function(C){var B=(C=C||{}).rootDictionaryObjId||pu;switch(Pi(),se("<<"),se("/Type /Catalog"),se("/Pages "+B+" 0 R"),ut||(ut="fullwidth"),ut){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+ut;le.substr(le.length-1)==="%"&&(ut=parseInt(ut)/100),typeof ut=="number"&&se("/OpenAction [3 0 R /XYZ null null "+N(ut)+"]")}switch(vn||(vn="continuous"),vn){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}qt&&se("/PageMode /"+qt),hr.publish("putCatalog"),se(">>"),se("endobj")},ix=h.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(pe+1)),se("/Root "+pe+" 0 R"),se("/Info "+(pe-1)+" 0 R"),c!==null&&se("/Encrypt "+Io.oid+" 0 R"),se("/ID [ <"+Y+"> <"+Y+"> ]"),se(">>")},ox=h.__private__.putHeader=function(){se("%PDF-"+f),se("%\xBA\xDF\xAC\xE0")},ax=h.__private__.putXRef=function(){var C="0000000000";se("xref"),se("0 "+(pe+1)),se("0000000000 65535 f ");for(var B=1;B<=pe;B++)typeof fe[B]=="function"?se((C+fe[B]()).slice(-10)+" 00000 n "):fe[B]!==void 0?se((C+fe[B]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},hu=h.__private__.buildDocument=function(){ht(),ke(me),hr.publish("buildDocument"),ox(),Nd(),a1(),o1(),c!==null&&Qw(),rx(),Hm();var C=xe;return ax(),ix(),se("startxref"),se(""+C),se("%%EOF"),ke(Pe[q]),me.join(`
`)},hh=h.__private__.getBlob=function(C){return new Blob([gt(C)],{type:"application/pdf"})},fh=h.output=h.__private__.output=Os(function(C,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",C){case void 0:return hu();case"save":h.save(B.filename);break;case"arraybuffer":return gt(hu());case"blob":return hh(hu());case"bloburi":case"bloburl":if(on.URL!==void 0&&typeof on.URL.createObjectURL=="function")return on.URL&&on.URL.createObjectURL(hh(hu()))||void 0;Mr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",ge=hu();try{le=sA(ge)}catch{le=sA(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+B.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(on)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(Ae=B.pdfObjectUrl,He="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Ct=on.open();return Ct!==null&&Ct.document.write(tt),Ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(on)==="[object Window]"){var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',xn=on.open();if(xn!==null){xn.document.write(Kt);var bn=this;xn.document.documentElement.querySelector("#pdfViewer").onload=function(){xn.document.title=B.filename,xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bn.output("bloburl"))}}return xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(on)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Yr=on.open();if(Yr!==null&&(Yr.document.write(Yn),Yr.document.title=B.filename),Yr||typeof safari>"u")return Yr;break;case"datauri":case"dataurl":return on.document.location.href=this.output("datauristring",B);default:return null}}),d1=function(C){return Array.isArray(Rd)===!0&&Rd.indexOf(C)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=d1("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var Io=null;Te(),G();var sx=function(C){return c!==null?Io.encryptor(C,0):function(B){return B}},p1=h.__private__.getPageInfo=h.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yn[C].objId,pageNumber:C,pageContext:yn[C]}},fn=h.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in yn)if(yn[B].objId===C)break;return p1(B)},lx=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:yn[q].objId,pageNumber:q,pageContext:yn[q]}};h.addPage=function(){return l1.apply(this,arguments),this},h.setPage=function(){return u1.apply(this,arguments),ke.call(this,Pe[q]),this},h.insertPage=function(C){return this.addPage(),this.movePage(q,C),this},h.movePage=function(C,B){var le,ge;if(C>B){le=Pe[C],ge=yn[C];for(var Ae=C;Ae>B;Ae--)Pe[Ae]=Pe[Ae-1],yn[Ae]=yn[Ae-1];Pe[B]=le,yn[B]=ge,this.setPage(B)}else if(C<B){le=Pe[C],ge=yn[C];for(var He=C;He<B;He++)Pe[He]=Pe[He+1],yn[He]=yn[He+1];Pe[B]=le,yn[B]=ge,this.setPage(B)}return this},h.deletePage=function(){return tx.apply(this,arguments),this},h.__private__.text=h.text=function(C,B,le,ge,Ae){var He,tt,Ct,Kt,xn,bn,Yn,Yr,ni,Ii=(ge=ge||{}).scope||this;if(typeof C=="number"&&typeof B=="number"&&(typeof le=="string"||Array.isArray(le))){var So=le;le=B,B=C,C=So}if(arguments[3]instanceof en?(E("The transform parameter of text() with a Matrix value"),ni=Ae):(Ct=arguments[4],Kt=arguments[5],Ir(Yn=arguments[3])==="object"&&Yn!==null||(typeof Ct=="string"&&(Kt=Ct,Ct=null),typeof Yn=="string"&&(Kt=Yn,Yn=null),typeof Yn=="number"&&(Ct=Yn,Yn=null),ge={flags:Yn,angle:Ct,align:Kt})),isNaN(B)||isNaN(le)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Ii;var Ki="",Ls=!1,Pa=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Od,wl=Ii.internal.scaleFactor;function w1(Rr){return Rr=Rr.split("	").join(Array(ge.TabLen||9).join(" ")),la(Rr,Yn)}function Jm(Rr){for(var Nr,gi=Rr.concat(),Li=[],yu=gi.length;yu--;)typeof(Nr=gi.shift())=="string"?Li.push(Nr):Array.isArray(Rr)&&(Nr.length===1||Nr[1]===void 0&&Nr[2]===void 0)?Li.push(Nr[0]):Li.push([Nr[0],Nr[1],Nr[2]]);return Li}function eg(Rr,Nr){var gi;if(typeof Rr=="string")gi=Nr(Rr)[0];else if(Array.isArray(Rr)){for(var Li,yu,lg=Rr.concat(),Ah=[],E1=lg.length;E1--;)typeof(Li=lg.shift())=="string"?Ah.push(Nr(Li)[0]):Array.isArray(Li)&&typeof Li[0]=="string"&&(yu=Nr(Li[0],Li[1],Li[2]),Ah.push([yu[0],yu[1],yu[2]]));gi=Ah}return gi}var _h=!1,tg=!0;if(typeof C=="string")_h=!0;else if(Array.isArray(C)){var ng=C.concat();tt=[];for(var wh,ho=ng.length;ho--;)(typeof(wh=ng.shift())!="string"||Array.isArray(wh)&&typeof wh[0]!="string")&&(tg=!1);_h=tg}if(_h===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var xh=at/Ii.internal.scaleFactor,Ch=xh*(Pa-1);switch(ge.baseline){case"bottom":le-=Ch;break;case"top":le+=xh-Ch;break;case"hanging":le+=xh-2*Ch;break;case"middle":le+=xh/2-Ch}if((bn=ge.maxWidth||0)>0&&(typeof C=="string"?C=Ii.splitTextToSize(C,bn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Rr,Nr){return Rr.concat(Ii.splitTextToSize(Nr,bn))},[]))),He={text:C,x:B,y:le,options:ge,mutex:{pdfEscape:la,activeFontKey:Pn,fonts:or,activeFontSize:at}},hr.publish("preProcessText",He),C=He.text,Ct=(ge=He.options).angle,!(ni instanceof en)&&Ct&&typeof Ct=="number"){Ct*=Math.PI/180,ge.rotationDirection===0&&(Ct=-Ct),w===b.ADVANCED&&(Ct=-Ct);var Ih=Math.cos(Ct),rg=Math.sin(Ct);ni=new en(Ih,rg,-rg,Ih,0,0)}else Ct&&Ct instanceof en&&(ni=Ct);w!==b.ADVANCED||ni||(ni=gl),(xn=ge.charSpace||vh)!==void 0&&(Ki+=A(M(xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yr=ge.horizontalScale)!==void 0&&(Ki+=A(100*Yr)+` Tz
`),ge.lang;var ua=-1,yx=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,ig=Ii.internal.getCurrentPageInfo().pageContext;switch(yx){case 0:case!1:case"fill":ua=0;break;case 1:case!0:case"stroke":ua=1;break;case 2:case"fillThenStroke":ua=2;break;case 3:case"invisible":ua=3;break;case 4:case"fillAndAddForClipping":ua=4;break;case 5:case"strokeAndAddPathForClipping":ua=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ua=6;break;case 7:case"addToPathForClipping":ua=7}var x1=ig.usedRenderingMode!==void 0?ig.usedRenderingMode:-1;ua!==-1?Ki+=ua+` Tr
`:x1!==-1&&(Ki+=`0 Tr
`),ua!==-1&&(ig.usedRenderingMode=ua),Kt=ge.align||"left";var ss,Sh=at*Pa,C1=Ii.internal.pageSize.getWidth(),I1=or[Pn];xn=ge.charSpace||vh,bn=ge.maxWidth||0,Yn=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var mc=[],Bd=function(Rr){return Ii.getStringUnitWidth(Rr,{font:I1,charSpace:xn,fontSize:at,doKerning:!1})*at/wl};if(Object.prototype.toString.call(C)==="[object Array]"){var ca;tt=Jm(C),Kt!=="left"&&(ss=tt.map(Bd));var qo,gc=0;if(Kt==="right"){B-=ss[0],C=[],ho=tt.length;for(var mu=0;mu<ho;mu++)mu===0?(qo=_l(B),ca=fu(le)):(qo=M(gc-ss[mu]),ca=-Sh),C.push([tt[mu],qo,ca]),gc=ss[mu]}else if(Kt==="center"){B-=ss[0]/2,C=[],ho=tt.length;for(var gu=0;gu<ho;gu++)gu===0?(qo=_l(B),ca=fu(le)):(qo=M((gc-ss[gu])/2),ca=-Sh),C.push([tt[gu],qo,ca]),gc=ss[gu]}else if(Kt==="left"){C=[],ho=tt.length;for(var Eh=0;Eh<ho;Eh++)C.push(tt[Eh])}else if(Kt==="justify"&&I1.encoding==="Identity-H"){C=[],ho=tt.length,bn=bn!==0?bn:C1;for(var vu=0,mi=0;mi<ho;mi++)if(ca=mi===0?fu(le):-Sh,qo=mi===0?_l(B):vu,mi<ho-1){var og=M((bn-ss[mi])/(tt[mi].split(" ").length-1)),Go=tt[mi].split(" ");C.push([Go[0]+" ",qo,ca]),vu=0;for(var ls=1;ls<Go.length;ls++){var Dh=(Bd(Go[ls-1]+" "+Go[ls])-Bd(Go[ls]))*wl+og;ls==Go.length-1?C.push([Go[ls],Dh,0]):C.push([Go[ls]+" ",Dh,0]),vu-=Dh}}else C.push([tt[mi],qo,ca]);C.push(["",vu,0])}else{if(Kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],ho=tt.length,bn=bn!==0?bn:C1,mi=0;mi<ho;mi++)ca=mi===0?fu(le):-Sh,qo=mi===0?_l(B):0,mi<ho-1?mc.push(A(M((bn-ss[mi])/(tt[mi].split(" ").length-1)))):mc.push(0),C.push([tt[mi],qo,ca])}}var S1=typeof ge.R2L=="boolean"?ge.R2L:Tt;S1===!0&&(C=eg(C,function(Rr,Nr,gi){return[Rr.split("").reverse().join(""),Nr,gi]})),He={text:C,x:B,y:le,options:ge,mutex:{pdfEscape:la,activeFontKey:Pn,fonts:or,activeFontSize:at}},hr.publish("postProcessText",He),C=He.text,Ls=He.mutex.isHex||!1;var ag=or[Pn].encoding;ag!=="WinAnsiEncoding"&&ag!=="StandardEncoding"||(C=eg(C,function(Rr,Nr,gi){return[w1(Rr),Nr,gi]})),tt=Jm(C),C=[];for(var Vd,jd,vc,Ud=0,Th=1,Hd=Array.isArray(tt[0])?Th:Ud,yc="",sg=function(Rr,Nr,gi){var Li="";return gi instanceof en?(gi=typeof ge.angle=="number"?Ms(gi,new en(1,0,0,1,Rr,Nr)):Ms(new en(1,0,0,1,Rr,Nr),gi),w===b.ADVANCED&&(gi=Ms(new en(1,0,0,-1,0,0),gi)),Li=gi.join(" ")+` Tm
`):Li=A(Rr)+" "+A(Nr)+` Td
`,Li},us=0;us<tt.length;us++){switch(yc="",Hd){case Th:vc=(Ls?"<":"(")+tt[us][0]+(Ls?">":")"),Vd=parseFloat(tt[us][1]),jd=parseFloat(tt[us][2]);break;case Ud:vc=(Ls?"<":"(")+tt[us]+(Ls?">":")"),Vd=_l(B),jd=fu(le)}mc!==void 0&&mc[us]!==void 0&&(yc=mc[us]+` Tw
`),us===0?C.push(yc+sg(Vd,jd,ni)+vc):Hd===Ud?C.push(yc+vc):Hd===Th&&C.push(yc+sg(Vd,jd,ni)+vc)}C=Hd===Ud?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var cs=`BT
/`;return cs+=Pn+" "+at+` Tf
`,cs+=A(at*Pa)+` TL
`,cs+=Pd+`
`,cs+=Ki,cs+=C,se(cs+="ET"),p[Pn]=!0,Ii};var ux=h.__private__.clip=h.clip=function(C){return se(C==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ux("evenodd")},h.__private__.discardPath=h.discardPath=function(){return se("n"),this};var bl=h.__private__.isValidStyle=function(C){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(B=!0),B};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(C){return bl(C)&&(u=C),this};var h1=h.__private__.getStyle=h.getStyle=function(C){var B=u;switch(C){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=C}return B},f1=h.close=function(){return se("h"),this};h.stroke=function(){return se("S"),this},h.fill=function(C){return mh("f",C),this},h.fillEvenOdd=function(C){return mh("f*",C),this},h.fillStroke=function(C){return mh("B",C),this},h.fillStrokeEvenOdd=function(C){return mh("B*",C),this};var mh=function(C,B){Ir(B)==="object"?dx(B,C):se(C)},zm=function(C){C===null||w===b.ADVANCED&&C===void 0||(C=h1(C),se(C))};function cx(C,B,le,ge,Ae){var He=new Fm(B||this.boundingBox,le||this.xStep,ge||this.yStep,this.gState,Ae||this.matrix);He.stream=this.stream;var tt=C+"$$"+this.cloneIndex+++"$$";return sa(tt,He),He}var dx=function(C,B){var le=Md[C.key],ge=pr[le];if(ge instanceof nh)se("q"),se(px(B)),ge.gState&&h.setGState(ge.gState),se(C.matrix.toString()+" cm"),se("/"+le+" sh"),se("Q");else if(ge instanceof Fm){var Ae=new en(1,0,0,-1,0,fc());C.matrix&&(Ae=Ae.multiply(C.matrix||gl),le=cx.call(ge,C.key,C.boundingBox,C.xStep,C.yStep,Ae).id),se("q"),se("/Pattern cs"),se("/"+le+" scn"),ge.gState&&h.setGState(ge.gState),se(B),se("Q")}},px=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wm=h.moveTo=function(C,B){return se(A(M(C))+" "+A(V(B))+" m"),this},Fd=h.lineTo=function(C,B){return se(A(M(C))+" "+A(V(B))+" l"),this},pc=h.curveTo=function(C,B,le,ge,Ae,He){return se([A(M(C)),A(V(B)),A(M(le)),A(V(ge)),A(M(Ae)),A(V(He)),"c"].join(" ")),this};h.__private__.line=h.line=function(C,B,le,ge,Ae){if(isNaN(C)||isNaN(B)||isNaN(le)||isNaN(ge)||!bl(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return w===b.COMPAT?this.lines([[le-C,ge-B]],C,B,[1,1],Ae||"S"):this.lines([[le-C,ge-B]],C,B,[1,1]).stroke()},h.__private__.lines=h.lines=function(C,B,le,ge,Ae,He){var tt,Ct,Kt,xn,bn,Yn,Yr,ni,Ii,So,Ki,Ls;if(typeof C=="number"&&(Ls=le,le=B,B=C,C=Ls),ge=ge||[1,1],He=He||!1,isNaN(B)||isNaN(le)||!Array.isArray(C)||!Array.isArray(ge)||!bl(Ae)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wm(B,le),tt=ge[0],Ct=ge[1],xn=C.length,So=B,Ki=le,Kt=0;Kt<xn;Kt++)(bn=C[Kt]).length===2?(So=bn[0]*tt+So,Ki=bn[1]*Ct+Ki,Fd(So,Ki)):(Yn=bn[0]*tt+So,Yr=bn[1]*Ct+Ki,ni=bn[2]*tt+So,Ii=bn[3]*Ct+Ki,So=bn[4]*tt+So,Ki=bn[5]*Ct+Ki,pc(Yn,Yr,ni,Ii,So,Ki));return He&&f1(),zm(Ae),this},h.path=function(C){for(var B=0;B<C.length;B++){var le=C[B],ge=le.c;switch(le.op){case"m":Wm(ge[0],ge[1]);break;case"l":Fd(ge[0],ge[1]);break;case"c":pc.apply(this,ge);break;case"h":f1()}}return this},h.__private__.rect=h.rect=function(C,B,le,ge,Ae){if(isNaN(C)||isNaN(B)||isNaN(le)||isNaN(ge)||!bl(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b.COMPAT&&(ge=-ge),se([A(M(C)),A(V(B)),A(M(le)),A(M(ge)),"re"].join(" ")),zm(Ae),this},h.__private__.triangle=h.triangle=function(C,B,le,ge,Ae,He,tt){if(isNaN(C)||isNaN(B)||isNaN(le)||isNaN(ge)||isNaN(Ae)||isNaN(He)||!bl(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-C,ge-B],[Ae-le,He-ge],[C-Ae,B-He]],C,B,[1,1],tt,!0),this},h.__private__.roundedRect=h.roundedRect=function(C,B,le,ge,Ae,He,tt){if(isNaN(C)||isNaN(B)||isNaN(le)||isNaN(ge)||isNaN(Ae)||isNaN(He)||!bl(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ct=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*le),He=Math.min(He,.5*ge),this.lines([[le-2*Ae,0],[Ae*Ct,0,Ae,He-He*Ct,Ae,He],[0,ge-2*He],[0,He*Ct,-Ae*Ct,He,-Ae,He],[2*Ae-le,0],[-Ae*Ct,0,-Ae,-He*Ct,-Ae,-He],[0,2*He-ge],[0,-He*Ct,Ae*Ct,-He,Ae,-He]],C+Ae,B,[1,1],tt,!0),this},h.__private__.ellipse=h.ellipse=function(C,B,le,ge,Ae){if(isNaN(C)||isNaN(B)||isNaN(le)||isNaN(ge)||!bl(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*le,tt=4/3*(Math.SQRT2-1)*ge;return Wm(C+le,B),pc(C+le,B-tt,C+He,B-ge,C,B-ge),pc(C-He,B-ge,C-le,B-tt,C-le,B),pc(C-le,B+tt,C-He,B+ge,C,B+ge),pc(C+He,B+ge,C+le,B+tt,C+le,B),zm(Ae),this},h.__private__.circle=h.circle=function(C,B,le,ge){if(isNaN(C)||isNaN(B)||isNaN(le)||!bl(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,B,le,le,ge)},h.setFont=function(C,B,le){return le&&(B=D(B,le)),Pn=c1(C,B,{disableWarning:!1}),this};var hx=h.__private__.getFont=h.getFont=function(){return or[c1.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var C,B,le={};for(C in Hr)if(Hr.hasOwnProperty(C))for(B in le[C]=[],Hr[C])Hr[C].hasOwnProperty(B)&&le[C].push(B);return le},h.addFont=function(C,B,le,ge,Ae){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(le=D(le,ge)),Ae=Ae||"Identity-H",jm.call(this,C,B,le,Ae)};var Od,qm=t.lineWidth||.200025,gh=h.__private__.getLineWidth=h.getLineWidth=function(){return qm},m1=h.__private__.setLineWidth=h.setLineWidth=function(C){return qm=C,se(A(M(C))+" w"),this};h.__private__.setLineDash=Jt.API.setLineDash=Jt.API.setLineDashPattern=function(C,B){if(C=C||[],B=B||0,isNaN(B)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(le){return A(M(le))}).join(" "),B=A(M(B)),se("["+C+"] "+B+" d"),this};var g1=h.__private__.getLineHeight=h.getLineHeight=function(){return at*Od};h.__private__.getLineHeight=h.getLineHeight=function(){return at*Od};var v1=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Od=C),this},y1=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Od};v1(t.lineHeight);var _l=h.__private__.getHorizontalCoordinate=function(C){return M(C)},fu=h.__private__.getVerticalCoordinate=function(C){return w===b.ADVANCED?C:yn[q].mediaBox.topRightY-yn[q].mediaBox.bottomLeftY-M(C)},fx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(C){return A(_l(C))},hc=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(C){return A(fu(C))},Ps=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Ns(Ps)},h.__private__.setStrokeColor=h.setDrawColor=function(C,B,le,ge){return Ps=Fs({ch1:C,ch2:B,ch3:le,ch4:ge,pdfColorType:"draw",precision:2}),se(Ps),this};var Gm=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Ns(Gm)},h.__private__.setFillColor=h.setFillColor=function(C,B,le,ge){return Gm=Fs({ch1:C,ch2:B,ch3:le,ch4:ge,pdfColorType:"fill",precision:2}),se(Gm),this};var Pd=t.textColor||"0 g",mx=h.__private__.getTextColor=h.getTextColor=function(){return Ns(Pd)};h.__private__.setTextColor=h.setTextColor=function(C,B,le,ge){return Pd=Fs({ch1:C,ch2:B,ch3:le,ch4:ge,pdfColorType:"text",precision:3}),this};var vh=t.charSpace,gx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(vh||0)};h.__private__.setCharSpace=h.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vh=C,this};var $m=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(C){var B=h.CapJoinStyles[C];if(B===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $m=B,se(B+" J"),this};var Km=0;h.__private__.setLineJoin=h.setLineJoin=function(C){var B=h.CapJoinStyles[C];if(B===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Km=B,se(B+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(A(M(C))+" M"),this},h.GState=Ww,h.setGState=function(C){(C=typeof C=="string"?ei[ks[C]]:b1(null,C)).equals(du)||(se("/"+C.id+" gs"),du=C)};var b1=function(C,B){if(!C||!ks[C]){var le=!1;for(var ge in ei)if(ei.hasOwnProperty(ge)&&ei[ge].equals(B)){le=!0;break}if(le)B=ei[ge];else{var Ae="GS"+(Object.keys(ei).length+1).toString(10);ei[Ae]=B,B.id=Ae}return C&&(ks[C]=B.id),hr.publish("addGState",B),B}};h.addGState=function(C,B){return b1(C,B),this},h.saveGraphicsState=function(){return se("q"),hl.push({key:Pn,size:at,color:Pd}),this},h.restoreGraphicsState=function(){se("Q");var C=hl.pop();return Pn=C.key,at=C.size,Pd=C.color,du=null,this},h.setCurrentTransformationMatrix=function(C){return se(C.toString()+" cm"),this},h.comment=function(C){return se("#"+C),this};var yh=function(C,B){var le=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(He){isNaN(He)||(le=parseFloat(He))}});var ge=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(He){isNaN(He)||(ge=parseFloat(He))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(He){Ae=He.toString()}}),this},Ym=function(C,B,le,ge){yh.call(this,C,B),this.type="rect";var Ae=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(tt){isNaN(tt)||(Ae=parseFloat(tt))}});var He=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(tt){isNaN(tt)||(He=parseFloat(tt))}}),this},Xm=function(){this.page=ti,this.currentPage=q,this.pages=Pe.slice(0),this.pagesContext=yn.slice(0),this.x=$i,this.y=Wn,this.matrix=Wo,this.width=Ld(q),this.height=fc(q),this.outputDestination=qe,this.id="",this.objectNumber=-1};Xm.prototype.restore=function(){ti=this.page,q=this.currentPage,yn=this.pagesContext,Pe=this.pages,$i=this.x,Wn=this.y,Wo=this.matrix,Qm(q,this.width),Zm(q,this.height),qe=this.outputDestination};var _1=function(C,B,le,ge,Ae){ml.push(new Xm),ti=q=0,Pe=[],$i=C,Wn=B,Wo=Ae,Um([le,ge])},vx=function(C){if(fl[C])ml.pop().restore();else{var B=new Xm,le="Xo"+(Object.keys(po).length+1).toString(10);B.id=le,fl[C]=le,po[le]=B,hr.publish("addFormObject",B),ml.pop().restore()}};for(var bh in h.beginFormObject=function(C,B,le,ge,Ae){return _1(C,B,le,ge,Ae),this},h.endFormObject=function(C){return vx(C),this},h.doFormObject=function(C,B){var le=po[fl[C]];return se("q"),se(B.toString()+" cm"),se("/"+le.id+" Do"),se("Q"),this},h.getFormObject=function(C){var B=po[fl[C]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},h.save=function(C,B){return C=C||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(th(hh(hu()),C),typeof th.unload=="function"&&on.setTimeout&&setTimeout(th.unload,911),this):new Promise(function(le,ge){try{var Ae=th(hh(hu()),C);typeof th.unload=="function"&&on.setTimeout&&setTimeout(th.unload,911),le(Ae)}catch(He){ge(He.message)}})},Jt.API)Jt.API.hasOwnProperty(bh)&&(bh==="events"&&Jt.API.events.length?function(C,B){var le,ge,Ae;for(Ae=B.length-1;Ae!==-1;Ae--)le=B[Ae][0],ge=B[Ae][1],C.subscribe.apply(C,[le].concat(typeof ge=="function"?[ge]:ge))}(hr,Jt.API.events):h[bh]=Jt.API[bh]);var Ld=h.getPageWidth=function(C){return(yn[C=C||q].mediaBox.topRightX-yn[C].mediaBox.bottomLeftX)/_t},Qm=h.setPageWidth=function(C,B){yn[C].mediaBox.topRightX=B*_t+yn[C].mediaBox.bottomLeftX},fc=h.getPageHeight=function(C){return(yn[C=C||q].mediaBox.topRightY-yn[C].mediaBox.bottomLeftY)/_t},Zm=h.setPageHeight=function(C,B){yn[C].mediaBox.topRightY=B*_t+yn[C].mediaBox.bottomLeftY};return h.internal={pdfEscape:la,getStyle:h1,getFont:hx,getFontSize:lt,getCharSpace:gx,getTextColor:mx,getLineHeight:g1,getLineHeightFactor:y1,getLineWidth:gh,write:zt,getHorizontalCoordinate:_l,getVerticalCoordinate:fu,getCoordinateString:fx,getVerticalCoordinateString:hc,collections:{},newObject:Pi,newAdditionalObject:oh,newObjectDeferred:Ci,newObjectDeferredBegin:Oa,getFilters:vl,putStream:as,events:hr,scaleFactor:_t,pageSize:{getWidth:function(){return Ld(q)},setWidth:function(C){Qm(q,C)},getHeight:function(){return fc(q)},setHeight:function(C){Zm(q,C)}},encryptionOptions:c,encryption:Io,getEncryptor:sx,output:fh,getNumberOfPages:nx,pages:Pe,out:se,f2:N,f3:T,getPageInfo:p1,getPageInfoByObjId:fn,getCurrentPageInfo:lx,getPDFVersion:m,Point:yh,Rectangle:Ym,Matrix:en,hasHotfix:d1},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ld(q)},set:function(C){Qm(q,C)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return fc(q)},set:function(C){Zm(q,C)},enumerable:!0,configurable:!0}),ex.call(h,Xe),Pn="F1",l1(i,e),hr.publish("initialized"),h}Rm.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Rm.prototype.toHexString=function(t){return t.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rm.prototype.hexToBytes=function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(String.fromCharCode(parseInt(t.substr(e,2),16)));return n.join("")},Rm.prototype.processOwnerPassword=function(t,n){return uA(lA(n).substr(0,5),t)},Rm.prototype.encryptor=function(t,n){var e=lA(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return uA(e,r)}},Ww.prototype.equals=function(t){var n,e="id,objectNumber,equals";if(!t||Ir(t)!==Ir(this))return!1;var r=0;for(n in this)if(!(e.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!t.hasOwnProperty(n)||this[n]!==t[n])return!1;r++}for(n in t)t.hasOwnProperty(n)&&e.indexOf(n)<0&&r--;return r===0},Jt.API={events:[]},Jt.version="2.5.2";var hi=Jt.API,hA=1,ih=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},km=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wn=function(t){return t.toFixed(2)},Td=function(t){return t.toFixed(5)};hi.__acroform__={};var Fa=function(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t},Yj=function(t){return t*hA},lu=function(t){var n=new pU,e=Pt.internal.getHeight(t)||0,r=Pt.internal.getWidth(t)||0;return n.BBox=[0,0,Number(wn(r)),Number(wn(e))],n},TCe=hi.__acroform__.setBit=function(t,n){if(t=t||0,n=n||0,isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<n},ACe=hi.__acroform__.clearBit=function(t,n){if(t=t||0,n=n||0,isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<n)},kCe=hi.__acroform__.getBit=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<n?1:0},_i=hi.__acroform__.getBitForPdf=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kCe(t,n-1)},wi=hi.__acroform__.setBitForPdf=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TCe(t,n-1)},xi=hi.__acroform__.clearBitForPdf=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ACe(t,n-1)},MCe=hi.__acroform__.calculateCoordinates=function(t,n){var e=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=t[0],o=t[1],a=t[2],s=t[3],l={};return l.lowerLeft_X=e(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=e(i+a)||0,l.upperRight_Y=r(o)||0,[Number(wn(l.lowerLeft_X)),Number(wn(l.lowerLeft_Y)),Number(wn(l.upperRight_X)),Number(wn(l.upperRight_Y))]},RCe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var n=[],e=t._V||t.DV,r=cA(t,e),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(t.scope.__private__.encodeColorString(t.color)),n.push("/"+i+" "+wn(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var o=lu(t);return o.scope=t.scope,o.stream=n.join(`
`),o}},cA=function(t,n){var e=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=t.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var o=e,a=Pt.internal.getHeight(t)||0;a=a<0?-a:a;var s=Pt.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(T,M,H){if(T+1<i.length){var V=M+" "+i[T+1][0];return Lw(V,t,H).width<=s-4}return!1};o++;e:for(;o>0;){n="",o--;var u,c,d=Lw("3",t,o).height,p=t.multiline?a-o:(a-d)/2,h=p+=2,f=0,m=0,g=0;if(o<=0){n=`(...) Tj
`,n+="% Width of Text: "+Lw(n,t,o=12).width+", FieldWidth:"+s+`
`;break}for(var y="",b=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var x=!1;if(i[w].length!==1&&g!==i[w].length-1){if((d+2)*(b+2)+2>a)continue e;y+=i[w][g],x=!0,m=w,w--}else{y=(y+=i[w][g]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var I=parseInt(w),D=l(I,y,o),A=w>=i.length-1;if(D&&!A){y+=" ",g=0;continue}if(D||A){if(A)m=I;else if(t.multiline&&(d+2)*(b+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(b+2)+2>a)continue e;m=I}}for(var E="",R=f;R<=m;R++){var N=i[R];if(t.multiline){if(R===m){E+=N[g]+" ",g=(g+1)%N.length;continue}if(R===f){E+=N[N.length-1]+" ";continue}}E+=N[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,c=Lw(E,t,o).width,t.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;case"left":default:u=2}n+=wn(u)+" "+wn(h)+` Td
`,n+="("+ih(E)+`) Tj
`,n+=-wn(u)+` 0 Td
`,h=-(o+2),c=0,f=x?m:m+1,b++,y=""}break}return r.text=n,r.fontSize=o,r},Lw=function(t,n,e){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},NCe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FCe=function(t,n){var e={type:"reference",object:t};n.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===e.type&&r.object===e.object})===void 0&&n.internal.getPageInfo(t.page).pageContext.annotations.push(e)},OCe=function(t,n){for(var e in t)if(t.hasOwnProperty(e)){var r=e,i=t[e];n.internal.newObjectDeferredBegin(i.objId,!0),Ir(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},PCe=function(t,n){if(n.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(dl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(NCe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");hA=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new hU,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&FCe(o,e)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(e){(function(r,i){var o=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var s=r[a],l=[],u=s.Rect;if(s.Rect&&(s.Rect=MCe(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Pt.createDefaultAppearanceStream(s),Ir(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var c=RCe(s);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(s.appearanceStreamContent){var d="";for(var p in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(p)){var h=s.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var a in h)if(h.hasOwnProperty(a)){var f=h[a];typeof f=="function"&&(f=f.call(i,s)),d+="/"+a+" "+f+" ",i.internal.acroformPlugin.xForms.indexOf(f)>=0||i.internal.acroformPlugin.xForms.push(f)}}else typeof(f=h)=="function"&&(f=f.call(i,s)),d+="/"+a+" "+f,i.internal.acroformPlugin.xForms.indexOf(f)>=0||i.internal.acroformPlugin.xForms.push(f);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}o&&OCe(i.internal.acroformPlugin.xForms,i)})(e,t)}),t.internal.acroformPlugin.isInitialized=!0}},dU=hi.__acroform__.arrayToPdfArray=function(t,n,e){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),Ir(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(n!==void 0&&e&&(r=e.internal.getEncryptor(n)),i+="("+ih(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},iA=function(t,n,e){var r=function(i){return i};return n!==void 0&&e&&(r=e.internal.getEncryptor(n)),(t=t||"").toString(),t="("+ih(r(t))+")"},uu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uu.prototype.toString=function(){return this.objId+" 0 R"},uu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},uu.prototype.getKeyValueListForStream=function(){var t=[],n=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var e in n)if(Object.getOwnPropertyDescriptor(this,n[e]).configurable===!1){var r=n[e],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:dU(i,this.objId,this.scope)}):i instanceof uu?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var pU=function(){uu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};Fa(pU,uu);var hU=function(){uu.call(this);var t,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(r){return r};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+ih(e(t))+")"}},set:function(e){t=e}})};Fa(hU,uu);var dl=function t(){uu.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');n=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_i(n,3)},set:function(y){y?this.F=wi(n,3):this.F=xi(n,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');e=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof qw)return;o="FieldObject"+t.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ih(y(o))+")"},set:function(y){o=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(y){o=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/hA:u},set:function(y){u=y}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof qw||this instanceof rh))return iA(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof co?p:iA(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof co?y:y.substr(0,1)==="("?km(y.substr(1,y.length-2)):km(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof co?km(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof co?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof co?h:iA(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof co?y:y.substr(0,1)==="("?km(y.substr(1,y.length-2)):km(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof co?km(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof co?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(y){f=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,1)},set:function(y){y?this.Ff=wi(this.Ff,1):this.Ff=xi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,2)},set:function(y){y?this.Ff=wi(this.Ff,2):this.Ff=xi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,3)},set:function(y){y?this.Ff=wi(this.Ff,3):this.Ff=xi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');g=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(g){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};Fa(dl,uu);var Om=function(){dl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dU(n,this.objId,this.scope)},set:function(e){var r,i;i=[],typeof(r=e)=="string"&&(i=function(o,a,s){s||(s=1);for(var l,u=[];l=a.exec(o);)u.push(l[s]);return u}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(e){n=e,this.sort&&n.sort()},this.addOption=function(e){e=(e=e||"").toString(),n.push(e),this.sort&&n.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();n.indexOf(e)!==-1&&(n.splice(n.indexOf(e),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,18)},set:function(e){e?this.Ff=wi(this.Ff,18):this.Ff=xi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=wi(this.Ff,19):this.Ff=xi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,20)},set:function(e){e?(this.Ff=wi(this.Ff,20),n.sort()):this.Ff=xi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,22)},set:function(e){e?this.Ff=wi(this.Ff,22):this.Ff=xi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(e){e?this.Ff=wi(this.Ff,23):this.Ff=xi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,27)},set:function(e){e?this.Ff=wi(this.Ff,27):this.Ff=xi(this.Ff,27)}}),this.hasAppearanceStream=!1};Fa(Om,dl);var Pm=function(){Om.call(this),this.fontName="helvetica",this.combo=!1};Fa(Pm,Om);var Lm=function(){Pm.call(this),this.combo=!0};Fa(Lm,Pm);var jw=function(){Lm.call(this),this.edit=!0};Fa(jw,Lm);var co=function(){dl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,15)},set:function(e){e?this.Ff=wi(this.Ff,15):this.Ff=xi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,16)},set:function(e){e?this.Ff=wi(this.Ff,16):this.Ff=xi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,17)},set:function(e){e?this.Ff=wi(this.Ff,17):this.Ff=xi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(e){e?this.Ff=wi(this.Ff,26):this.Ff=xi(this.Ff,26)}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(o){return o};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+ih(e(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){Ir(e)==="object"&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){typeof e=="string"&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};Fa(co,dl);var Uw=function(){co.call(this),this.pushButton=!0};Fa(Uw,co);var Bm=function(){co.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n!==void 0?n:[]}})};Fa(Bm,co);var qw=function(){var t,n;dl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),r)a.push("/"+o+" ("+ih(i(r[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ir(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fa(qw,dl),Bm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var e=this.Kids[n];e.appearanceStreamContent=t.createAppearanceStream(e.optionName),e.caption=t.getCA()}},Bm.prototype.createOption=function(t){var n=new qw;return n.Parent=this,n.optionName=t,this.Kids.push(n),LCe.call(this.scope,n),n};var Hw=function(){co.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pt.CheckBox.createAppearanceStream()};Fa(Hw,co);var rh=function(){dl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,13)},set:function(n){n?this.Ff=wi(this.Ff,13):this.Ff=xi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,21)},set:function(n){n?this.Ff=wi(this.Ff,21):this.Ff=xi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(n){n?this.Ff=wi(this.Ff,23):this.Ff=xi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,24)},set:function(n){n?this.Ff=wi(this.Ff,24):this.Ff=xi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,25)},set:function(n){n?this.Ff=wi(this.Ff,25):this.Ff=xi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(n){n?this.Ff=wi(this.Ff,26):this.Ff=xi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){Number.isInteger(n)&&(t=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fa(rh,dl);var zw=function(){rh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,14)},set:function(t){t?this.Ff=wi(this.Ff,14):this.Ff=xi(this.Ff,14)}}),this.password=!0};Fa(zw,rh);var Pt={CheckBox:{createAppearanceStream:function(){return{N:{On:Pt.CheckBox.YesNormal},D:{On:Pt.CheckBox.YesPushDown,Off:Pt.CheckBox.OffPushDown}}},YesPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=cA(t,t.caption);return e.push("0.749023 g"),e.push("0 0 "+wn(Pt.internal.getWidth(t))+" "+wn(Pt.internal.getHeight(t))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+r+" "+wn(o.fontSize)+" Tf "+i),e.push("BT"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC"),n.stream=e.join(`
`),n},YesNormal:function(t){var n=lu(t);n.scope=t.scope;var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=Pt.internal.getHeight(t),a=Pt.internal.getWidth(t),s=cA(t,t.caption);return i.push("1 g"),i.push("0 0 "+wn(a)+" "+wn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+wn(a-1)+" "+wn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+wn(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+wn(Pt.internal.getWidth(t))+" "+wn(Pt.internal.getHeight(t))+" re"),e.push("f"),n.stream=e.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(t){var n={D:{Off:Pt.RadioButton.Circle.OffPushDown},N:{}};return n.N[t]=Pt.RadioButton.Circle.YesNormal,n.D[t]=Pt.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(t){var n=lu(t);n.scope=t.scope;var e=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Pt.internal.Bezier_C,o=Number((r*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Td(Pt.internal.getWidth(t)/2)+" "+Td(Pt.internal.getHeight(t)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),e.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),e.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),e.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),e.push("f"),e.push("Q"),n.stream=e.join(`
`),n},YesPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Pt.internal.Bezier_C).toFixed(5)),a=Number((r*Pt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Td(Pt.internal.getWidth(t)/2)+" "+Td(Pt.internal.getHeight(t)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Td(Pt.internal.getWidth(t)/2)+" "+Td(Pt.internal.getHeight(t)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),e.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),e.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),e.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),e.push("f"),e.push("Q"),n.stream=e.join(`
`),n},OffPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Pt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Td(Pt.internal.getWidth(t)/2)+" "+Td(Pt.internal.getHeight(t)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),n.stream=e.join(`
`),n}},Cross:{createAppearanceStream:function(t){var n={D:{Off:Pt.RadioButton.Cross.OffPushDown},N:{}};return n.N[t]=Pt.RadioButton.Cross.YesNormal,n.D[t]=Pt.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(t){var n=lu(t);n.scope=t.scope;var e=[],r=Pt.internal.calculateCross(t);return e.push("q"),e.push("1 1 "+wn(Pt.internal.getWidth(t)-2)+" "+wn(Pt.internal.getHeight(t)-2)+" re"),e.push("W"),e.push("n"),e.push(wn(r.x1.x)+" "+wn(r.x1.y)+" m"),e.push(wn(r.x2.x)+" "+wn(r.x2.y)+" l"),e.push(wn(r.x4.x)+" "+wn(r.x4.y)+" m"),e.push(wn(r.x3.x)+" "+wn(r.x3.y)+" l"),e.push("s"),e.push("Q"),n.stream=e.join(`
`),n},YesPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=Pt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+wn(Pt.internal.getWidth(t))+" "+wn(Pt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+wn(Pt.internal.getWidth(t)-2)+" "+wn(Pt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wn(e.x1.x)+" "+wn(e.x1.y)+" m"),r.push(wn(e.x2.x)+" "+wn(e.x2.y)+" l"),r.push(wn(e.x4.x)+" "+wn(e.x4.y)+" m"),r.push(wn(e.x3.x)+" "+wn(e.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(t){var n=lu(t);n.scope=t.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+wn(Pt.internal.getWidth(t))+" "+wn(Pt.internal.getHeight(t))+" re"),e.push("f"),n.stream=e.join(`
`),n}}},createDefaultAppearanceStream:function(t){var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,e=t.scope.__private__.encodeColorString(t.color);return"/"+n+" "+t.fontSize+" Tf "+e}};Pt.internal={Bezier_C:.551915024494,calculateCross:function(t){var n=Pt.internal.getWidth(t),e=Pt.internal.getHeight(t),r=Math.min(n,e);return{x1:{x:(n-r)/2,y:(e-r)/2+r},x2:{x:(n-r)/2+r,y:(e-r)/2},x3:{x:(n-r)/2,y:(e-r)/2},x4:{x:(n-r)/2+r,y:(e-r)/2+r}}}},Pt.internal.getWidth=function(t){var n=0;return Ir(t)==="object"&&(n=Yj(t.Rect[2])),n},Pt.internal.getHeight=function(t){var n=0;return Ir(t)==="object"&&(n=Yj(t.Rect[3])),n};var LCe=hi.addField=function(t){if(PCe(this,t),!(t instanceof dl))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=t).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};hi.AcroFormChoiceField=Om,hi.AcroFormListBox=Pm,hi.AcroFormComboBox=Lm,hi.AcroFormEditBox=jw,hi.AcroFormButton=co,hi.AcroFormPushButton=Uw,hi.AcroFormRadioButton=Bm,hi.AcroFormCheckBox=Hw,hi.AcroFormTextField=rh,hi.AcroFormPasswordField=zw,hi.AcroFormAppearance=Pt,hi.AcroForm={ChoiceField:Om,ListBox:Pm,ComboBox:Lm,EditBox:jw,Button:co,PushButton:Uw,RadioButton:Bm,CheckBox:Hw,TextField:rh,PasswordField:zw,Appearance:Pt},Jt.AcroForm={ChoiceField:Om,ListBox:Pm,ComboBox:Lm,EditBox:jw,Button:co,PushButton:Uw,RadioButton:Bm,CheckBox:Hw,TextField:rh,PasswordField:zw,Appearance:Pt};var UHe=Jt.AcroForm;function fU(t){return t.reduce(function(n,e,r){return n[e]=r,n},{})}(function(t){t.__addimage__={};var n="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(T,M){var H,V,X,Y,Q,G=n;if((M=M||n)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(D(T))for(Q in e)for(X=e[Q],H=0;H<X.length;H+=1){for(Y=!0,V=0;V<X[H].length;V+=1)if(X[H][V]!==void 0&&X[H][V]!==T[V]){Y=!1;break}if(Y===!0){G=Q;break}}else for(Q in e)for(X=e[Q],H=0;H<X.length;H+=1){for(Y=!0,V=0;V<X[H].length;V+=1)if(X[H][V]!==void 0&&X[H][V]!==T.charCodeAt(V)){Y=!1;break}if(Y===!0){G=Q;break}}return G===n&&M!==n&&(G=M),G},i=function T(M){for(var H=this.internal.write,V=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:M.width}),Y.push({key:"Height",value:M.height}),M.colorSpace===g.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===g.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var Q="",G=0,re=M.transparency.length;G<re;G++)Q+=M.transparency[G]+" "+M.transparency[G]+" ";Y.push({key:"Mask",value:"["+Q+"]"})}M.sMask!==void 0&&Y.push({key:"SMask",value:M.objectId+1+" 0 R"});var ue=M.filter!==void 0?["/"+M.filter]:void 0;if(V({data:M.data,additionalKeyValues:Y,alreadyAppliedFilters:ue,objectId:M.objectId}),H("endobj"),"sMask"in M&&M.sMask!==void 0){var Te="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,F={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:Te,data:M.sMask};"filter"in M&&(F.filter=M.filter),T.call(this,F)}if(M.colorSpace===g.INDEXED){var q=this.internal.newObject();V({data:E(new Uint8Array(M.palette)),objectId:q}),H("endobj")}},o=function(){var T=this.internal.collections.addImage_images;for(var M in T)i.call(this,T[M])},a=function(){var T,M=this.internal.collections.addImage_images,H=this.internal.write;for(var V in M)H("/I"+(T=M[V]).index,T.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var T=this.internal.collections.addImage_images;return s.call(this),T},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(T){return typeof t["process"+T.toUpperCase()]=="function"},d=function(T){return Ir(T)==="object"&&T.nodeType===1},p=function(T,M){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var H=""+T.getAttribute("src");if(H.indexOf("data:image/")===0)return e1(unescape(H).split("base64,").pop());var V=t.loadFile(H,!0);if(V!==void 0)return V}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var X;switch(M){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return e1(T.toDataURL(X,1).split("base64,").pop())}},h=function(T){var M=this.internal.collections.addImage_images;if(M){for(var H in M)if(T===M[H].alias)return M[H]}},f=function(T,M,H){return T||M||(T=-96,M=-96),T<0&&(T=-1*H.width*72/T/this.internal.scaleFactor),M<0&&(M=-1*H.height*72/M/this.internal.scaleFactor),T===0&&(T=M*H.width/H.height),M===0&&(M=T*H.height/H.width),[T,M]},m=function(T,M,H,V,X,Y){var Q=f.call(this,H,V,X),G=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,ue=l.call(this);if(H=Q[0],V=Q[1],ue[X.index]=X,Y){Y*=Math.PI/180;var Te=Math.cos(Y),F=Math.sin(Y),q=function(ae){return ae.toFixed(4)},Z=[q(Te),q(F),q(-1*F),q(Te),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,G(T),re(M+V),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([G(H),"0","0",G(V),"0","0","cm"].join(" "))):this.internal.write([G(H),"0","0",G(V),G(T),re(M+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(T){var M,H,V=0;if(typeof T=="string")for(H=T.length,M=0;M<H;M++)V=(V<<5)-V+T.charCodeAt(M),V|=0;else if(D(T))for(H=T.byteLength/2,M=0;M<H;M++)V=(V<<5)-V+T[M],V|=0;return V},w=t.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var M=!0;return T.length===0&&(M=!1),T.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(M=!1),M},x=t.__addimage__.extractImageFromDataUrl=function(T){var M=(T=T||"").split("base64,"),H=null;if(M.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(M[0]);Array.isArray(V)&&(H={mimeType:V[1],charset:V[2],data:M[1]})}return H},I=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(T){return I()&&T instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(T){return I()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},A=t.__addimage__.binaryStringToUint8Array=function(T){for(var M=T.length,H=new Uint8Array(M),V=0;V<M;V++)H[V]=T.charCodeAt(V);return H},E=t.__addimage__.arrayBufferToBinaryString=function(T){for(var M="",H=D(T)?T:new Uint8Array(T),V=0;V<H.length;V+=8192)M+=String.fromCharCode.apply(null,H.subarray(V,V+8192));return M};t.addImage=function(){var T,M,H,V,X,Y,Q,G,re;if(typeof arguments[1]=="number"?(M=n,H=arguments[1],V=arguments[2],X=arguments[3],Y=arguments[4],Q=arguments[5],G=arguments[6],re=arguments[7]):(M=arguments[1],H=arguments[2],V=arguments[3],X=arguments[4],Y=arguments[5],Q=arguments[6],G=arguments[7],re=arguments[8]),Ir(T=arguments[0])==="object"&&!d(T)&&"imageData"in T){var ue=T;T=ue.imageData,M=ue.format||M||n,H=ue.x||H||0,V=ue.y||V||0,X=ue.w||ue.width||X,Y=ue.h||ue.height||Y,Q=ue.alias||Q,G=ue.compression||G,re=ue.rotation||ue.angle||re}var Te=this.internal.getFilters();if(G===void 0&&Te.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(H)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var F=R.call(this,T,M,Q,G);return m.call(this,H,V,X,Y,F,re),this};var R=function(T,M,H,V){var X,Y,Q;if(typeof T=="string"&&r(T)===n){T=unescape(T);var G=N(T,!1);(G!==""||(G=t.loadFile(T,!0))!==void 0)&&(T=G)}if(d(T)&&(T=p(T,M)),M=r(T,M),!c(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((Q=H)==null||Q.length===0)&&(H=function(re){return typeof re=="string"||D(re)?b(re):D(re.data)?b(re.data):null}(T)),(X=h.call(this,H))||(I()&&(T instanceof Uint8Array||M==="RGBA"||(Y=T,T=A(T))),X=this["process"+M.toUpperCase()](T,u.call(this),H,function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in t.image_compression?re:y.NONE}(V),Y)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},N=t.__addimage__.convertBase64ToBinaryString=function(T,M){var H;M=typeof M!="boolean"||M;var V,X="";if(typeof T=="string"){V=(H=x(T))!==null?H.data:T;try{X=e1(V)}catch(Y){if(M)throw w(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(T){var M,H,V="";if(d(T)&&(T=p(T)),typeof T=="string"&&r(T)===n&&((V=N(T,!1))===""&&(V=t.loadFile(T)||""),T=V),H=r(T),!c(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!I()||T instanceof Uint8Array||(T=A(T)),!(M=this["process"+H.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=H,M}})(Jt.API),function(t){var n=function(e){if(e!==void 0&&e!="")return!0};Jt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(e){for(var r,i,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),u=e.pageContext.annotations,c=!1,d=0;d<u.length&&!c;d++)switch((r=u[d]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),b=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",o+=" /Popup "+g.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+h(y(b))+") >>",m.content=o;var w=m.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(o+=" /Open true"),o+=" >>",g.content=o,this.internal.write(m.objId,"0 R",g.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var x=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(f(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var I=this.annotations._nameMap[r.options.name];r.options.pageNumber=I.page,r.options.top=I.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(f(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var D=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+D+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(e){var r=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":r.pageContext.annotations.push(e)}},t.link=function(e,r,i,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(e),y:u(r),w:l(e+i),h:u(r+o)},options:a,type:"link"})},t.textWithLink=function(e,r,i,o){var a,s,l=this.getTextWidth(e),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var c=this.splitTextToSize(e,s).length;a=Math.ceil(u*c)}else s=l,a=u;return this.text(e,r,i,o),i+=.2*u,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-u,s,a,o),l},t.getTextWidth=function(e){var r=this.internal.getFontSize();return this.getStringUnitWidth(e)*r/this.internal.scaleFactor}}(Jt.API),function(t){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(m){return n[m.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},s=t.__arabicParser__.isArabicEndLetter=function(m){return a(m)&&o(m)&&n[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return a(m)&&i.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return a(m)&&o(m)&&n[m.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return a(m)&&o(m)&&n[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return a(m)&&o(m)&&n[m.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return a(m)&&o(m)&&n[m.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(m){var g=0,y=e,b="",w=0;for(g=0;g<m.length;g+=1)y[m.charCodeAt(g)]!==void 0?(w++,typeof(y=y[m.charCodeAt(g)])=="number"&&(b+=String.fromCharCode(y),y=e,w=0),g===m.length-1&&(y=e,b+=m.charAt(g-(w-1)),g-=w-1,w=0)):(y=e,b+=m.charAt(g-w),g-=w,w=0);return b};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(m,g,y){return a(m)?o(m)===!1?-1:!u(m)||!a(g)&&!a(y)||!a(y)&&s(g)||s(m)&&!a(g)||s(m)&&l(g)||s(m)&&s(g)?0:c(m)&&a(g)&&!s(g)&&a(y)&&u(y)?3:s(m)||!a(y)?1:2:-1},h=function(m){var g=0,y=0,b=0,w="",x="",I="",D=(m=m||"").split("\\s+"),A=[];for(g=0;g<D.length;g+=1){for(A.push(""),y=0;y<D[g].length;y+=1)w=D[g][y],x=D[g][y-1],I=D[g][y+1],a(w)?(b=p(w,x,I),A[g]+=b!==-1?String.fromCharCode(n[w.charCodeAt(0)][b]):w):A[g]+=w;A[g]=d(A[g])}return A.join(" ")},f=t.__arabicParser__.processArabic=t.processArabic=function(){var m,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(g)){var b=0;for(y=[],b=0;b<g.length;b+=1)Array.isArray(g[b])?y.push([h(g[b][0]),g[b][1],g[b][2]]):y.push([h(g[b])]);m=y}else m=h(g);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",f])}(Jt.API),Jt.API.autoPrint=function(t){var n;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(t){var n=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(s){e=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(e,r){var i;if((e=e||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(Jt.API),function(t){var n={left:0,top:0,bottom:0,right:0},e=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return f},set:function(m){f=m}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,f=0,m=0,g=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,x){return w.concat(g.splitTextToSize(x,y))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)h<(m=this.getStringUnitWidth(l[b],{font:d})*c)&&(h=m);return h!==0&&(f=l.length),{w:h/=p,h:Math.max((f*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,d=this.internal.__cell__.margins||n,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,d,p){if(r.call(this),!c)throw new Error("No data for PDF table.");var h,f,m,g,y=[],b=[],w=[],x={},I={},D=[],A=[],E=(p=p||{}).autoSize||!1,R=p.printHeaders!==!1,N=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},n),M=typeof p.padding=="number"?p.padding:3,H=p.headerBackgroundColor||"#c8c8c8",V=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=V,this.setFontSize(N),d==null)b=y=Object.keys(c[0]),w=y.map(function(){return"left"});else if(Array.isArray(d)&&Ir(d[0])==="object")for(y=d.map(function(ue){return ue.name}),b=d.map(function(ue){return ue.prompt||ue.name||""}),w=d.map(function(ue){return ue.align||"left"}),h=0;h<d.length;h+=1)I[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(b=y=d,w=y.map(function(){return"left"}));if(E||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<y.length;h+=1){for(x[g=y[h]]=c.map(function(ue){return ue[g]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=x[g],this.setFont(void 0,"normal"),m=0;m<f.length;m+=1)D.push(this.getTextDimensions(f[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[g]=Math.max.apply(null,D)+M+M,D=[]}if(R){var X={};for(h=0;h<y.length;h+=1)X[y[h]]={},X[y[h]].text=b[h],X[y[h]].align=w[h];var Y=s.call(this,X,I);A=y.map(function(ue){return new o(l,u,I[ue],Y,X[ue].text,void 0,X[ue].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var Q=d.reduce(function(ue,Te){return ue[Te.name]=Te.align,ue},{});for(h=0;h<c.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:c[h]},this);var G=s.call(this,c[h],I);for(m=0;m<y.length;m+=1){var re=c[h][y[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:m,data:re},this),a.call(this,new o(l,u,I[y[m]],G,re,h+2,Q[y[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var c=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var f=l[h];return this.splitTextToSize(f.hasOwnProperty("text")?f.text:f,u[h]-c-c)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/p+c+c},this).reduce(function(h,f){return Math.max(h,f)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){c=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,p.push(c)),c.lineNumber=l;var f=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,c),this.setTextColor(f)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),e=!1}}(Jt.API);var mU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dA=fU(gU),vU=[100,200,300,400,500,600,700,800,900],BCe=fU(vU);function pA(t){var n=t.family.replace(/"|'/g,"").toLowerCase(),e=function(o){return mU[o=o||"normal"]?o:"normal"}(t.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(o){return typeof dA[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:n,style:e,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:n,style:[i,e,r].join(" ")}}}function Xj(t,n,e,r){var i;for(i=e;i>=0&&i<n.length;i+=r)if(t[n[i]])return t[n[i]];for(i=e;i>=0&&i<n.length;i-=r)if(t[n[i]])return t[n[i]]}var VCe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Qj={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Zj(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jCe(t,n,e){for(var r=(e=e||{}).defaultFontFamily||"times",i=Object.assign({},VCe,e.genericFontFamilies||{}),o=null,a=null,s=0;s<n.length;++s)if(i[(o=pA(n[s])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){a=t[o.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+Zj(o)+"' and default family '"+r+"'.");if(a=function(l,u){if(u[l])return u[l];var c=dA[l],d=c<=dA.normal?-1:1,p=Xj(u,gU,c,d);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(o.stretch,a),a=function(l,u){if(u[l])return u[l];for(var c=mU[l],d=0;d<c.length;++d)if(u[c[d]])return u[c[d]];throw new Error("Could not find a matching font-style for "+l)}(o.style,a),!(a=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=BCe[l],d=Xj(u,vU,c,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Zj(o)+"'.");return a}function Jj(t){return t.trimLeft()}function UCe(t,n){for(var e=0;e<t.length;){if(t.charAt(e)===n)return[t.substring(0,e),t.substring(e+1)];e+=1}return null}function HCe(t){var n=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],t.substring(n[0].length)]}var Bw,eU,tU,oA=["times"];(function(t){var n,e,r,i,o,a,s,l,u,c=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new a,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new a,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),n=this.internal.f2,e=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var d=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=F;Object.defineProperty(this,"pdf",{get:function(){return q}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(ke){Z=!!ke}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(ke){ae=!!ke}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(ke){isNaN(ke)||(pe=ke)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(ke){isNaN(ke)||(fe=ke)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ke){var se;typeof ke=="number"?se=[ke,ke,ke,ke]:((se=new Array(4))[0]=ke[0],se[1]=ke.length>=2?ke[1]:se[0],se[2]=ke.length>=3?ke[2]:se[0],se[3]=ke.length>=4?ke[3]:se[1]),u.margin=se}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ke){me=ke}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(ke){xe=ke}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(ke){je=ke}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ke){ke instanceof c&&(u=ke)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ke){u.path=ke}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(ke){Pe=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var se;se=p(ke),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var se=p(ke);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var Ge=null;function qe(ke,se){if(Ge===null){var zt=function(gt){var Xe=[];return Object.keys(gt).forEach(function(at){gt[at].forEach(function(ut){var lt=null;switch(ut){case"bold":lt={family:at,weight:"bold"};break;case"italic":lt={family:at,style:"italic"};break;case"bolditalic":lt={family:at,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:at}}lt!==null&&(lt.ref={name:at,style:ut},Xe.push(lt))})}),Xe}(ke.getFontList());Ge=function(gt){for(var Xe={},at=0;at<gt.length;++at){var ut=pA(gt[at]),lt=ut.family,Tt=ut.stretch,qt=ut.style,Xt=ut.weight;Xe[lt]=Xe[lt]||{},Xe[lt][Tt]=Xe[lt][Tt]||{},Xe[lt][Tt][qt]=Xe[lt][Tt][qt]||{},Xe[lt][Tt][qt][Xt]=ut}return Xe}(zt.concat(se))}return Ge}var ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(ke){Ge=null,ht=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var se;if(this.ctx.font=ke,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var zt=se[1],gt=(se[2],se[3]),Xe=se[4],at=(se[5],se[6]),ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(ut==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:ut==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var lt=function(Zt){var Pn,_t,$i=[],Wn=Zt.trim();if(Wn==="")return oA;if(Wn in Qj)return[Qj[Wn]];for(;Wn!=="";){switch(_t=null,Pn=(Wn=Jj(Wn)).charAt(0)){case'"':case"'":_t=UCe(Wn.substring(1),Pn);break;default:_t=HCe(Wn)}if(_t===null||($i.push(_t[0]),(Wn=Jj(_t[1]))!==""&&Wn.charAt(0)!==","))return oA;Wn=Wn.replace(/^,/,"")}return $i}(at);if(this.fontFaces){var Tt=jCe(qe(this.pdf,this.fontFaces),lt.map(function(Zt){return{family:Zt,stretch:"normal",weight:gt,style:zt}}));this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var qt="";(gt==="bold"||parseInt(gt,10)>=700||zt==="bold")&&(qt="bold"),zt==="italic"&&(qt+="italic"),qt.length===0&&(qt="normal");for(var Xt="",vn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},hn=0;hn<lt.length;hn++){if(this.pdf.internal.getFont(lt[hn],qt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=lt[hn];break}if(qt==="bolditalic"&&this.pdf.internal.getFont(lt[hn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=lt[hn],qt="bold";else if(this.pdf.internal.getFont(lt[hn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=lt[hn],qt="normal";break}}if(Xt===""){for(var On=0;On<lt.length;On++)if(vn[lt[On]]){Xt=vn[lt[On]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};d.prototype.setLineDash=function(F){this.lineDash=F},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(F,q){if(isNaN(F)||isNaN(q))throw Mr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(F,q));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(F,q)},d.prototype.closePath=function(){var F=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ir(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){F=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(F.x,F.y)},d.prototype.lineTo=function(F,q){if(isNaN(F)||isNaN(q))throw Mr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(F,q));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(F,q,Z,ae){if(isNaN(Z)||isNaN(ae)||isNaN(F)||isNaN(q))throw Mr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new a(Z,ae)),fe=this.ctx.transform.applyToPoint(new a(F,q));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new a(pe.x,pe.y)},d.prototype.bezierCurveTo=function(F,q,Z,ae,pe,fe){if(isNaN(pe)||isNaN(fe)||isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae))throw Mr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new a(pe,fe)),xe=this.ctx.transform.applyToPoint(new a(F,q)),je=this.ctx.transform.applyToPoint(new a(Z,ae));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:je.x,y2:je.y,x:me.x,y:me.y}),this.ctx.lastPoint=new a(me.x,me.y)},d.prototype.arc=function(F,q,Z,ae,pe,fe){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae)||isNaN(pe))throw Mr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new a(F,q));F=me.x,q=me.y;var xe=this.ctx.transform.applyToPoint(new a(0,Z)),je=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(xe.x-je.x,2)+Math.pow(xe.y-je.y,2))}Math.abs(pe-ae)>=2*Math.PI&&(ae=0,pe=2*Math.PI),this.path.push({type:"arc",x:F,y:q,radius:Z,startAngle:ae,endAngle:pe,counterclockwise:fe})},d.prototype.arcTo=function(F,q,Z,ae,pe){throw new Error("arcTo not implemented.")},d.prototype.rect=function(F,q,Z,ae){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae))throw Mr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,q),this.lineTo(F+Z,q),this.lineTo(F+Z,q+ae),this.lineTo(F,q+ae),this.lineTo(F,q),this.lineTo(F+Z,q),this.lineTo(F,q)},d.prototype.fillRect=function(F,q,Z,ae){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae))throw Mr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,q,Z,ae),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},d.prototype.strokeRect=function(F,q,Z,ae){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae))throw Mr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(F,q,Z,ae),this.stroke())},d.prototype.clearRect=function(F,q,Z,ae){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae))throw Mr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,q,Z,ae))},d.prototype.save=function(F){F=typeof F!="boolean"||F;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},d.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(F){var q,Z,ae,pe;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))q=0,Z=0,ae=0,pe=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(fe!==null)q=parseInt(fe[1]),Z=parseInt(fe[2]),ae=parseInt(fe[3]),pe=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)q=parseInt(fe[1]),Z=parseInt(fe[2]),ae=parseInt(fe[3]),pe=parseFloat(fe[4]);else{if(pe=1,typeof F=="string"&&F.charAt(0)!=="#"){var me=new lU(F);F=me.ok?me.toHex():"#000000"}F.length===4?(q=F.substring(1,2),q+=q,Z=F.substring(2,3),Z+=Z,ae=F.substring(3,4),ae+=ae):(q=F.substring(1,3),Z=F.substring(3,5),ae=F.substring(5,7)),q=parseInt(q,16),Z=parseInt(Z,16),ae=parseInt(ae,16)}}return{r:q,g:Z,b:ae,a:pe,style:F}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},f=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(F,q,Z,ae){if(isNaN(q)||isNaN(Z)||typeof F!="string")throw Mr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!h.call(this)){var pe=G(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;M.call(this,{text:F,x:q,y:Z,scale:fe,angle:pe,align:this.textAlign,maxWidth:ae})}},d.prototype.strokeText=function(F,q,Z,ae){if(isNaN(q)||isNaN(Z)||typeof F!="string")throw Mr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){ae=isNaN(ae)?void 0:ae;var pe=G(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;M.call(this,{text:F,x:q,y:Z,scale:fe,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ae})}},d.prototype.measureText=function(F){if(typeof F!="string")throw Mr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Z=this.pdf.internal.scaleFactor,ae=q.internal.getFontSize(),pe=q.getStringUnitWidth(F)*ae/q.internal.scaleFactor,fe=function(me){var xe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new fe({width:pe*=Math.round(96*Z/72*1e4)/1e4})},d.prototype.scale=function(F,q){if(isNaN(F)||isNaN(q))throw Mr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(F,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},d.prototype.rotate=function(F){if(isNaN(F))throw Mr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},d.prototype.translate=function(F,q){if(isNaN(F)||isNaN(q))throw Mr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,F,q);this.ctx.transform=this.ctx.transform.multiply(Z)},d.prototype.transform=function(F,q,Z,ae,pe,fe){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(ae)||isNaN(pe)||isNaN(fe))throw Mr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(F,q,Z,ae,pe,fe);this.ctx.transform=this.ctx.transform.multiply(me)},d.prototype.setTransform=function(F,q,Z,ae,pe,fe){F=isNaN(F)?1:F,q=isNaN(q)?0:q,Z=isNaN(Z)?0:Z,ae=isNaN(ae)?1:ae,pe=isNaN(pe)?0:pe,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(F,q,Z,ae,pe,fe)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(F,q,Z,ae,pe,fe,me,xe,je){var Pe=this.pdf.getImageProperties(F),Ge=1,qe=1,ht=1,ke=1;ae!==void 0&&xe!==void 0&&(ht=xe/ae,ke=je/pe,Ge=Pe.width/ae*xe/ae,qe=Pe.height/pe*je/pe),fe===void 0&&(fe=q,me=Z,q=0,Z=0),ae!==void 0&&xe===void 0&&(xe=ae,je=pe),ae===void 0&&xe===void 0&&(xe=Pe.width,je=Pe.height);for(var se,zt=this.ctx.transform.decompose(),gt=G(zt.rotate.shx),Xe=new l,at=(Xe=(Xe=(Xe=Xe.multiply(zt.translate)).multiply(zt.skew)).multiply(zt.scale)).applyToRectangle(new s(fe-q*ht,me-Z*ke,ae*Ge,pe*qe)),ut=g.call(this,at),lt=[],Tt=0;Tt<ut.length;Tt+=1)lt.indexOf(ut[Tt])===-1&&lt.push(ut[Tt]);if(w(lt),this.autoPaging)for(var qt=lt[0],Xt=lt[lt.length-1],vn=qt;vn<Xt+1;vn++){this.pdf.setPage(vn);var hn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],On=vn===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=vn===1?0:Zt+(vn-2)*Pn;if(this.ctx.clip_path.length!==0){var $i=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(se,this.posX+this.margin[3],-_t+On+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=$i}var Wn=JSON.parse(JSON.stringify(at));Wn=b([Wn],this.posX+this.margin[3],-_t+On+this.ctx.prevPageLastElemOffset)[0];var Wo=(vn>qt||vn<Xt)&&m.call(this);Wo&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hn,Pn,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Wn.x,Wn.y,Wn.w,Wn.h,null,null,gt),Wo&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",at.x,at.y,at.w,at.h,null,null,gt)};var g=function(F,q,Z){var ae=[];q=q||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ae.push(Math.floor((F.y+pe)/Z)+1);break;case"arc":ae.push(Math.floor((F.y+pe-F.radius)/Z)+1),ae.push(Math.floor((F.y+pe+F.radius)/Z)+1);break;case"qct":var fe=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ae.push(Math.floor((fe.y+pe)/Z)+1),ae.push(Math.floor((fe.y+fe.h+pe)/Z)+1);break;case"bct":var me=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ae.push(Math.floor((me.y+pe)/Z)+1),ae.push(Math.floor((me.y+me.h+pe)/Z)+1);break;case"rect":ae.push(Math.floor((F.y+pe)/Z)+1),ae.push(Math.floor((F.y+F.h+pe)/Z)+1)}for(var xe=0;xe<ae.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ae[xe];)y.call(this);return ae},y=function(){var F=this.fillStyle,q=this.strokeStyle,Z=this.font,ae=this.lineCap,pe=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=q,this.font=Z,this.lineCap=ae,this.lineWidth=pe,this.lineJoin=fe},b=function(F,q,Z){for(var ae=0;ae<F.length;ae++)switch(F[ae].type){case"bct":F[ae].x2+=q,F[ae].y2+=Z;case"qct":F[ae].x1+=q,F[ae].y1+=Z;case"mt":case"lt":case"arc":default:F[ae].x+=q,F[ae].y+=Z}return F},w=function(F){return F.sort(function(q,Z){return q-Z})},x=function(F,q){for(var Z,ae,pe=this.fillStyle,fe=this.strokeStyle,me=this.lineCap,xe=this.lineWidth,je=Math.abs(xe*this.ctx.transform.scaleX),Pe=this.lineJoin,Ge=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ht=[],ke=0;ke<qe.length;ke++)if(qe[ke].x!==void 0)for(var se=g.call(this,qe[ke]),zt=0;zt<se.length;zt+=1)ht.indexOf(se[zt])===-1&&ht.push(se[zt]);for(var gt=0;gt<ht.length;gt++)for(;this.pdf.internal.getNumberOfPages()<ht[gt];)y.call(this);if(w(ht),this.autoPaging)for(var Xe=ht[0],at=ht[ht.length-1],ut=Xe;ut<at+1;ut++){this.pdf.setPage(ut),this.fillStyle=pe,this.strokeStyle=fe,this.lineCap=me,this.lineWidth=je,this.lineJoin=Pe;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ut===1?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vn=ut===1?0:qt+(ut-2)*Xt;if(this.ctx.clip_path.length!==0){var hn=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Z,this.posX+this.margin[3],-vn+Tt+this.ctx.prevPageLastElemOffset),I.call(this,F,!0),this.path=hn}if(ae=JSON.parse(JSON.stringify(Ge)),this.path=b(ae,this.posX+this.margin[3],-vn+Tt+this.ctx.prevPageLastElemOffset),q===!1||ut===0){var On=(ut>Xe||ut<at)&&m.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Xt,null).clip().discardPath()),I.call(this,F,q),On&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=je,I.call(this,F,q),this.lineWidth=xe;this.path=Ge},I=function(F,q){if((F!=="stroke"||q||!f.call(this))&&(F==="stroke"||q||!h.call(this))){for(var Z,ae,pe=[],fe=this.path,me=0;me<fe.length;me++){var xe=fe[me];switch(xe.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:xe,deltas:[],abs:[]});break;case"lt":var je=pe.length;if(fe[me-1]&&!isNaN(fe[me-1].x)&&(Z=[xe.x-fe[me-1].x,xe.y-fe[me-1].y],je>0)){for(;je>=0;je--)if(pe[je-1].close!==!0&&pe[je-1].begin!==!0){pe[je-1].deltas.push(Z),pe[je-1].abs.push(xe);break}}break;case"bct":Z=[xe.x1-fe[me-1].x,xe.y1-fe[me-1].y,xe.x2-fe[me-1].x,xe.y2-fe[me-1].y,xe.x-fe[me-1].x,xe.y-fe[me-1].y],pe[pe.length-1].deltas.push(Z);break;case"qct":var Pe=fe[me-1].x+2/3*(xe.x1-fe[me-1].x),Ge=fe[me-1].y+2/3*(xe.y1-fe[me-1].y),qe=xe.x+2/3*(xe.x1-xe.x),ht=xe.y+2/3*(xe.y1-xe.y),ke=xe.x,se=xe.y;Z=[Pe-fe[me-1].x,Ge-fe[me-1].y,qe-fe[me-1].x,ht-fe[me-1].y,ke-fe[me-1].x,se-fe[me-1].y],pe[pe.length-1].deltas.push(Z);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(xe)}}ae=q?null:F==="stroke"?"stroke":"fill";for(var zt=!1,gt=0;gt<pe.length;gt++)if(pe[gt].arc)for(var Xe=pe[gt].abs,at=0;at<Xe.length;at++){var ut=Xe[at];ut.type==="arc"?E.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,q,!zt):H.call(this,ut.x,ut.y),zt=!0}else if(pe[gt].close===!0)this.pdf.internal.out("h"),zt=!1;else if(pe[gt].begin!==!0){var lt=pe[gt].start.x,Tt=pe[gt].start.y;V.call(this,pe[gt].deltas,lt,Tt),zt=!0}ae&&R.call(this,ae),q&&N.call(this)}},D=function(F){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Z;case"top":return F+q-Z;case"hanging":return F+q-2*Z;case"middle":return F+q/2-Z;case"ideographic":return F;case"alphabetic":default:return F}},A=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(q,Z){this.colorStops.push([q,Z])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(F,q,Z,ae,pe,fe,me,xe,je){for(var Pe=Y.call(this,Z,ae,pe,fe),Ge=0;Ge<Pe.length;Ge++){var qe=Pe[Ge];Ge===0&&(je?T.call(this,qe.x1+F,qe.y1+q):H.call(this,qe.x1+F,qe.y1+q)),X.call(this,F,q,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}xe?N.call(this):R.call(this,me)},R=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},N=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(F,q){this.pdf.internal.out(e(F)+" "+r(q)+" m")},M=function(F){var q;switch(F.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Z=this.pdf.getTextDimensions(F.text),ae=D.call(this,F.y),pe=A.call(this,ae)-Z.h,fe=this.ctx.transform.applyToPoint(new a(F.x,ae)),me=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var je,Pe,Ge,qe=this.ctx.transform.applyToRectangle(new s(F.x,ae,Z.w,Z.h)),ht=xe.applyToRectangle(new s(F.x,pe,Z.w,Z.h)),ke=g.call(this,ht),se=[],zt=0;zt<ke.length;zt+=1)se.indexOf(ke[zt])===-1&&se.push(ke[zt]);if(w(se),this.autoPaging)for(var gt=se[0],Xe=se[se.length-1],at=gt;at<Xe+1;at++){this.pdf.setPage(at);var ut=at===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],qt=Tt-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],vn=Xt-this.margin[3],hn=at===1?0:lt+(at-2)*qt;if(this.ctx.clip_path.length!==0){var On=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(je,this.posX+this.margin[3],-1*hn+ut),I.call(this,"fill",!0),this.path=On}var Zt=b([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-hn+ut+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*F.scale),Ge=this.lineWidth,this.lineWidth=Ge*F.scale);var Pn=this.autoPaging!=="text";if(Pn||Zt.y+Zt.h<=Tt){if(Pn||Zt.y>=ut&&Zt.x<=Xt){var _t=Pn?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Xt-Zt.x)[0],$i=b([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-hn+ut+this.ctx.prevPageLastElemOffset)[0],Wn=Pn&&(at>gt||at<Xe)&&m.call(this);Wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vn,qt,null).clip().discardPath()),this.pdf.text(_t,$i.x,$i.y,{angle:F.angle,align:q,renderingMode:F.renderingMode}),Wn&&this.pdf.restoreGraphicsState()}}else Zt.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-Zt.y);F.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ge)}else F.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*F.scale),Ge=this.lineWidth,this.lineWidth=Ge*F.scale),this.pdf.text(F.text,fe.x+this.posX,fe.y+this.posY,{angle:F.angle,align:q,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ge)},H=function(F,q,Z,ae){Z=Z||0,ae=ae||0,this.pdf.internal.out(e(F+Z)+" "+r(q+ae)+" l")},V=function(F,q,Z){return this.pdf.lines(F,q,Z,null,null)},X=function(F,q,Z,ae,pe,fe,me,xe){this.pdf.internal.out([n(i(Z+F)),n(o(ae+q)),n(i(pe+F)),n(o(fe+q)),n(i(me+F)),n(o(xe+q)),"c"].join(" "))},Y=function(F,q,Z,ae){for(var pe=2*Math.PI,fe=Math.PI/2;q>Z;)q-=pe;var me=Math.abs(Z-q);me<pe&&ae&&(me=pe-me);for(var xe=[],je=ae?-1:1,Pe=q;me>1e-5;){var Ge=Pe+je*Math.min(me,fe);xe.push(Q.call(this,F,Pe,Ge)),me-=Math.abs(Ge-Pe),Pe=Ge}return xe},Q=function(F,q,Z){var ae=(Z-q)/2,pe=F*Math.cos(ae),fe=F*Math.sin(ae),me=pe,xe=-fe,je=me*me+xe*xe,Pe=je+me*pe+xe*fe,Ge=4/3*(Math.sqrt(2*je*Pe)-Pe)/(me*fe-xe*pe),qe=me-Ge*xe,ht=xe+Ge*me,ke=qe,se=-ht,zt=ae+q,gt=Math.cos(zt),Xe=Math.sin(zt);return{x1:F*Math.cos(q),y1:F*Math.sin(q),x2:qe*gt-ht*Xe,y2:qe*Xe+ht*gt,x3:ke*gt-se*Xe,y3:ke*Xe+se*gt,x4:F*Math.cos(Z),y4:F*Math.sin(Z)}},G=function(F){return 180*F/Math.PI},re=function(F,q,Z,ae,pe,fe){var me=F+.5*(Z-F),xe=q+.5*(ae-q),je=pe+.5*(Z-pe),Pe=fe+.5*(ae-fe),Ge=Math.min(F,pe,me,je),qe=Math.max(F,pe,me,je),ht=Math.min(q,fe,xe,Pe),ke=Math.max(q,fe,xe,Pe);return new s(Ge,ht,qe-Ge,ke-ht)},ue=function(F,q,Z,ae,pe,fe,me,xe){var je,Pe,Ge,qe,ht,ke,se,zt,gt,Xe,at,ut,lt,Tt,qt=Z-F,Xt=ae-q,vn=pe-Z,hn=fe-ae,On=me-pe,Zt=xe-fe;for(Pe=0;Pe<41;Pe++)gt=(se=(Ge=F+(je=Pe/40)*qt)+je*((ht=Z+je*vn)-Ge))+je*(ht+je*(pe+je*On-ht)-se),Xe=(zt=(qe=q+je*Xt)+je*((ke=ae+je*hn)-qe))+je*(ke+je*(fe+je*Zt-ke)-zt),Pe==0?(at=gt,ut=Xe,lt=gt,Tt=Xe):(at=Math.min(at,gt),ut=Math.min(ut,Xe),lt=Math.max(lt,gt),Tt=Math.max(Tt,Xe));return new s(Math.round(at),Math.round(ut),Math.round(lt-at),Math.round(Tt-ut))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,q,Z=(F=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:q}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Jt.API),function(t){var n=function(o){var a,s,l,u,c,d,p,h,f,m;for(/[^\x00-\xFF]/.test(o),s=[],l=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>l;l+=4)(c=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(d=(c=((c=((c=((c=(c-(m=c%85))/85)-(f=c%85))/85)-(h=c%85))/85)-(p=c%85))/85)%85,s.push(d+33,p+33,h+33,f+33,m+33)):s.push(122);return function(g,y){for(var b=y;b>0;b--)g.pop()}(s,a.length),String.fromCharCode.apply(String,s)+"~>"},e=function(o){var a,s,l,u,c,d=String,p="length",h=255,f="charCodeAt",m="slice",g="replace";for(o[m](-2),o=o[m](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),l=[],u=0,c=(o+=a="uuuuu"[m](o[p]%5||5))[p];c>u;u+=5)s=52200625*(o[f](u)-33)+614125*(o[f](u+1)-33)+7225*(o[f](u+2)-33)+85*(o[f](u+3)-33)+(o[f](u+4)-33),l.push(h&s>>24,h&s>>16,h&s>>8,h&s);return function(y,b){for(var w=b;w>0;w--)y.pop()}(l,a[p]),d.fromCharCode.apply(d,l)},r=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var s="",l=0;l<o.length;l+=2)s+=String.fromCharCode("0x"+(o[l]+o[l+1]));return s},i=function(o){for(var a=new Uint8Array(o.length),s=o.length;s--;)a[s]=o.charCodeAt(s);return o=(a=Ow(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(o,a){var s=0,l=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),s=0;s<a.length;s+=1)switch(a[s]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=n(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Jt.API),function(t){t.loadFile=function(n,e,r){return function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,u,c){var d=new XMLHttpRequest,p=0,h=function(f){var m=f.length,g=[],y=String.fromCharCode;for(p=0;p<m;p+=1)g.push(y(255&f.charCodeAt(p)));return g.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?c(h(this.responseText)):c(void 0)}),d.send(null),u&&d.status===200)return h(d.responseText)}(i,o,a)}catch{}return s}(n,e,r)},t.loadImageFile=t.loadFile}(Jt.API),function(t){function n(){return(on.html2canvas?Promise.resolve(on.html2canvas):import("./chunk-F4LHIXS2.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function e(){return(on.DOMPurify?Promise.resolve(on.DOMPurify):import("./chunk-ASSXMFAT.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var s=Ir(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(a,s){var l=document.createElement(a);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},o=function a(s){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(s)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,s){return a.__proto__=s||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,s){return this.then(function(){switch(s=s||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(e).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(u,c){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(l(p,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(n).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(n).then(function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var h=u[p],f=h.src.find(function(m){return m.format==="truetype"});f&&l.addFont(f.url,h.ref.name,h.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),s(this.prop.container,d)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,s):this.outputPdf(a,s)},o.prototype.outputPdf=function(a,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,s)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var s=Object.keys(a||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(s)})},o.prototype.get=function(a,s){return this.then(function(){var l=a in o.template.prop?this.prop[a]:this.opt[a];return s?s(l):l})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function s(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||Jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:s(a.inner.width,a.k),height:s(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,s,l,u){return a!=null&&(this.progress.val=a),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,s,l,u){return this.setProgress(a?this.progress.val+a:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,s){var l=this;return this.thenCore(a,s,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,u),d}).then(u,c).then(function(d){return l.updateProgress(1),d})})},o.prototype.thenCore=function(a,s,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),c=l.call(u,a,s);return o.convert(c,this.__proto__)},o.prototype.thenExternal=function(a,s){return Promise.prototype.then.call(this,a,s)},o.prototype.thenList=function(a){var s=this;return a.forEach(function(l){s=s.thenCore(l)}),s},o.prototype.catch=function(a){a&&(a=a.bind(this));var s=Promise.prototype.catch.call(this,a);return o.convert(s,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Jt.getPageSize=function(a,s,l){if(Ir(a)==="object"){var u=a;a=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var c,d=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+s}var h,f=0,m=0;if(p.hasOwnProperty(d))f=p[d][1]/c,m=p[d][0]/c;else try{f=l[1],m=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",m>f&&(h=m,m=f,f=h);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",f>m&&(h=m,m=f,f=h)}return{width:m,height:f,unit:s,k:c,orientation:a}},t.html=function(a,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(pA):null;var l=new o(s);return s.worker?l:l.from(a).doCallback()}}(Jt.API),Jt.API.addJS=function(t){return tU=t,this.internal.events.subscribe("postPutResources",function(){Bw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),eU=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+tU+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bw!==void 0&&eU!==void 0&&this.internal.out("/Names <</JavaScript "+Bw+" 0 R>>")}),this},function(t){var n;t.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],s=r.exec(a);if(s!=null){var l=s[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(o=0;o<u;o++){var d=e.internal.newObject();c.push(d);var p=e.internal.getPageInfo(o+1);e.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),o=0;o<c.length;o++)e.internal.write("(page_"+(o+1)+")"+c[o]+" 0 R");e.internal.write(" ] >>","endobj"),n=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),t.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(r,i,o){var a={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(r){r.id=e.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},e.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},e.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var a=r.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},e.outline.line=function(r){this.ctx.val+=r+`\r
`},e.outline.makeRef=function(r){return r.id+" 0 R"},e.outline.makeString=function(r){return"("+e.internal.pdfEscape(r)+")"},e.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(Jt.API),function(t){var n=[192,193,194,195,196,197,198,199];t.processJPEG=function(e,r,i,o,a,s){var l,u=this.decode.DCT_DECODE,c=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(d){for(var p,h=256*d.charCodeAt(4)+d.charCodeAt(5),f=d.length,m={width:0,height:0,numcomponents:1},g=4;g<f;g+=2){if(g+=h,n.indexOf(d.charCodeAt(g+1))!==-1){p=256*d.charCodeAt(g+5)+d.charCodeAt(g+6),m={width:256*d.charCodeAt(g+7)+d.charCodeAt(g+8),height:p,numcomponents:d.charCodeAt(g+9)};break}h=256*d.charCodeAt(g+2)+d.charCodeAt(g+3)}return m}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(Jt.API);var Mm,Vw,nU,rU,iU,zCe=function(){var t,n,e;function r(o){var a,s,l,u,c,d,p,h,f,m,g,y,b,w;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),f=function(){var x,I;for(I=[],x=0;x<4;++x)I.push(String.fromCharCode(this.data[this.pos++]));return I}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*c/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(f==="fdAT"&&(this.pos+=4,a-=4),o=d?.data||this.imgData,y=0;0<=a?y<a:y>a;0<=a?++y:--y)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((m=l-this.transparency.indexed.length)>0)for(b=0;0<=m?b<m:b>m;0<=m?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":p=(g=this.read(a)).indexOf(0),h=String.fromCharCode.apply(String,g.slice(0,p)),this.text[h]=String.fromCharCode.apply(String,g.slice(p+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var a,s;for(s=[],a=0;0<=o?a<o:a>o;0<=o?++a:--a)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var a=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*a),l=0,u=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function c(d,p,h,f){var m,g,y,b,w,x,I,D,A,E,R,N,T,M,H,V,X,Y,Q,G,re,ue=Math.ceil((u.width-d)/h),Te=Math.ceil((u.height-p)/f),F=u.width==ue&&u.height==Te;for(M=a*ue,N=F?s:new Uint8Array(M*Te),x=o.length,T=0,g=0;T<Te&&l<x;){switch(o[l++]){case 0:for(b=X=0;X<M;b=X+=1)N[g++]=o[l++];break;case 1:for(b=Y=0;Y<M;b=Y+=1)m=o[l++],w=b<a?0:N[g-a],N[g++]=(m+w)%256;break;case 2:for(b=Q=0;Q<M;b=Q+=1)m=o[l++],y=(b-b%a)/a,H=T&&N[(T-1)*M+y*a+b%a],N[g++]=(H+m)%256;break;case 3:for(b=G=0;G<M;b=G+=1)m=o[l++],y=(b-b%a)/a,w=b<a?0:N[g-a],H=T&&N[(T-1)*M+y*a+b%a],N[g++]=(m+Math.floor((w+H)/2))%256;break;case 4:for(b=re=0;re<M;b=re+=1)m=o[l++],y=(b-b%a)/a,w=b<a?0:N[g-a],T===0?H=V=0:(H=N[(T-1)*M+y*a+b%a],V=y&&N[(T-1)*M+(y-1)*a+b%a]),I=w+H-V,D=Math.abs(I-w),E=Math.abs(I-H),R=Math.abs(I-V),A=D<=E&&D<=R?w:E<=R?H:V,N[g++]=(m+A)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!F){var q=((p+T*f)*u.width+d)*a,Z=T*M;for(b=0;b<ue;b+=1){for(var ae=0;ae<a;ae+=1)s[q++]=N[Z++];q+=(h-1)*a}}T++}}return o=Wj(o),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),s},r.prototype.decodePalette=function(){var o,a,s,l,u,c,d,p,h;for(s=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+s.length),l=0,o=0,a=d=0,p=s.length;d<p;a=d+=3)u[l++]=s[a],u[l++]=s[a+1],u[l++]=s[a+2],u[l++]=(h=c[o++])!=null?h:255;return u},r.prototype.copyToImageData=function(o,a){var s,l,u,c,d,p,h,f,m,g,y;if(l=this.colors,m=null,s=this.hasAlphaChannel,this.palette.length&&(m=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,s=!0),f=(u=o.data||o).length,d=m||a,c=p=0,l===1)for(;c<f;)h=m?4*a[c/4]:p,g=d[h++],u[c++]=g,u[c++]=g,u[c++]=g,u[c++]=s?d[h++]:255,p=h;else for(;c<f;)h=m?4*a[c/4]:p,u[c++]=d[h++],u[c++]=d[h++],u[c++]=d[h++],u[c++]=s?d[h++]:255,p=h},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(on)==="[object Window]"){try{n=on.document.createElement("canvas"),e=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var a;if(i()===!0)return e.width=o.width,e.height=o.height,e.clearRect(0,0,o.width,o.height),e.putImageData(o,0,0),(a=new Image).src=n.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var a,s,l,u,c,d,p,h;if(this.animation){for(h=[],s=c=0,d=(p=this.animation.frames).length;c<d;s=++c)a=p[s],l=o.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,h.push(a.image=t(l));return h}},r.prototype.renderFrame=function(o,a){var s,l,u;return s=(l=this.animation.frames)[a],u=l[a-1],a===0&&o.clearRect(0,0,this.width,this.height),u?.disposeOp===1?o.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&o.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&o.clearRect(s.xOffset,s.yOffset,s.width,s.height),o.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(o){var a,s,l,u,c,d,p=this;return s=0,d=this.animation,u=d.numFrames,l=d.frames,c=d.numPlays,(a=function(){var h,f;if(h=s++%u,f=l[h],p.renderFrame(o,h),u>1&&s/u<c)return p.animation._timeout=setTimeout(a,f.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var a,s;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,a=o.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(s=a.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),a.putImageData(s,0,0))},r}();function WCe(t){var n=0;if(t[n++]!==71||t[n++]!==73||t[n++]!==70||t[n++]!==56||(t[n++]+1&253)!=56||t[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=t[n++]|t[n++]<<8,r=t[n++]|t[n++]<<8,i=t[n++],o=i>>7,a=1<<(7&i)+1;t[n++],t[n++];var s=null,l=null;o&&(s=n,l=a,n+=3*a);var u=!0,c=[],d=0,p=null,h=0,f=null;for(this.width=e,this.height=r;u&&n<t.length;)switch(t[n++]){case 33:switch(t[n++]){case 255:if(t[n]!==11||t[n+1]==78&&t[n+2]==69&&t[n+3]==84&&t[n+4]==83&&t[n+5]==67&&t[n+6]==65&&t[n+7]==80&&t[n+8]==69&&t[n+9]==50&&t[n+10]==46&&t[n+11]==48&&t[n+12]==3&&t[n+13]==1&&t[n+16]==0)n+=14,f=t[n++]|t[n++]<<8,n++;else for(n+=12;;){if(!((T=t[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}break;case 249:if(t[n++]!==4||t[n+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[n++];d=t[n++]|t[n++]<<8,p=t[n++],!(1&m)&&(p=null),h=m>>2&7,n++;break;case 254:for(;;){if(!((T=t[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[n-1].toString(16))}break;case 44:var g=t[n++]|t[n++]<<8,y=t[n++]|t[n++]<<8,b=t[n++]|t[n++]<<8,w=t[n++]|t[n++]<<8,x=t[n++],I=x>>6&1,D=1<<(7&x)+1,A=s,E=l,R=!1;x>>7&&(R=!0,A=n,E=D,n+=3*D);var N=n;for(n++;;){var T;if(!((T=t[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}c.push({x:g,y,width:b,height:w,has_local_palette:R,palette_offset:A,palette_size:E,data_offset:N,data_length:n-N,transparent_index:p,interlaced:!!I,delay:d,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[n-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return f},this.frameInfo=function(M){if(M<0||M>=c.length)throw new Error("Frame index out of range.");return c[M]},this.decodeAndBlitFrameBGRA=function(M,H){var V=this.frameInfo(M),X=V.width*V.height,Y=new Uint8Array(X);oU(t,V.data_offset,Y,X);var Q=V.palette_offset,G=V.transparent_index;G===null&&(G=256);var re=V.width,ue=e-re,Te=re,F=4*(V.y*e+V.x),q=4*((V.y+V.height)*e+V.x),Z=F,ae=4*ue;V.interlaced===!0&&(ae+=4*e*7);for(var pe=8,fe=0,me=Y.length;fe<me;++fe){var xe=Y[fe];if(Te===0&&(Te=re,(Z+=ae)>=q&&(ae=4*ue+4*e*(pe-1),Z=F+(re+ue)*(pe<<1),pe>>=1)),xe===G)Z+=4;else{var je=t[Q+3*xe],Pe=t[Q+3*xe+1],Ge=t[Q+3*xe+2];H[Z++]=Ge,H[Z++]=Pe,H[Z++]=je,H[Z++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(M,H){var V=this.frameInfo(M),X=V.width*V.height,Y=new Uint8Array(X);oU(t,V.data_offset,Y,X);var Q=V.palette_offset,G=V.transparent_index;G===null&&(G=256);var re=V.width,ue=e-re,Te=re,F=4*(V.y*e+V.x),q=4*((V.y+V.height)*e+V.x),Z=F,ae=4*ue;V.interlaced===!0&&(ae+=4*e*7);for(var pe=8,fe=0,me=Y.length;fe<me;++fe){var xe=Y[fe];if(Te===0&&(Te=re,(Z+=ae)>=q&&(ae=4*ue+4*e*(pe-1),Z=F+(re+ue)*(pe<<1),pe>>=1)),xe===G)Z+=4;else{var je=t[Q+3*xe],Pe=t[Q+3*xe+1],Ge=t[Q+3*xe+2];H[Z++]=je,H[Z++]=Pe,H[Z++]=Ge,H[Z++]=255}--Te}}}function oU(t,n,e,r){for(var i=t[n++],o=1<<i,a=o+1,s=a+1,l=i+1,u=(1<<l)-1,c=0,d=0,p=0,h=t[n++],f=new Int32Array(4096),m=null;;){for(;c<16&&h!==0;)d|=t[n++]<<c,c+=8,h===1?h=t[n++]:--h;if(c<l)break;var g=d&u;if(d>>=l,c-=l,g!==o){if(g===a)break;for(var y=g<s?g:m,b=0,w=y;w>o;)w=f[w]>>8,++b;var x=w;if(p+b+(y!==g?1:0)>r)return void Mr.log("Warning, gif stream longer than expected.");e[p++]=x;var I=p+=b;for(y!==g&&(e[p++]=x),w=y;b--;)w=f[w],e[--I]=255&w,w>>=8;m!==null&&s<4096&&(f[s++]=m<<8|x,s>=u+1&&l<12&&(++l,u=u<<1|1)),m=g}else s=a+1,u=(1<<(l=i+1))-1,m=null}return p!==r&&Mr.log("Warning, gif stream shorter than expected."),e}function aA(t){var n,e,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),d=new Array(65535),p=new Array(65535),h=new Array(64),f=new Array(64),m=[],g=0,y=7,b=new Array(64),w=new Array(64),x=new Array(64),I=new Array(256),D=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(F,q){for(var Z=0,ae=0,pe=new Array,fe=1;fe<=16;fe++){for(var me=1;me<=F[fe];me++)pe[q[ae]]=[],pe[q[ae]][0]=Z,pe[q[ae]][1]=fe,ae++,Z++;Z*=2}return pe}function Q(F){for(var q=F[0],Z=F[1]-1;Z>=0;)q&1<<Z&&(g|=1<<y),Z--,--y<0&&(g==255?(G(255),G(0)):G(g),y=7,g=0)}function G(F){m.push(F)}function re(F){G(F>>8&255),G(255&F)}function ue(F,q,Z,ae,pe){for(var fe,me=pe[0],xe=pe[240],je=function(Xe,at){var ut,lt,Tt,qt,Xt,vn,hn,On,Zt,Pn,_t=0;for(Zt=0;Zt<8;++Zt){ut=Xe[_t],lt=Xe[_t+1],Tt=Xe[_t+2],qt=Xe[_t+3],Xt=Xe[_t+4],vn=Xe[_t+5],hn=Xe[_t+6];var $i=ut+(On=Xe[_t+7]),Wn=ut-On,Wo=lt+hn,or=lt-hn,Hr=Tt+vn,hl=Tt-vn,pr=qt+Xt,Md=qt-Xt,ei=$i+pr,ks=$i-pr,du=Wo+Hr,ti=Wo-Hr;Xe[_t]=ei+du,Xe[_t+4]=ei-du;var yn=.707106781*(ti+ks);Xe[_t+2]=ks+yn,Xe[_t+6]=ks-yn;var hr=.382683433*((ei=Md+hl)-(ti=or+Wn)),Rd=.5411961*ei+hr,po=1.306562965*ti+hr,fl=.707106781*(du=hl+or),ml=Wn+fl,en=Wn-fl;Xe[_t+5]=en+Rd,Xe[_t+3]=en-Rd,Xe[_t+1]=ml+po,Xe[_t+7]=ml-po,_t+=8}for(_t=0,Zt=0;Zt<8;++Zt){ut=Xe[_t],lt=Xe[_t+8],Tt=Xe[_t+16],qt=Xe[_t+24],Xt=Xe[_t+32],vn=Xe[_t+40],hn=Xe[_t+48];var Ms=ut+(On=Xe[_t+56]),gl=ut-On,sa=lt+hn,Pi=lt-hn,Ci=Tt+vn,Oa=Tt-vn,oh=qt+Xt,pu=qt-Xt,Rs=Ms+oh,Ns=Ms-oh,Fs=sa+Ci,vl=sa-Ci;Xe[_t]=Rs+Fs,Xe[_t+32]=Rs-Fs;var as=.707106781*(vl+Ns);Xe[_t+16]=Ns+as,Xe[_t+48]=Ns-as;var yl=.382683433*((Rs=pu+Oa)-(vl=Pi+gl)),Nd=.5411961*Rs+yl,ah=1.306562965*vl+yl,sh=.707106781*(Fs=Oa+Pi),lh=gl+sh,uh=gl-sh;Xe[_t+40]=uh+Nd,Xe[_t+24]=uh-Nd,Xe[_t+8]=lh+ah,Xe[_t+56]=lh-ah,_t++}for(Zt=0;Zt<64;++Zt)Pn=Xe[Zt]*at[Zt],h[Zt]=Pn>0?Pn+.5|0:Pn-.5|0;return h}(F,q),Pe=0;Pe<64;++Pe)f[A[Pe]]=je[Pe];var Ge=f[0]-Z;Z=f[0],Ge==0?Q(ae[0]):(Q(ae[p[fe=32767+Ge]]),Q(d[fe]));for(var qe=63;qe>0&&f[qe]==0;)qe--;if(qe==0)return Q(me),Z;for(var ht,ke=1;ke<=qe;){for(var se=ke;f[ke]==0&&ke<=qe;)++ke;var zt=ke-se;if(zt>=16){ht=zt>>4;for(var gt=1;gt<=ht;++gt)Q(xe);zt&=15}fe=32767+f[ke],Q(pe[(zt<<4)+p[fe]]),Q(d[fe]),ke++}return qe!=63&&Q(me),Z}function Te(F){F=Math.min(Math.max(F,1),100),o!=F&&(function(q){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var pe=a((Z[ae]*q+50)/100);pe=Math.min(Math.max(pe,1),255),s[A[ae]]=pe}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var xe=a((fe[me]*q+50)/100);xe=Math.min(Math.max(xe,1),255),l[A[me]]=xe}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,Ge=0;Ge<8;Ge++)for(var qe=0;qe<8;qe++)u[Pe]=1/(s[A[Pe]]*je[Ge]*je[qe]*8),c[Pe]=1/(l[A[Pe]]*je[Ge]*je[qe]*8),Pe++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,q){q&&Te(q),m=new Array,g=0,y=7,re(65496),re(65504),re(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),re(1),re(1),G(0),G(0),function(){re(65499),re(132),G(0);for(var lt=0;lt<64;lt++)G(s[lt]);G(1);for(var Tt=0;Tt<64;Tt++)G(l[Tt])}(),function(lt,Tt){re(65472),re(17),G(8),re(Tt),re(lt),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(F.width,F.height),function(){re(65476),re(418),G(0);for(var lt=0;lt<16;lt++)G(E[lt+1]);for(var Tt=0;Tt<=11;Tt++)G(R[Tt]);G(16);for(var qt=0;qt<16;qt++)G(N[qt+1]);for(var Xt=0;Xt<=161;Xt++)G(T[Xt]);G(1);for(var vn=0;vn<16;vn++)G(M[vn+1]);for(var hn=0;hn<=11;hn++)G(H[hn]);G(17);for(var On=0;On<16;On++)G(V[On+1]);for(var Zt=0;Zt<=161;Zt++)G(X[Zt])}(),re(65498),re(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var Z=0,ae=0,pe=0;g=0,y=7,this.encode.displayName="_encode_";for(var fe,me,xe,je,Pe,Ge,qe,ht,ke,se=F.data,zt=F.width,gt=F.height,Xe=4*zt,at=0;at<gt;){for(fe=0;fe<Xe;){for(Pe=Xe*at+fe,qe=-1,ht=0,ke=0;ke<64;ke++)Ge=Pe+(ht=ke>>3)*Xe+(qe=4*(7&ke)),at+ht>=gt&&(Ge-=Xe*(at+1+ht-gt)),fe+qe>=Xe&&(Ge-=fe+qe-Xe+4),me=se[Ge++],xe=se[Ge++],je=se[Ge++],b[ke]=(D[me]+D[xe+256>>0]+D[je+512>>0]>>16)-128,w[ke]=(D[me+768>>0]+D[xe+1024>>0]+D[je+1280>>0]>>16)-128,x[ke]=(D[me+1280>>0]+D[xe+1536>>0]+D[je+1792>>0]>>16)-128;Z=ue(b,u,Z,n,r),ae=ue(w,c,ae,e,i),pe=ue(x,c,pe,e,i),fe+=32}at+=8}if(y>=0){var ut=[];ut[1]=y+1,ut[0]=(1<<y+1)-1,Q(ut)}return re(65497),new Uint8Array(m)},t=t||50,function(){for(var F=String.fromCharCode,q=0;q<256;q++)I[q]=F(q)}(),n=Y(E,R),e=Y(M,H),r=Y(N,T),i=Y(V,X),function(){for(var F=1,q=2,Z=1;Z<=15;Z++){for(var ae=F;ae<q;ae++)p[32767+ae]=Z,d[32767+ae]=[],d[32767+ae][1]=Z,d[32767+ae][0]=ae;for(var pe=-(q-1);pe<=-F;pe++)p[32767+pe]=Z,d[32767+pe]=[],d[32767+pe][1]=Z,d[32767+pe][0]=q-1+pe;F<<=1,q<<=1}}(),function(){for(var F=0;F<256;F++)D[F]=19595*F,D[F+256>>0]=38470*F,D[F+512>>0]=7471*F+32768,D[F+768>>0]=-11059*F,D[F+1024>>0]=-21709*F,D[F+1280>>0]=32768*F+8421375,D[F+1536>>0]=-27439*F,D[F+1792>>0]=-5329*F}(),Te(t)}function cl(t,n){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function aU(t){function n(E){if(!E)throw Error("assert :P")}function e(E,R,N){for(var T=0;4>T;T++)if(E[R+T]!=N.charCodeAt(T))return!0;return!1}function r(E,R,N,T,M){for(var H=0;H<M;H++)E[R+H]=N[T+H]}function i(E,R,N,T){for(var M=0;M<T;M++)E[R+M]=N}function o(E){return new Int32Array(E)}function a(E,R){for(var N=[],T=0;T<E;T++)N.push(new R);return N}function s(E,R){var N=[];return function T(M,H,V){for(var X=V[H],Y=0;Y<X&&(M.push(V.length>H+1?[]:new R),!(V.length<H+1));Y++)T(M[Y],H+1,V)}(N,0,E),N}var l=function(){var E=this;function R(v,_){for(var S=1<<_-1>>>0;v&S;)S>>>=1;return S?(v&S-1)+S:v}function N(v,_,S,k,L){n(!(k%S));do v[_+(k-=S)]=L;while(0<k)}function T(v,_,S,k,L){if(n(2328>=L),512>=L)var U=o(512);else if((U=o(L))==null)return 0;return function(z,W,$,J,ye,Me){var Re,Ie,Ye=W,Le=1<<$,be=o(16),Ce=o(16);for(n(ye!=0),n(J!=null),n(z!=null),n(0<$),Ie=0;Ie<ye;++Ie){if(15<J[Ie])return 0;++be[J[Ie]]}if(be[0]==ye)return 0;for(Ce[1]=0,Re=1;15>Re;++Re){if(be[Re]>1<<Re)return 0;Ce[Re+1]=Ce[Re]+be[Re]}for(Ie=0;Ie<ye;++Ie)Re=J[Ie],0<J[Ie]&&(Me[Ce[Re]++]=Ie);if(Ce[15]==1)return(J=new M).g=0,J.value=Me[0],N(z,Ye,1,Le,J),Le;var $e,Je=-1,Ke=Le-1,It=0,mt=1,Qt=1,vt=1<<$;for(Ie=0,Re=1,ye=2;Re<=$;++Re,ye<<=1){if(mt+=Qt<<=1,0>(Qt-=be[Re]))return 0;for(;0<be[Re];--be[Re])(J=new M).g=Re,J.value=Me[Ie++],N(z,Ye+It,ye,vt,J),It=R(It,Re)}for(Re=$+1,ye=2;15>=Re;++Re,ye<<=1){if(mt+=Qt<<=1,0>(Qt-=be[Re]))return 0;for(;0<be[Re];--be[Re]){if(J=new M,(It&Ke)!=Je){for(Ye+=vt,$e=1<<(Je=Re)-$;15>Je&&!(0>=($e-=be[Je]));)++Je,$e<<=1;Le+=vt=1<<($e=Je-$),z[W+(Je=It&Ke)].g=$e+$,z[W+Je].value=Ye-W-Je}J.g=Re-$,J.value=Me[Ie++],N(z,Ye+(It>>$),ye,vt,J),It=R(It,Re)}}return mt!=2*Ce[15]-1?0:Le}(v,_,S,k,L,U)}function M(){this.value=this.g=0}function H(){this.value=this.g=0}function V(){this.G=a(5,M),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ho,H)}function X(v,_,S,k){n(v!=null),n(_!=null),n(2147483648>k),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=_,v.pa=S,v.Jd=_,v.Yc=S+k,v.Zc=4<=k?S+k-4+1:S,fe(v)}function Y(v,_){for(var S=0;0<_--;)S|=xe(v,128)<<_;return S}function Q(v,_){var S=Y(v,_);return me(v)?-S:S}function G(v,_,S,k){var L,U=0;for(n(v!=null),n(_!=null),n(4294967288>k),v.Sb=k,v.Ra=0,v.u=0,v.h=0,4<k&&(k=4),L=0;L<k;++L)U+=_[S+L]<<8*L;v.Ra=U,v.bb=k,v.oa=_,v.pa=S}function re(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Ih-8>>>0,++v.bb,v.u-=8;Z(v)&&(v.h=1,v.u=0)}function ue(v,_){if(n(0<=_),!v.h&&_<=Ch){var S=q(v)&xh[_];return v.u+=_,re(v),S}return v.h=1,v.u=0}function Te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(v){return v.Ra>>>(v.u&Ih-1)>>>0}function Z(v){return n(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Ih}function ae(v,_){v.u=_,v.h=Z(v)}function pe(v){v.u>=rg&&(n(v.u>=rg),re(v))}function fe(v){n(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(n(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function me(v){return Y(v,1)}function xe(v,_){var S=v.Ca;0>v.b&&fe(v);var k=v.b,L=S*_>>>8,U=(v.I>>>k>L)+0;for(U?(S-=L,v.I-=L+1<<k>>>0):S=L+1,k=S,L=0;256<=k;)L+=8,k>>=8;return k=7^L+ua[k],v.b-=k,v.Ca=(S<<k)-1,U}function je(v,_,S){v[_+0]=S>>24&255,v[_+1]=S>>16&255,v[_+2]=S>>8&255,v[_+3]=S>>0&255}function Pe(v,_){return v[_+0]<<0|v[_+1]<<8}function Ge(v,_){return Pe(v,_)|v[_+2]<<16}function qe(v,_){return Pe(v,_)|Pe(v,_+2)<<16}function ht(v,_){var S=1<<_;return n(v!=null),n(0<_),v.X=o(S),v.X==null?0:(v.Mb=32-_,v.Xa=_,1)}function ke(v,_){n(v!=null),n(_!=null),n(v.Xa==_.Xa),r(_.X,0,v.X,0,1<<_.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function zt(v,_,S,k){n(S!=null),n(k!=null);var L=S[0],U=k[0];return L==0&&(L=(v*U+_/2)/_),U==0&&(U=(_*L+v/2)/v),0>=L||0>=U?0:(S[0]=L,k[0]=U,1)}function gt(v,_){return v+(1<<_)-1>>>_}function Xe(v,_){return((4278255360&v)+(4278255360&_)>>>0&4278255360)+((16711935&v)+(16711935&_)>>>0&16711935)>>>0}function at(v,_){E[_]=function(S,k,L,U,z,W,$){var J;for(J=0;J<z;++J){var ye=E[v](W[$+J-1],L,U+J);W[$+J]=Xe(S[k+J],ye)}}}function ut(){this.ud=this.hd=this.jd=0}function lt(v,_){return((4278124286&(v^_))>>>1)+(v&_)>>>0}function Tt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function qt(v,_){return Tt(v+(v-_+.5>>1))}function Xt(v,_,S){return Math.abs(_-S)-Math.abs(v-S)}function vn(v,_,S,k,L,U,z){for(k=U[z-1],S=0;S<L;++S)U[z+S]=k=Xe(v[_+S],k)}function hn(v,_,S,k,L){var U;for(U=0;U<S;++U){var z=v[_+U],W=z>>8&255,$=16711935&($=($=16711935&z)+((W<<16)+W));k[L+U]=(4278255360&z)+$>>>0}}function On(v,_){_.jd=v>>0&255,_.hd=v>>8&255,_.ud=v>>16&255}function Zt(v,_,S,k,L,U){var z;for(z=0;z<k;++z){var W=_[S+z],$=W>>>8,J=W,ye=255&(ye=(ye=W>>>16)+((v.jd<<24>>24)*($<<24>>24)>>>5));J=255&(J=(J=J+((v.hd<<24>>24)*($<<24>>24)>>>5))+((v.ud<<24>>24)*(ye<<24>>24)>>>5)),L[U+z]=(4278255360&W)+(ye<<16)+J}}function Pn(v,_,S,k,L){E[_]=function(U,z,W,$,J,ye,Me,Re,Ie){for($=Me;$<Re;++$)for(Me=0;Me<Ie;++Me)J[ye++]=L(W[k(U[z++])])},E[v]=function(U,z,W,$,J,ye,Me){var Re=8>>U.b,Ie=U.Ea,Ye=U.K[0],Le=U.w;if(8>Re)for(U=(1<<U.b)-1,Le=(1<<Re)-1;z<W;++z){var be,Ce=0;for(be=0;be<Ie;++be)be&U||(Ce=k($[J++])),ye[Me++]=L(Ye[Ce&Le]),Ce>>=Re}else E["VP8LMapColor"+S]($,J,Ye,Le,ye,Me,z,W,Ie)}}function _t(v,_,S,k,L){for(S=_+S;_<S;){var U=v[_++];k[L++]=U>>16&255,k[L++]=U>>8&255,k[L++]=U>>0&255}}function $i(v,_,S,k,L){for(S=_+S;_<S;){var U=v[_++];k[L++]=U>>16&255,k[L++]=U>>8&255,k[L++]=U>>0&255,k[L++]=U>>24&255}}function Wn(v,_,S,k,L){for(S=_+S;_<S;){var U=(z=v[_++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;k[L++]=U,k[L++]=z}}function Wo(v,_,S,k,L){for(S=_+S;_<S;){var U=(z=v[_++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;k[L++]=U,k[L++]=z}}function or(v,_,S,k,L){for(S=_+S;_<S;){var U=v[_++];k[L++]=U>>0&255,k[L++]=U>>8&255,k[L++]=U>>16&255}}function Hr(v,_,S,k,L,U){if(U==0)for(S=_+S;_<S;)je(k,((U=v[_++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),L+=32;else r(k,L,v,_,S)}function hl(v,_){E[_][0]=E[v+"0"],E[_][1]=E[v+"1"],E[_][2]=E[v+"2"],E[_][3]=E[v+"3"],E[_][4]=E[v+"4"],E[_][5]=E[v+"5"],E[_][6]=E[v+"6"],E[_][7]=E[v+"7"],E[_][8]=E[v+"8"],E[_][9]=E[v+"9"],E[_][10]=E[v+"10"],E[_][11]=E[v+"11"],E[_][12]=E[v+"12"],E[_][13]=E[v+"13"],E[_][14]=E[v+"0"],E[_][15]=E[v+"0"]}function pr(v){return v==wx||v==xx||v==R1||v==Cx}function Md(){this.eb=[],this.size=this.A=this.fb=0}function ei(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ks(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Md,this.f.kb=new ei,this.sd=null}function du(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ti(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yn(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function hr(v,_){var S=v.T,k=_.ba.f.RGBA,L=k.eb,U=k.fb+v.ka*k.A,z=ps[_.ba.S],W=v.y,$=v.O,J=v.f,ye=v.N,Me=v.ea,Re=v.W,Ie=_.cc,Ye=_.dc,Le=_.Mc,be=_.Nc,Ce=v.ka,$e=v.ka+v.T,Je=v.U,Ke=Je+1>>1;for(Ce==0?z(W,$,null,null,J,ye,Me,Re,J,ye,Me,Re,L,U,null,null,Je):(z(_.ec,_.fc,W,$,Ie,Ye,Le,be,J,ye,Me,Re,L,U-k.A,L,U,Je),++S);Ce+2<$e;Ce+=2)Ie=J,Ye=ye,Le=Me,be=Re,ye+=v.Rc,Re+=v.Rc,U+=2*k.A,z(W,($+=2*v.fa)-v.fa,W,$,Ie,Ye,Le,be,J,ye,Me,Re,L,U-k.A,L,U,Je);return $+=v.fa,v.j+$e<v.o?(r(_.ec,_.fc,W,$,Je),r(_.cc,_.dc,J,ye,Ke),r(_.Mc,_.Nc,Me,Re,Ke),S--):1&$e||z(W,$,null,null,J,ye,Me,Re,J,ye,Me,Re,L,U+k.A,null,null,Je),S}function Rd(v,_,S){var k=v.F,L=[v.J];if(k!=null){var U=v.U,z=_.ba.S,W=z==M1||z==R1;_=_.ba.f.RGBA;var $=[0],J=v.ka;$[0]=v.T,v.Kb&&(J==0?--$[0]:(--J,L[0]-=v.width),v.j+v.ka+v.T==v.o&&($[0]=v.o-v.j-J));var ye=_.eb;J=_.fb+J*_.A,v=Nr(k,L[0],v.width,U,$,ye,J+(W?0:3),_.A),n(S==$),v&&pr(z)&&cs(ye,J,W,U,$,_.A)}return 0}function po(v){var _=v.ma,S=_.ba.S,k=11>S,L=S==A1||S==k1||S==M1||S==_x||S==12||pr(S);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!tg(_.Oa,v,L?11:12))return 0;if(L&&pr(S)&&tt(),v.da)alert("todo:use_scaling");else{if(k){if(_.Ib=yn,v.Kb){if(S=v.U+1>>1,_.memory=o(v.U+2*S),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+v.U,_.Mc=_.cc,_.Nc=_.dc+S,_.Ib=hr,tt()}}else alert("todo:EmitYUV");L&&(_.Jb=Rd,k&&Ae())}if(k&&!IA){for(v=0;256>v;++v)qU[v]=89858*(v-128)+F1>>N1,KU[v]=-22014*(v-128)+F1,$U[v]=-45773*(v-128),GU[v]=113618*(v-128)+F1>>N1;for(v=cg;v<Ex;++v)_=76283*(v-16)+F1>>N1,YU[v-cg]=Pa(_,255),XU[v-cg]=Pa(_+8>>4,15);IA=1}return 1}function fl(v){var _=v.ma,S=v.U,k=v.T;return n(!(1&v.ka)),0>=S||0>=k?0:(S=_.Ib(v,_),_.Jb!=null&&_.Jb(v,_,S),_.Dc+=S,1)}function ml(v){v.ma.memory=null}function en(v,_,S,k){return ue(v,8)!=47?0:(_[0]=ue(v,14)+1,S[0]=ue(v,14)+1,k[0]=ue(v,1),ue(v,3)!=0?0:!v.h)}function Ms(v,_){if(4>v)return v+1;var S=v-2>>1;return(2+(1&v)<<S)+ue(_,S)+1}function gl(v,_){return 120<_?_-120:1<=(S=((S=MU[_-1])>>4)*v+(8-(15&S)))?S:1;var S}function sa(v,_,S){var k=q(S),L=v[_+=255&k].g-8;return 0<L&&(ae(S,S.u+8),k=q(S),_+=v[_].value,_+=k&(1<<L)-1),ae(S,S.u+v[_].g),v[_].value}function Pi(v,_,S){return S.g+=v.g,S.value+=v.value<<_>>>0,n(8>=S.g),v.g}function Ci(v,_,S){var k=v.xc;return n((_=k==0?0:v.vc[v.md*(S>>k)+(_>>k)])<v.Wb),v.Ya[_]}function Oa(v,_,S,k){var L=v.ab,U=v.c*_,z=v.C;_=z+_;var W=S,$=k;for(k=v.Ta,S=v.Ua;0<L--;){var J=v.gc[L],ye=z,Me=_,Re=W,Ie=$,Ye=($=k,W=S,J.Ea);switch(n(ye<Me),n(Me<=J.nc),J.hc){case 2:x1(Re,Ie,(Me-ye)*Ye,$,W);break;case 0:var Le=ye,be=Me,Ce=$,$e=W,Je=(vt=J).Ea;Le==0&&(yx(Re,Ie,null,null,1,Ce,$e),vn(Re,Ie+1,0,0,Je-1,Ce,$e+1),Ie+=Je,$e+=Je,++Le);for(var Ke=1<<vt.b,It=Ke-1,mt=gt(Je,vt.b),Qt=vt.K,vt=vt.w+(Le>>vt.b)*mt;Le<be;){var ar=Qt,vr=vt,tr=1;for(ig(Re,Ie,Ce,$e-Je,1,Ce,$e);tr<Je;){var qn=(tr&~It)+Ke;qn>Je&&(qn=Je),(0,mc[ar[vr++]>>8&15])(Re,Ie+ +tr,Ce,$e+tr-Je,qn-tr,Ce,$e+tr),tr=qn}Ie+=Je,$e+=Je,++Le&It||(vt+=mt)}Me!=J.nc&&r($,W-Ye,$,W+(Me-ye-1)*Ye,Ye);break;case 1:for(Ye=Re,be=Ie,Je=(Re=J.Ea)-($e=Re&~(Ce=(Ie=1<<J.b)-1)),Le=gt(Re,J.b),Ke=J.K,J=J.w+(ye>>J.b)*Le;ye<Me;){for(It=Ke,mt=J,Qt=new ut,vt=be+$e,ar=be+Re;be<vt;)On(It[mt++],Qt),Bd(Qt,Ye,be,Ie,$,W),be+=Ie,W+=Ie;be<ar&&(On(It[mt++],Qt),Bd(Qt,Ye,be,Je,$,W),be+=Je,W+=Je),++ye&Ce||(J+=Le)}break;case 3:if(Re==$&&Ie==W&&0<J.b){for(be=$,Re=Ye=W+(Me-ye)*Ye-($e=(Me-ye)*gt(J.Ea,J.b)),Ie=$,Ce=W,Le=[],$e=(Je=$e)-1;0<=$e;--$e)Le[$e]=Ie[Ce+$e];for($e=Je-1;0<=$e;--$e)be[Re+$e]=Le[$e];ss(J,ye,Me,$,Ye,$,W)}else ss(J,ye,Me,Re,Ie,$,W)}W=k,$=S}$!=S&&r(k,S,W,$,U)}function oh(v,_){var S=v.V,k=v.Ba+v.c*v.C,L=_-v.C;if(n(_<=v.l.o),n(16>=L),0<L){var U=v.l,z=v.Ta,W=v.Ua,$=U.width;if(Oa(v,L,S,k),L=W=[W],n((S=v.C)<(k=_)),n(U.v<U.va),k>U.o&&(k=U.o),S<U.j){var J=U.j-S;S=U.j,L[0]+=J*$}if(S>=k?S=0:(L[0]+=4*U.v,U.ka=S-U.j,U.U=U.va-U.v,U.T=k-S,S=1),S){if(W=W[0],11>(S=v.ca).S){var ye=S.f.RGBA,Me=(k=S.S,L=U.U,U=U.T,J=ye.eb,ye.A),Re=U;for(ye=ye.fb+v.Ma*ye.A;0<Re--;){var Ie=z,Ye=W,Le=L,be=J,Ce=ye;switch(k){case T1:ca(Ie,Ye,Le,be,Ce);break;case A1:qo(Ie,Ye,Le,be,Ce);break;case wx:qo(Ie,Ye,Le,be,Ce),cs(be,Ce,0,Le,1,0);break;case fA:gu(Ie,Ye,Le,be,Ce);break;case k1:Hr(Ie,Ye,Le,be,Ce,1);break;case xx:Hr(Ie,Ye,Le,be,Ce,1),cs(be,Ce,0,Le,1,0);break;case M1:Hr(Ie,Ye,Le,be,Ce,0);break;case R1:Hr(Ie,Ye,Le,be,Ce,0),cs(be,Ce,1,Le,1,0);break;case _x:gc(Ie,Ye,Le,be,Ce);break;case Cx:gc(Ie,Ye,Le,be,Ce),Rr(be,Ce,Le,1,0);break;case mA:mu(Ie,Ye,Le,be,Ce);break;default:n(0)}W+=$,ye+=Me}v.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");n(v.Ma<=S.height)}}v.C=_,n(v.C<=v.i)}function pu(v){var _;if(0<v.ua)return 0;for(_=0;_<v.Wb;++_){var S=v.Ya[_].G,k=v.Ya[_].H;if(0<S[1][k[1]+0].g||0<S[2][k[2]+0].g||0<S[3][k[3]+0].g)return 0}return 1}function Rs(v,_,S,k,L,U){if(v.Z!=0){var z=v.qd,W=v.rd;for(n(_c[v.Z]!=null);_<S;++_)_c[v.Z](z,W,k,L,k,L,U),z=k,W=L,L+=U;v.qd=z,v.rd=W}}function Ns(v,_){var S=v.l.ma,k=S.Z==0||S.Z==1?v.l.j:v.C;if(k=v.C<k?k:v.C,n(_<=v.l.o),_>k){var L=v.l.width,U=S.ca,z=S.tb+L*k,W=v.V,$=v.Ba+v.c*k,J=v.gc;n(v.ab==1),n(J[0].hc==3),C1(J[0],k,_,W,$,U,z),Rs(S,k,_,U,z,L)}v.C=v.Ma=_}function Fs(v,_,S,k,L,U,z){var W=v.$/k,$=v.$%k,J=v.m,ye=v.s,Me=S+v.$,Re=Me;L=S+k*L;var Ie=S+k*U,Ye=280+ye.ua,Le=v.Pb?W:16777216,be=0<ye.ua?ye.Wa:null,Ce=ye.wc,$e=Me<Ie?Ci(ye,$,W):null;n(v.C<U),n(Ie<=L);var Je=!1;e:for(;;){for(;Je||Me<Ie;){var Ke=0;if(W>=Le){var It=Me-S;n((Le=v).Pb),Le.wd=Le.m,Le.xd=It,0<Le.s.ua&&ke(Le.s.Wa,Le.s.vb),Le=W+NU}if($&Ce||($e=Ci(ye,$,W)),n($e!=null),$e.Qb&&(_[Me]=$e.qb,Je=!0),!Je)if(pe(J),$e.jc){Ke=J,It=_;var mt=Me,Qt=$e.pd[q(Ke)&ho-1];n($e.jc),256>Qt.g?(ae(Ke,Ke.u+Qt.g),It[mt]=Qt.value,Ke=0):(ae(Ke,Ke.u+Qt.g-256),n(256<=Qt.value),Ke=Qt.value),Ke==0&&(Je=!0)}else Ke=sa($e.G[0],$e.H[0],J);if(J.h)break;if(Je||256>Ke){if(!Je)if($e.nd)_[Me]=($e.qb|Ke<<8)>>>0;else{if(pe(J),Je=sa($e.G[1],$e.H[1],J),pe(J),It=sa($e.G[2],$e.H[2],J),mt=sa($e.G[3],$e.H[3],J),J.h)break;_[Me]=(mt<<24|Je<<16|Ke<<8|It)>>>0}if(Je=!1,++Me,++$>=k&&($=0,++W,z!=null&&W<=U&&!(W%16)&&z(v,W),be!=null))for(;Re<Me;)Ke=_[Re++],be.X[(506832829*Ke&4294967295)>>>be.Mb]=Ke}else if(280>Ke){if(Ke=Ms(Ke-256,J),It=sa($e.G[4],$e.H[4],J),pe(J),It=gl(k,It=Ms(It,J)),J.h)break;if(Me-S<It||L-Me<Ke)break e;for(mt=0;mt<Ke;++mt)_[Me+mt]=_[Me+mt-It];for(Me+=Ke,$+=Ke;$>=k;)$-=k,++W,z!=null&&W<=U&&!(W%16)&&z(v,W);if(n(Me<=L),$&Ce&&($e=Ci(ye,$,W)),be!=null)for(;Re<Me;)Ke=_[Re++],be.X[(506832829*Ke&4294967295)>>>be.Mb]=Ke}else{if(!(Ke<Ye))break e;for(Je=Ke-280,n(be!=null);Re<Me;)Ke=_[Re++],be.X[(506832829*Ke&4294967295)>>>be.Mb]=Ke;Ke=Me,n(!(Je>>>(It=be).Xa)),_[Ke]=It.X[Je],Je=!0}Je||n(J.h==Z(J))}if(v.Pb&&J.h&&Me<L)n(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&ke(v.s.vb,v.s.Wa);else{if(J.h)break e;z?.(v,W>U?U:W),v.a=0,v.$=Me-S}return 1}return v.a=3,0}function vl(v){n(v!=null),v.vc=null,v.yc=null,v.Ya=null;var _=v.Wa;_!=null&&(_.X=null),v.vb=null,n(v!=null)}function as(){var v=new vx;return v==null?null:(v.a=0,v.xb=yA,hl("Predictor","VP8LPredictors"),hl("Predictor","VP8LPredictors_C"),hl("PredictorAdd","VP8LPredictorsAdd"),hl("PredictorAdd","VP8LPredictorsAdd_C"),x1=hn,Bd=Zt,ca=_t,qo=$i,gc=Wn,mu=Wo,gu=or,E.VP8LMapColor32b=Sh,E.VP8LMapColor8b=I1,v)}function yl(v,_,S,k,L){var U=1,z=[v],W=[_],$=k.m,J=k.s,ye=null,Me=0;e:for(;;){if(S)for(;U&&ue($,1);){var Re=z,Ie=W,Ye=k,Le=1,be=Ye.m,Ce=Ye.gc[Ye.ab],$e=ue(be,2);if(Ye.Oc&1<<$e)U=0;else{switch(Ye.Oc|=1<<$e,Ce.hc=$e,Ce.Ea=Re[0],Ce.nc=Ie[0],Ce.K=[null],++Ye.ab,n(4>=Ye.ab),$e){case 0:case 1:Ce.b=ue(be,3)+2,Le=yl(gt(Ce.Ea,Ce.b),gt(Ce.nc,Ce.b),0,Ye,Ce.K),Ce.K=Ce.K[0];break;case 3:var Je,Ke=ue(be,8)+1,It=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Re[0]=gt(Ce.Ea,It),Ce.b=It,Je=Le=yl(Ke,1,0,Ye,Ce.K)){var mt,Qt=Ke,vt=Ce,ar=1<<(8>>vt.b),vr=o(ar);if(vr==null)Je=0;else{var tr=vt.K[0],qn=vt.w;for(vr[0]=vt.K[0][0],mt=1;mt<1*Qt;++mt)vr[mt]=Xe(tr[qn+mt],vr[mt-1]);for(;mt<4*ar;++mt)vr[mt]=0;vt.K[0]=null,vt.K[0]=vr,Je=1}}Le=Je;break;case 2:break;default:n(0)}U=Le}}if(z=z[0],W=W[0],U&&ue($,1)&&!(U=1<=(Me=ue($,4))&&11>=Me)){k.a=3;break e}var Tr;if(Tr=U)t:{var Cr,In,Si,da=k,Ei=z,pa=W,yr=Me,Ba=S,Va=da.m,Yi=da.s,fo=[null],$o=1,hs=0,xl=RU[yr];n:for(;;){if(Ba&&ue(Va,1)){var Xi=ue(Va,3)+2,_u=gt(Ei,Xi),zd=gt(pa,Xi),kh=_u*zd;if(!yl(_u,zd,0,da,fo))break n;for(fo=fo[0],Yi.xc=Xi,Cr=0;Cr<kh;++Cr){var wc=fo[Cr]>>8&65535;fo[Cr]=wc,wc>=$o&&($o=wc+1)}}if(Va.h)break n;for(In=0;5>In;++In){var ri=gA[In];!In&&0<yr&&(ri+=1<<yr),hs<ri&&(hs=ri)}var Dx=a($o*xl,M),DA=$o,TA=a(DA,V);if(TA==null)var P1=null;else n(65536>=DA),P1=TA;var dg=o(hs);if(P1==null||dg==null||Dx==null){da.a=1;break n}var L1=Dx;for(Cr=Si=0;Cr<$o;++Cr){var Vs=P1[Cr],Mh=Vs.G,Rh=Vs.H,AA=0,B1=1,kA=0;for(In=0;5>In;++In){ri=gA[In],Mh[In]=L1,Rh[In]=Si,!In&&0<yr&&(ri+=1<<yr);i:{var V1,Tx=ri,j1=da,pg=dg,JU=L1,eH=Si,Ax=0,xc=j1.m,tH=ue(xc,1);if(i(pg,0,0,Tx),tH){var nH=ue(xc,1)+1,rH=ue(xc,1),MA=ue(xc,rH==0?1:8);pg[MA]=1,nH==2&&(pg[MA=ue(xc,8)]=1);var U1=1}else{var RA=o(19),NA=ue(xc,4)+4;if(19<NA){j1.a=3;var H1=0;break i}for(V1=0;V1<NA;++V1)RA[kU[V1]]=ue(xc,3);var kx=void 0,hg=void 0,FA=j1,iH=RA,z1=Tx,OA=pg,Mx=0,Cc=FA.m,PA=8,LA=a(128,M);r:for(;T(LA,0,7,iH,19);){if(ue(Cc,1)){var oH=2+2*ue(Cc,3);if((kx=2+ue(Cc,oH))>z1)break r}else kx=z1;for(hg=0;hg<z1&&kx--;){pe(Cc);var BA=LA[0+(127&q(Cc))];ae(Cc,Cc.u+BA.g);var Nh=BA.value;if(16>Nh)OA[hg++]=Nh,Nh!=0&&(PA=Nh);else{var aH=Nh==16,VA=Nh-16,sH=TU[VA],jA=ue(Cc,DU[VA])+sH;if(hg+jA>z1)break r;for(var lH=aH?PA:0;0<jA--;)OA[hg++]=lH}}Mx=1;break r}Mx||(FA.a=3),U1=Mx}(U1=U1&&!xc.h)&&(Ax=T(JU,eH,8,pg,Tx)),U1&&Ax!=0?H1=Ax:(j1.a=3,H1=0)}if(H1==0)break n;if(B1&&AU[In]==1&&(B1=L1[Si].g==0),AA+=L1[Si].g,Si+=H1,3>=In){var fg,Rx=dg[0];for(fg=1;fg<ri;++fg)dg[fg]>Rx&&(Rx=dg[fg]);kA+=Rx}}if(Vs.nd=B1,Vs.Qb=0,B1&&(Vs.qb=(Mh[3][Rh[3]+0].value<<24|Mh[1][Rh[1]+0].value<<16|Mh[2][Rh[2]+0].value)>>>0,AA==0&&256>Mh[0][Rh[0]+0].value&&(Vs.Qb=1,Vs.qb+=Mh[0][Rh[0]+0].value<<8)),Vs.jc=!Vs.Qb&&6>kA,Vs.jc){var W1,wu=Vs;for(W1=0;W1<ho;++W1){var Ic=W1,Sc=wu.pd[Ic],q1=wu.G[0][wu.H[0]+Ic];256<=q1.value?(Sc.g=q1.g+256,Sc.value=q1.value):(Sc.g=0,Sc.value=0,Ic>>=Pi(q1,8,Sc),Ic>>=Pi(wu.G[1][wu.H[1]+Ic],16,Sc),Ic>>=Pi(wu.G[2][wu.H[2]+Ic],0,Sc),Pi(wu.G[3][wu.H[3]+Ic],24,Sc))}}}Yi.vc=fo,Yi.Wb=$o,Yi.Ya=P1,Yi.yc=Dx,Tr=1;break t}Tr=0}if(!(U=Tr)){k.a=3;break e}if(0<Me){if(J.ua=1<<Me,!ht(J.Wa,Me)){k.a=1,U=0;break e}}else J.ua=0;var Nx=k,UA=z,uH=W,Fx=Nx.s,Ox=Fx.xc;if(Nx.c=UA,Nx.i=uH,Fx.md=gt(UA,Ox),Fx.wc=Ox==0?-1:(1<<Ox)-1,S){k.xb=jU;break e}if((ye=o(z*W))==null){k.a=1,U=0;break e}U=(U=Fs(k,ye,0,z,W,W,null))&&!$.h;break e}return U?(L!=null?L[0]=ye:(n(ye==null),n(S)),k.$=0,S||vl(J)):vl(J),U}function Nd(v,_){var S=v.c*v.i,k=S+_+16*_;return n(v.c<=_),v.V=o(k),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+S+_,1)}function ah(v,_){var S=v.C,k=_-S,L=v.V,U=v.Ba+v.c*S;for(n(_<=v.l.o);0<k;){var z=16<k?16:k,W=v.l.ma,$=v.l.width,J=$*z,ye=W.ca,Me=W.tb+$*S,Re=v.Ta,Ie=v.Ua;Oa(v,z,L,U),gi(Re,Ie,ye,Me,J),Rs(W,S,S+z,ye,Me,$),k-=z,L+=z*v.c,S+=z}n(S==_),v.C=v.Ma=_}function sh(){this.ub=this.yd=this.td=this.Rb=0}function lh(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function uh(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function n1(){this.Yb=function(){var v=[];return function _(S,k,L){for(var U=L[k],z=0;z<U&&(S.push(L.length>k+1?[]:0),!(L.length<k+1));z++)_(S[z],k+1,L)}(v,0,[3,11]),v}()}function Kw(){this.jb=o(3),this.Wc=s([4,8],n1),this.Xc=s([4,17],n1)}function Yw(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ch(){this.ld=this.La=this.dd=this.tc=0}function r1(){this.Na=this.la=0}function Xw(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vm(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qw(){this.uc=this.M=this.Nb=0,this.wa=Array(new ch),this.Y=0,this.ya=Array(new Vm),this.aa=0,this.l=new dh}function i1(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Zw(){this.cb=this.a=0,this.sc="",this.m=new Te,this.Od=new sh,this.Kc=new lh,this.ed=new Yw,this.Qa=new uh,this.Ic=this.$c=this.Aa=0,this.D=new Qw,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Te),this.ia=0,this.pb=a(4,Xw),this.Pa=new Kw,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new i1),this.Hd=0,this.rb=Array(new r1),this.sb=0,this.wa=Array(new ch),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vm),this.L=this.aa=0,this.gd=s([4,2],ch),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jw(){var v=new Zw;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,ug||(ug=s1)),v}function fi(v,_,S){return v.a==0&&(v.a=_,v.sc=S,v.cb=0),0}function o1(v,_,S){return 3<=S&&v[_+0]==157&&v[_+1]==1&&v[_+2]==42}function a1(v,_){if(v==null)return 0;if(v.a=0,v.sc="OK",_==null)return fi(v,2,"null VP8Io passed to VP8GetHeaders()");var S=_.data,k=_.w,L=_.ha;if(4>L)return fi(v,7,"Truncated header.");var U=S[k+0]|S[k+1]<<8|S[k+2]<<16,z=v.Od;if(z.Rb=!(1&U),z.td=U>>1&7,z.yd=U>>4&1,z.ub=U>>5,3<z.td)return fi(v,3,"Incorrect keyframe parameters.");if(!z.yd)return fi(v,4,"Frame not displayable.");k+=3,L-=3;var W=v.Kc;if(z.Rb){if(7>L)return fi(v,7,"cannot parse picture header");if(!o1(S,k,L))return fi(v,3,"Bad code word");W.c=16383&(S[k+4]<<8|S[k+3]),W.Td=S[k+4]>>6,W.i=16383&(S[k+6]<<8|S[k+5]),W.Ud=S[k+6]>>6,k+=7,L-=7,v.za=W.c+15>>4,v.Ub=W.i+15>>4,_.width=W.c,_.height=W.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,i((U=v.Pa).jb,0,255,U.jb.length),n((U=v.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,i(U.Zb,0,0,U.Zb.length),i(U.Lb,0,0,U.Lb)}if(z.ub>L)return fi(v,7,"bad partition length");X(U=v.m,S,k,z.ub),k+=z.ub,L-=z.ub,z.Rb&&(W.Ld=me(U),W.Kd=me(U)),W=v.Qa;var $,J=v.Pa;if(n(U!=null),n(W!=null),W.Cb=me(U),W.Cb){if(W.Bb=me(U),me(U)){for(W.Fb=me(U),$=0;4>$;++$)W.Zb[$]=me(U)?Q(U,7):0;for($=0;4>$;++$)W.Lb[$]=me(U)?Q(U,6):0}if(W.Bb)for($=0;3>$;++$)J.jb[$]=me(U)?Y(U,8):255}else W.Bb=0;if(U.Ka)return fi(v,3,"cannot parse segment header");if((W=v.ed).zd=me(U),W.Tb=Y(U,6),W.wb=Y(U,3),W.Pc=me(U),W.Pc&&me(U)){for(J=0;4>J;++J)me(U)&&(W.vd[J]=Q(U,6));for(J=0;4>J;++J)me(U)&&(W.od[J]=Q(U,6))}if(v.L=W.Tb==0?0:W.zd?1:2,U.Ka)return fi(v,3,"cannot parse filter header");var ye=L;if(L=$=k,k=$+ye,W=ye,v.Xb=(1<<Y(v.m,2))-1,ye<3*(J=v.Xb))S=7;else{for($+=3*J,W-=3*J,ye=0;ye<J;++ye){var Me=S[L+0]|S[L+1]<<8|S[L+2]<<16;Me>W&&(Me=W),X(v.Jc[+ye],S,$,Me),$+=Me,W-=Me,L+=3}X(v.Jc[+J],S,$,W),S=$<k?0:5}if(S!=0)return fi(v,S,"cannot parse partitions");for(S=Y($=v.m,7),L=me($)?Q($,4):0,k=me($)?Q($,4):0,W=me($)?Q($,4):0,J=me($)?Q($,4):0,$=me($)?Q($,4):0,ye=v.Qa,Me=0;4>Me;++Me){if(ye.Cb){var Re=ye.Zb[Me];ye.Fb||(Re+=S)}else{if(0<Me){v.pb[Me]=v.pb[0];continue}Re=S}var Ie=v.pb[Me];Ie.Sc[0]=Ix[Pa(Re+L,127)],Ie.Sc[1]=Sx[Pa(Re+0,127)],Ie.Eb[0]=2*Ix[Pa(Re+k,127)],Ie.Eb[1]=101581*Sx[Pa(Re+W,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=Ix[Pa(Re+J,117)],Ie.Qc[1]=Sx[Pa(Re+$,127)],Ie.lc=Re+$}if(!z.Rb)return fi(v,4,"Not a key frame.");for(me(U),z=v.Pa,S=0;4>S;++S){for(L=0;8>L;++L)for(k=0;3>k;++k)for(W=0;11>W;++W)J=xe(U,BU[S][L][k][W])?Y(U,8):PU[S][L][k][W],z.Wc[S][L].Yb[k][W]=J;for(L=0;17>L;++L)z.Xc[S][L]=z.Wc[S][VU[L]]}return v.kc=me(U),v.kc&&(v.Bd=Y(U,8)),v.cb=1}function s1(v,_,S,k,L,U,z){var W=_[L].Yb[S];for(S=0;16>L;++L){if(!xe(v,W[S+0]))return L;for(;!xe(v,W[S+1]);)if(W=_[++L].Yb[0],S=0,L==16)return 16;var $=_[L+1].Yb;if(xe(v,W[S+2])){var J=v,ye=0;if(xe(J,(Re=W)[(Me=S)+3]))if(xe(J,Re[Me+6])){for(W=0,Me=2*(ye=xe(J,Re[Me+8]))+(Re=xe(J,Re[Me+9+ye])),ye=0,Re=FU[Me];Re[W];++W)ye+=ye+xe(J,Re[W]);ye+=3+(8<<Me)}else xe(J,Re[Me+7])?(ye=7+2*xe(J,165),ye+=xe(J,145)):ye=5+xe(J,159);else ye=xe(J,Re[Me+4])?3+xe(J,Re[Me+5]):2;W=$[2]}else ye=1,W=$[1];$=z+OU[L],0>(J=v).b&&fe(J);var Me,Re=J.b,Ie=(Me=J.Ca>>1)-(J.I>>Re)>>31;--J.b,J.Ca+=Ie,J.Ca|=1,J.I-=(Me+1&Ie)<<Re,U[$]=((ye^Ie)-Ie)*k[(0<L)+0]}return 16}function jm(v){var _=v.rb[v.sb-1];_.la=0,_.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function ex(v,_){if(v==null)return 0;if(_==null)return fi(v,2,"NULL VP8Io parameter in VP8Decode().");if(!v.cb&&!a1(v,_))return 0;if(n(v.cb),_.ac==null||_.ac(_)){_.ob&&(v.L=0);var S=O1[v.L];if(v.L==2?(v.yb=0,v.zb=0):(v.yb=_.v-S>>4,v.zb=_.j-S>>4,0>v.yb&&(v.yb=0),0>v.zb&&(v.zb=0)),v.Va=_.o+15+S>>4,v.Hb=_.va+15+S>>4,v.Hb>v.za&&(v.Hb=v.za),v.Va>v.Ub&&(v.Va=v.Ub),0<v.L){var k=v.ed;for(S=0;4>S;++S){var L;if(v.Qa.Cb){var U=v.Qa.Lb[S];v.Qa.Fb||(U+=k.Tb)}else U=k.Tb;for(L=0;1>=L;++L){var z=v.gd[S][L],W=U;if(k.Pc&&(W+=k.vd[0],L&&(W+=k.od[0])),0<(W=0>W?0:63<W?63:W)){var $=W;0<k.wb&&($=4<k.wb?$>>2:$>>1)>9-k.wb&&($=9-k.wb),1>$&&($=1),z.dd=$,z.tc=2*W+$,z.ld=40<=W?2:15<=W?1:0}else z.tc=0;z.La=L}}}S=0}else fi(v,6,"Frame setup failed"),S=v.a;if(S=S==0){if(S){v.$c=0,0<v.Aa||(v.Ic=ZU);e:{S=v.Ic,k=4*($=v.za);var J=32*$,ye=$+1,Me=0<v.L?$*(0<v.Aa?2:1):0,Re=(v.Aa==2?2:1)*$;if((z=k+832+(L=3*(16*S+O1[v.L])/2*J)+(U=v.Fa!=null&&0<v.Fa.length?v.Kc.c*v.Kc.i:0))!=z)S=0;else{if(z>v.Vb){if(v.Vb=0,v.Ec=o(z),v.Fc=0,v.Ec==null){S=fi(v,1,"no memory during frame initialization.");break e}v.Vb=z}z=v.Ec,W=v.Fc,v.Ac=z,v.Bc=W,W+=k,v.Gd=a(J,i1),v.Hd=0,v.rb=a(ye+1,r1),v.sb=1,v.wa=Me?a(Me,ch):null,v.Y=0,v.D.Nb=0,v.D.wa=v.wa,v.D.Y=v.Y,0<v.Aa&&(v.D.Y+=$),n(!0),v.oc=z,v.pc=W,W+=832,v.ya=a(Re,Vm),v.aa=0,v.D.ya=v.ya,v.D.aa=v.aa,v.Aa==2&&(v.D.aa+=$),v.R=16*$,v.B=8*$,$=(J=O1[v.L])*v.R,J=J/2*v.B,v.sa=z,v.ta=W+$,v.qa=v.sa,v.ra=v.ta+16*S*v.R+J,v.Ha=v.qa,v.Ia=v.ra+8*S*v.B+J,v.$c=0,W+=L,v.mb=U?z:null,v.nb=U?W:null,n(W+U<=v.Fc+v.Vb),jm(v),i(v.Ac,v.Bc,0,k),S=1}}if(S){if(_.ka=0,_.y=v.sa,_.O=v.ta,_.f=v.qa,_.N=v.ra,_.ea=v.Ha,_.Vd=v.Ia,_.fa=v.R,_.Rc=v.B,_.F=null,_.J=0,!E1){for(S=-255;255>=S;++S)Li[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)yu[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)lg[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)Ah[255+S]=0>S?0:255<S?255:S;E1=1}Eh=rx,vu=tx,og=u1,Go=nx,ls=c1,mi=l1,Dh=Gm,S1=Pd,ag=gx,Vd=$m,jd=mx,vc=vh,Ud=Km,Th=b1,Hd=y1,yc=_l,sg=fu,us=fx,Bs[0]=bl,Bs[1]=ix,Bs[2]=lx,Bs[3]=ux,Bs[4]=h1,Bs[5]=mh,Bs[6]=f1,Bs[7]=zm,Bs[8]=dx,Bs[9]=cx,bc[0]=d1,bc[1]=ax,bc[2]=hu,bc[3]=hh,bc[4]=Io,bc[5]=sx,bc[6]=p1,bu[0]=pc,bu[1]=ox,bu[2]=px,bu[3]=Wm,bu[4]=Od,bu[5]=hx,bu[6]=qm,S=1}else S=0}S&&(S=function(Ie,Ye){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var Le,be=Ie.Jc[Ie.M&Ie.Xb],Ce=Ie.m,$e=Ie;for(Le=0;Le<$e.za;++Le){var Je=Ce,Ke=$e,It=Ke.Ac,mt=Ke.Bc+4*Le,Qt=Ke.zc,vt=Ke.ya[Ke.aa+Le];if(Ke.Qa.Bb?vt.$b=xe(Je,Ke.Pa.jb[0])?2+xe(Je,Ke.Pa.jb[2]):xe(Je,Ke.Pa.jb[1]):vt.$b=0,Ke.kc&&(vt.Ad=xe(Je,Ke.Bd)),vt.Za=!xe(Je,145)+0,vt.Za){var ar=vt.Ob,vr=0;for(Ke=0;4>Ke;++Ke){var tr,qn=Qt[0+Ke];for(tr=0;4>tr;++tr){qn=LU[It[mt+tr]][qn];for(var Tr=vA[xe(Je,qn[0])];0<Tr;)Tr=vA[2*Tr+xe(Je,qn[Tr])];qn=-Tr,It[mt+tr]=qn}r(ar,vr,It,mt,4),vr+=4,Qt[0+Ke]=qn}}else qn=xe(Je,156)?xe(Je,128)?1:3:xe(Je,163)?2:0,vt.Ob[0]=qn,i(It,mt,qn,4),i(Qt,0,qn,4);vt.Dd=xe(Je,142)?xe(Je,114)?xe(Je,183)?1:3:2:0}if($e.m.Ka)return fi(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if($e=be,Je=(Ce=Ie).rb[Ce.sb-1],It=Ce.rb[Ce.sb+Ce.ja],Le=Ce.ya[Ce.aa+Ce.ja],mt=Ce.kc?Le.Ad:0)Je.la=It.la=0,Le.Za||(Je.Na=It.Na=0),Le.Hc=0,Le.Gc=0,Le.ia=0;else{var Cr,In;if(Je=It,It=$e,mt=Ce.Pa.Xc,Qt=Ce.ya[Ce.aa+Ce.ja],vt=Ce.pb[Qt.$b],Ke=Qt.ad,ar=0,vr=Ce.rb[Ce.sb-1],qn=tr=0,i(Ke,ar,0,384),Qt.Za)var Si=0,da=mt[3];else{Tr=o(16);var Ei=Je.Na+vr.Na;if(Ei=ug(It,mt[1],Ei,vt.Eb,0,Tr,0),Je.Na=vr.Na=(0<Ei)+0,1<Ei)Eh(Tr,0,Ke,ar);else{var pa=Tr[0]+3>>3;for(Tr=0;256>Tr;Tr+=16)Ke[ar+Tr]=pa}Si=1,da=mt[0]}var yr=15&Je.la,Ba=15&vr.la;for(Tr=0;4>Tr;++Tr){var Va=1&Ba;for(pa=In=0;4>pa;++pa)yr=yr>>1|(Va=(Ei=ug(It,da,Ei=Va+(1&yr),vt.Sc,Si,Ke,ar))>Si)<<7,In=In<<2|(3<Ei?3:1<Ei?2:Ke[ar+0]!=0),ar+=16;yr>>=4,Ba=Ba>>1|Va<<7,tr=(tr<<8|In)>>>0}for(da=yr,Si=Ba>>4,Cr=0;4>Cr;Cr+=2){for(In=0,yr=Je.la>>4+Cr,Ba=vr.la>>4+Cr,Tr=0;2>Tr;++Tr){for(Va=1&Ba,pa=0;2>pa;++pa)Ei=Va+(1&yr),yr=yr>>1|(Va=0<(Ei=ug(It,mt[2],Ei,vt.Qc,0,Ke,ar)))<<3,In=In<<2|(3<Ei?3:1<Ei?2:Ke[ar+0]!=0),ar+=16;yr>>=2,Ba=Ba>>1|Va<<5}qn|=In<<4*Cr,da|=yr<<4<<Cr,Si|=(240&Ba)<<Cr}Je.la=da,vr.la=Si,Qt.Hc=tr,Qt.Gc=qn,Qt.ia=43690&qn?0:vt.ia,mt=!(tr|qn)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[Le.$b][Le.Za],Ce.wa[Ce.Y+Ce.ja].La|=!mt),$e.Ka)return fi(Ie,7,"Premature end-of-file encountered.")}if(jm(Ie),Ce=Ye,$e=1,Le=(be=Ie).D,Je=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Le.M=be.M,Le.uc=Je,eg(be,Le),$e=1,Le=(In=be.D).Nb,Je=(qn=O1[be.L])*be.R,It=qn/2*be.B,Tr=16*Le*be.R,pa=8*Le*be.B,mt=be.sa,Qt=be.ta-Je+Tr,vt=be.qa,Ke=be.ra-It+pa,ar=be.Ha,vr=be.Ia-It+pa,Ba=(yr=In.M)==0,tr=yr>=be.Va-1,be.Aa==2&&eg(be,In),In.uc)for(Va=(Ei=be).D.M,n(Ei.D.uc),In=Ei.yb;In<Ei.Hb;++In){Si=In,da=Va;var Yi=(fo=(ri=Ei).D).Nb;Cr=ri.R;var fo=fo.wa[fo.Y+Si],$o=ri.sa,hs=ri.ta+16*Yi*Cr+16*Si,xl=fo.dd,Xi=fo.tc;if(Xi!=0)if(n(3<=Xi),ri.L==1)0<Si&&yc($o,hs,Cr,Xi+4),fo.La&&us($o,hs,Cr,Xi),0<da&&Hd($o,hs,Cr,Xi+4),fo.La&&sg($o,hs,Cr,Xi);else{var _u=ri.B,zd=ri.qa,kh=ri.ra+8*Yi*_u+8*Si,wc=ri.Ha,ri=ri.Ia+8*Yi*_u+8*Si;Yi=fo.ld,0<Si&&(S1($o,hs,Cr,Xi+4,xl,Yi),Vd(zd,kh,wc,ri,_u,Xi+4,xl,Yi)),fo.La&&(vc($o,hs,Cr,Xi,xl,Yi),Th(zd,kh,wc,ri,_u,Xi,xl,Yi)),0<da&&(Dh($o,hs,Cr,Xi+4,xl,Yi),ag(zd,kh,wc,ri,_u,Xi+4,xl,Yi)),fo.La&&(jd($o,hs,Cr,Xi,xl,Yi),Ud(zd,kh,wc,ri,_u,Xi,xl,Yi))}}if(be.ia&&alert("todo:DitherRow"),Ce.put!=null){if(In=16*yr,yr=16*(yr+1),Ba?(Ce.y=be.sa,Ce.O=be.ta+Tr,Ce.f=be.qa,Ce.N=be.ra+pa,Ce.ea=be.Ha,Ce.W=be.Ia+pa):(In-=qn,Ce.y=mt,Ce.O=Qt,Ce.f=vt,Ce.N=Ke,Ce.ea=ar,Ce.W=vr),tr||(yr-=qn),yr>Ce.o&&(yr=Ce.o),Ce.F=null,Ce.J=null,be.Fa!=null&&0<be.Fa.length&&In<yr&&(Ce.J=Zm(be,Ce,In,yr-In),Ce.F=be.mb,Ce.F==null&&Ce.F.length==0)){$e=fi(be,3,"Could not decode alpha data.");break e}In<Ce.j&&(qn=Ce.j-In,In=Ce.j,n(!(1&qn)),Ce.O+=be.R*qn,Ce.N+=be.B*(qn>>1),Ce.W+=be.B*(qn>>1),Ce.F!=null&&(Ce.J+=Ce.width*qn)),In<yr&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=In-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=yr-In,$e=Ce.put(Ce))}Le+1!=be.Ic||tr||(r(be.sa,be.ta-Je,mt,Qt+16*be.R,Je),r(be.qa,be.ra-It,vt,Ke+8*be.B,It),r(be.Ha,be.Ia-It,ar,vr+8*be.B,It))}if(!$e)return fi(Ie,6,"Output aborted.")}return 1}(v,_)),_.bc!=null&&_.bc(_),S&=1}return S?(v.cb=0,S):0}function Os(v,_,S,k,L){L=v[_+S+32*k]+(L>>3),v[_+S+32*k]=-256&L?0>L?0:255:L}function ph(v,_,S,k,L,U){Os(v,_,0,S,k+L),Os(v,_,1,S,k+U),Os(v,_,2,S,k-U),Os(v,_,3,S,k-L)}function la(v){return(20091*v>>16)+v}function Um(v,_,S,k){var L,U=0,z=o(16);for(L=0;4>L;++L){var W=v[_+0]+v[_+8],$=v[_+0]-v[_+8],J=(35468*v[_+4]>>16)-la(v[_+12]),ye=la(v[_+4])+(35468*v[_+12]>>16);z[U+0]=W+ye,z[U+1]=$+J,z[U+2]=$-J,z[U+3]=W-ye,U+=4,_++}for(L=U=0;4>L;++L)W=(v=z[U+0]+4)+z[U+8],$=v-z[U+8],J=(35468*z[U+4]>>16)-la(z[U+12]),Os(S,k,0,0,W+(ye=la(z[U+4])+(35468*z[U+12]>>16))),Os(S,k,1,0,$+J),Os(S,k,2,0,$-J),Os(S,k,3,0,W-ye),U++,k+=32}function l1(v,_,S,k){var L=v[_+0]+4,U=35468*v[_+4]>>16,z=la(v[_+4]),W=35468*v[_+1]>>16;ph(S,k,0,L+z,v=la(v[_+1]),W),ph(S,k,1,L+U,v,W),ph(S,k,2,L-U,v,W),ph(S,k,3,L-z,v,W)}function tx(v,_,S,k,L){Um(v,_,S,k),L&&Um(v,_+16,S,k+4)}function u1(v,_,S,k){vu(v,_+0,S,k,1),vu(v,_+32,S,k+128,1)}function nx(v,_,S,k){var L;for(v=v[_+0]+4,L=0;4>L;++L)for(_=0;4>_;++_)Os(S,k,_,L,v)}function c1(v,_,S,k){v[_+0]&&Go(v,_+0,S,k),v[_+16]&&Go(v,_+16,S,k+4),v[_+32]&&Go(v,_+32,S,k+128),v[_+48]&&Go(v,_+48,S,k+128+4)}function rx(v,_,S,k){var L,U=o(16);for(L=0;4>L;++L){var z=v[_+0+L]+v[_+12+L],W=v[_+4+L]+v[_+8+L],$=v[_+4+L]-v[_+8+L],J=v[_+0+L]-v[_+12+L];U[0+L]=z+W,U[8+L]=z-W,U[4+L]=J+$,U[12+L]=J-$}for(L=0;4>L;++L)z=(v=U[0+4*L]+3)+U[3+4*L],W=U[1+4*L]+U[2+4*L],$=U[1+4*L]-U[2+4*L],J=v-U[3+4*L],S[k+0]=z+W>>3,S[k+16]=J+$>>3,S[k+32]=z-W>>3,S[k+48]=J-$>>3,k+=64}function Hm(v,_,S){var k,L=_-32,U=La,z=255-v[L-1];for(k=0;k<S;++k){var W,$=U,J=z+v[_-1];for(W=0;W<S;++W)v[_+W]=$[J+v[L+W]];_+=32}}function ix(v,_){Hm(v,_,4)}function ox(v,_){Hm(v,_,8)}function ax(v,_){Hm(v,_,16)}function hu(v,_){var S;for(S=0;16>S;++S)r(v,_+32*S,v,_-32,16)}function hh(v,_){var S;for(S=16;0<S;--S)i(v,_,v[_-1],16),_+=32}function fh(v,_,S){var k;for(k=0;16>k;++k)i(_,S+32*k,v,16)}function d1(v,_){var S,k=16;for(S=0;16>S;++S)k+=v[_-1+32*S]+v[_+S-32];fh(k>>5,v,_)}function Io(v,_){var S,k=8;for(S=0;16>S;++S)k+=v[_-1+32*S];fh(k>>4,v,_)}function sx(v,_){var S,k=8;for(S=0;16>S;++S)k+=v[_+S-32];fh(k>>4,v,_)}function p1(v,_){fh(128,v,_)}function fn(v,_,S){return v+2*_+S+2>>2}function lx(v,_){var S,k=_-32;for(k=new Uint8Array([fn(v[k-1],v[k+0],v[k+1]),fn(v[k+0],v[k+1],v[k+2]),fn(v[k+1],v[k+2],v[k+3]),fn(v[k+2],v[k+3],v[k+4])]),S=0;4>S;++S)r(v,_+32*S,k,0,k.length)}function ux(v,_){var S=v[_-1],k=v[_-1+32],L=v[_-1+64],U=v[_-1+96];je(v,_+0,16843009*fn(v[_-1-32],S,k)),je(v,_+32,16843009*fn(S,k,L)),je(v,_+64,16843009*fn(k,L,U)),je(v,_+96,16843009*fn(L,U,U))}function bl(v,_){var S,k=4;for(S=0;4>S;++S)k+=v[_+S-32]+v[_-1+32*S];for(k>>=3,S=0;4>S;++S)i(v,_+32*S,k,4)}function h1(v,_){var S=v[_-1+0],k=v[_-1+32],L=v[_-1+64],U=v[_-1-32],z=v[_+0-32],W=v[_+1-32],$=v[_+2-32],J=v[_+3-32];v[_+0+96]=fn(k,L,v[_-1+96]),v[_+1+96]=v[_+0+64]=fn(S,k,L),v[_+2+96]=v[_+1+64]=v[_+0+32]=fn(U,S,k),v[_+3+96]=v[_+2+64]=v[_+1+32]=v[_+0+0]=fn(z,U,S),v[_+3+64]=v[_+2+32]=v[_+1+0]=fn(W,z,U),v[_+3+32]=v[_+2+0]=fn($,W,z),v[_+3+0]=fn(J,$,W)}function f1(v,_){var S=v[_+1-32],k=v[_+2-32],L=v[_+3-32],U=v[_+4-32],z=v[_+5-32],W=v[_+6-32],$=v[_+7-32];v[_+0+0]=fn(v[_+0-32],S,k),v[_+1+0]=v[_+0+32]=fn(S,k,L),v[_+2+0]=v[_+1+32]=v[_+0+64]=fn(k,L,U),v[_+3+0]=v[_+2+32]=v[_+1+64]=v[_+0+96]=fn(L,U,z),v[_+3+32]=v[_+2+64]=v[_+1+96]=fn(U,z,W),v[_+3+64]=v[_+2+96]=fn(z,W,$),v[_+3+96]=fn(W,$,$)}function mh(v,_){var S=v[_-1+0],k=v[_-1+32],L=v[_-1+64],U=v[_-1-32],z=v[_+0-32],W=v[_+1-32],$=v[_+2-32],J=v[_+3-32];v[_+0+0]=v[_+1+64]=U+z+1>>1,v[_+1+0]=v[_+2+64]=z+W+1>>1,v[_+2+0]=v[_+3+64]=W+$+1>>1,v[_+3+0]=$+J+1>>1,v[_+0+96]=fn(L,k,S),v[_+0+64]=fn(k,S,U),v[_+0+32]=v[_+1+96]=fn(S,U,z),v[_+1+32]=v[_+2+96]=fn(U,z,W),v[_+2+32]=v[_+3+96]=fn(z,W,$),v[_+3+32]=fn(W,$,J)}function zm(v,_){var S=v[_+0-32],k=v[_+1-32],L=v[_+2-32],U=v[_+3-32],z=v[_+4-32],W=v[_+5-32],$=v[_+6-32],J=v[_+7-32];v[_+0+0]=S+k+1>>1,v[_+1+0]=v[_+0+64]=k+L+1>>1,v[_+2+0]=v[_+1+64]=L+U+1>>1,v[_+3+0]=v[_+2+64]=U+z+1>>1,v[_+0+32]=fn(S,k,L),v[_+1+32]=v[_+0+96]=fn(k,L,U),v[_+2+32]=v[_+1+96]=fn(L,U,z),v[_+3+32]=v[_+2+96]=fn(U,z,W),v[_+3+64]=fn(z,W,$),v[_+3+96]=fn(W,$,J)}function cx(v,_){var S=v[_-1+0],k=v[_-1+32],L=v[_-1+64],U=v[_-1+96];v[_+0+0]=S+k+1>>1,v[_+2+0]=v[_+0+32]=k+L+1>>1,v[_+2+32]=v[_+0+64]=L+U+1>>1,v[_+1+0]=fn(S,k,L),v[_+3+0]=v[_+1+32]=fn(k,L,U),v[_+3+32]=v[_+1+64]=fn(L,U,U),v[_+3+64]=v[_+2+64]=v[_+0+96]=v[_+1+96]=v[_+2+96]=v[_+3+96]=U}function dx(v,_){var S=v[_-1+0],k=v[_-1+32],L=v[_-1+64],U=v[_-1+96],z=v[_-1-32],W=v[_+0-32],$=v[_+1-32],J=v[_+2-32];v[_+0+0]=v[_+2+32]=S+z+1>>1,v[_+0+32]=v[_+2+64]=k+S+1>>1,v[_+0+64]=v[_+2+96]=L+k+1>>1,v[_+0+96]=U+L+1>>1,v[_+3+0]=fn(W,$,J),v[_+2+0]=fn(z,W,$),v[_+1+0]=v[_+3+32]=fn(S,z,W),v[_+1+32]=v[_+3+64]=fn(k,S,z),v[_+1+64]=v[_+3+96]=fn(L,k,S),v[_+1+96]=fn(U,L,k)}function px(v,_){var S;for(S=0;8>S;++S)r(v,_+32*S,v,_-32,8)}function Wm(v,_){var S;for(S=0;8>S;++S)i(v,_,v[_-1],8),_+=32}function Fd(v,_,S){var k;for(k=0;8>k;++k)i(_,S+32*k,v,8)}function pc(v,_){var S,k=8;for(S=0;8>S;++S)k+=v[_+S-32]+v[_-1+32*S];Fd(k>>4,v,_)}function hx(v,_){var S,k=4;for(S=0;8>S;++S)k+=v[_+S-32];Fd(k>>3,v,_)}function Od(v,_){var S,k=4;for(S=0;8>S;++S)k+=v[_-1+32*S];Fd(k>>3,v,_)}function qm(v,_){Fd(128,v,_)}function gh(v,_,S){var k=v[_-S],L=v[_+0],U=3*(L-k)+bx[1020+v[_-2*S]-v[_+S]],z=D1[112+(U+4>>3)];v[_-S]=La[255+k+D1[112+(U+3>>3)]],v[_+0]=La[255+L-z]}function m1(v,_,S,k){var L=v[_+0],U=v[_+S];return ds[255+v[_-2*S]-v[_-S]]>k||ds[255+U-L]>k}function g1(v,_,S,k){return 4*ds[255+v[_-S]-v[_+0]]+ds[255+v[_-2*S]-v[_+S]]<=k}function v1(v,_,S,k,L){var U=v[_-3*S],z=v[_-2*S],W=v[_-S],$=v[_+0],J=v[_+S],ye=v[_+2*S],Me=v[_+3*S];return 4*ds[255+W-$]+ds[255+z-J]>k?0:ds[255+v[_-4*S]-U]<=L&&ds[255+U-z]<=L&&ds[255+z-W]<=L&&ds[255+Me-ye]<=L&&ds[255+ye-J]<=L&&ds[255+J-$]<=L}function y1(v,_,S,k){var L=2*k+1;for(k=0;16>k;++k)g1(v,_+k,S,L)&&gh(v,_+k,S)}function _l(v,_,S,k){var L=2*k+1;for(k=0;16>k;++k)g1(v,_+k*S,1,L)&&gh(v,_+k*S,1)}function fu(v,_,S,k){var L;for(L=3;0<L;--L)y1(v,_+=4*S,S,k)}function fx(v,_,S,k){var L;for(L=3;0<L;--L)_l(v,_+=4,S,k)}function hc(v,_,S,k,L,U,z,W){for(U=2*U+1;0<L--;){if(v1(v,_,S,U,z))if(m1(v,_,S,W))gh(v,_,S);else{var $=v,J=_,ye=S,Me=$[J-2*ye],Re=$[J-ye],Ie=$[J+0],Ye=$[J+ye],Le=$[J+2*ye],be=27*($e=bx[1020+3*(Ie-Re)+bx[1020+Me-Ye]])+63>>7,Ce=18*$e+63>>7,$e=9*$e+63>>7;$[J-3*ye]=La[255+$[J-3*ye]+$e],$[J-2*ye]=La[255+Me+Ce],$[J-ye]=La[255+Re+be],$[J+0]=La[255+Ie-be],$[J+ye]=La[255+Ye-Ce],$[J+2*ye]=La[255+Le-$e]}_+=k}}function Ps(v,_,S,k,L,U,z,W){for(U=2*U+1;0<L--;){if(v1(v,_,S,U,z))if(m1(v,_,S,W))gh(v,_,S);else{var $=v,J=_,ye=S,Me=$[J-ye],Re=$[J+0],Ie=$[J+ye],Ye=D1[112+((Le=3*(Re-Me))+4>>3)],Le=D1[112+(Le+3>>3)],be=Ye+1>>1;$[J-2*ye]=La[255+$[J-2*ye]+be],$[J-ye]=La[255+Me+Le],$[J+0]=La[255+Re-Ye],$[J+ye]=La[255+Ie-be]}_+=k}}function Gm(v,_,S,k,L,U){hc(v,_,S,1,16,k,L,U)}function Pd(v,_,S,k,L,U){hc(v,_,1,S,16,k,L,U)}function mx(v,_,S,k,L,U){var z;for(z=3;0<z;--z)Ps(v,_+=4*S,S,1,16,k,L,U)}function vh(v,_,S,k,L,U){var z;for(z=3;0<z;--z)Ps(v,_+=4,1,S,16,k,L,U)}function gx(v,_,S,k,L,U,z,W){hc(v,_,L,1,8,U,z,W),hc(S,k,L,1,8,U,z,W)}function $m(v,_,S,k,L,U,z,W){hc(v,_,1,L,8,U,z,W),hc(S,k,1,L,8,U,z,W)}function Km(v,_,S,k,L,U,z,W){Ps(v,_+4*L,L,1,8,U,z,W),Ps(S,k+4*L,L,1,8,U,z,W)}function b1(v,_,S,k,L,U,z,W){Ps(v,_+4,1,L,8,U,z,W),Ps(S,k+4,1,L,8,U,z,W)}function yh(){this.ba=new ks,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ti,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ym(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xm(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _1(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new M}function vx(){this.xb=this.a=0,this.l=new dh,this.ca=new ks,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _1,this.ab=0,this.gc=a(4,Xm),this.Oc=0}function bh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ld(v,_,S,k,L,U,z){for(v=v==null?0:v[_+0],_=0;_<z;++_)L[U+_]=v+S[k+_]&255,v=L[U+_]}function Qm(v,_,S,k,L,U,z){var W;if(v==null)Ld(null,null,S,k,L,U,z);else for(W=0;W<z;++W)L[U+W]=v[_+W]+S[k+W]&255}function fc(v,_,S,k,L,U,z){if(v==null)Ld(null,null,S,k,L,U,z);else{var W,$=v[_+0],J=$,ye=$;for(W=0;W<z;++W)J=ye+($=v[_+W])-J,ye=S[k+W]+(-256&J?0>J?0:255:J)&255,J=$,L[U+W]=ye}}function Zm(v,_,S,k){var L=_.width,U=_.o;if(n(v!=null&&_!=null),0>S||0>=k||S+k>U)return null;if(!v.Cc){if(v.ga==null){var z;if(v.ga=new bh,(z=v.ga==null)||(z=_.width*_.o,n(v.Gb.length==0),v.Gb=o(z),v.Uc=0,v.Gb==null?z=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,z=1),z=!z),!z){z=v.ga;var W=v.Fa,$=v.P,J=v.qc,ye=v.mb,Me=v.nb,Re=$+1,Ie=J-1,Ye=z.l;if(n(W!=null&&ye!=null&&_!=null),_c[0]=null,_c[1]=Ld,_c[2]=Qm,_c[3]=fc,z.ca=ye,z.tb=Me,z.c=_.width,z.i=_.height,n(0<z.c&&0<z.i),1>=J)_=0;else if(z.$a=W[$+0]>>0&3,z.Z=W[$+0]>>2&3,z.Lc=W[$+0]>>4&3,$=W[$+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||$)_=0;else if(Ye.put=fl,Ye.ac=po,Ye.bc=ml,Ye.ma=z,Ye.width=_.width,Ye.height=_.height,Ye.Da=_.Da,Ye.v=_.v,Ye.va=_.va,Ye.j=_.j,Ye.o=_.o,z.$a)e:{n(z.$a==1),_=as();t:for(;;){if(_==null){_=0;break e}if(n(z!=null),z.mc=_,_.c=z.c,_.i=z.i,_.l=z.l,_.l.ma=z,_.l.width=z.c,_.l.height=z.i,_.a=0,G(_.m,W,Re,Ie),!yl(z.c,z.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&pu(_.s)?(z.ic=1,W=_.c*_.i,_.Ta=null,_.Ua=0,_.V=o(W),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(z.ic=0,_=Nd(_,z.c)),!_))break t;_=1;break e}z.mc=null,_=0}else _=Ie>=z.c*z.i;z=!_}if(z)return null;v.ga.Lc!=1?v.Ga=0:k=U-S}n(v.ga!=null),n(S+k<=U);e:{if(_=(W=v.ga).c,U=W.l.o,W.$a==0){if(Re=v.rc,Ie=v.Vc,Ye=v.Fa,$=v.P+1+S*_,J=v.mb,ye=v.nb+S*_,n($<=v.P+v.qc),W.Z!=0)for(n(_c[W.Z]!=null),z=0;z<k;++z)_c[W.Z](Re,Ie,Ye,$,J,ye,_),Re=J,Ie=ye,ye+=_,$+=_;else for(z=0;z<k;++z)r(J,ye,Ye,$,_),Re=J,Ie=ye,ye+=_,$+=_;v.rc=Re,v.Vc=Ie}else{if(n(W.mc!=null),_=S+k,n((z=W.mc)!=null),n(_<=z.i),z.C>=_)_=1;else if(W.ic||Ae(),W.ic){W=z.V,Re=z.Ba,Ie=z.c;var Le=z.i,be=(Ye=1,$=z.$/Ie,J=z.$%Ie,ye=z.m,Me=z.s,z.$),Ce=Ie*Le,$e=Ie*_,Je=Me.wc,Ke=be<$e?Ci(Me,J,$):null;n(be<=Ce),n(_<=Le),n(pu(Me));t:for(;;){for(;!ye.h&&be<$e;){if(J&Je||(Ke=Ci(Me,J,$)),n(Ke!=null),pe(ye),256>(Le=sa(Ke.G[0],Ke.H[0],ye)))W[Re+be]=Le,++be,++J>=Ie&&(J=0,++$<=_&&!($%16)&&Ns(z,$));else{if(!(280>Le)){Ye=0;break t}Le=Ms(Le-256,ye);var It,mt=sa(Ke.G[4],Ke.H[4],ye);if(pe(ye),!(be>=(mt=gl(Ie,mt=Ms(mt,ye)))&&Ce-be>=Le)){Ye=0;break t}for(It=0;It<Le;++It)W[Re+be+It]=W[Re+be+It-mt];for(be+=Le,J+=Le;J>=Ie;)J-=Ie,++$<=_&&!($%16)&&Ns(z,$);be<$e&&J&Je&&(Ke=Ci(Me,J,$))}n(ye.h==Z(ye))}Ns(z,$>_?_:$);break t}!Ye||ye.h&&be<Ce?(Ye=0,z.a=ye.h?5:3):z.$=be,_=Ye}else _=Fs(z,z.V,z.Ba,z.c,z.i,_,ah);if(!_){k=0;break e}}S+k>=U&&(v.Cc=1),k=1}if(!k)return null;if(v.Cc&&((k=v.ga)!=null&&(k.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+S*L}function C(v,_,S,k,L,U){for(;0<L--;){var z,W=v,$=_+(S?1:0),J=v,ye=_+(S?0:3);for(z=0;z<k;++z){var Me=J[ye+4*z];Me!=255&&(Me*=32897,W[$+4*z+0]=W[$+4*z+0]*Me>>23,W[$+4*z+1]=W[$+4*z+1]*Me>>23,W[$+4*z+2]=W[$+4*z+2]*Me>>23)}_+=U}}function B(v,_,S,k,L){for(;0<k--;){var U;for(U=0;U<S;++U){var z=v[_+2*U+0],W=15&(J=v[_+2*U+1]),$=4369*W,J=(240&J|J>>4)*$>>16;v[_+2*U+0]=(240&z|z>>4)*$>>16&240|(15&z|z<<4)*$>>16>>4&15,v[_+2*U+1]=240&J|W}_+=L}}function le(v,_,S,k,L,U,z,W){var $,J,ye=255;for(J=0;J<L;++J){for($=0;$<k;++$){var Me=v[_+$];U[z+4*$]=Me,ye&=Me}_+=S,z+=W}return ye!=255}function ge(v,_,S,k,L){var U;for(U=0;U<L;++U)S[k+U]=v[_+U]>>8}function Ae(){cs=C,Rr=B,Nr=le,gi=ge}function He(v,_,S){E[v]=function(k,L,U,z,W,$,J,ye,Me,Re,Ie,Ye,Le,be,Ce,$e,Je){var Ke,It=Je-1>>1,mt=W[$+0]|J[ye+0]<<16,Qt=Me[Re+0]|Ie[Ye+0]<<16;n(k!=null);var vt=3*mt+Qt+131074>>2;for(_(k[L+0],255&vt,vt>>16,Le,be),U!=null&&(vt=3*Qt+mt+131074>>2,_(U[z+0],255&vt,vt>>16,Ce,$e)),Ke=1;Ke<=It;++Ke){var ar=W[$+Ke]|J[ye+Ke]<<16,vr=Me[Re+Ke]|Ie[Ye+Ke]<<16,tr=mt+ar+Qt+vr+524296,qn=tr+2*(ar+Qt)>>3;vt=qn+mt>>1,mt=(tr=tr+2*(mt+vr)>>3)+ar>>1,_(k[L+2*Ke-1],255&vt,vt>>16,Le,be+(2*Ke-1)*S),_(k[L+2*Ke-0],255&mt,mt>>16,Le,be+(2*Ke-0)*S),U!=null&&(vt=tr+Qt>>1,mt=qn+vr>>1,_(U[z+2*Ke-1],255&vt,vt>>16,Ce,$e+(2*Ke-1)*S),_(U[z+2*Ke+0],255&mt,mt>>16,Ce,$e+(2*Ke+0)*S)),mt=ar,Qt=vr}1&Je||(vt=3*mt+Qt+131074>>2,_(k[L+Je-1],255&vt,vt>>16,Le,be+(Je-1)*S),U!=null&&(vt=3*Qt+mt+131074>>2,_(U[z+Je-1],255&vt,vt>>16,Ce,$e+(Je-1)*S)))}}function tt(){ps[T1]=UU,ps[A1]=bA,ps[fA]=HU,ps[k1]=_A,ps[M1]=wA,ps[_x]=xA,ps[mA]=zU,ps[wx]=bA,ps[xx]=_A,ps[R1]=wA,ps[Cx]=xA}function Ct(v){return v&~WU?0>v?0:255:v>>CA}function Kt(v,_){return Ct((19077*v>>8)+(26149*_>>8)-14234)}function xn(v,_,S){return Ct((19077*v>>8)-(6419*_>>8)-(13320*S>>8)+8708)}function bn(v,_){return Ct((19077*v>>8)+(33050*_>>8)-17685)}function Yn(v,_,S,k,L){k[L+0]=Kt(v,S),k[L+1]=xn(v,_,S),k[L+2]=bn(v,_)}function Yr(v,_,S,k,L){k[L+0]=bn(v,_),k[L+1]=xn(v,_,S),k[L+2]=Kt(v,S)}function ni(v,_,S,k,L){var U=xn(v,_,S);_=U<<3&224|bn(v,_)>>3,k[L+0]=248&Kt(v,S)|U>>5,k[L+1]=_}function Ii(v,_,S,k,L){var U=240&bn(v,_)|15;k[L+0]=240&Kt(v,S)|xn(v,_,S)>>4,k[L+1]=U}function So(v,_,S,k,L){k[L+0]=255,Yn(v,_,S,k,L+1)}function Ki(v,_,S,k,L){Yr(v,_,S,k,L),k[L+3]=255}function Ls(v,_,S,k,L){Yn(v,_,S,k,L),k[L+3]=255}function Pa(v,_){return 0>v?0:v>_?_:v}function wl(v,_,S){E[v]=function(k,L,U,z,W,$,J,ye,Me){for(var Re=ye+(-2&Me)*S;ye!=Re;)_(k[L+0],U[z+0],W[$+0],J,ye),_(k[L+1],U[z+0],W[$+0],J,ye+S),L+=2,++z,++$,ye+=2*S;1&Me&&_(k[L+0],U[z+0],W[$+0],J,ye)}}function w1(v,_,S){return S==0?v==0?_==0?6:5:_==0?4:0:S}function Jm(v,_,S,k,L){switch(v>>>30){case 3:vu(_,S,k,L,0);break;case 2:mi(_,S,k,L);break;case 1:Go(_,S,k,L)}}function eg(v,_){var S,k,L=_.M,U=_.Nb,z=v.oc,W=v.pc+40,$=v.oc,J=v.pc+584,ye=v.oc,Me=v.pc+600;for(S=0;16>S;++S)z[W+32*S-1]=129;for(S=0;8>S;++S)$[J+32*S-1]=129,ye[Me+32*S-1]=129;for(0<L?z[W-1-32]=$[J-1-32]=ye[Me-1-32]=129:(i(z,W-32-1,127,21),i($,J-32-1,127,9),i(ye,Me-32-1,127,9)),k=0;k<v.za;++k){var Re=_.ya[_.aa+k];if(0<k){for(S=-1;16>S;++S)r(z,W+32*S-4,z,W+32*S+12,4);for(S=-1;8>S;++S)r($,J+32*S-4,$,J+32*S+4,4),r(ye,Me+32*S-4,ye,Me+32*S+4,4)}var Ie=v.Gd,Ye=v.Hd+k,Le=Re.ad,be=Re.Hc;if(0<L&&(r(z,W-32,Ie[Ye].y,0,16),r($,J-32,Ie[Ye].f,0,8),r(ye,Me-32,Ie[Ye].ea,0,8)),Re.Za){var Ce=z,$e=W-32+16;for(0<L&&(k>=v.za-1?i(Ce,$e,Ie[Ye].y[15],4):r(Ce,$e,Ie[Ye+1].y,0,4)),S=0;4>S;S++)Ce[$e+128+S]=Ce[$e+256+S]=Ce[$e+384+S]=Ce[$e+0+S];for(S=0;16>S;++S,be<<=2)Ce=z,$e=W+SA[S],Bs[Re.Ob[S]](Ce,$e),Jm(be,Le,16*+S,Ce,$e)}else if(Ce=w1(k,L,Re.Ob[0]),bc[Ce](z,W),be!=0)for(S=0;16>S;++S,be<<=2)Jm(be,Le,16*+S,z,W+SA[S]);for(S=Re.Gc,Ce=w1(k,L,Re.Dd),bu[Ce]($,J),bu[Ce](ye,Me),be=Le,Ce=$,$e=J,255&(Re=S>>0)&&(170&Re?og(be,256,Ce,$e):ls(be,256,Ce,$e)),Re=ye,be=Me,255&(S>>=8)&&(170&S?og(Le,320,Re,be):ls(Le,320,Re,be)),L<v.Ub-1&&(r(Ie[Ye].y,0,z,W+480,16),r(Ie[Ye].f,0,$,J+224,8),r(Ie[Ye].ea,0,ye,Me+224,8)),S=8*U*v.B,Ie=v.sa,Ye=v.ta+16*k+16*U*v.R,Le=v.qa,Re=v.ra+8*k+S,be=v.Ha,Ce=v.Ia+8*k+S,S=0;16>S;++S)r(Ie,Ye+S*v.R,z,W+32*S,16);for(S=0;8>S;++S)r(Le,Re+S*v.B,$,J+32*S,8),r(be,Ce+S*v.B,ye,Me+32*S,8)}}function _h(v,_,S,k,L,U,z,W,$){var J=[0],ye=[0],Me=0,Re=$!=null?$.kd:0,Ie=$??new Ym;if(v==null||12>S)return 7;Ie.data=v,Ie.w=_,Ie.ha=S,_=[_],S=[S],Ie.gb=[Ie.gb];e:{var Ye=_,Le=S,be=Ie.gb;if(n(v!=null),n(Le!=null),n(be!=null),be[0]=0,12<=Le[0]&&!e(v,Ye[0],"RIFF")){if(e(v,Ye[0]+8,"WEBP")){be=3;break e}var Ce=qe(v,Ye[0]+4);if(12>Ce||4294967286<Ce){be=3;break e}if(Re&&Ce>Le[0]-8){be=7;break e}be[0]=Ce,Ye[0]+=12,Le[0]-=12}be=0}if(be!=0)return be;for(Ce=0<Ie.gb[0],S=S[0];;){e:{var $e=v;Le=_,be=S;var Je=J,Ke=ye,It=Ye=[0];if((vt=Me=[Me])[0]=0,8>be[0])be=7;else{if(!e($e,Le[0],"VP8X")){if(qe($e,Le[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var mt=qe($e,Le[0]+8),Qt=1+Ge($e,Le[0]+12);if(2147483648<=Qt*($e=1+Ge($e,Le[0]+15))){be=3;break e}It!=null&&(It[0]=mt),Je!=null&&(Je[0]=Qt),Ke!=null&&(Ke[0]=$e),Le[0]+=18,be[0]-=18,vt[0]=1}be=0}}if(Me=Me[0],Ye=Ye[0],be!=0)return be;if(Le=!!(2&Ye),!Ce&&Me)return 3;if(U!=null&&(U[0]=!!(16&Ye)),z!=null&&(z[0]=Le),W!=null&&(W[0]=0),z=J[0],Ye=ye[0],Me&&Le&&$==null){be=0;break}if(4>S){be=7;break}if(Ce&&Me||!Ce&&!Me&&!e(v,_[0],"ALPH")){S=[S],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{mt=v,be=_,Ce=S;var vt=Ie.gb;Je=Ie.na,Ke=Ie.P,It=Ie.Sa,Qt=22,n(mt!=null),n(Ce!=null),$e=be[0];var ar=Ce[0];for(n(Je!=null),n(It!=null),Je[0]=null,Ke[0]=null,It[0]=0;;){if(be[0]=$e,Ce[0]=ar,8>ar){be=7;break e}var vr=qe(mt,$e+4);if(4294967286<vr){be=3;break e}var tr=8+vr+1&-2;if(Qt+=tr,0<vt&&Qt>vt){be=3;break e}if(!e(mt,$e,"VP8 ")||!e(mt,$e,"VP8L")){be=0;break e}if(ar[0]<tr){be=7;break e}e(mt,$e,"ALPH")||(Je[0]=mt,Ke[0]=$e+8,It[0]=vr),$e+=tr,ar-=tr}}if(S=S[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],be!=0)break}S=[S],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(vt=v,be=_,Ce=S,Je=Ie.gb[0],Ke=Ie.Ja,It=Ie.xa,mt=be[0],$e=!e(vt,mt,"VP8 "),Qt=!e(vt,mt,"VP8L"),n(vt!=null),n(Ce!=null),n(Ke!=null),n(It!=null),8>Ce[0])be=7;else{if($e||Qt){if(vt=qe(vt,mt+4),12<=Je&&vt>Je-12){be=3;break e}if(Re&&vt>Ce[0]-8){be=7;break e}Ke[0]=vt,be[0]+=8,Ce[0]-=8,It[0]=Qt}else It[0]=5<=Ce[0]&&vt[mt+0]==47&&!(vt[mt+4]>>5),Ke[0]=Ce[0];be=0}if(S=S[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],_=_[0],be!=0)break;if(4294967286<Ie.Ja)return 3;if(W==null||Le||(W[0]=Ie.xa?2:1),z=[z],Ye=[Ye],Ie.xa){if(5>S){be=7;break}W=z,Re=Ye,Le=U,v==null||5>S?v=0:5<=S&&v[_+0]==47&&!(v[_+4]>>5)?(Ce=[0],vt=[0],Je=[0],G(Ke=new F,v,_,S),en(Ke,Ce,vt,Je)?(W!=null&&(W[0]=Ce[0]),Re!=null&&(Re[0]=vt[0]),Le!=null&&(Le[0]=Je[0]),v=1):v=0):v=0}else{if(10>S){be=7;break}W=Ye,v==null||10>S||!o1(v,_+3,S-3)?v=0:(Re=v[_+0]|v[_+1]<<8|v[_+2]<<16,Le=16383&(v[_+7]<<8|v[_+6]),v=16383&(v[_+9]<<8|v[_+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=Ie.Ja||!Le||!v?v=0:(z&&(z[0]=Le),W&&(W[0]=v),v=1))}if(!v||(z=z[0],Ye=Ye[0],Me&&(J[0]!=z||ye[0]!=Ye)))return 3;$!=null&&($[0]=Ie,$.offset=_-$.w,n(4294967286>_-$.w),n($.offset==$.ha-S));break}return be==0||be==7&&Me&&$==null?(U!=null&&(U[0]|=Ie.na!=null&&0<Ie.na.length),k!=null&&(k[0]=z),L!=null&&(L[0]=Ye),0):be}function tg(v,_,S){var k=_.width,L=_.height,U=0,z=0,W=k,$=L;if(_.Da=v!=null&&0<v.Da,_.Da&&(W=v.cd,$=v.bd,U=v.v,z=v.j,11>S||(U&=-2,z&=-2),0>U||0>z||0>=W||0>=$||U+W>k||z+$>L))return 0;if(_.v=U,_.j=z,_.va=U+W,_.o=z+$,_.U=W,_.T=$,_.da=v!=null&&0<v.da,_.da){if(!zt(W,$,S=[v.ib],U=[v.hb]))return 0;_.ib=S[0],_.hb=U[0]}return _.ob=v!=null&&v.ob,_.Kb=v==null||!v.Sd,_.da&&(_.ob=_.ib<3*k/4&&_.hb<3*L/4,_.Kb=0),1}function ng(v){if(v==null)return 2;if(11>v.S){var _=v.f.RGBA;_.fb+=(v.height-1)*_.A,_.A=-_.A}else _=v.f.kb,v=v.height,_.O+=(v-1)*_.fa,_.fa=-_.fa,_.N+=(v-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(v-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(v-1)*_.lb,_.lb=-_.lb);return 0}function wh(v,_,S,k){if(k==null||0>=v||0>=_)return 2;if(S!=null){if(S.Da){var L=S.cd,U=S.bd,z=-2&S.v,W=-2&S.j;if(0>z||0>W||0>=L||0>=U||z+L>v||W+U>_)return 2;v=L,_=U}if(S.da){if(!zt(v,_,L=[S.ib],U=[S.hb]))return 2;v=L[0],_=U[0]}}k.width=v,k.height=_;e:{var $=k.width,J=k.height;if(v=k.S,0>=$||0>=J||!(v>=T1&&13>v))v=2;else{if(0>=k.Rd&&k.sd==null){z=U=L=_=0;var ye=(W=$*EA[v])*J;if(11>v||(U=(J+1)/2*(_=($+1)/2),v==12&&(z=(L=$)*J)),(J=o(ye+2*U+z))==null){v=1;break e}k.sd=J,11>v?(($=k.f.RGBA).eb=J,$.fb=0,$.A=W,$.size=ye):(($=k.f.kb).y=J,$.O=0,$.fa=W,$.Fd=ye,$.f=J,$.N=0+ye,$.Ab=_,$.Cd=U,$.ea=J,$.W=0+ye+U,$.Db=_,$.Ed=U,v==12&&($.F=J,$.J=0+ye+2*U),$.Tc=z,$.lb=L)}if(_=1,L=k.S,U=k.width,z=k.height,L>=T1&&13>L)if(11>L)v=k.f.RGBA,_&=(W=Math.abs(v.A))*(z-1)+U<=v.size,_&=W>=U*EA[L],_&=v.eb!=null;else{v=k.f.kb,W=(U+1)/2,ye=(z+1)/2,$=Math.abs(v.fa),J=Math.abs(v.Ab);var Me=Math.abs(v.Db),Re=Math.abs(v.lb),Ie=Re*(z-1)+U;_&=$*(z-1)+U<=v.Fd,_&=J*(ye-1)+W<=v.Cd,_=(_&=Me*(ye-1)+W<=v.Ed)&$>=U&J>=W&Me>=W,_&=v.y!=null,_&=v.f!=null,_&=v.ea!=null,L==12&&(_&=Re>=U,_&=Ie<=v.Tc,_&=v.F!=null)}else _=0;v=_?0:2}}return v!=0||S!=null&&S.fd&&(v=ng(k)),v}var ho=64,xh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ch=24,Ih=32,rg=8,ua=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(v){return v},E.Predictor2=function(v,_,S){return _[S+0]},E.Predictor3=function(v,_,S){return _[S+1]},E.Predictor4=function(v,_,S){return _[S-1]},E.Predictor5=function(v,_,S){return lt(lt(v,_[S+1]),_[S+0])},E.Predictor6=function(v,_,S){return lt(v,_[S-1])},E.Predictor7=function(v,_,S){return lt(v,_[S+0])},E.Predictor8=function(v,_,S){return lt(_[S-1],_[S+0])},E.Predictor9=function(v,_,S){return lt(_[S+0],_[S+1])},E.Predictor10=function(v,_,S){return lt(lt(v,_[S-1]),lt(_[S+0],_[S+1]))},E.Predictor11=function(v,_,S){var k=_[S+0];return 0>=Xt(k>>24&255,v>>24&255,(_=_[S-1])>>24&255)+Xt(k>>16&255,v>>16&255,_>>16&255)+Xt(k>>8&255,v>>8&255,_>>8&255)+Xt(255&k,255&v,255&_)?k:v},E.Predictor12=function(v,_,S){var k=_[S+0];return(Tt((v>>24&255)+(k>>24&255)-((_=_[S-1])>>24&255))<<24|Tt((v>>16&255)+(k>>16&255)-(_>>16&255))<<16|Tt((v>>8&255)+(k>>8&255)-(_>>8&255))<<8|Tt((255&v)+(255&k)-(255&_)))>>>0},E.Predictor13=function(v,_,S){var k=_[S-1];return(qt((v=lt(v,_[S+0]))>>24&255,k>>24&255)<<24|qt(v>>16&255,k>>16&255)<<16|qt(v>>8&255,k>>8&255)<<8|qt(v>>0&255,k>>0&255))>>>0};var yx=E.PredictorAdd0;E.PredictorAdd1=vn,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var ig=E.PredictorAdd2;Pn("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Pn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var x1,ss=E.ColorIndexInverseTransform,Sh=E.MapARGB,C1=E.VP8LColorIndexInverseTransformAlpha,I1=E.MapAlpha,mc=E.VP8LPredictorsAdd=[];mc.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Bd,ca,qo,gc,mu,gu,Eh,vu,mi,og,Go,ls,Dh,S1,ag,Vd,jd,vc,Ud,Th,Hd,yc,sg,us,cs,Rr,Nr,gi,Li=o(511),yu=o(2041),lg=o(225),Ah=o(767),E1=0,bx=yu,D1=lg,La=Ah,ds=Li,T1=0,A1=1,fA=2,k1=3,M1=4,_x=5,mA=6,wx=7,xx=8,R1=9,Cx=10,DU=[2,3,7],TU=[3,3,11],gA=[280,256,256,256,40],AU=[0,1,1,1,0],kU=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],MU=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],RU=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],NU=8,Ix=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ug=null,FU=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],OU=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],PU=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],LU=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],BU=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],VU=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],bc=[],Bs=[],bu=[],jU=1,yA=2,_c=[],ps=[];He("UpsampleRgbLinePair",Yn,3),He("UpsampleBgrLinePair",Yr,3),He("UpsampleRgbaLinePair",Ls,4),He("UpsampleBgraLinePair",Ki,4),He("UpsampleArgbLinePair",So,4),He("UpsampleRgba4444LinePair",Ii,2),He("UpsampleRgb565LinePair",ni,2);var UU=E.UpsampleRgbLinePair,HU=E.UpsampleBgrLinePair,bA=E.UpsampleRgbaLinePair,_A=E.UpsampleBgraLinePair,wA=E.UpsampleArgbLinePair,xA=E.UpsampleRgba4444LinePair,zU=E.UpsampleRgb565LinePair,N1=16,F1=1<<N1-1,cg=-227,Ex=482,CA=6,WU=(256<<CA)-1,IA=0,qU=o(256),GU=o(256),$U=o(256),KU=o(256),YU=o(Ex-cg),XU=o(Ex-cg);wl("YuvToRgbRow",Yn,3),wl("YuvToBgrRow",Yr,3),wl("YuvToRgbaRow",Ls,4),wl("YuvToBgraRow",Ki,4),wl("YuvToArgbRow",So,4),wl("YuvToRgba4444Row",Ii,2),wl("YuvToRgb565Row",ni,2);var SA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],O1=[0,2,8],QU=[8,7,6,4,4,2,2,2,1,1,1,1],ZU=1;this.WebPDecodeRGBA=function(v,_,S,k,L){var U=A1,z=new yh,W=new ks;z.ba=W,W.S=U,W.width=[W.width],W.height=[W.height];var $=W.width,J=W.height,ye=new du;if(ye==null||v==null)var Me=2;else n(ye!=null),Me=_h(v,_,S,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Me!=0?$=0:($!=null&&($[0]=ye.width[0]),J!=null&&(J[0]=ye.height[0]),$=1),$){W.width=W.width[0],W.height=W.height[0],k!=null&&(k[0]=W.width),L!=null&&(L[0]=W.height);e:{if(k=new dh,(L=new Ym).data=v,L.w=_,L.ha=S,L.kd=1,_=[0],n(L!=null),((v=_h(L.data,L.w,L.ha,null,null,null,_,null,L))==0||v==7)&&_[0]&&(v=4),(_=v)==0){if(n(z!=null),k.data=L.data,k.w=L.w+L.offset,k.ha=L.ha-L.offset,k.put=fl,k.ac=po,k.bc=ml,k.ma=z,L.xa){if((v=as())==null){z=1;break e}if(function(Re,Ie){var Ye=[0],Le=[0],be=[0];t:for(;;){if(Re==null)return 0;if(Ie==null)return Re.a=2,0;if(Re.l=Ie,Re.a=0,G(Re.m,Ie.data,Ie.w,Ie.ha),!en(Re.m,Ye,Le,be)){Re.a=3;break t}if(Re.xb=yA,Ie.width=Ye[0],Ie.height=Le[0],!yl(Ye[0],Le[0],1,Re,null))break t;return 1}return n(Re.a!=0),0}(v,k)){if(k=(_=wh(k.width,k.height,z.Oa,z.ba))==0){t:{k=v;n:for(;;){if(k==null){k=0;break t}if(n(k.s.yc!=null),n(k.s.Ya!=null),n(0<k.s.Wb),n((S=k.l)!=null),n((L=S.ma)!=null),k.xb!=0){if(k.ca=L.ba,k.tb=L.tb,n(k.ca!=null),!tg(L.Oa,S,k1)){k.a=2;break n}if(!Nd(k,S.width)||S.da)break n;if((S.da||pr(k.ca.S))&&Ae(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Ae()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!ht(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Fs(k,k.V,k.Ba,k.c,k.i,S.o,oh))break n;L.Dc=k.Ma,k=1;break t}n(k.a!=0),k=0}k=!k}k&&(_=v.a)}else _=v.a}else{if((v=new Jw)==null){z=1;break e}if(v.Fa=L.na,v.P=L.P,v.qc=L.Sa,a1(v,k)){if((_=wh(k.width,k.height,z.Oa,z.ba))==0){if(v.Aa=0,S=z.Oa,n((L=v)!=null),S!=null){if(0<($=0>($=S.Md)?0:100<$?255:255*$/100)){for(J=ye=0;4>J;++J)12>(Me=L.pb[J]).lc&&(Me.ia=$*QU[0>Me.lc?0:Me.lc]>>3),ye|=Me.ia;ye&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=S.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}ex(v,k)||(_=v.a)}}else _=v.a}_==0&&z.Oa!=null&&z.Oa.fd&&(_=ng(z.ba))}z=_}U=z!=0?null:11>U?W.f.RGBA.eb:W.f.kb.y}else U=null;return U};var EA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,R){for(var N="",T=0;T<4;T++)N+=String.fromCharCode(E[R++]);return N}function c(E,R){return(E[R+0]<<0|E[R+1]<<8|E[R+2]<<16)>>>0}function d(E,R){return(E[R+0]<<0|E[R+1]<<8|E[R+2]<<16|E[R+3]<<24)>>>0}new l;var p=[0],h=[0],f=[],m=new l,g=t,y=function(E,R){var N={},T=0,M=!1,H=0,V=0;if(N.frames=[],!function(q,Z,ae,pe){for(var fe=0;fe<pe;fe++)if(q[Z+fe]!=ae.charCodeAt(fe))return!0;return!1}(E,R,"RIFF",4)){var X,Y;for(d(E,R+=4),R+=8;R<E.length;){var Q=u(E,R),G=d(E,R+=4);R+=4;var re=G+(1&G);switch(Q){case"VP8 ":case"VP8L":N.frames[T]===void 0&&(N.frames[T]={}),(F=N.frames[T]).src_off=M?V:R-8,F.src_size=H+G+8,T++,M&&(M=!1,H=0,V=0);break;case"VP8X":(F=N.header={}).feature_flags=E[R];var ue=R+4;F.canvas_width=1+c(E,ue),ue+=3,F.canvas_height=1+c(E,ue),ue+=3;break;case"ALPH":M=!0,H=re+8,V=R-8;break;case"ANIM":(F=N.header).bgcolor=d(E,R),ue=R+4,F.loop_count=(X=E)[(Y=ue)+0]<<0|X[Y+1]<<8,ue+=2;break;case"ANMF":var Te,F;(F=N.frames[T]={}).offset_x=2*c(E,R),R+=3,F.offset_y=2*c(E,R),R+=3,F.width=1+c(E,R),R+=3,F.height=1+c(E,R),R+=3,F.duration=c(E,R),R+=3,Te=E[R++],F.dispose=1&Te,F.blend=Te>>1&1}Q!="ANMF"&&(R+=re)}return N}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,p=[b.canvas_height],h=[b.canvas_width];for(var x=0;x<w.length&&w[x].blend!=0;x++);}var I=w[0],D=m.WebPDecodeRGBA(g,I.src_off,I.src_size,h,p);I.rgba=D,I.imgwidth=h[0],I.imgheight=p[0];for(var A=0;A<h[0]*p[0]*4;A++)f[A]=D[A];return this.width=h,this.height=p,this.data=f,this}(function(t){var n=function(){return typeof Ow=="function"},e=function(p,h,f,m){var g=4,y=a;switch(m){case t.image_compression.FAST:g=1,y=o;break;case t.image_compression.MEDIUM:g=6,y=s;break;case t.image_compression.SLOW:g=9,y=l}p=r(p,h,f,y);var b=Ow(p,{level:g});return t.__addimage__.arrayBufferToBinaryString(b)},r=function(p,h,f,m){for(var g,y,b,w=p.length/h,x=new Uint8Array(p.length+w),I=c(),D=0;D<w;D+=1){if(b=D*h,g=p.subarray(b,b+h),m)x.set(m(g,f,y),b+D);else{for(var A,E=I.length,R=[];A<E;A+=1)R[A]=I[A](g,f,y);var N=d(R.concat());x.set(R[N],b+D)}y=g}return x},i=function(p){var h=Array.apply([],p);return h.unshift(0),h},o=function(p,h){var f,m=[],g=p.length;m[0]=1;for(var y=0;y<g;y+=1)f=p[y-h]||0,m[y+1]=p[y]-f+256&255;return m},a=function(p,h,f){var m,g=[],y=p.length;g[0]=2;for(var b=0;b<y;b+=1)m=f&&f[b]||0,g[b+1]=p[b]-m+256&255;return g},s=function(p,h,f){var m,g,y=[],b=p.length;y[0]=3;for(var w=0;w<b;w+=1)m=p[w-h]||0,g=f&&f[w]||0,y[w+1]=p[w]+256-(m+g>>>1)&255;return y},l=function(p,h,f){var m,g,y,b,w=[],x=p.length;w[0]=4;for(var I=0;I<x;I+=1)m=p[I-h]||0,g=f&&f[I]||0,y=f&&f[I-h]||0,b=u(m,g,y),w[I+1]=p[I]-b+256&255;return w},u=function(p,h,f){if(p===h&&h===f)return p;var m=Math.abs(h-f),g=Math.abs(p-f),y=Math.abs(p+h-f-f);return m<=g&&m<=y?p:g<=y?h:f},c=function(){return[i,o,a,s,l]},d=function(p){var h=p.map(function(f){return f.reduce(function(m,g){return m+Math.abs(g)},0)});return h.indexOf(Math.min.apply(null,h))};t.processPNG=function(p,h,f,m){var g,y,b,w,x,I,D,A,E,R,N,T,M,H,V,X=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(b=new zCe(p)).imgData,y=b.bits,g=b.colorSpace,x=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){E=(A=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,N=new Uint8Array(E*b.colors),R=new Uint8Array(E);var Q,G=b.pixelBitlength-b.bits;for(H=0,V=0;H<E;H++){for(M=A[H],Q=0;Q<G;)N[V++]=M>>>Q&255,Q+=b.bits;R[H]=M>>>Q&255}}if(b.bits===16){E=(A=new Uint32Array(b.decodePixels().buffer)).length,N=new Uint8Array(E*(32/b.pixelBitlength)*b.colors),R=new Uint8Array(E*(32/b.pixelBitlength)),T=b.colors>1,H=0,V=0;for(var re=0;H<E;)M=A[H++],N[V++]=M>>>0&255,T&&(N[V++]=M>>>16&255,M=A[H++],N[V++]=M>>>0&255),R[re++]=M>>>16&255;y=8}m!==t.image_compression.NONE&&n()?(p=e(N,b.width*b.colors,b.colors,m),D=e(R,b.width,1,m)):(p=N,D=R,X=void 0)}if(b.colorType===3&&(g=this.color_spaces.INDEXED,I=b.palette,b.transparency.indexed)){var ue=b.transparency.indexed,Te=0;for(H=0,E=ue.length;H<E;++H)Te+=ue[H];if((Te/=255)===E-1&&ue.indexOf(0)!==-1)w=[ue.indexOf(0)];else if(Te!==E){for(A=b.decodePixels(),R=new Uint8Array(A.length),H=0,E=A.length;H<E;H++)R[H]=ue[A[H]];D=e(R,b.width,1)}}var F=function(q){var Z;switch(q){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(m);return X===this.decode.FLATE_DECODE&&(Y="/Predictor "+F+" "),Y+="/Colors "+x+" /BitsPerComponent "+y+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:f,data:p,index:h,filter:X,decodeParameters:Y,transparency:w,palette:I,sMask:D,predictor:F,width:b.width,height:b.height,bitsPerComponent:y,colorSpace:g}}}})(Jt.API),function(t){t.processGIF89A=function(n,e,r,i){var o=new WCe(n),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:s},c=new aA(100).encode(u,100);return t.processJPEG.call(this,c,e,r,i)},t.processGIF87A=t.processGIF89A}(Jt.API),cl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var n=0;n<t;n++){var e=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:e,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[t]()}catch(e){Mr.log("bit decode error:"+e)}},cl.prototype.bit1=function(){var t,n=Math.ceil(this.width/8),e=n%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}e!==0&&(this.pos+=4-e)}},cl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),n=t%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,u=this.palette[s];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}n!==0&&(this.pos+=4-n)}},cl.prototype.bit8=function(){for(var t=this.width%4,n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},cl.prototype.bit15=function(){for(var t=this.width%3,n=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&n)/n*255|0,s=(o>>5&n)/n*255|0,l=(o>>10&n)/n*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=a,this.data[c+3]=u}this.pos+=t}},cl.prototype.bit16=function(){for(var t=this.width%3,n=parseInt("11111",2),e=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&n)/n*255|0,l=(a>>5&e)/e*255|0,u=(a>>11)/n*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=t}},cl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*e;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},cl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var n=this.bottom_up?t:this.height-1-t,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*e;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},cl.prototype.getData=function(){return this.data},function(t){t.processBMP=function(n,e,r,i){var o=new cl(n,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new aA(100).encode(l,100);return t.processJPEG.call(this,u,e,r,i)}}(Jt.API),aU.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(n,e,r,i){var o=new aU(n,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new aA(100).encode(l,100);return t.processJPEG.call(this,u,e,r,i)}}(Jt.API),Jt.API.processRGBA=function(t,n,e){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var c=r[u],d=r[u+1],p=r[u+2],h=r[u+3];o[s++]=c,o[s++]=d,o[s++]=p,a[l++]=h}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:f,index:n,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Jt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mm=Jt.API,Vw=Mm.getCharWidthsArray=function(t,n){var e,r,i=(n=n||{}).font||this.internal.getFont(),o=n.fontSize||this.internal.getFontSize(),a=n.charSpace||this.internal.getCharSpace(),s=n.widths?n.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=n.kerning?n.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,d=n.doKerning!==!1,p=0,h=t.length,f=0,m=s[0]||l,g=[];for(e=0;e<h;e++)r=t.charCodeAt(e),typeof i.metadata.widthOfString=="function"?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(p=d&&Ir(u[r])==="object"&&!isNaN(parseInt(u[r][f],10))?u[r][f]/c:0,g.push((s[r]||m)/l+p)),f=r;return g},nU=Mm.getStringUnitWidth=function(t,n){var e=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return Mm.processArabic&&(t=Mm.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,e,i)/e:Vw.apply(this,arguments).reduce(function(o,a){return o+a},0)},rU=function(t,n,e,r){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+n[o]<e;)s+=n[o],o++;i.push(t.slice(0,o));var l=o;for(s=0;o!==a;)s+n[o]>r&&(i.push(t.slice(l,o)),s=0,l=o),s+=n[o],o++;return l!==o&&i.push(t.slice(l,o)),i},iU=function(t,n,e){e||(e={});var r,i,o,a,s,l,u,c=[],d=[c],p=e.textIndent||0,h=0,f=0,m=t.split(" "),g=Vw.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?m[0].length+2:e.lineIndent||0){var y=Array(l).join(" "),b=[];m.map(function(x){(x=x.split(/\s*\n/)).length>1?b=b.concat(x.map(function(I,D){return(D&&I.length?`
`:"")+I})):b.push(x[0])}),m=b,l=nU.apply(this,[y,e])}for(o=0,a=m.length;o<a;o++){var w=0;if(r=m[o],l&&r[0]==`
`&&(r=r.substr(1),w=1),p+h+(f=(i=Vw.apply(this,[r,e])).reduce(function(x,I){return x+I},0))>n||w){if(f>n){for(s=rU.apply(this,[r,i,n-(p+h),n]),c.push(s.shift()),c=[s.pop()];s.length;)d.push([s.shift()]);f=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(x,I){return x+I},0)}else c=[r];d.push(c),p=f+l,h=g}else c.push(r),p+=h+f,h=g}return u=l?function(x,I){return(I?y:"")+x.join(" ")}:function(x){return x.join(" ")},d.map(u)},Mm.splitTextToSize=function(t,n,e){var r,i=(e=e||{}).fontSize||this.internal.getFontSize(),o=function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var d=this.internal.getFont(c.fontName,c.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*n/i;o.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=e.lineIndent;var s,l,u=[];for(s=0,l=r.length;s<l;s++)u=u.concat(iU.apply(this,[r[s],a,o]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",e={},r={},i=0;i<n.length;i++)e[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var o=function(d){return"0x"+parseInt(d,10).toString(16)},a=t.__fontmetrics__.compress=function(d){var p,h,f,m,g=["{"];for(var y in d){if(p=d[y],isNaN(parseInt(y,10))?h="'"+y+"'":(y=parseInt(y,10),h=(h=o(y).slice(2)).slice(0,-1)+r[h.slice(-1)]),typeof p=="number")p<0?(f=o(p).slice(3),m="-"):(f=o(p).slice(2),m=""),f=m+f.slice(0,-1)+r[f.slice(-1)];else{if(Ir(p)!=="object")throw new Error("Don't know what to do with value type "+Ir(p)+".");f=a(p)}g.push(h+f)}return g.push("}"),g.join("")},s=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,h,f,m,g={},y=1,b=g,w=[],x="",I="",D=d.length-1,A=1;A<D;A+=1)(m=d[A])=="'"?p?(f=p.join(""),p=void 0):p=[]:p?p.push(m):m=="{"?(w.push([b,f]),b={},f=void 0):m=="}"?((h=w.pop())[0][h[1]]=b,f=void 0,b=h[0]):m=="-"?y=-1:f===void 0?e.hasOwnProperty(m)?(x+=e[m],f=parseInt(x,16)*y,y=1,x=""):x+=m:e.hasOwnProperty(m)?(I+=e[m],b[f]=parseInt(I,16)*y,y=1,f=void 0,I=""):I+=m;return g},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var p=d.font,h=c.Unicode[p.postScriptName];h&&(p.metadata.Unicode={},p.metadata.Unicode.widths=h.widths,p.metadata.Unicode.kerning=h.kerning);var f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode.encoding=f,p.encoding=f.codePages[0])}])}(Jt.API),function(t){var n=function(e){for(var r=e.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=e.charCodeAt(o);return i};t.API.events.push(["addFont",function(e){var r=void 0,i=e.font,o=e.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?n(s):n(e1(s)),a.metadata=t.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Jt),function(t){function n(){return(on.canvg?Promise.resolve(on.canvg):import("./chunk-CLIVHUPU.js")).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Jt.API.addSvgAsImage=function(e,r,i,o,a,s,l,u){if(isNaN(r)||isNaN(i))throw Mr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw Mr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=o,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return n().then(function(f){return f.fromString(d,e,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(p)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),r,i,o,a,l,u)})}}(),Jt.API.putTotalPages=function(t){var n,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(t,"g"),e=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,e);return this},Jt.API.viewerPreferences=function(t,n){var e;t=t||{},n=n||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],u=0,c=0,d=0;function p(f,m){var g,y=!1;for(g=0;g<f.length;g+=1)f[g]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,t==="reset"||n===!0){var h=s.length;for(d=0;d<h;d+=1)e[s[d]].value=e[s[d]].defaultValue,e[s[d]].explicitSet=!1}if(Ir(t)==="object"){for(i in t)if(o=t[i],p(s,i)&&o!==void 0){if(e[i].type==="boolean"&&typeof o=="boolean")e[i].value=o;else if(e[i].type==="name"&&p(e[i].valueSet,o))e[i].value=o;else if(e[i].type==="integer"&&Number.isInteger(o))e[i].value=o;else if(e[i].type==="array"){for(u=0;u<o.length;u+=1)if(r=!0,o[u].length===1&&typeof o[u][0]=="number")l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)typeof o[u][c]!="number"&&(r=!1);r===!0&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}e[i].value="["+l.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var f,m=[];for(f in e)e[f].explicitSet===!0&&(e[f].type==="name"?m.push("/"+f+" /"+e[f].value):m.push("/"+f+" "+e[f].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(t){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+a.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+o+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",n)),this}}(Jt.API),function(t){var n=t.API,e=n.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],d=0,p=o.length;d<p;++d){if(s=a.metadata.characterToGlyph(o.charCodeAt(d)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return c.join("");s=s.toString(16),c.push(u[4-s.length],s)}return c.join("")},r=function(o){var a,s,l,u,c,d,p;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,p=(s=Object.keys(o).sort(function(h,f){return h-f})).length;d<p;d++)a=s[d],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(u=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,u=a.newObject,c=a.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,p=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),h="",f=0;f<p.length;f++)h+=String.fromCharCode(p[f]);var m=u();c({data:h,addLength1:!0,objectId:m}),l("endobj");var g=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Nm(s.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Nm(s.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+g+" 0 R"),l("/BaseFont /"+Nm(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),n.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,u=a.newObject,c=a.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,p="",h=0;h<d.length;h++)p+=String.fromCharCode(d[h]);var f=u();c({data:p,addLength1:!0,objectId:f}),l("endobj");var m=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var g=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+f+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Nm(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var y=0;y<s.metadata.hmtx.widths.length;y++)s.metadata.hmtx.widths[y]=parseInt(s.metadata.hmtx.widths[y]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Nm(s.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,s=o.text||"",l=o.x,u=o.y,c=o.options||{},d=o.mutex||{},p=d.pdfEscape,h=d.activeFontKey,f=d.fonts,m=h,g="",y=0,b="",w=f[m].encoding;if(f[m].encoding!=="Identity-H")return{text:s,x:l,y:u,options:c,mutex:d};for(b=s,m=h,Array.isArray(s)&&(b=s[0]),y=0;y<b.length;y+=1)f[m].metadata.hasOwnProperty("cmap")&&(a=f[m].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),a||b[y].charCodeAt(0)<256&&f[m].metadata.hasOwnProperty("Unicode")?g+=b[y]:g+="";var x="";return parseInt(m.slice(1))<14||w==="WinAnsiEncoding"?x=p(g,m).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(x=e(g,f[m])),d.isHex=!0,{text:x,x:l,y:u,options:c,mutex:d}};n.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?s.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):s.push(i(Object.assign({},l,{text:a[u]})).text);o.text=s}else o.text=i(Object.assign({},l,{text:a})).text}])}(Jt),function(t){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(e){return n.call(this),this.internal.vFS[e]!==void 0},t.addFileToVFS=function(e,r){return n.call(this),this.internal.vFS[e]=r,this},t.getFileFromVFS=function(e){return n.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Jt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,a,s,l,u,c,d=n,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],f={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var x=function(T){var M=T.charCodeAt(),H=M>>8,V=m[H];return V!==void 0?d[256*V+(255&M)]:H===252||H===253?"AL":y.test(H)?"L":H===8?"R":"N"},I=function(T){for(var M,H=0;H<T.length;H++){if((M=x(T.charAt(H)))==="L")return!1;if(M==="R")return!0}return!1},D=function(T,M,H,V){var X,Y,Q,G,re=M[V];switch(re){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(re="AN");break;case"AL":b=!0,re="R";break;case"WS":re="N";break;case"CS":V<1||V+1>=M.length||(X=H[V-1])!=="EN"&&X!=="AN"||(Y=M[V+1])!=="EN"&&Y!=="AN"?re="N":b&&(Y="AN"),re=Y===X?Y:"N";break;case"ES":re=(X=V>0?H[V-1]:"B")==="EN"&&V+1<M.length&&M[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&H[V-1]==="EN"){re="EN";break}if(b){re="N";break}for(Q=V+1,G=M.length;Q<G&&M[Q]==="ET";)Q++;re=Q<G&&M[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(G=M.length,Q=V+1;Q<G&&M[Q]==="NSM";)Q++;if(Q<G){var ue=T[V],Te=ue>=1425&&ue<=2303||ue===64286;if(X=M[Q],Te&&(X==="R"||X==="AL")){re="R";break}}}re=V<1||(X=M[V-1])==="B"?"N":H[V-1];break;case"B":b=!1,i=!0,re=w;break;case"S":o=!0,re="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":re="N"}return re},A=function(T,M,H){var V=T.split("");return H&&E(V,H,{hiLevel:w}),V.reverse(),M&&M.reverse(),V.join("")},E=function(T,M,H){var V,X,Y,Q,G,re=-1,ue=T.length,Te=0,F=[],q=w?h:p,Z=[];for(b=!1,i=!1,o=!1,X=0;X<ue;X++)Z[X]=x(T[X]);for(Y=0;Y<ue;Y++){if(G=Te,F[Y]=D(T,Z,F,Y),V=240&(Te=q[G][f[F[Y]]]),Te&=15,M[Y]=Q=q[Te][5],V>0)if(V===16){for(X=re;X<Y;X++)M[X]=1;re=-1}else re=-1;if(q[Te][6])re===-1&&(re=Y);else if(re>-1){for(X=re;X<Y;X++)M[X]=Q;re=-1}Z[Y]==="B"&&(M[Y]=0),H.hiLevel|=Q}o&&function(ae,pe,fe){for(var me=0;me<fe;me++)if(ae[me]==="S"){pe[me]=w;for(var xe=me-1;xe>=0&&ae[xe]==="WS";xe--)pe[xe]=w}}(Z,M,ue)},R=function(T,M,H,V,X){if(!(X.hiLevel<T)){if(T===1&&w===1&&!i)return M.reverse(),void(H&&H.reverse());for(var Y,Q,G,re,ue=M.length,Te=0;Te<ue;){if(V[Te]>=T){for(G=Te+1;G<ue&&V[G]>=T;)G++;for(re=Te,Q=G-1;re<Q;re++,Q--)Y=M[re],M[re]=M[Q],M[Q]=Y,H&&(Y=H[re],H[re]=H[Q],H[Q]=Y);Te=G}Te++}}},N=function(T,M,H){var V=T.split(""),X={hiLevel:w};return H||(H=[]),E(V,H,X),function(Y,Q,G){if(G.hiLevel!==0&&c)for(var re,ue=0;ue<Y.length;ue++)Q[ue]===1&&(re=g.indexOf(Y[ue]))>=0&&(Y[ue]=g[re+1])}(V,H,X),R(2,V,M,H,X),R(1,V,M,H,X),V.join("")};return this.__bidiEngine__.doBidiReorder=function(T,M,H){if(function(X,Y){if(Y)for(var Q=0;Q<X.length;Q++)Y[Q]=Q;s===void 0&&(s=I(X)),u===void 0&&(u=I(X))}(T,M),a||!l||u)if(a&&l&&s^u)w=s?1:0,T=A(T,M,H);else if(!a&&l&&u)w=s?1:0,T=N(T,M,H),T=A(T,M);else if(!a||s||l||u){if(a&&!l&&s^u)T=A(T,M),s?(w=0,T=N(T,M,H)):(w=1,T=N(T,M,H),T=A(T,M));else if(a&&s&&!l&&u)w=1,T=N(T,M,H),T=A(T,M);else if(!a&&!l&&s^u){var V=c;s?(w=1,T=N(T,M,H),w=0,c=!1,T=N(T,M,H),c=V):(w=0,T=N(T,M,H),T=A(T,M),w=1,c=!1,T=N(T,M,H),c=V,T=A(T,M))}}else w=0,T=N(T,M,H);else w=s?1:0,T=N(T,M,H);return T},this.__bidiEngine__.setOptions=function(T){T&&(a=T.isInputVisual,l=T.isOutputVisual,s=T.isInputRtl,u=T.isOutputRtl,c=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),a=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,e.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(a=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?a.push([e.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):a.push([e.doBidiReorder(i[s])]);r.text=a}else r.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Jt),Jt.API.TTFFont=function(){function t(n){var e;if(this.rawData=n,e=this.contents=new kd(n),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new oIe(this),this.registerTTF()}return t.open=function(n){return new t(n)},t.prototype.parse=function(){return this.directory=new qCe(this.contents),this.head=new $Ce(this),this.name=new ZCe(this),this.cmap=new yU(this),this.toUnicode={},this.hhea=new KCe(this),this.maxp=new JCe(this),this.hmtx=new eIe(this),this.post=new XCe(this),this.os2=new YCe(this),this.loca=new iIe(this),this.glyf=new tIe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var n,e,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,s,l,u;for(u=[],a=0,s=(l=this.bbox).length;a<s;a++)n=l[a],u.push(Math.round(n*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(n){var e;return((e=this.cmap.unicode)!=null?e.codeMap[n]:void 0)||0},t.prototype.widthOfGlyph=function(n){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*e},t.prototype.widthOfString=function(n,e,r){var i,o,a,s;for(a=0,o=0,s=(n=""+n).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=n.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/e)||0;return a*(e/1e3)},t.prototype.lineHeight=function(n,e){var r;return e==null&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},t}();var pl,kd=function(){function t(n){this.data=n??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(n){return this.data[this.pos++]=n},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},t.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},t.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},t.prototype.readString=function(n){var e,r;for(r=[],e=0;0<=n?e<n:e>n;e=0<=n?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(n){var e,r,i;for(i=[],e=0,r=n.length;0<=r?e<r:e>r;e=0<=r?++e:--e)i.push(this.writeByte(n.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(n){return this.writeInt16(n)},t.prototype.readLongLong=function(){var n,e,r,i,o,a,s,l;return n=this.readByte(),e=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*n+281474976710656*e+1099511627776*r+4294967296*i+16777216*o+65536*a+256*s+l},t.prototype.writeLongLong=function(n){var e,r;return e=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(n){return this.writeInt32(n)},t.prototype.read=function(n){var e,r;for(e=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)e.push(this.readByte());return e},t.prototype.write=function(n){var e,r,i,o;for(o=[],r=0,i=n.length;r<i;r++)e=n[r],o.push(this.writeByte(e));return o},t}(),qCe=function(){var t;function n(e){var r,i,o;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(e){var r,i,o,a,s,l,u,c,d,p,h,f,m;for(m in h=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(h)/l),a=Math.floor(d/l),c=16*h-d,(i=new kd).writeInt(this.scalarType),i.writeShort(h),i.writeShort(d),i.writeShort(a),i.writeShort(c),o=16*h,u=i.pos+o,s=null,f=[],e)for(p=e[m],i.writeString(m),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),f=f.concat(p),m==="head"&&(s=u),u+=p.length;u%4;)f.push(0),u++;return i.write(f),r=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(r),i.data},t=function(e){var r,i,o,a;for(e=bU.call(e);e.length%4;)e.push(0);for(o=new kd(e),i=0,r=0,a=e.length;r<a;r=r+=4)i+=o.readUInt32();return 4294967295&i},n}(),GCe={}.hasOwnProperty,cu=function(t,n){for(var e in n)GCe.call(n,e)&&(t[e]=n[e]);function r(){this.constructor=t}return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};pl=function(){function t(n){var e;this.file=n,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var $Ce=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var r;return(r=new kd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},n}(),sU=function(){function t(n,e){var r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=e+n.readInt(),d=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=n.readByte();break;case 4:for(h=n.readUInt16(),p=h/2,n.pos+=6,o=function(){var x,I;for(I=[],l=x=0;0<=p?x<p:x>p;l=0<=p?++x:--x)I.push(n.readUInt16());return I}(),n.pos+=2,m=function(){var x,I;for(I=[],l=x=0;0<=p?x<p:x>p;l=0<=p?++x:--x)I.push(n.readUInt16());return I}(),u=function(){var x,I;for(I=[],l=x=0;0<=p?x<p:x>p;l=0<=p?++x:--x)I.push(n.readUInt16());return I}(),c=function(){var x,I;for(I=[],l=x=0;0<=p?x<p:x>p;l=0<=p?++x:--x)I.push(n.readUInt16());return I}(),i=(this.length-n.pos+this.offset)/2,s=function(){var x,I;for(I=[],l=x=0;0<=i?x<i:x>i;l=0<=i?++x:--x)I.push(n.readUInt16());return I}(),l=y=0,w=o.length;y<w;l=++y)for(g=o[l],r=b=f=m[l];f<=g?b<=g:b>=g;r=f<=g?++b:--b)c[l]===0?a=r+u[l]:(a=s[c[l]/2+(r-f)-(p-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}n.pos=d}return t.encode=function(n,e){var r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,b,w,x,I,D,A,E,R,N,T,M,H,V,X,Y,Q,G,re,ue,Te,F,q,Z,ae,pe,fe,me,xe,je,Pe,Ge;switch(V=new kd,a=Object.keys(n).sort(function(qe,ht){return qe-ht}),e){case"macroman":for(m=0,g=function(){var qe=[];for(f=0;f<256;++f)qe.push(0);return qe}(),b={0:0},o={},X=0,re=a.length;X<re;X++)b[xe=n[i=a[X]]]==null&&(b[xe]=++m),o[i]={old:n[i],new:b[n[i]]},g[i]=b[n[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(g),{charMap:o,subtable:V.data,maxGlyphID:m+1};case"unicode":for(M=[],d=[],w=0,b={},r={},y=u=null,Y=0,ue=a.length;Y<ue;Y++)b[I=n[i=a[Y]]]==null&&(b[I]=++w),r[i]={old:I,new:b[I]},s=b[I]-i,y!=null&&s===u||(y&&d.push(y),M.push(i),u=s),y=i;for(y&&d.push(y),d.push(65535),M.push(65535),N=2*(R=M.length),E=2*Math.pow(Math.log(R)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,A=2*R-E,l=[],D=[],h=[],f=Q=0,Te=M.length;Q<Te;f=++Q){if(T=M[f],c=d[f],T===65535){l.push(0),D.push(0);break}if(T-(H=r[T].new)>=32768)for(l.push(0),D.push(2*(h.length+R-f)),i=G=T;T<=c?G<=c:G>=c;i=T<=c?++G:--G)h.push(r[i].new);else l.push(H-T),D.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*R+2*h.length),V.writeUInt16(0),V.writeUInt16(N),V.writeUInt16(E),V.writeUInt16(p),V.writeUInt16(A),fe=0,F=d.length;fe<F;fe++)i=d[fe],V.writeUInt16(i);for(V.writeUInt16(0),me=0,q=M.length;me<q;me++)i=M[me],V.writeUInt16(i);for(je=0,Z=l.length;je<Z;je++)s=l[je],V.writeUInt16(s);for(Pe=0,ae=D.length;Pe<ae;Pe++)x=D[Pe],V.writeUInt16(x);for(Ge=0,pe=h.length;Ge<pe;Ge++)m=h[Ge],V.writeUInt16(m);return{charMap:r,subtable:V.data,maxGlyphID:w+1}}},t}(),yU=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="cmap",n.prototype.parse=function(e){var r,i,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new sU(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(e,r){var i,o;return r==null&&(r="macroman"),i=sU.encode(e,r),(o=new kd).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},n}(),KCe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n}(),YCe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(e.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(e.readInt());return i}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n}(),XCe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="post",n.prototype.parse=function(e){var r,i,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var a;for(i=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)r=e.readByte(),o.push(this.names.push(e.readString(r)));return o;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 196608:break;case 262144:return this.map=function(){var s,l,u;for(u=[],a=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;a=0<=l?++s:--s)u.push(e.readUInt32());return u}.call(this)}},n}(),QCe=function(t,n){this.raw=t,this.length=t.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},ZCe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="name",n.prototype.parse=function(e){var r,i,o,a,s,l,u,c,d,p,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(u={},a=d=0,p=i.length;d<p;a=++d)o=i[a],e.pos=o.offset,c=e.readString(o.length),s=new QCe(c,o),u[h=o.nameID]==null&&(u[h]=[]),u[o.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},n}(),JCe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n}(),eIe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="hmtx",n.prototype.parse=function(e){var r,i,o,a,s,l,u;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],r=c=0;0<=o?c<o:c>o;r=0<=o?++c:--c)d.push(e.readInt16());return d}(),this.widths=function(){var c,d,p,h;for(h=[],c=0,d=(p=this.metrics).length;c<d;c++)a=p[c],h.push(a.advance);return h}.call(this),i=this.widths[this.widths.length-1],u=[],r=s=0;0<=o?s<o:s>o;r=0<=o?++s:--s)u.push(this.widths.push(i));return u},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n}(),bU=[].slice,tIe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var r,i,o,a,s,l,u,c,d,p;return e in this.cache?this.cache[e]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(e),(o=a.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+i,s=(l=new kd(r.read(o))).readShort(),c=l.readShort(),p=l.readShort(),u=l.readShort(),d=l.readShort(),this.cache[e]=s===-1?new rIe(l,c,p,u,d):new nIe(l,s,c,p,u,d),this.cache[e]))},n.prototype.encode=function(e,r,i){var o,a,s,l,u;for(s=[],a=[],l=0,u=r.length;l<u;l++)o=e[r[l]],a.push(s.length),o&&(s=s.concat(o.encode(i)));return a.push(s.length),{table:s,offsets:a}},n}(),nIe=function(){function t(n,e,r,i,o,a){this.raw=n,this.numberOfContours=e,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),rIe=function(){function t(n,e,r,i,o){var a,s;for(this.raw=n,this.xMin=e,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return t.prototype.encode=function(){var n,e,r;for(e=new kd(bU.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)e.pos=this.glyphOffsets[n];return e.data},t}(),iIe=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return cu(n,pl),n.prototype.tag="loca",n.prototype.parse=function(e){var r,i;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=2)a.push(2*e.readUInt16());return a}.call(this):function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=4)a.push(e.readUInt32());return a}.call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,r){for(var i=new Uint32Array(this.offsets.length),o=0,a=0,s=0;s<i.length;++s)if(i[s]=o,a<r.length&&r[a]==s){++a,i[s]=o;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(o+=u)}for(var c=new Array(4*i.length),d=0;d<i.length;++d)c[4*d+3]=255&i[d],c[4*d+2]=(65280&i[d])>>8,c[4*d+1]=(16711680&i[d])>>16,c[4*d]=(4278190080&i[d])>>24;return c},n}(),oIe=function(){function t(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var n,e,r,i,o;for(e in i=this.font.cmap.tables[0].codeMap,n={},o=this.subset)r=o[e],n[e]=i[r];return n},t.prototype.glyphsFor=function(n){var e,r,i,o,a,s,l;for(i={},a=0,s=n.length;a<s;a++)i[o=n[a]]=this.font.glyf.glyphFor(o);for(o in e=[],i)(r=i[o])!=null&&r.compound&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(o in l=this.glyphsFor(e))r=l[o],i[o]=r;return i},t.prototype.encode=function(n,e){var r,i,o,a,s,l,u,c,d,p,h,f,m,g,y;for(i in r=yU.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(n),h={0:0},y=r.charMap)h[(l=y[i]).old]=l.new;for(f in p=r.maxGlyphID,a)f in h||(h[f]=p++);return c=function(b){var w,x;for(w in x={},b)x[b[w]]=w;return x}(h),d=Object.keys(c).sort(function(b,w){return b-w}),m=function(){var b,w,x;for(x=[],b=0,w=d.length;b<w;b++)s=d[b],x.push(c[s]);return x}(),o=this.font.glyf.encode(a,m,h),u=this.font.loca.encode(o.offsets,m),g={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Jt.API.PDFObject=function(){var t;function n(){}return t=function(e,r){return(Array(r+1).join("0")+e).slice(-r)},n.convert=function(e){var r,i,o,a;if(Array.isArray(e))return"["+function(){var s,l,u;for(u=[],s=0,l=e.length;s<l;s++)r=e[s],u.push(n.convert(r));return u}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+t(e.getUTCFullYear(),4)+t(e.getUTCMonth(),2)+t(e.getUTCDate(),2)+t(e.getUTCHours(),2)+t(e.getUTCMinutes(),2)+t(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in o=["<<"],e)a=e[i],o.push("/"+i+" "+n.convert(a));return o.push(">>"),o.join(`
`)}return""+e},n}();var $w=[{name:"\u0628\u064A\u0636 \u0627\u062D\u0645\u0631",code:"59522",price:6,id:0,quantity:1},{name:"\u0628\u064A\u0636 \u0627\u0628\u064A\u0636",code:"500050",price:6,id:0,quantity:1},{name:"\u062C\u0628\u0646\u0647 \u0628\u0631\u0627\u0645\u064A\u0644\u064A",code:"200200",price:100,id:0,quantity:1},{name:"\u0634\u064A\u0628\u0633\u064A",code:"101010",price:10,id:0,quantity:1},{name:"\u0644\u0628\u0646",code:"5555",price:20,id:0,quantity:1},{name:"\u0632\u0628\u0627\u062F\u064A \u062C\u0647\u064A\u0646\u0647",code:"0111",price:9,id:0,quantity:1},{name:"\u0632\u0628\u0627\u062F\u064A \u062F\u0627\u0646\u0648\u0646",code:"0222",price:10,id:0,quantity:1},{name:"\u0632\u0628\u0627\u062F\u064A \u064A\u0648\u0646\u0627\u0646\u064A",code:"0555",price:10,id:0,quantity:1},{name:"\u0644\u0627\u0646\u0634\u0648\u0646 \u0627\u0644\u0645\u0631\u0627\u0639\u064A",code:"05001",price:200,id:0,quantity:1},{name:" 1  \u0628\u064A\u0628\u0633\u064A \u0644\u062A\u0631",code:"2020",price:30,id:0,quantity:1}];var aIe=()=>({"min-width":"50rem"}),sIe=t=>({editable:t});function lIe(t,n){if(t&1&&(ie(0,"div",23),st(1),oe()),t&2){let e=j();P(),fr(" ",e.errorMessage," ")}}function uIe(t,n){t&1&&(ie(0,"tr")(1,"th",24),st(2,"#"),oe(),ie(3,"th"),st(4,"\u0627\u0644\u0643\u0648\u062F"),oe(),ie(5,"th"),st(6,"\u0627\u0644\u0635\u0646\u0641"),oe(),ie(7,"th"),st(8,"\u0627\u0644\u0643\u0645\u064A\u0629"),oe(),ie(9,"th"),st(10,"\u0627\u0644\u0633\u0639\u0631"),oe(),ie(11,"th"),st(12,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621"),oe()())}function cIe(t,n){if(t&1){let e=jt();ie(0,"tr",25)(1,"td"),st(2),oe(),ie(3,"td"),Ve(4,"input",26),oe(),ie(5,"td"),Ve(6,"input",27),oe(),ie(7,"td")(8,"input",28),ki("ngModelChange",function(i){let o=Ee(e).rowIndex,a=j();return Hi(a.invoiceItems[o].quantity,i)||(a.invoiceItems[o].quantity=i),De(i)}),et("keyup.enter",function(i){let o=Ee(e).rowIndex,a=j();return De(a.confirmQuantityUpdate(i,o))}),oe()(),ie(9,"td"),Ve(10,"input",29),oe(),ie(11,"td",30)(12,"p-button",31),et("onClick",function(){let i=Ee(e).$implicit,o=j();return De(o.removeItem(i))}),oe(),ie(13,"p-button",32),et("onClick",function(){let i=Ee(e).rowIndex,o=j();return De(o.updateQuantity(i))}),oe()()()}if(t&2){let e=n.$implicit,r=n.rowIndex,i=j();O("pSelectableRow",e),P(2),fr(" ",e.id," "),P(2),Nu("value",e.code),P(2),Nu("value",e.name),P(2),Nu("value",e.quantity),Ai("ngModel",i.invoiceItems[r].quantity),O("ngClass",Gt(11,sIe,i.editingIndex===r))("readOnly",i.editingIndex!==r),P(2),Nu("value",e.price),P(2),O("rounded",!0),P(),O("rounded",!0)}}var _U=(()=>{class t{constructor(e,r,i,o,a){this.lockerService=e,this.router=r,this.http=i,this.user=o,this.AcRoute=a,this.productCode="",this.errorMessage="",this.invoiceItems=[],this.invoiceCreated=!1,this.inputQuantity=0,this.showTable=!1,this.selectedDiscount="",this.discountTotal=0,this.editingIndex=null}ngOnInit(){this.user.getCurrentUser().subscribe(r=>{this.cashierName=r.name,this.CashierId=r.id});let e=sessionStorage.getItem("invoiceItem");e&&(this.invoiceItems=JSON.parse(e))}removeItem(e){let r=this.invoiceItems.indexOf(e);r>-1&&(this.invoiceItems.splice(r,1),sessionStorage.setItem("invoiceItem",JSON.stringify(this.invoiceItems)),this.applyDiscount())}openNewLocker(){let e={employees_id:1,status:"open"};this.lockerService.openNewLocker(e).subscribe(r=>{console.log("Locker opened successfully:",r)},r=>{console.log("Error opening locker:",r)})}searchProduct(){if(this.foundProduct=$w.find(r=>r.code===this.productCode),!this.foundProduct){this.errorMessage="\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u064A \u0627\u0644\u0645\u0646\u062A\u062C";return}this.errorMessage="",this.inputQuantity=Number(this.foundProduct.quantity);let e=this.invoiceItems.findIndex(r=>r.code===this.foundProduct.code);if(e!==-1)this.invoiceItems[e].quantity+=this.inputQuantity;else{let i=this.invoiceItems.reduce((a,s)=>s.id>a?s.id:a,0)+1,o=Rn(nt({},this.foundProduct),{quantity:this.inputQuantity,id:i});this.invoiceItems.push(o),this.applyDiscount()}sessionStorage.setItem("invoiceItem",JSON.stringify(this.invoiceItems)),console.log("Invoice items:",this.invoiceItems),this.clearProductCode()}selectProduct(e){this.selectedProduct=e,this.inputQuantity=e.quantity}updateQuantity(e){this.editingIndex=e}confirmQuantityUpdate(e,r){e.key==="Enter"&&(this.invoiceItems[r].quantity=this.invoiceItems[r].quantity||1,sessionStorage.setItem("invoiceItem",JSON.stringify(this.invoiceItems)),console.log("Updated Invoice items:",this.invoiceItems),this.editingIndex=null)}clearProductCode(){this.productCode=""}createInvoice(){let e=this.invoiceItems.map(r=>({product_name:r.name,product_parcode:r.code,product_price:r.price,quantity:r.quantity,total_item:r.price*r.quantity,total:this.calculateTotal()}));this.lockerService.addInvoice({invoices:e}).subscribe(r=>{console.log("Invoice saved successfully:",r),this.generatePDF(),sessionStorage.removeItem("invoiceItem")},r=>{console.log("Error saving invoice:",r)})}generatePDF(){let i=55+this.invoiceItems.length*8+30,o=new Jt({orientation:"portrait",unit:"mm",format:[80,i]}),a="/assets/ABDOMARKET.jpg",s=new Image;s.src=a,s.onload=()=>{o.addImage(s,"JPG",5,3,15,15),o.addFont("/assets/Amiri-Bold.ttf","Amiri","normal"),o.setFont("Amiri"),o.setFontSize(12),o.text("\u0639\u0628\u062F\u0647 \u0645\u0627\u0631\u0643\u062A",45,8,{align:"center"}),o.setFontSize(10),o.text(`\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${new Date().toLocaleDateString()}`,50,15,{align:"right"}),o.setFontSize(12);let l=7,u=25,c=20;o.text("\u0627\u0644\u0645\u0646\u062A\u062C",l+c*2+5,u),o.text("\u0627\u0644\u0643\u0645\u064A\u0629",l+c+5,u),o.text("\u0627\u0644\u0633\u0639\u0631",l+5,u),o.rect(l,u-8/2,c,8),o.rect(l+c,u-8/2,c,8),o.rect(l+c*2,u-8/2,c,8);let d=u+8;this.invoiceItems.forEach(I=>{o.setFontSize(10),o.text(I.name,l+c*2+10,d,{align:"center"}),o.text(String(I.quantity),l+c+10,d,{align:"center"}),o.text(`$${I.price}`,l+10,d,{align:"center"}),o.rect(l,d-8/2,c,8),o.rect(l+c,d-8/2,c,8),o.rect(l+c*2,d-8/2,c,8),d+=8});let h=`\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A: $${this.calculateTotal()}`,f=`\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u064A : ${this.discountTotal}`;o.setFontSize(14),o.setFont("Amiri");let m=l,g=d+12,y=c*3,b=8;o.setFillColor(0,128,0),o.rect(m,g,y,b+2,"F"),o.setTextColor(0),o.text(h,m+y/2,g+b/2,{align:"center",baseline:"middle"}),o.text(f,m+y/2,g+b/2,{align:"center",baseline:"middle"});let w=o.output("blob"),x=new FormData;x.append("file",w,"invoice.pdf"),this.http.post("http://192.168.1.8:8080/api/locker/upload",x).subscribe(I=>{if(I&&I.fileUrl){let D=I.fileUrl;this.sendWhatsAppMessage(D)}else console.error("\u0631\u0627\u0628\u0637 \u0627\u0644\u0645\u0644\u0641 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0641\u064A \u0627\u0644\u0631\u062F")},I=>{console.error("\u062E\u0637\u0623 \u0641\u064A \u0631\u0641\u0639 \u0645\u0644\u0641 PDF:",I)})}}sendWhatsAppMessage(e){this.http.post("http://192.168.1.8:8080/api/locker/send-whatsapp",{file_url:e}).subscribe(r=>{console.log("\u0631\u0633\u0627\u0644\u0629 WhatsApp \u0623\u064F\u0631\u0633\u0650\u0644\u062A \u0628\u0646\u062C\u0627\u062D:",r)},r=>{console.log("\u062E\u0637\u0623 \u0641\u064A \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 WhatsApp:",r)})}calculateTotal(){return this.invoiceItems.reduce((e,r)=>e+(r.price||0)*(r.quantity||0),0)}applyDiscount(){this.selectedDiscount==="employmentDiscount"?this.discountTotal=this.calculateTotal()*.9:(this.selectedDiscount="DcardDiscount")&&(this.discountTotal=this.calculateTotal()*.95)}handleKeyboardEvent(e){e.preventDefault(),this.showTable=!0}static{this.\u0275fac=function(r){return new(r||t)(Oe(Ed),Oe(ta),Oe(cp),Oe(Am),Oe(jl))}}static{this.\u0275cmp=ct({type:t,selectors:[["app-cashier"]],hostBindings:function(r,i){r&1&&et("keydown.F5",function(a){return i.handleKeyboardEvent(a)},!1,JI)},decls:43,vars:17,consts:[[1,"body"],[1,"container"],[1,"row"],[1,"text-center"],[1,"text-success"],[1,"discount","text-success"],[1,"row","justify-content-center","align-items-center"],[1,"col-auto"],[1,"form-select",3,"ngModelChange","ngModel"],["selected","","hidden",""],["value","employmentDiscount"],["value","DcardDiscount"],[1,"col-form-label","mt-1","pt-1"],[1,"form-label","text-primary","mb-3"],["type","text","placeholder","\u0643\u0648\u062F \u0627\u0644\u0635\u0646\u0641",1,"form-control","text-center",3,"ngModelChange","keyup.enter","ngModel"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"row","mt-5","align-table"],["selectionMode","single","dataKey","code","styleClass","p-datatable-gridlines",3,"selectionChange","value","selection","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"row","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"text-center","bg-success","p-3","mb-5"],[1,"alert","alert-danger","mt-2"],[1,"text-center","p-3"],[3,"pSelectableRow"],["type","text","name","code","readonly","",3,"value"],["type","text","name","name","readonly","",3,"value"],["name","quantity","type","number",1,"form-control",3,"ngModelChange","keyup.enter","value","ngModel","ngClass","readOnly"],["type","text","name","price","readonly","",3,"value"],[1,"d-flex"],["icon","pi pi-trash",1,"me-1",3,"onClick","rounded"],["icon","pi pi-pencil",3,"onClick","rounded"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),st(6),oe(),ie(7,"h2",4),st(8),oe()(),ie(9,"div",5)(10,"div",6)(11,"div",7)(12,"select",8),ki("ngModelChange",function(a){return Hi(i.selectedDiscount,a)||(i.selectedDiscount=a),a}),et("ngModelChange",function(){return i.applyDiscount()}),ie(13,"option",9),st(14,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u062E\u0635\u0645"),oe(),ie(15,"option",10),st(16,"\u0645\u0633\u062D\u0648\u0628\u0627\u062A \u0639\u0627\u0645\u0644\u064A\u0646"),oe(),ie(17,"option",11),st(18,"D CARD"),oe()()(),ie(19,"div",7)(20,"label",12),st(21,"\u062E\u0635\u0645"),oe()()()(),ie(22,"label",13),st(23,"\u0643\u0648\u062F \u0627\u0644\u0635\u0646\u0641"),oe(),ie(24,"input",14),ki("ngModelChange",function(a){return Hi(i.productCode,a)||(i.productCode=a),a}),et("keyup.enter",function(){return i.searchProduct()}),oe(),ce(25,lIe,2,1,"div",15),oe()(),ie(26,"div",16)(27,"p-table",17),ki("selectionChange",function(a){return Hi(i.selectedProduct,a)||(i.selectedProduct=a),a}),ce(28,uIe,13,0,"ng-template",18)(29,cIe,14,13,"ng-template",19),oe()(),ie(30,"div",20)(31,"div",3)(32,"button",21),et("click",function(){return i.createInvoice()}),st(33,"\u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062A\u0648\u0631\u0629"),oe()()(),ie(34,"div",20)(35,"div",22)(36,"strong")(37,"h3"),st(38),CS(39,"currency"),oe(),ie(40,"h3"),st(41),CS(42,"currency"),oe()()()()()()),r&2&&(P(6),fr(" ",i.cashierName," : \u0627\u0644\u0643\u0627\u0634\u064A\u0631 "),P(2),fr("\u0643\u0648\u062F \u0627\u0644\u0643\u0627\u0634\u064A\u0631 : ",i.CashierId,""),P(4),Ai("ngModel",i.selectedDiscount),P(12),Ai("ngModel",i.productCode),P(),O("ngIf",i.errorMessage),P(2),O("value",i.invoiceItems),Ai("selection",i.selectedProduct),O("tableStyle",Jo(16,aIe)),P(11),fr("",IS(39,10,i.calculateTotal(),"USD")," : \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),P(3),fr("",IS(42,13,i.discountTotal,"USD")," : \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0628\u0639\u062F \u0627\u0644\u062E\u0635\u0645"))},dependencies:[Xr,Or,GF,KF,vs,u0,p_,ys,ea,x_,Dr,SO,wE,UN],styles:[".plain-input[_ngcontent-%COMP%]{border:none;background-color:transparent;width:100%;height:25px;text-align:center;padding:0;margin:0;font-size:inherit;font-family:inherit;box-sizing:border-box}.plain-input[_ngcontent-%COMP%]:focus{outline:none}.rtl-table[_ngcontent-%COMP%]{direction:rtl}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;width:20px;height:20px;display:block}.align-table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{text-align:center!important;justify-content:center!important}p-table[_ngcontent-%COMP%]   tr.p-highlight[_ngcontent-%COMP%]{background-color:#1f0d93!important;color:#fff!important}td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background-color:transparent;font-size:inherit;color:inherit;width:auto;text-align:center;opacity:1;pointer-events:none}td[_ngcontent-%COMP%]   input.editable[_ngcontent-%COMP%]{pointer-events:auto;opacity:1;border:1px solid #ccc;background-color:#fff;color:#000}"]})}}return t})();function dIe(t,n){if(t&1&&(ie(0,"div",10),st(1),ie(2,"button",11)(3,"span",12),st(4,"\xD7"),oe()()()),t&2){let e=j();P(),fr(" ",e.successMessage," ")}}function pIe(t,n){if(t&1&&(ie(0,"div",13),st(1),ie(2,"button",11)(3,"span",12),st(4,"\xD7"),oe()()()),t&2){let e=j();P(),fr(" ",e.errorMessage," ")}}var wU=(()=>{class t{constructor(e,r,i){this.route=e,this.locker=r,this.redirect=i,this.lockerData={total:0,visa:0}}ngOnInit(){this.route.queryParams.subscribe(e=>{this.lockerId=e.lockerId,this.lockerStatus=e.lockerstatus})}onClose(){this.locker.closeLocker(this.lockerId,this.lockerData).subscribe({next:e=>{this.successMessage="\u062A\u0645 \u063A\u0644\u0642 \u0627\u0644\u062E\u0632\u0646\u0647 \u0628\u0646\u062C\u0627\u062D",console.log(e),this.redirect.navigate(["/"])},error:e=>{this.errorMessage="\u063A\u0644\u0642 \u0627\u0644\u062E\u0632\u064A\u0646\u0647 \u0644\u0645 \u064A\u062A\u0645",console.log(e)}})}static{this.\u0275fac=function(r){return new(r||t)(Oe(jl),Oe(Ed),Oe(ta))}}static{this.\u0275cmp=ct({type:t,selectors:[["app-close-locker"]],decls:18,vars:5,consts:[[1,"container"],[1,"row","text-center"],[1,"text-success"],[3,"ngSubmit"],[1,"form-group"],["type","number","name","total","placeholder","\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u064A",1,"form-control","text-center",3,"ngModelChange","ngModel"],["type","number","name","visa","placeholder","\u0627\u0644\u0641\u064A\u0632\u0627",1,"form-control","text-center",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",2,"width","20px"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),st(4),oe()(),ie(5,"form",3),et("ngSubmit",function(){return i.onClose()}),ie(6,"div",4)(7,"label",2),st(8,"\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0641\u0639\u0644\u064A"),oe(),ie(9,"input",5),ki("ngModelChange",function(a){return Hi(i.lockerData.total,a)||(i.lockerData.total=a),a}),oe()(),ie(10,"div",4)(11,"label",2),st(12,"\u0627\u0644\u0641\u064A\u0632\u0627"),oe(),ie(13,"input",6),ki("ngModelChange",function(a){return Hi(i.lockerData.visa,a)||(i.lockerData.visa=a),a}),oe()(),ie(14,"button",7),st(15,"\u0627\u063A\u0644\u0627\u0642 \u0627\u0644\u062E\u0632\u0646\u0647"),oe()()(),ce(16,dIe,5,1,"div",8)(17,pIe,5,1,"div",9),oe()),r&2&&(P(4),fr("\u062E\u0632\u064A\u0646\u0647 \u0631\u0642\u0645 : ",i.lockerId,""),P(5),Ai("ngModel",i.lockerData.total),P(4),Ai("ngModel",i.lockerData.visa),P(3),O("ngIf",i.successMessage),P(),O("ngIf",i.errorMessage))},dependencies:[Or,d_,vs,u0,ys,u_,ea,l0]})}}return t})();var t1=(t,n)=>{let e=Qe(Am),r=Qe(ta);return e.isLoggedIn()?!0:(r.navigate(["/login"]),!1)};var xU=(()=>{class t{constructor(){this.productCode="",this.errorMessage=""}searchProduct(){this.foundProduct=$w.find(e=>e.code===this.productCode),this.productCode=""}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ct({type:t,selectors:[["app-inquiry"]],decls:20,vars:3,consts:[[1,"bg-gradient"],[1,"container"],[1,"row"],[1,"text-success","text-center","mt-5"],[1,"formGroup"],["type","text",1,"text-center",2,"font-size","20px","font-weight","bold",3,"ngModelChange","keyup.enter","ngModel"],[1,"table","table-bordered","table-hover","mt-5","table-light","text-center",2,"direction","rtl","font-size","larger"],[2,"height","100px","text-align","center","vertical-align","middle"],["type","text","readonly","",1,"text-center",2,"font-size","20px","font-weight","bold",3,"value"]],template:function(r,i){r&1&&(ie(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),st(4,"\u0627\u0644\u0627\u0633\u062A\u0639\u0644\u0627\u0645 \u0639\u0646 \u0635\u0646\u0641"),oe(),ie(5,"div",4)(6,"input",5),ki("ngModelChange",function(a){return Hi(i.productCode,a)||(i.productCode=a),a}),et("keyup.enter",function(){return i.searchProduct()}),oe()(),ie(7,"table",6)(8,"thead")(9,"tr")(10,"th"),st(11," \u0623\u0633\u0645 \u0627\u0644\u0635\u0646\u0641"),oe(),ie(12,"th"),st(13," \u0627\u0644\u0633\u0639\u0631"),oe()()(),ie(14,"tbody")(15,"tr",7)(16,"td"),Ve(17,"input",8),oe(),ie(18,"td"),Ve(19,"input",8),oe()()()()()()()),r&2&&(P(6),Ai("ngModel",i.productCode),P(11),Nu("value",i.foundProduct==null?null:i.foundProduct.name),P(2),Nu("value",i.foundProduct==null?null:i.foundProduct.price))},dependencies:[vs,ys,ea]})}}return t})();function hIe(t,n){if(t&1){let e=jt();ie(0,"tr")(1,"td"),st(2),oe(),ie(3,"td"),st(4),oe(),ie(5,"td"),st(6),oe(),ie(7,"td"),st(8),oe(),ie(9,"td"),st(10),oe(),ie(11,"td")(12,"button",7),et("click",function(){let i=Ee(e).$implicit,o=j();return De(o.viewDetails(i))}),st(13,"\u0639\u0631\u0636"),oe(),ie(14,"button",8),et("click",function(){let i=Ee(e).$implicit,o=j();return De(o.printReceipt(i))}),st(15,"\u0637\u0628\u0627\u0639\u0629"),oe()()()}if(t&2){let e=n.$implicit;P(2),ir(e.reseipte_id),P(2),ir(e.reseipte_date),P(2),ir(e.product_names),P(2),ir(e.product_parcodes),P(2),fr(" ",e.total_invoice_amount," ")}}var CU=(()=>{class t{constructor(e){this.lockerService=e,this.searchTerm="",this.historyReceipts=[]}ngOnInit(){this.getHistoryReceipts()}getHistoryReceipts(){this.lockerService.getHistoryReseipts().subscribe(e=>{this.historyReceipts=e,this.filteredReceipts()},e=>{console.error("Error loading receipts:",e)})}filteredReceipts(){this.historyReceipts=this.historyReceipts.filter(e=>e.reseipte_id.toString().includes(this.searchTerm)||e.reseipte_date.includes(this.searchTerm))}getTotal(e){return e.items.reduce((r,i)=>{let o=i.total&&!isNaN(i.total)?i.total:0;return r+o},0)}printReceipt(e){let r=window.open("","","height=600,width=800");r?(r.document.write("<html><head><title>\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629</title></head><body>"),r.document.write("<h1>\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629</h1>"),r.document.write(`<p>\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629: ${e.reseipte_id}</p>`),r.document.write(`<p>\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${e.reseipte_date}</p>`),r.document.write(`<p>\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C: ${e.product_names}</p>`),r.document.write(`<p>\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062F: ${e.product_parcodes}</p>`),r.document.write(`<p>\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A: ${e.total_invoice_amount}</p>`),r.document.write("</body></html>"),r.document.close(),r.print()):console.error("\u0641\u0634\u0644 \u0641\u062A\u062D \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629")}viewDetails(e){console.log("\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629:",e)}getItemsForReceipt(e){let r=this.historyReceipts.find(i=>i.reseipte_id===e);if(r){let i=r.product_names.split(", "),o=r.product_parcodes.split(", ");return i.map((a,s)=>({product_name:a,product_parcode:o[s]||""}))}return[]}static{this.\u0275fac=function(r){return new(r||t)(Oe(Ed))}}static{this.\u0275cmp=ct({type:t,selectors:[["app-history-receipts"]],decls:22,vars:2,consts:[[1,"container","py-4"],[1,"text-center","mb-4"],[1,"mb-4"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0628\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629 \u0623\u0648 \u0627\u0644\u062A\u0627\u0631\u064A\u062E",1,"form-control",3,"ngModelChange","ngModel"],[1,"table","table-bordered","table-striped"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"btn","btn-success","btn-sm","ml-2",3,"click"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"h2",1),st(2,"\u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631 \u0627\u0644\u0633\u0627\u0628\u0642\u0629"),oe(),ie(3,"div",2)(4,"input",3),ki("ngModelChange",function(a){return Hi(i.searchTerm,a)||(i.searchTerm=a),a}),et("ngModelChange",function(){return i.getHistoryReceipts()}),oe()(),ie(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),st(9,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),oe(),ie(10,"th"),st(11,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"),oe(),ie(12,"th"),st(13,"\u0627\u0644\u0623\u0635\u0646\u0627\u0641"),oe(),ie(14,"th"),st(15,"\u0643\u0648\u062F \u0627\u0644\u0635\u0646\u0641"),oe(),ie(16,"th"),st(17,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),oe(),ie(18,"th"),st(19,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),oe()()(),ie(20,"tbody"),ce(21,hIe,16,5,"tr",6),oe()()()),r&2&&(P(4),Ai("ngModel",i.searchTerm),P(17),O("ngForOf",i.historyReceipts))},dependencies:[ba,vs,ys,ea],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}td[_ngcontent-%COMP%]{border:1px solid #ddd;color:azure;text-align:center}th[_ngcontent-%COMP%]{border:1px solid #ddd;background-color:#f4f4f4;text-align:center}button[_ngcontent-%COMP%]{cursor:pointer}"]})}}return t})();var fIe=[{path:"login",component:Mj},{path:"cashier",component:_U,canMatch:[t1]},{path:"close",component:wU,canMatch:[t1]},{path:"inquiry",component:xU,canMatch:[t1]},{path:"historyReseipt",component:CU,canMatch:[t1]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}],IU=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t})}static{this.\u0275inj=cn({imports:[RD.forRoot(fIe),RD]})}}return t})();var SU=(()=>{class t{constructor(){this.title="PharmacyNoura"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ct({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){r&1&&Ve(0,"router-outlet")},dependencies:[SD]})}}return t})();var EU=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=dn({type:t,bootstrap:[SU]})}static{this.\u0275inj=cn({providers:[xF(),ZS(uF())],imports:[_F,IU,pp,cF,EO,Bu]})}}return t})();bF().bootstrapModule(EU).catch(t=>console.error(t));
